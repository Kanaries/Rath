{"version":3,"sources":["workers/dashboard.worker.js","workers/cluster.worker.js","workers/combineFields.worker.js","workers/fieldsSummary.worker.js","workers/groupFields.worker.js","workers/dev.worker.js","service.ts","actions.ts","locales.ts","state.tsx","utils/fileParser.ts","utils/transform.ts","utils/useComposeState.tsx","assets/rath-glasses.png","components/preference.tsx","queries/utils.ts","queries/featureVis.ts","queries/targetVis.ts","queries/baseVis.ts","queries/index.ts","visBuilder/vegaBase.tsx","plugins/visSummary/index.tsx","plugins/visSummary/description.tsx","pages/gallery/association/digDimension.tsx","pages/gallery/association/index.tsx","pages/gallery/search/index.tsx","pages/gallery/index.tsx","pages/notebook/distributionChart.tsx","pages/notebook/fieldAnalysis.tsx","pages/notebook/subspaces.tsx","pages/notebook/cluster.tsx","pages/notebook/index.tsx","pages/visualEditor/Fields/components.tsx","pages/visualEditor/components/container.tsx","pages/visualEditor/Fields/index.tsx","pages/visualEditor/Fields/utils.ts","pages/visualEditor/vis/react-vega.tsx","pages/visualEditor/config.ts","pages/visualEditor/components/liteForm.tsx","pages/visualEditor/components/clickMenu.tsx","pages/visualEditor/InsightBoard/std2vegaSpec.ts","pages/visualEditor/workers/explainer.worker.js","pages/visualEditor/services.ts","pages/visualEditor/InsightBoard/radioGroupButtons.tsx","pages/visualEditor/InsightBoard/index.tsx","pages/visualEditor/InsightBoard/utils.ts","pages/visualEditor/components/modal.tsx","pages/visualEditor/dataSource/table.tsx","pages/visualEditor/store/index.tsx","pages/visualEditor/dataSource/index.tsx","pages/visualEditor/App.tsx","pages/visualEditor/index.tsx","components/table.tsx","components/fieldConfig.tsx","pages/dataSource/clean.ts","pages/dataSource/useDataSource.tsx","utils/deepcopy.ts","pages/dataSource/utils.ts","constants.ts","utils/index.ts","pages/dataSource/index.tsx","pages/dashBoard/indicatorCard.tsx","components/react-vega.tsx","pages/dashBoard/combinedChart.tsx","pages/dashBoard/index.tsx","components/simpleTick.tsx","components/radarChart.tsx","pages/dev/index.tsx","components/userSettings.tsx","utils/useLocales.ts","App.tsx","assets/kanaries-lite.png","reportWebVitals.ts","index.tsx"],"names":["Worker_fn","worker","undefined","__webpack_public_path__","server","workerService","data","Promise","resolve","reject","postMessage","onmessage","e","onerror","success","message","error","getFieldsSummaryService","dataSource","fields","useServer","a","fieldSummaryList","fetch","method","headers","body","JSON","stringify","res","json","result","Error","console","fieldsSummaryWorker","terminate","getGroupFieldsService","ans","groupedData","newFields","groupFieldsWorker","combineFieldsService","dimensions","measures","operator","subspaceList","combineFieldsWorker","clusterMeasures","maxGroupNumber","combinedSpaces","viewSpaces","spaces","map","v","i","index","clusterWorker","generateDashBoard","subspaces","dashBoardList","dashBoardGeneratorWorker","ansSpace","InsightViewWorker","univariateSummary","select","updateState","params","state","filter","field","type","name","f","originSummary","fieldWithTypeList","includes","fieldName","groupedResult","newBIFields","groupedField","find","newDimensions","groupedSummary","draft","cookedDataSource","summary","origin","grouped","loading","concat","subspaceSearch","subspaceSearching","orderedDimensions","d","target","g","entropy","Infinity","sort","b","cookedDimensions","cookedMeasures","selectedDimensions","slice","Math","round","length","topK","dimensionSize","getViewSpaces","space","matrix","correlationMatrix","log","extractInsights","gallery","univariateResult","actions","getDashBoard","dashBoard","SUPPORT_LANG","value","setAutoFreeze","initState","lang","beCool","currentPage","rawData","subspacePercentSize","GloalStateContext","createContext","GlobalStateProvider","children","useState","setState","stateHolder","useRef","getters","dimScores","useMemo","maxEntropy","useGetters","useCallback","stateUpdater","nextState","produce","draftState","current","dispatch","actionName","Provider","useGlobalState","useContext","csvLoader","file","Papa","parse","complete","results","row","record","forEach","jsonLoader","reader","FileReader","readAsText","onload","ev","transNumber","num","isNaN","Number","useComposeState","checkboxStyles","root","marginTop","aggregationList","key","text","PreferencePanel","props","show","onUpdateConfig","onClose","config","aggregator","setAggregator","defaultAggregated","setDefaultAggregated","defaultStack","setDefaultStack","useEffect","Panel","isOpen","PanelType","smallFixedFar","onDismiss","headerText","closeButtonAriaLabel","onRenderFooterContent","PrimaryButton","onClick","Label","Stack","verticalFill","tokens","childrenGap","padding","ComboBox","selectedKey","label","allowFreeform","autoComplete","options","onChange","option","Checkbox","styles","checked","isChecked","inferFieldSemanticTypeWithDict","fieldTypeDict","semanticType","inferFieldTypeWithDict","featureVis","query","getFieldSemanticType","shouldFieldAggregate","geomType","fieldType","getFieldType","markType","geomTypeMap","xType","position","yType","colorType","color","xAgg","yAgg","adjustColorField","opacity","size","autosize","mark","selection","sl","encodings","encoding","x","bin","maxbins","aggregate","y","column","facets","shape","targetVis","repeat","highFacets","columns","spec","interval","line","point","density","BaseChart","schema","fieldFeatures","container","aggregatedMeasures","mea","op","as","table","asFields","page","adjustField","aggField","targetField","fieldMap","width","values","basicSpec","tooltip","channel","stack","transform","groupby","dim","Boolean","sliderSpec","brush","vconcat","baseVis","embed","ref","StoryTeller","spaceList","isTeachingBubbleVisible","setIsTeachingBubbleVisible","sortedFieldsScores","mostInfluencedDimension","sp","some","bestMeasure","measuresInView","min","minPos","countDiffField","join","DefaultButton","id","TeachingBubble","calloutProps","directionalHint","DirectionalHint","bottomCenter","isWide","hasCloseIcon","headline","source","VisDescription","measuresRelatedScore","measures1","measures2","meaSet","Set","meaSet1","meaSet2","meaVec1","meaVec2","push","has","score","sqrt","useDigDimension","interestedViewSpace","fieldScores","relatedSpaces","every","subDim","rankedRelatedSpaces","measureSimilarity","relatedScore","spaceFieldScores","specification","Association","digDimensionProps","onSelectView","visualConfig","relatedCharts","className","view","currentSpace","dimensions1","dimensions2","dim1","style","border","margin","overflow","fontSize","horizontal","IconButton","iconProps","iconName","title","VisCard","styled","div","PageLinkButton","SearchPage","targetViewSpaces","setTargetViewSpaces","fuse","Fuse","keys","setCurrentPage","maxPageNumber","ceil","minVisPage","max","maxVisPage","itemRange","visPageRange","Array","n","gotoPage","lastPage","p","nextPage","usePageController","specList","aggData","SearchBox","placeholder","onSearch","newValue","search","underlined","pivotKeyList","Gallery","pivotList","intl","get","itemKey","pivotIndex","setPivotIndex","insightBoard","fieldConfig","configPanel","dataConfig","pageStatus","setPageStatus","showAssociation","setShowAssociation","setVisualConfig","setViewSpaces","dataView","setDataView","pageNo","then","viewState","subspace","paddingTop","Pivot","onLinkClick","item","pivot","PivotItem","ProgressIndicator","description","marginBottom","ariaLabel","dir","SpinButton","toString","step","labelPosition","Position","end","onValidate","onIncrement","onDecrement","incrementButtonAriaLabel","decrementButtonAriaLabel","allowDisabledFocus","pos","findIndex","DistributionChart","chart","hasIndex","member","test","memberName","exec","groups","left","sortBy","background","height","axis","baseColumns","minWidth","maxWidth","getIconNameByFieldType","FieldAnalsis","col","entropyRange","originEntropy","s","onRenderCompactCard","toFixed","distribution","onRenderExpandedCard","DetailsList","compact","items","selectionMode","SelectionMode","none","onRenderItemColumn","expandingCardProps","renderData","compactCardHeight","expandedCardHeight","fieldContent","bgColor","Icon","range","chroma","scale","domain","rgb","bgColorStr","fontColorStr","HoverCard","expandedCardOpenDelay","instantOpenOnClick","boxShadow","backgroundColor","encodeArr","arr","Subspaces","onSpaceChange","curIndex","setCurIndex","spaceChart","relationChart","targetSpace","m","measureName","measureValue","on","reverse","condition","addEventListener","datum","j","correlation","scheme","ClusterBoard","adjMatrix","onFocusGroup","clusterResult","Cluster","kruskalWithFullMST","edgesInMST","treeData","edges","edge","inCutEdge","nodes","group","NoteBook","isAggregated","setIsAggregated","clusterState","setClusterState","setMeasuresInView","usedSubspaceList","measInView","Slider","disabled","valueFormat","showValue","Toggle","defaultChecked","onText","offText","FieldListContainer","FieldListSegment","FieldsContainer","highlight","Container","RootContainer","aggregatorList","draggableStateKeys","mode","DraggableFields","onStateChange","rows","onDragEnd","provided","destination","droppableId","listKey","newList","list","originalIndex","targetIndex","nextList","splice","reorder","sourceKey","targetKey","originalList","originIndex","targetList","newOriginalList","removed","newTargetList","originList","move","dkey","direction","snapshot","droppableProps","innerRef","draggableId","kind","draggableProps","dragHandleProps","float","aggName","right","top","SELECTION_NAME","NULL_FIELD","click$","Subject","selection$","geomClick$","pipe","Object","ReactVega","defaultAggregate","onGeomClick","clickSub","subscribe","unsubscribe","yField","xField","rowField","columnField","next","addSignalListener","GEMO_TYPES","LiteForm","MenuContainer","ClickMenu","predicates","dimInView","aggMap","Map","set","adjField","basicSpecFilter","deepcopy","pre","oneOf","layer","workerState","explainations","valueExp","visSpaces","fieldsWithSemanticType","ExplainerWorker","RGBContainer","RadioGroupButtons","choosenIndex","collection","Insight","IntentionWorkerCollection","init","ReasonTypeNames","enable","DefaultIWorker","cluster","InsightBoard","viewDs","viewMs","filters","recSpaces","setRecSpaces","setVisSpaces","visIndex","setVisIndex","setLoading","setValueExp","dimsWithTypes","Utils","isFieldUnique","UnivariateSummary","getAllFieldTypes","measWithTypes","getExplaination","fieldsWithType","RecSpace","visSpec","usePredicates","mergedMeasures","measureKeys","merged","add","mergeMeasures","extendMs","_vegaSpec","extendDs","FilterDesc","dimValues","k","valueDesc","maxHeight","minHeight","overflowY","aria-busy","display","flexBasis","flexShrink","intMeasures","src","Modal","TYPE_LIST","getCellType","getHeaderType","analyticType","Table","onFieldsUpdate","fIndex","nextFields","dataBase","currentDBIndex","GlobalContext","React","useLocalState","GlobalContextWrapper","gs","setGS","updateGlobalState","updater","DataSourcePanel","dbIndex","onSubmit","fileRef","setDataSource","setFields","updateGS","dsName","setDSName","onFieldsChange","onSubmitData","files","csvReader","onLoading","vie","VIEngine","setFieldKeys","buildfieldsSummary","newRecord","dataType","transData","marginRight","click","INIT_DF_STATE","App","GS","fstate","setFstate","setGeomType","aggregated","setAggregated","setPosition","showMenu","setShowMenu","showInsight","setShowInsight","setFilters","showDSPanel","setShowDSPanel","insightReady","setInsightReady","newDBIndex","setNewDBIndex","fs","ds","viewDimensions","viewMeasures","preAnalysis","createDB","newLastIndex","marginLeft","flexWrap","alignItems","pageX","pageY","Editor","DataTable","FieldPanel","updateFieldType","dropNull","Cleaner","simpleClean","useMode","cleanMethodList","useDataSource","cleanMethod","Transform","preparedData","cleanData","SampleKey","RATH_INDEX_COLUMN_KEY","SampleOptions","reservoir","setIndexKey","fixUnicodeFields","str","nF","newDataSource","newRow","onDataLoading","loadDataFile","sampleMethod","sampleSize","tmpFields","FileLoader","Sampling","reservoirSampling","dropNullColumn","fixedDataSet","DataSourceLoggerURL","DataSourceBoard","setCleanMethod","setSampleMethod","setSampleSize","dataSetting","fileEle","labelId","useId","commandBarList","cleanMethodListLang","onExtractInsights","Callout","role","gapSpace","setInitialFocus","hidden","required","ChoiceGroup","defaultSelectedKey","ariaLabelledBy","multiple","accept","CommandBar","overflowButtonProps","fontWeight","count","Card","IndicatorCard","datalib","abs","parts","split","replace","numberWithCommas","signalHandler","setView","removeSignalListener","change","vega","changeset","remove","insert","resize","runAsync","IndicatorCardType","CombinedChart","globalFilters","setGlobalFilters","chartStateList","setChartStateList","chartSpecList","board","dataFields","specIndex","vegaSpec","vsourceList","isRange","DashBoardPage","dashBoardIndex","setDashBoardIndex","Separator","total","overflowX","SimpleTick","threshold","calculate","RadarChart","keyField","valueField","viewData","category","ruleData","contains","signals","update","scales","signal","zero","nice","domainMin","encode","enter","marks","zindex","from","facet","interpolate","stroke","strokeWidth","fill","fillOpacity","align","baseline","x2","y2","Tag","DashBoard","ColorMap","outlier","trend","arrEqual","arr1","arr2","DevPage","insightViewSpace","setInsightViewSpace","sigThreshold","setSigThreshold","chartIndex","setChartIndex","viewSpaceList","significance","relatedViews","getInsightViewSpace","start","sig","itype","langOptions","UserSettings","callback","setShow","loadLocales","currentLocale","locales","determineLocale","urlLocaleKey","cookieLocaleKey","ActionButton","bottomLeftEdge","require","withGlasses","pivotKey","href","RathCoolLogo","alt","headersOnly","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","initializeIcons","ReactDOM","render","document","getElementById","write","unescape"],"mappings":"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","file":"static/js/main.ee4ea441.chunk.js","sourcesContent":["\nimport worker from \"!!../../../../node_modules/worker-loader/dist/runtime/inline.js\";\n\nexport default function Worker_fn() {\n  return worker(\"!function(t){var r={};function e(n){if(r[n])return r[n].exports;var a=r[n]={i:n,l:!1,exports:{}};return t[n].call(a.exports,a,a.exports,e),a.l=!0,a.exports}e.m=t,e.c=r,e.d=function(t,r,n){e.o(t,r)||Object.defineProperty(t,r,{enumerable:!0,get:n})},e.r=function(t){\\\"undefined\\\"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:\\\"Module\\\"}),Object.defineProperty(t,\\\"__esModule\\\",{value:!0})},e.t=function(t,r){if(1&r&&(t=e(t)),8&r)return t;if(4&r&&\\\"object\\\"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(e.r(n),Object.defineProperty(n,\\\"default\\\",{enumerable:!0,value:t}),2&r&&\\\"string\\\"!=typeof t)for(var a in t)e.d(n,a,function(r){return t[r]}.bind(null,a));return n},e.n=function(t){var r=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(r,\\\"a\\\",r),r},e.o=function(t,r){return Object.prototype.hasOwnProperty.call(t,r)},e.p=\\\"./\\\",e(e.s=9)}([function(t,r,e){t.exports=e(8)},function(t,r,e){\\\"use strict\\\";this&&this.__assign;Object.defineProperty(r,\\\"__esModule\\\",{value:!0});var n=e(4),a=e(7),o=e(3),i={sum:o.sum_unsafe,mean:o.mean,count:o.count};function u(t){var r=t.type,e=t.aggFunc,a=void 0===e?o.count:e,i=t.factTable,u=void 0===i?[]:i,f=t.dimensions,s=void 0===f?[]:f,l=t.measures,h=void 0===l?[]:l;switch(r){case\\\"period\\\":return new n.periodCube({aggFunc:a,factTable:u,dimensions:s,measures:h});case\\\"moment\\\":default:return new n.momentCube({aggFunc:a,factTable:u,dimensions:s,measures:h})}}r.createCube=u,r.default=function(t){var r=t.dimensions,e=t.measures,n=t.asFields,f=t.operator,s=t.dataSource,l=u({type:\\\"moment\\\",aggFunc:i[f]||o.count,dimensions:r,measures:e,factTable:s}),h=a.tree2Table({dimensions:r,measures:e,cube:l});return h.forEach((function(t){n.forEach((function(r,n){t[r]=t[e[n]]}))})),h},function(t){for(var e in t)r.hasOwnProperty(e)||(r[e]=t[e])}(e(3))},function(t,r,e){!function(t){\\\"use strict\\\";function r(t){if(0===t.length)return 0;for(var r,e=t[0],n=0,a=1;a<t.length;a++)r=e+t[a],Math.abs(e)>=Math.abs(t[a])?n+=e-r+t[a]:n+=t[a]-r+e,e=r;return e+n}function e(t){if(0===t.length)throw new Error(\\\"mean requires at least one data point\\\");return r(t)/t.length}function n(t,r){var n,a,o=e(t),i=0;if(2===r)for(a=0;a<t.length;a++)i+=(n=t[a]-o)*n;else for(a=0;a<t.length;a++)i+=Math.pow(t[a]-o,r);return i}function a(t){if(0===t.length)throw new Error(\\\"variance requires at least one data point\\\");return n(t,2)/t.length}function o(t){if(1===t.length)return 0;var r=a(t);return Math.sqrt(r)}function i(t){if(0===t.length)throw new Error(\\\"mode requires at least one data point\\\");if(1===t.length)return t[0];for(var r=t[0],e=NaN,n=0,a=1,o=1;o<t.length+1;o++)t[o]!==r?(a>n&&(n=a,e=r),a=1,r=t[o]):a++;return e}function u(t){return t.slice().sort((function(t,r){return t-r}))}function f(t){if(0===t.length)throw new Error(\\\"min requires at least one data point\\\");for(var r=t[0],e=1;e<t.length;e++)t[e]<r&&(r=t[e]);return r}function s(t){if(0===t.length)throw new Error(\\\"max requires at least one data point\\\");for(var r=t[0],e=1;e<t.length;e++)t[e]>r&&(r=t[e]);return r}function l(t){for(var r=0,e=0;e<t.length;e++)r+=t[e];return r}function h(t,r){var e=t.length*r;if(0===t.length)throw new Error(\\\"quantile requires at least one data point.\\\");if(r<0||r>1)throw new Error(\\\"quantiles must be between 0 and 1\\\");return 1===r?t[t.length-1]:0===r?t[0]:e%1!=0?t[Math.ceil(e)-1]:t.length%2==0?(t[e-1]+t[e])/2:t[e]}function c(t,r,e,n){for(e=e||0,n=n||t.length-1;n>e;){if(n-e>600){var a=n-e+1,o=r-e+1,i=Math.log(a),u=.5*Math.exp(2*i/3),f=.5*Math.sqrt(i*u*(a-u)/a);o-a/2<0&&(f*=-1),c(t,r,Math.max(e,Math.floor(r-o*u/a+f)),Math.min(n,Math.floor(r+(a-o)*u/a+f)))}var s=t[r],l=e,h=n;for(v(t,e,r),t[n]>s&&v(t,e,n);l<h;){for(v(t,l,h),l++,h--;t[l]<s;)l++;for(;t[h]>s;)h--}t[e]===s?v(t,e,h):v(t,++h,n),h<=r&&(e=h+1),r<=h&&(n=h-1)}}function v(t,r,e){var n=t[r];t[r]=t[e],t[e]=n}function g(t,r){var e=t.slice();if(Array.isArray(r)){!function(t,r){for(var e=[0],n=0;n<r.length;n++)e.push(m(t.length,r[n]));e.push(t.length-1),e.sort(p);for(var a=[0,e.length-1];a.length;){var o=Math.ceil(a.pop()),i=Math.floor(a.pop());if(!(o-i<=1)){var u=Math.floor((i+o)/2);d(t,e[u],Math.floor(e[i]),Math.ceil(e[o])),a.push(i,u,u,o)}}}(e,r);for(var n=[],a=0;a<r.length;a++)n[a]=h(e,r[a]);return n}return d(e,m(e.length,r),0,e.length-1),h(e,r)}function d(t,r,e,n){r%1==0?c(t,r,e,n):(c(t,r=Math.floor(r),e,n),c(t,r+1,r+1,n))}function p(t,r){return t-r}function m(t,r){var e=t*r;return 1===r?t-1:0===r?0:e%1!=0?Math.ceil(e)-1:t%2==0?e-.5:e}function y(t,r){if(r<t[0])return 0;if(r>t[t.length-1])return 1;var e=function(t,r){for(var e=0,n=0,a=t.length;n<a;)r<=t[e=n+a>>>1]?a=e:n=-~e;return n}(t,r);if(t[e]!==r)return e/t.length;e++;var n=function(t,r){for(var e=0,n=0,a=t.length;n<a;)r>=t[e=n+a>>>1]?n=-~e:a=e;return n}(t,r);if(n===e)return e/t.length;var a=n-e+1;return a*(n+e)/2/a/t.length}function w(t){var r=g(t,.75),e=g(t,.25);if(\\\"number\\\"==typeof r&&\\\"number\\\"==typeof e)return r-e}function b(t){return+g(t,.5)}function M(t){for(var r=b(t),e=[],n=0;n<t.length;n++)e.push(Math.abs(t[n]-r));return b(e)}function x(t,r){r=r||Math.random;for(var e,n,a=t.length;a>0;)n=Math.floor(r()*a--),e=t[a],t[a]=t[n],t[n]=e;return t}function E(t,r){return x(t.slice(),r)}function S(t,r,e){return E(t,e).slice(0,r)}function _(t,r){for(var e=[],n=0;n<t;n++){for(var a=[],o=0;o<r;o++)a.push(0);e.push(a)}return e}function q(t){for(var r,e=0,n=0;n<t.length;n++)0!==n&&t[n]===r||(r=t[n],e++);return e}function T(t,r,e,n){var a;if(t>0){var o=(e[r]-e[t-1])/(r-t+1);a=n[r]-n[t-1]-(r-t+1)*o*o}else a=n[r]-e[r]*e[r]/(r+1);return a<0?0:a}function O(t,r,e,n,a,o,i){if(!(t>r)){var u=Math.floor((t+r)/2);n[e][u]=n[e-1][u-1],a[e][u]=u;var f=e;t>e&&(f=Math.max(f,a[e][t-1]||0)),f=Math.max(f,a[e-1][u]||0);var s,l,h,c=u-1;r<n[0].length-1&&(c=Math.min(c,a[e][r+1]||0));for(var v=c;v>=f&&!((s=T(v,u,o,i))+n[e-1][f-1]>=n[e][u]);--v)(l=T(f,u,o,i)+n[e-1][f-1])<n[e][u]&&(n[e][u]=l,a[e][u]=f),f++,(h=s+n[e-1][v-1])<n[e][u]&&(n[e][u]=h,a[e][u]=v);O(t,u-1,e,n,a,o,i),O(u+1,r,e,n,a,o,i)}}function D(t,r){if(t.length!==r.length)throw new Error(\\\"sampleCovariance requires samples with equal lengths\\\");if(t.length<2)throw new Error(\\\"sampleCovariance requires at least two data points in each sample\\\");for(var n=e(t),a=e(r),o=0,i=0;i<t.length;i++)o+=(t[i]-n)*(r[i]-a);return o/(t.length-1)}function j(t){if(t.length<2)throw new Error(\\\"sampleVariance requires at least two data points\\\");return n(t,2)/(t.length-1)}function k(t){var r=j(t);return Math.sqrt(r)}function F(t,r,e,n){return(t*r+e*n)/(r+n)}function P(t){if(0===t.length)throw new Error(\\\"meanSimple requires at least one data point\\\");return l(t)/t.length}function N(t){if(0===t.length)throw new Error(\\\"rootMeanSquare requires at least one data point\\\");for(var r=0,e=0;e<t.length;e++)r+=Math.pow(t[e],2);return Math.sqrt(r/t.length)}var L=function(){this.totalCount=0,this.data={}};L.prototype.train=function(t,r){for(var e in this.data[r]||(this.data[r]={}),t){var n=t[e];void 0===this.data[r][e]&&(this.data[r][e]={}),void 0===this.data[r][e][n]&&(this.data[r][e][n]=0),this.data[r][e][n]++}this.totalCount++},L.prototype.score=function(t){var r,e={};for(var n in t){var a=t[n];for(r in this.data)e[r]={},this.data[r][n]?e[r][n+\\\"_\\\"+a]=(this.data[r][n][a]||0)/this.totalCount:e[r][n+\\\"_\\\"+a]=0}var o={};for(r in e)for(var i in o[r]=0,e[r])o[r]+=e[r][i];return o};var A=function(){this.weights=[],this.bias=0};A.prototype.predict=function(t){if(t.length!==this.weights.length)return null;for(var r=0,e=0;e<this.weights.length;e++)r+=this.weights[e]*t[e];return(r+=this.bias)>0?1:0},A.prototype.train=function(t,r){if(0!==r&&1!==r)return null;t.length!==this.weights.length&&(this.weights=t,this.bias=1);var e=this.predict(t);if(\\\"number\\\"==typeof e&&e!==r){for(var n=r-e,a=0;a<this.weights.length;a++)this.weights[a]+=n*t[a];this.bias+=n}return this};var I=1e-4;function C(t){if(t<0)throw new Error(\\\"factorial requires a non-negative value\\\");if(Math.floor(t)!==t)throw new Error(\\\"factorial requires an integer input\\\");for(var r=1,e=2;e<=t;e++)r*=e;return r}var z=[.9999999999999971,57.15623566586292,-59.59796035547549,14.136097974741746,-.4919138160976202,3399464998481189e-20,4652362892704858e-20,-9837447530487956e-20,.0001580887032249125,-.00021026444172410488,.00021743961811521265,-.0001643181065367639,8441822398385275e-20,-26190838401581408e-21,36899182659531625e-22],G=Math.log(Math.sqrt(2*Math.PI)),R={1:{.995:0,.99:0,.975:0,.95:0,.9:.02,.5:.45,.1:2.71,.05:3.84,.025:5.02,.01:6.63,.005:7.88},2:{.995:.01,.99:.02,.975:.05,.95:.1,.9:.21,.5:1.39,.1:4.61,.05:5.99,.025:7.38,.01:9.21,.005:10.6},3:{.995:.07,.99:.11,.975:.22,.95:.35,.9:.58,.5:2.37,.1:6.25,.05:7.81,.025:9.35,.01:11.34,.005:12.84},4:{.995:.21,.99:.3,.975:.48,.95:.71,.9:1.06,.5:3.36,.1:7.78,.05:9.49,.025:11.14,.01:13.28,.005:14.86},5:{.995:.41,.99:.55,.975:.83,.95:1.15,.9:1.61,.5:4.35,.1:9.24,.05:11.07,.025:12.83,.01:15.09,.005:16.75},6:{.995:.68,.99:.87,.975:1.24,.95:1.64,.9:2.2,.5:5.35,.1:10.65,.05:12.59,.025:14.45,.01:16.81,.005:18.55},7:{.995:.99,.99:1.25,.975:1.69,.95:2.17,.9:2.83,.5:6.35,.1:12.02,.05:14.07,.025:16.01,.01:18.48,.005:20.28},8:{.995:1.34,.99:1.65,.975:2.18,.95:2.73,.9:3.49,.5:7.34,.1:13.36,.05:15.51,.025:17.53,.01:20.09,.005:21.96},9:{.995:1.73,.99:2.09,.975:2.7,.95:3.33,.9:4.17,.5:8.34,.1:14.68,.05:16.92,.025:19.02,.01:21.67,.005:23.59},10:{.995:2.16,.99:2.56,.975:3.25,.95:3.94,.9:4.87,.5:9.34,.1:15.99,.05:18.31,.025:20.48,.01:23.21,.005:25.19},11:{.995:2.6,.99:3.05,.975:3.82,.95:4.57,.9:5.58,.5:10.34,.1:17.28,.05:19.68,.025:21.92,.01:24.72,.005:26.76},12:{.995:3.07,.99:3.57,.975:4.4,.95:5.23,.9:6.3,.5:11.34,.1:18.55,.05:21.03,.025:23.34,.01:26.22,.005:28.3},13:{.995:3.57,.99:4.11,.975:5.01,.95:5.89,.9:7.04,.5:12.34,.1:19.81,.05:22.36,.025:24.74,.01:27.69,.005:29.82},14:{.995:4.07,.99:4.66,.975:5.63,.95:6.57,.9:7.79,.5:13.34,.1:21.06,.05:23.68,.025:26.12,.01:29.14,.005:31.32},15:{.995:4.6,.99:5.23,.975:6.27,.95:7.26,.9:8.55,.5:14.34,.1:22.31,.05:25,.025:27.49,.01:30.58,.005:32.8},16:{.995:5.14,.99:5.81,.975:6.91,.95:7.96,.9:9.31,.5:15.34,.1:23.54,.05:26.3,.025:28.85,.01:32,.005:34.27},17:{.995:5.7,.99:6.41,.975:7.56,.95:8.67,.9:10.09,.5:16.34,.1:24.77,.05:27.59,.025:30.19,.01:33.41,.005:35.72},18:{.995:6.26,.99:7.01,.975:8.23,.95:9.39,.9:10.87,.5:17.34,.1:25.99,.05:28.87,.025:31.53,.01:34.81,.005:37.16},19:{.995:6.84,.99:7.63,.975:8.91,.95:10.12,.9:11.65,.5:18.34,.1:27.2,.05:30.14,.025:32.85,.01:36.19,.005:38.58},20:{.995:7.43,.99:8.26,.975:9.59,.95:10.85,.9:12.44,.5:19.34,.1:28.41,.05:31.41,.025:34.17,.01:37.57,.005:40},21:{.995:8.03,.99:8.9,.975:10.28,.95:11.59,.9:13.24,.5:20.34,.1:29.62,.05:32.67,.025:35.48,.01:38.93,.005:41.4},22:{.995:8.64,.99:9.54,.975:10.98,.95:12.34,.9:14.04,.5:21.34,.1:30.81,.05:33.92,.025:36.78,.01:40.29,.005:42.8},23:{.995:9.26,.99:10.2,.975:11.69,.95:13.09,.9:14.85,.5:22.34,.1:32.01,.05:35.17,.025:38.08,.01:41.64,.005:44.18},24:{.995:9.89,.99:10.86,.975:12.4,.95:13.85,.9:15.66,.5:23.34,.1:33.2,.05:36.42,.025:39.36,.01:42.98,.005:45.56},25:{.995:10.52,.99:11.52,.975:13.12,.95:14.61,.9:16.47,.5:24.34,.1:34.28,.05:37.65,.025:40.65,.01:44.31,.005:46.93},26:{.995:11.16,.99:12.2,.975:13.84,.95:15.38,.9:17.29,.5:25.34,.1:35.56,.05:38.89,.025:41.92,.01:45.64,.005:48.29},27:{.995:11.81,.99:12.88,.975:14.57,.95:16.15,.9:18.11,.5:26.34,.1:36.74,.05:40.11,.025:43.19,.01:46.96,.005:49.65},28:{.995:12.46,.99:13.57,.975:15.31,.95:16.93,.9:18.94,.5:27.34,.1:37.92,.05:41.34,.025:44.46,.01:48.28,.005:50.99},29:{.995:13.12,.99:14.26,.975:16.05,.95:17.71,.9:19.77,.5:28.34,.1:39.09,.05:42.56,.025:45.72,.01:49.59,.005:52.34},30:{.995:13.79,.99:14.95,.975:16.79,.95:18.49,.9:20.6,.5:29.34,.1:40.26,.05:43.77,.025:46.98,.01:50.89,.005:53.67},40:{.995:20.71,.99:22.16,.975:24.43,.95:26.51,.9:29.05,.5:39.34,.1:51.81,.05:55.76,.025:59.34,.01:63.69,.005:66.77},50:{.995:27.99,.99:29.71,.975:32.36,.95:34.76,.9:37.69,.5:49.33,.1:63.17,.05:67.5,.025:71.42,.01:76.15,.005:79.49},60:{.995:35.53,.99:37.48,.975:40.48,.95:43.19,.9:46.46,.5:59.33,.1:74.4,.05:79.08,.025:83.3,.01:88.38,.005:91.95},70:{.995:43.28,.99:45.44,.975:48.76,.95:51.74,.9:55.33,.5:69.33,.1:85.53,.05:90.53,.025:95.02,.01:100.42,.005:104.22},80:{.995:51.17,.99:53.54,.975:57.15,.95:60.39,.9:64.28,.5:79.33,.1:96.58,.05:101.88,.025:106.63,.01:112.33,.005:116.32},90:{.995:59.2,.99:61.75,.975:65.65,.95:69.13,.9:73.29,.5:89.33,.1:107.57,.05:113.14,.025:118.14,.01:124.12,.005:128.3},100:{.995:67.33,.99:70.06,.975:74.22,.95:77.93,.9:82.36,.5:99.33,.1:118.5,.05:124.34,.025:129.56,.01:135.81,.005:140.17}},V=Math.sqrt(2*Math.PI),B={gaussian:function(t){return Math.exp(-.5*t*t)/V}},U={nrd:function(t){var r=k(t),e=w(t);return\\\"number\\\"==typeof e&&(r=Math.min(r,e/1.34)),1.06*r*Math.pow(t.length,-.2)}};function X(t,r,e){var n,a;if(void 0===r)n=B.gaussian;else if(\\\"string\\\"==typeof r){if(!B[r])throw new Error('Unknown kernel \\\"'+r+'\\\"');n=B[r]}else n=r;if(void 0===e)a=U.nrd(t);else if(\\\"string\\\"==typeof e){if(!U[e])throw new Error('Unknown bandwidth method \\\"'+e+'\\\"');a=U[e](t)}else a=e;return function(r){var e=0,o=0;for(e=0;e<t.length;e++)o+=n((r-t[e])/a);return o/a/t.length}}var K=Math.sqrt(2*Math.PI);function W(t){for(var r=t,e=t,n=1;n<15;n++)r+=e*=t*t/(2*n+1);return Math.round(1e4*(.5+r/K*Math.exp(-t*t/2)))/1e4}for(var Y=[],H=0;H<=3.09;H+=.01)Y.push(W(H));function $(t){var r=1/(1+.5*Math.abs(t)),e=r*Math.exp(-t*t+((((((((.17087277*r-.82215223)*r+1.48851587)*r-1.13520398)*r+.27886807)*r-.18628806)*r+.09678418)*r+.37409196)*r+1.00002368)*r-1.26551223);return t>=0?1-e:e-1}function J(t){var r=8*(Math.PI-3)/(3*Math.PI*(4-Math.PI)),e=Math.sqrt(Math.sqrt(Math.pow(2/(Math.PI*r)+Math.log(1-t*t)/2,2)-Math.log(1-t*t)/r)-(2/(Math.PI*r)+Math.log(1-t*t)/2));return t>=0?e:-e}function Q(t){if(\\\"number\\\"==typeof t)return t<0?-1:0===t?0:1;throw new TypeError(\\\"not a number\\\")}function Z(t,r){for(var e=0,n=0;n<t.length;n++){var a=t[n]-r[n];e+=a*a}return Math.sqrt(e)}function tt(t,r){return t.map((function(t){for(var e=Number.MAX_VALUE,n=-1,a=0;a<r.length;a++){var o=Z(t,r[a]);o<e&&(e=o,n=a)}return n}))}function rt(t,r,e){for(var n=t[0].length,a=_(e,n),o=Array(e).fill(0),i=t.length,u=0;u<i;u++){for(var f=t[u],s=r[u],l=a[s],h=0;h<n;h++)l[h]+=f[h];o[s]+=1}for(var c=0;c<e;c++){if(0===o[c])throw new Error(\\\"Centroid \\\"+c+\\\" has no friends\\\");for(var v=a[c],g=0;g<n;g++)v[g]/=o[c]}return a}function et(t,r){for(var e=0,n=0;n<t.length;n++)e+=Z(t[n],r[n]);return e}function nt(t,r){if(t.length!==r.length)throw new Error(\\\"must have exactly as many labels as points\\\");for(var e=function(t){for(var r=1+s(t),e=Array(r),n=0;n<t.length;n++){var a=t[n];void 0===e[a]&&(e[a]=[]),e[a].push(n)}return e}(r),n=function(t){for(var r=t.length,e=_(r,r),n=0;n<r;n++)for(var a=0;a<n;a++)e[n][a]=Z(t[n],t[a]),e[a][n]=e[n][a];return e}(t),a=[],o=0;o<t.length;o++){var i=0;if(e[r[o]].length>1){var u=ot(o,e[r[o]],n),f=at(o,r,e,n);i=(f-u)/Math.max(u,f)}a.push(i)}return a}function at(t,r,e,n){for(var a=r[t],o=Number.MAX_VALUE,i=0;i<e.length;i++)if(i!==a){var u=ot(t,e[i],n);u<o&&(o=u)}return o}function ot(t,r,e){for(var n=0,a=0;a<r.length;a++)n+=e[t][r[a]];return n/r.length}function it(t,r){return 0===t&&0===r?0:Math.abs((t-r)/r)}t.BayesianClassifier=L,t.PerceptronModel=A,t.addToMean=function(t,r,e){return t+(e-t)/(r+1)},t.approxEqual=function(t,r,e){return void 0===e&&(e=I),it(t,r)<=e},t.average=e,t.averageSimple=P,t.bayesian=L,t.bernoulliDistribution=function(t){if(t<0||t>1)throw new Error(\\\"bernoulliDistribution requires probability to be between 0 and 1 inclusive\\\");return[1-t,t]},t.binomialDistribution=function(t,r){if(!(r<0||r>1||t<=0||t%1!=0)){var e=0,n=0,a=[],o=1;do{a[e]=o*Math.pow(r,e)*Math.pow(1-r,t-e),n+=a[e],o=o*(t-++e+1)/e}while(n<.9999);return a}},t.bisect=function(t,r,e,n,a){if(\\\"function\\\"!=typeof t)throw new TypeError(\\\"func must be a function\\\");for(var o=0;o<n;o++){var i=(r+e)/2;if(0===t(i)||Math.abs((e-r)/2)<a)return i;Q(t(i))===Q(t(r))?r=i:e=i}throw new Error(\\\"maximum number of iterations exceeded\\\")},t.chiSquaredDistributionTable=R,t.chiSquaredGoodnessOfFit=function(t,r,n){for(var a=0,o=r(e(t)),i=[],u=[],f=0;f<t.length;f++)void 0===i[t[f]]&&(i[t[f]]=0),i[t[f]]++;for(var s=0;s<i.length;s++)void 0===i[s]&&(i[s]=0);for(var l in o)l in i&&(u[+l]=o[l]*t.length);for(var h=u.length-1;h>=0;h--)u[h]<3&&(u[h-1]+=u[h],u.pop(),i[h-1]+=i[h],i.pop());for(var c=0;c<i.length;c++)a+=Math.pow(i[c]-u[c],2)/u[c];var v=i.length-1-1;return R[v][n]<a},t.chunk=function(t,r){var e=[];if(r<1)throw new Error(\\\"chunk size must be a positive number\\\");if(Math.floor(r)!==r)throw new Error(\\\"chunk size must be an integer\\\");for(var n=0;n<t.length;n+=r)e.push(t.slice(n,n+r));return e},t.ckmeans=function(t,r){if(r>t.length)throw new Error(\\\"cannot generate more classes than there are data values\\\");var e=u(t);if(1===q(e))return[e];var n=_(r,e.length),a=_(r,e.length);!function(t,r,e){for(var n=r[0].length,a=t[Math.floor(n/2)],o=[],i=[],u=0,f=void 0;u<n;++u)f=t[u]-a,0===u?(o.push(f),i.push(f*f)):(o.push(o[u-1]+f),i.push(i[u-1]+f*f)),r[0][u]=T(0,u,o,i),e[0][u]=0;for(var s=1;s<r.length;++s)O(s<r.length-1?s:n-1,n-1,s,r,e,o,i)}(e,n,a);for(var o=[],i=a[0].length-1,f=a.length-1;f>=0;f--){var s=a[f][i];o[f]=e.slice(s,i+1),f>0&&(i=s-1)}return o},t.combinations=function t(r,e){var n,a,o,i,u=[];for(n=0;n<r.length;n++)if(1===e)u.push([r[n]]);else for(o=t(r.slice(n+1,r.length),e-1),a=0;a<o.length;a++)(i=o[a]).unshift(r[n]),u.push(i);return u},t.combinationsReplacement=function t(r,e){for(var n=[],a=0;a<r.length;a++)if(1===e)n.push([r[a]]);else for(var o=t(r.slice(a,r.length),e-1),i=0;i<o.length;i++)n.push([r[a]].concat(o[i]));return n},t.combineMeans=F,t.combineVariances=function(t,r,e,n,a,o){var i=F(r,e,a,o);return(e*(t+Math.pow(r-i,2))+o*(n+Math.pow(a-i,2)))/(e+o)},t.cumulativeStdNormalProbability=function(t){var r=Math.abs(t),e=Math.min(Math.round(100*r),Y.length-1);return t>=0?Y[e]:+(1-Y[e]).toFixed(4)},t.epsilon=I,t.equalIntervalBreaks=function(t,r){if(t.length<2)return t;for(var e=f(t),n=s(t),a=[e],o=(n-e)/r,i=1;i<r;i++)a.push(a[0]+o*i);return a.push(n),a},t.erf=$,t.errorFunction=$,t.extent=function(t){if(0===t.length)throw new Error(\\\"extent requires at least one data point\\\");for(var r=t[0],e=t[0],n=1;n<t.length;n++)t[n]>e&&(e=t[n]),t[n]<r&&(r=t[n]);return[r,e]},t.extentSorted=function(t){return[t[0],t[t.length-1]]},t.factorial=C,t.gamma=function t(r){if(Number.isInteger(r))return r<=0?NaN:C(r-1);if(--r<0)return Math.PI/(Math.sin(Math.PI*-r)*t(-r));var e=r+1/4;return Math.pow(r/Math.E,r)*Math.sqrt(2*Math.PI*(r+1/6))*(1+1/144/Math.pow(e,2)-1/12960/Math.pow(e,3)-257/207360/Math.pow(e,4)-52/2612736/Math.pow(e,5)+5741173/9405849600/Math.pow(e,6)+37529/18811699200/Math.pow(e,7))},t.gammaln=function(t){if(t<=0)return 1/0;t--;for(var r=z[0],e=1;e<15;e++)r+=z[e]/(t+e);var n=5.2421875+t;return G+Math.log(r)-n+(t+.5)*Math.log(n)},t.geometricMean=function(t){if(0===t.length)throw new Error(\\\"geometricMean requires at least one data point\\\");for(var r=1,e=0;e<t.length;e++){if(t[e]<=0)throw new Error(\\\"geometricMean requires only positive numbers as input\\\");r*=t[e]}return Math.pow(r,1/t.length)},t.harmonicMean=function(t){if(0===t.length)throw new Error(\\\"harmonicMean requires at least one data point\\\");for(var r=0,e=0;e<t.length;e++){if(t[e]<=0)throw new Error(\\\"harmonicMean requires only positive numbers as input\\\");r+=1/t[e]}return t.length/r},t.interquartileRange=w,t.inverseErrorFunction=J,t.iqr=w,t.kMeansCluster=function(t,r,e){void 0===e&&(e=Math.random);for(var n=null,a=S(t,r,e),o=null,i=Number.MAX_VALUE;0!==i;)n=a,i=et(a=rt(t,o=tt(t,a),r),n);return{labels:o,centroids:a}},t.kde=X,t.kernelDensityEstimation=X,t.linearRegression=function(t){var r,e,n=t.length;if(1===n)r=0,e=t[0][1];else{for(var a,o,i,u=0,f=0,s=0,l=0,h=0;h<n;h++)u+=o=(a=t[h])[0],f+=i=a[1],s+=o*o,l+=o*i;e=f/n-(r=(n*l-u*f)/(n*s-u*u))*u/n}return{m:r,b:e}},t.linearRegressionLine=function(t){return function(r){return t.b+t.m*r}},t.mad=M,t.max=s,t.maxSorted=function(t){return t[t.length-1]},t.mean=e,t.meanSimple=P,t.median=b,t.medianAbsoluteDeviation=M,t.medianSorted=function(t){return h(t,.5)},t.min=f,t.minSorted=function(t){return t[0]},t.mode=function(t){return i(u(t))},t.modeFast=function(t){for(var r,e=new Map,n=0,a=0;a<t.length;a++){var o=e.get(t[a]);void 0===o?o=1:o++,o>n&&(r=t[a],n=o),e.set(t[a],o)}if(0===n)throw new Error(\\\"mode requires at last one data point\\\");return r},t.modeSorted=i,t.numericSort=u,t.perceptron=A,t.permutationTest=function(t,r,n,a,o){if(void 0===a&&(a=1e4),void 0===n&&(n=\\\"two_side\\\"),\\\"two_side\\\"!==n&&\\\"greater\\\"!==n&&\\\"less\\\"!==n)throw new Error(\\\"`alternative` must be either 'two_side', 'greater', or 'less'\\\");for(var i=e(t)-e(r),u=new Array(a),f=t.concat(r),s=Math.floor(f.length/2),l=0;l<a;l++){x(f,o);var h=f.slice(0,s),c=f.slice(s,f.length),v=e(h)-e(c);u[l]=v}var g=0;if(\\\"two_side\\\"===n)for(var d=0;d<=a;d++)Math.abs(u[d])>=Math.abs(i)&&(g+=1);else if(\\\"greater\\\"===n)for(var p=0;p<=a;p++)u[p]>=i&&(g+=1);else for(var m=0;m<=a;m++)u[m]<=i&&(g+=1);return g/a},t.permutationsHeap=function(t){for(var r=new Array(t.length),e=[t.slice()],n=0;n<t.length;n++)r[n]=0;for(var a=0;a<t.length;)if(r[a]<a){var o=0;a%2!=0&&(o=r[a]);var i=t[o];t[o]=t[a],t[a]=i,e.push(t.slice()),r[a]++,a=0}else r[a]=0,a++;return e},t.poissonDistribution=function(t){if(!(t<=0)){var r=0,e=0,n=[],a=1;do{n[r]=Math.exp(-t)*Math.pow(t,r)/a,e+=n[r],a*=++r}while(e<.9999);return n}},t.probit=function(t){return 0===t?t=I:t>=1&&(t=.9999),Math.sqrt(2)*J(2*t-1)},t.product=function(t){for(var r=1,e=0;e<t.length;e++)r*=t[e];return r},t.quantile=g,t.quantileRank=function(t,r){return y(u(t),r)},t.quantileRankSorted=y,t.quantileSorted=h,t.quickselect=c,t.rSquared=function(t,r){if(t.length<2)return 1;for(var e=0,n=0;n<t.length;n++)e+=t[n][1];for(var a=e/t.length,o=0,i=0;i<t.length;i++)o+=Math.pow(a-t[i][1],2);for(var u=0,f=0;f<t.length;f++)u+=Math.pow(t[f][1]-r(t[f][0]),2);return 1-u/o},t.relativeError=it,t.rms=N,t.rootMeanSquare=N,t.sample=S,t.sampleCorrelation=function(t,r){return D(t,r)/k(t)/k(r)},t.sampleCovariance=D,t.sampleKurtosis=function(t){var r=t.length;if(r<4)throw new Error(\\\"sampleKurtosis requires at least four data points\\\");for(var n,a=e(t),o=0,i=0,u=0;u<r;u++)o+=(n=t[u]-a)*n,i+=n*n*n*n;return(r-1)/((r-2)*(r-3))*(r*(r+1)*i/(o*o)-3*(r-1))},t.sampleSkewness=function(t){if(t.length<3)throw new Error(\\\"sampleSkewness requires at least three data points\\\");for(var r,n=e(t),a=0,o=0,i=0;i<t.length;i++)a+=(r=t[i]-n)*r,o+=r*r*r;var u=t.length-1,f=Math.sqrt(a/u),s=t.length;return s*o/((s-1)*(s-2)*Math.pow(f,3))},t.sampleStandardDeviation=k,t.sampleVariance=j,t.sampleWithReplacement=function(t,r,e){if(0===t.length)return[];e=e||Math.random;for(var n=t.length,a=[],o=0;o<r;o++){var i=Math.floor(e()*n);a.push(t[i])}return a},t.shuffle=E,t.shuffleInPlace=x,t.sign=Q,t.silhouette=nt,t.silhouetteMetric=function(t,r){return s(nt(t,r))},t.standardDeviation=o,t.standardNormalTable=Y,t.subtractFromMean=function(t,r,e){return(t*r-e)/(r-1)},t.sum=r,t.sumNthPowerDeviations=n,t.sumSimple=l,t.tTest=function(t,r){return(e(t)-r)/(o(t)/Math.sqrt(t.length))},t.tTestTwoSample=function(t,r,n){var a=t.length,o=r.length;if(!a||!o)return null;n||(n=0);var i=e(t),u=e(r),f=j(t),s=j(r);if(\\\"number\\\"==typeof i&&\\\"number\\\"==typeof u&&\\\"number\\\"==typeof f&&\\\"number\\\"==typeof s){var l=((a-1)*f+(o-1)*s)/(a+o-2);return(i-u-n)/Math.sqrt(l*(1/a+1/o))}},t.uniqueCountSorted=q,t.variance=a,t.zScore=function(t,r,e){return(t-r)/e},Object.defineProperty(t,\\\"__esModule\\\",{value:!0})}(r)},function(t,r,e){\\\"use strict\\\";Object.defineProperty(r,\\\"__esModule\\\",{value:!0}),r.sum_unsafe=function(t,r){var e={};r.forEach((function(t){e[t]=0}));for(var n=function(n,a){r.forEach((function(r){e[r]+=t[n][r]}))},a=0,o=t.length;a<o;a++)n(a);return e},r.sum=function(t,r){var e={};r.forEach((function(t){e[t]=0}));for(var n=function(n,a){r.forEach((function(r){e[r]+=Number(t[n][r])||0}))},a=0,o=t.length;a<o;a++)n(a);return e},r.count=function(t,r){var e={};r.forEach((function(t){e[t]=0}));for(var n=0,a=t.length;n<a;n++)r.forEach((function(t){e[t]++}));return e},r.mean=function(t,r){var e={};r.forEach((function(t){e[t]=0}));for(var n=function(n,a){r.forEach((function(r){e[r]+=Number(t[n][r])||0}))},a=0,o=t.length;a<o;a++)n(a);return r.forEach((function(r){e[r]/=t.length})),e}},function(t,r,e){\\\"use strict\\\";Object.defineProperty(r,\\\"__esModule\\\",{value:!0});var n=e(5);r.periodCube=n.default;var a=e(6);r.momentCube=a.default},function(t,r,e){\\\"use strict\\\";var n=this&&this.__read||function(t,r){var e=\\\"function\\\"===typeof Symbol&&t[Symbol.iterator];if(!e)return t;var n,a,o=e.call(t),i=[];try{for(;(void 0===r||r-- >0)&&!(n=o.next()).done;)i.push(n.value)}catch(u){a={error:u}}finally{try{n&&!n.done&&(e=o.return)&&e.call(o)}finally{if(a)throw a.error}}return i},a=this&&this.__spread||function(){for(var t=[],r=0;r<arguments.length;r++)t=t.concat(n(arguments[r]));return t},o=this&&this.__values||function(t){var r=\\\"function\\\"===typeof Symbol&&Symbol.iterator,e=r&&t[r],n=0;if(e)return e.call(t);if(t&&\\\"number\\\"===typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(r?\\\"Object is not iterable.\\\":\\\"Symbol.iterator is not defined.\\\")};Object.defineProperty(r,\\\"__esModule\\\",{value:!0});var i=function(){function t(t){this.children=new Map,this._rawData=[],this.aggFunc=t,this.cache=!1}return t.prototype.push=function(){for(var t,r=[],e=0;e<arguments.length;e++)r[e]=arguments[e];(t=this._rawData).push.apply(t,a(r))},t.prototype.aggData=function(t){return void 0===t&&(t=[]),this.cache||(this._aggData=this.aggFunc(this.rawData,t),this.cache=!0),this._aggData},t.prototype.clearCache=function(){this.cache=!1},Object.defineProperty(t.prototype,\\\"rawData\\\",{get:function(){var t,r;if(!this.cache){if(0!==this.children.size){var e=this.children.values(),n=[];try{for(var a=o(e),i=a.next();!i.done;i=a.next()){var u=i.value,f=void 0,s=u.rawData,l=s.length;for(f=0;f<l;f++)n.push(s[f])}}catch(h){t={error:h}}finally{try{i&&!i.done&&(r=a.return)&&r.call(a)}finally{if(t)throw t.error}}this._rawData=n}this.cache=!0}return this._rawData},enumerable:!0,configurable:!0}),t.prototype.getNode=function(t){return function r(e,a){var i,u;if(a===t.length)return e;var f=e.children.entries();try{for(var s=o(f),l=s.next();!l.done;l=s.next()){var h=n(l.value,2),c=h[0],v=h[1];if(c===t[a])return r(v,a+1)}}catch(g){i={error:g}}finally{try{l&&!l.done&&(u=s.return)&&u.call(s)}finally{if(i)throw i.error}}return null}(this,0)},t}(),u=function(){function t(t){this.aggFunc=t.aggFunc,this.factTable=t.factTable,this.dimensions=t.dimensions,this.measures=t.measures}return t.prototype.get=function(t){var r=this,e=r.tree,a=(r.aggFunc,r.measures);return function r(e,i){var u,f;if(i===t.length)return e.aggData(a);var s=e.children.entries();try{for(var l=o(s),h=l.next();!h.done;h=l.next()){var c=n(h.value,2),v=c[0],g=c[1];if(v===t[i])return r(g,i+1)}}catch(d){u={error:d}}finally{try{h&&!h.done&&(f=l.return)&&f.call(l)}finally{if(u)throw u.error}}return!1}(e,0)},t.prototype.getNode=function(t){return this.tree.getNode(t)},t.prototype.buildTree=function(){var t,r=new i(this.aggFunc),e=this.factTable.length;for(t=0;t<e;t++)this.insertNode(this.factTable[t],r,0);return this.tree=r,r},t.prototype.insertNode=function(t,r,e){if(r.push(t),r.cache=!1,e<this.dimensions.length){var n=t[this.dimensions[e]];r.children.has(n)||r.children.set(n,new i(this.aggFunc)),this.insertNode(t,r.children.get(n),e+1)}},t.prototype.aggTree=function(t){var r,e;void 0===t&&(t=this.tree);var n=t.children.values();try{for(var a=o(n),i=a.next();!i.done;i=a.next()){var u=i.value;this.aggTree(u)}}catch(f){r={error:f}}finally{try{i&&!i.done&&(e=a.return)&&e.call(a)}finally{if(r)throw r.error}}return t.aggData(this.measures),t},t.prototype.aggNode=function(t){var r,e;void 0===t&&(t=this.tree);var n=t.children.values();try{for(var a=o(n),i=a.next();!i.done;i=a.next()){var u=i.value;this.aggTree(u)}}catch(f){r={error:f}}finally{try{i&&!i.done&&(e=a.return)&&e.call(a)}finally{if(r)throw r.error}}return t.aggData(this.measures),t},t}();r.default=u},function(t,r,e){\\\"use strict\\\";var n=this&&this.__read||function(t,r){var e=\\\"function\\\"===typeof Symbol&&t[Symbol.iterator];if(!e)return t;var n,a,o=e.call(t),i=[];try{for(;(void 0===r||r-- >0)&&!(n=o.next()).done;)i.push(n.value)}catch(u){a={error:u}}finally{try{n&&!n.done&&(e=o.return)&&e.call(o)}finally{if(a)throw a.error}}return i},a=this&&this.__spread||function(){for(var t=[],r=0;r<arguments.length;r++)t=t.concat(n(arguments[r]));return t},o=this&&this.__values||function(t){var r=\\\"function\\\"===typeof Symbol&&Symbol.iterator,e=r&&t[r],n=0;if(e)return e.call(t);if(t&&\\\"number\\\"===typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(r?\\\"Object is not iterable.\\\":\\\"Symbol.iterator is not defined.\\\")};Object.defineProperty(r,\\\"__esModule\\\",{value:!0});var i=function(){function t(){this.children=new Map,this.rawData=[]}return t.prototype.push=function(){for(var t,r=[],e=0;e<arguments.length;e++)r[e]=arguments[e];(t=this.rawData).push.apply(t,a(r))},t.prototype.aggData=function(t,r){return void 0===r&&(r=[]),this._aggData=t(this.rawData,r),this._aggData},t.prototype.getNode=function(t){return function r(e,a){var i,u;if(a===t.length)return e;var f=e.children.entries();try{for(var s=o(f),l=s.next();!l.done;l=s.next()){var h=n(l.value,2),c=h[0],v=h[1];if(c===t[a])return r(v,a+1)}}catch(g){i={error:g}}finally{try{l&&!l.done&&(u=s.return)&&u.call(s)}finally{if(i)throw i.error}}return null}(this,0)},t}();r.Node=i;var u=function(){function t(t){this.aggFunc=t.aggFunc,this.factTable=t.factTable,this.dimensions=t.dimensions,this.measures=t.measures,this.buildTree(),this.aggTree()}return t.prototype.get=function(t){var r=this,e=r.tree,a=r.aggFunc,i=r.measures;return function r(e,u){var f,s;if(u===t.length)return e.aggData(a,i);var l=e.children.entries();try{for(var h=o(l),c=h.next();!c.done;c=h.next()){var v=n(c.value,2),g=v[0],d=v[1];if(g===t[u])return r(d,u+1)}}catch(p){f={error:p}}finally{try{c&&!c.done&&(s=h.return)&&s.call(h)}finally{if(f)throw f.error}}return!1}(e,0)},t.prototype.getNode=function(t){return this.tree.getNode(t)},t.prototype.setData=function(t){var r=t.aggFunc,e=void 0===r?this.aggFunc:r,n=t.factTable,a=void 0===n?this.factTable:n,o=t.dimensions,i=void 0===o?this.dimensions:o,u=t.measures,f=void 0===u?this.measures:u;i!==this.dimensions||a!==this.factTable?(this.dimensions=i,this.factTable=a,this.measures=f,this.aggFunc=e,this.buildTree(),this.aggTree()):f===this.measures&&e===this.aggFunc||(this.measures=f,this.aggFunc=e,this.aggTree())},t.prototype.buildTree=function(){var t,r=new i,e=this.factTable.length;for(t=0;t<e;t++)this.insertNode(this.factTable[t],r,0);return this.tree=r,r},t.prototype.insertNode=function(t,r,e){if(e===this.dimensions.length)r.push(t);else{var n=t[this.dimensions[e]];r.children.has(n)||r.children.set(n,new i),this.insertNode(t,r.children.get(n),e+1)}},t.prototype.aggTree=function(t){var r,e;if(void 0===t&&(t=this.tree),t.children.size>0){t.rawData=[];var n=t.children.values();try{for(var a=o(n),i=a.next();!i.done;i=a.next()){var u=i.value,f=void 0,s=this.aggTree(u).rawData,l=s.length;for(f=0;f<l;f++)t.rawData.push(s[f])}}catch(h){r={error:h}}finally{try{i&&!i.done&&(e=a.return)&&e.call(a)}finally{if(r)throw r.error}}}return t.aggData(this.aggFunc,this.measures),t},t}();r.default=u},function(t,r,e){\\\"use strict\\\";var n=this&&this.__assign||function(){return(n=Object.assign||function(t){for(var r,e=1,n=arguments.length;e<n;e++)for(var a in r=arguments[e])Object.prototype.hasOwnProperty.call(r,a)&&(t[a]=r[a]);return t}).apply(this,arguments)},a=this&&this.__values||function(t){var r=\\\"function\\\"===typeof Symbol&&Symbol.iterator,e=r&&t[r],n=0;if(e)return e.call(t);if(t&&\\\"number\\\"===typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(r?\\\"Object is not iterable.\\\":\\\"Symbol.iterator is not defined.\\\")},o=this&&this.__read||function(t,r){var e=\\\"function\\\"===typeof Symbol&&t[Symbol.iterator];if(!e)return t;var n,a,o=e.call(t),i=[];try{for(;(void 0===r||r-- >0)&&!(n=o.next()).done;)i.push(n.value)}catch(u){a={error:u}}finally{try{n&&!n.done&&(e=o.return)&&e.call(o)}finally{if(a)throw a.error}}return i};Object.defineProperty(r,\\\"__esModule\\\",{value:!0}),r.tree2Table=function(t){var r=t.dimensions,e=(t.measures,t.cube),i=(e.aggFunc,[]);return function t(e,u,f){var s,l,h;if(0!==e.children.size)try{for(var c=a(e.children.entries()),v=c.next();!v.done;v=c.next()){var g=o(v.value,2),d=g[0];t(g[1],n(n({},u),((h={})[r[f]]=d,h)),f+1)}}catch(m){s={error:m}}finally{try{v&&!v.done&&(l=c.return)&&l.call(c)}finally{if(s)throw s.error}}else{var p=e._aggData;i.push(n(n({},u),p))}}(e.tree,{},0),i}},function(t,r,e){var n=function(t){\\\"use strict\\\";var r,e=Object.prototype,n=e.hasOwnProperty,a=\\\"function\\\"===typeof Symbol?Symbol:{},o=a.iterator||\\\"@@iterator\\\",i=a.asyncIterator||\\\"@@asyncIterator\\\",u=a.toStringTag||\\\"@@toStringTag\\\";function f(t,r,e){return Object.defineProperty(t,r,{value:e,enumerable:!0,configurable:!0,writable:!0}),t[r]}try{f({},\\\"\\\")}catch(k){f=function(t,r,e){return t[r]=e}}function s(t,r,e,n){var a=r&&r.prototype instanceof p?r:p,o=Object.create(a.prototype),i=new O(n||[]);return o._invoke=function(t,r,e){var n=h;return function(a,o){if(n===v)throw new Error(\\\"Generator is already running\\\");if(n===g){if(\\\"throw\\\"===a)throw o;return j()}for(e.method=a,e.arg=o;;){var i=e.delegate;if(i){var u=_(i,e);if(u){if(u===d)continue;return u}}if(\\\"next\\\"===e.method)e.sent=e._sent=e.arg;else if(\\\"throw\\\"===e.method){if(n===h)throw n=g,e.arg;e.dispatchException(e.arg)}else\\\"return\\\"===e.method&&e.abrupt(\\\"return\\\",e.arg);n=v;var f=l(t,r,e);if(\\\"normal\\\"===f.type){if(n=e.done?g:c,f.arg===d)continue;return{value:f.arg,done:e.done}}\\\"throw\\\"===f.type&&(n=g,e.method=\\\"throw\\\",e.arg=f.arg)}}}(t,e,i),o}function l(t,r,e){try{return{type:\\\"normal\\\",arg:t.call(r,e)}}catch(k){return{type:\\\"throw\\\",arg:k}}}t.wrap=s;var h=\\\"suspendedStart\\\",c=\\\"suspendedYield\\\",v=\\\"executing\\\",g=\\\"completed\\\",d={};function p(){}function m(){}function y(){}var w={};w[o]=function(){return this};var b=Object.getPrototypeOf,M=b&&b(b(D([])));M&&M!==e&&n.call(M,o)&&(w=M);var x=y.prototype=p.prototype=Object.create(w);function E(t){[\\\"next\\\",\\\"throw\\\",\\\"return\\\"].forEach((function(r){f(t,r,(function(t){return this._invoke(r,t)}))}))}function S(t,r){function e(a,o,i,u){var f=l(t[a],t,o);if(\\\"throw\\\"!==f.type){var s=f.arg,h=s.value;return h&&\\\"object\\\"===typeof h&&n.call(h,\\\"__await\\\")?r.resolve(h.__await).then((function(t){e(\\\"next\\\",t,i,u)}),(function(t){e(\\\"throw\\\",t,i,u)})):r.resolve(h).then((function(t){s.value=t,i(s)}),(function(t){return e(\\\"throw\\\",t,i,u)}))}u(f.arg)}var a;this._invoke=function(t,n){function o(){return new r((function(r,a){e(t,n,r,a)}))}return a=a?a.then(o,o):o()}}function _(t,e){var n=t.iterator[e.method];if(n===r){if(e.delegate=null,\\\"throw\\\"===e.method){if(t.iterator.return&&(e.method=\\\"return\\\",e.arg=r,_(t,e),\\\"throw\\\"===e.method))return d;e.method=\\\"throw\\\",e.arg=new TypeError(\\\"The iterator does not provide a 'throw' method\\\")}return d}var a=l(n,t.iterator,e.arg);if(\\\"throw\\\"===a.type)return e.method=\\\"throw\\\",e.arg=a.arg,e.delegate=null,d;var o=a.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,\\\"return\\\"!==e.method&&(e.method=\\\"next\\\",e.arg=r),e.delegate=null,d):o:(e.method=\\\"throw\\\",e.arg=new TypeError(\\\"iterator result is not an object\\\"),e.delegate=null,d)}function q(t){var r={tryLoc:t[0]};1 in t&&(r.catchLoc=t[1]),2 in t&&(r.finallyLoc=t[2],r.afterLoc=t[3]),this.tryEntries.push(r)}function T(t){var r=t.completion||{};r.type=\\\"normal\\\",delete r.arg,t.completion=r}function O(t){this.tryEntries=[{tryLoc:\\\"root\\\"}],t.forEach(q,this),this.reset(!0)}function D(t){if(t){var e=t[o];if(e)return e.call(t);if(\\\"function\\\"===typeof t.next)return t;if(!isNaN(t.length)){var a=-1,i=function e(){for(;++a<t.length;)if(n.call(t,a))return e.value=t[a],e.done=!1,e;return e.value=r,e.done=!0,e};return i.next=i}}return{next:j}}function j(){return{value:r,done:!0}}return m.prototype=x.constructor=y,y.constructor=m,m.displayName=f(y,u,\\\"GeneratorFunction\\\"),t.isGeneratorFunction=function(t){var r=\\\"function\\\"===typeof t&&t.constructor;return!!r&&(r===m||\\\"GeneratorFunction\\\"===(r.displayName||r.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,y):(t.__proto__=y,f(t,u,\\\"GeneratorFunction\\\")),t.prototype=Object.create(x),t},t.awrap=function(t){return{__await:t}},E(S.prototype),S.prototype[i]=function(){return this},t.AsyncIterator=S,t.async=function(r,e,n,a,o){void 0===o&&(o=Promise);var i=new S(s(r,e,n,a),o);return t.isGeneratorFunction(e)?i:i.next().then((function(t){return t.done?t.value:i.next()}))},E(x),f(x,u,\\\"Generator\\\"),x[o]=function(){return this},x.toString=function(){return\\\"[object Generator]\\\"},t.keys=function(t){var r=[];for(var e in t)r.push(e);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=D,O.prototype={constructor:O,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=r,this.done=!1,this.delegate=null,this.method=\\\"next\\\",this.arg=r,this.tryEntries.forEach(T),!t)for(var e in this)\\\"t\\\"===e.charAt(0)&&n.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=r)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if(\\\"throw\\\"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function a(n,a){return u.type=\\\"throw\\\",u.arg=t,e.next=n,a&&(e.method=\\\"next\\\",e.arg=r),!!a}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],u=i.completion;if(\\\"root\\\"===i.tryLoc)return a(\\\"end\\\");if(i.tryLoc<=this.prev){var f=n.call(i,\\\"catchLoc\\\"),s=n.call(i,\\\"finallyLoc\\\");if(f&&s){if(this.prev<i.catchLoc)return a(i.catchLoc,!0);if(this.prev<i.finallyLoc)return a(i.finallyLoc)}else if(f){if(this.prev<i.catchLoc)return a(i.catchLoc,!0)}else{if(!s)throw new Error(\\\"try statement without catch or finally\\\");if(this.prev<i.finallyLoc)return a(i.finallyLoc)}}}},abrupt:function(t,r){for(var e=this.tryEntries.length-1;e>=0;--e){var a=this.tryEntries[e];if(a.tryLoc<=this.prev&&n.call(a,\\\"finallyLoc\\\")&&this.prev<a.finallyLoc){var o=a;break}}o&&(\\\"break\\\"===t||\\\"continue\\\"===t)&&o.tryLoc<=r&&r<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=t,i.arg=r,o?(this.method=\\\"next\\\",this.next=o.finallyLoc,d):this.complete(i)},complete:function(t,r){if(\\\"throw\\\"===t.type)throw t.arg;return\\\"break\\\"===t.type||\\\"continue\\\"===t.type?this.next=t.arg:\\\"return\\\"===t.type?(this.rval=this.arg=t.arg,this.method=\\\"return\\\",this.next=\\\"end\\\"):\\\"normal\\\"===t.type&&r&&(this.next=r),d},finish:function(t){for(var r=this.tryEntries.length-1;r>=0;--r){var e=this.tryEntries[r];if(e.finallyLoc===t)return this.complete(e.completion,e.afterLoc),T(e),d}},catch:function(t){for(var r=this.tryEntries.length-1;r>=0;--r){var e=this.tryEntries[r];if(e.tryLoc===t){var n=e.completion;if(\\\"throw\\\"===n.type){var a=n.arg;T(e)}return a}}throw new Error(\\\"illegal catch attempt\\\")},delegateYield:function(t,e,n){return this.delegate={iterator:D(t),resultName:e,nextLoc:n},\\\"next\\\"===this.method&&(this.arg=r),d}},t}(t.exports);try{regeneratorRuntime=n}catch(a){Function(\\\"r\\\",\\\"regeneratorRuntime = r\\\")(n)}},function(t,r,e){\\\"use strict\\\";e.r(r);var n={};e.r(n),e.d(n,\\\"kruskal\\\",(function(){return q})),e.d(n,\\\"kruskalWithFullMST\\\",(function(){return _}));var a={};function o(t,r){(null==r||r>t.length)&&(r=t.length);for(var e=0,n=new Array(r);e<r;e++)n[e]=t[e];return n}function i(t,r){if(t){if(\\\"string\\\"===typeof t)return o(t,r);var e=Object.prototype.toString.call(t).slice(8,-1);return\\\"Object\\\"===e&&t.constructor&&(e=t.constructor.name),\\\"Map\\\"===e||\\\"Set\\\"===e?Array.from(t):\\\"Arguments\\\"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?o(t,r):void 0}}function u(t,r){return function(t){if(Array.isArray(t))return t}(t)||function(t,r){if(\\\"undefined\\\"!==typeof Symbol&&Symbol.iterator in Object(t)){var e=[],n=!0,a=!1,o=void 0;try{for(var i,u=t[Symbol.iterator]();!(n=(i=u.next()).done)&&(e.push(i.value),!r||e.length!==r);n=!0);}catch(f){a=!0,o=f}finally{try{n||null==u.return||u.return()}finally{if(a)throw o}}return e}}(t,r)||i(t,r)||function(){throw new TypeError(\\\"Invalid attempt to destructure non-iterable instance.\\\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\\\")}()}function f(t){return function(t){if(Array.isArray(t))return o(t)}(t)||function(t){if(\\\"undefined\\\"!==typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||i(t)||function(){throw new TypeError(\\\"Invalid attempt to spread non-iterable instance.\\\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\\\")}()}function s(t,r){var e;if(\\\"undefined\\\"===typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(e=i(t))||r&&t&&\\\"number\\\"===typeof t.length){e&&(t=e);var n=0,a=function(){};return{s:a,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:a}}throw new TypeError(\\\"Invalid attempt to iterate non-iterable instance.\\\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\\\")}var o,u=!0,f=!1;return{s:function(){e=t[Symbol.iterator]()},n:function(){var t=e.next();return u=t.done,t},e:function(t){f=!0,o=t},f:function(){try{u||null==e.return||e.return()}finally{if(f)throw o}}}}e.r(a),e.d(a,\\\"getEntropyMatrix\\\",(function(){return k})),e.d(a,\\\"getDashBoardSubspace\\\",(function(){return F})),e.d(a,\\\"getDashBoardView\\\",(function(){return P})),e.d(a,\\\"crammersV\\\",(function(){return l}));var l=function(t,r,e){for(var n=new Set,a=new Set,o=new Map,i=t.length,f=0;f<i;f++){var l=t[f];n.add(l[r]),a.add(l[e]),o.has(l[r])||o.set(l[r],new Map);var h=o.get(l[r]);h.has(l[e])||h.set(l[e],0),h.set(l[e],h.get(l[e])+1)}var c=function(t,r,e){if(\\\"undefined\\\"===typeof t||\\\"undefined\\\"===typeof r||\\\"undefined\\\"===typeof e)return 0;var n,a=new Map,o=new Map,i=0,f=s(r);try{for(f.s();!(n=f.n()).done;){var l=n.value;a.set(l,0)}}catch(N){f.e(N)}finally{f.f()}var h,c=s(e);try{for(c.s();!(h=c.n()).done;){var v=h.value;o.set(v,0)}}catch(N){c.e(N)}finally{c.f()}var g,d=s(t);try{for(d.s();!(g=d.n()).done;){var p,m=u(g.value,2),y=m[0],w=s(m[1]);try{for(w.s();!(p=w.n()).done;){var b=u(p.value,2),M=b[0],x=b[1];a.set(y,a.get(y)+x),o.set(M,o.get(M)+x),i+=x}}catch(N){w.e(N)}finally{w.f()}}}catch(N){d.e(N)}finally{d.f()}var E,S=0,_=s(t);try{for(_.s();!(E=_.n()).done;){var q,T=u(E.value,2),O=T[0],D=s(T[1]);try{for(D.s();!(q=D.n()).done;){var j=u(q.value,2),k=j[0],F=j[1],P=a.get(O)*o.get(k)/i;S+=Math.pow(F-P,2)/P}}catch(N){D.e(N)}finally{D.f()}}}catch(N){_.e(N)}finally{_.f()}return S}(o,n,a);return Math.sqrt(c/(t.length*Math.min(n.size-1,a.size-1)))},h=function(t,r,e){var n=c(t.map((function(t){return t[r]})))/t.length,a=c(t.map((function(t){return t[e]})))/t.length;return c(t.map((function(t){return(t[r]-n)*(t[e]-a)})))/Math.sqrt(c(t.map((function(t){return Math.pow(t[r]-n,2)})))*c(t.map((function(t){return Math.pow(t[e]-a,2)}))))};function c(t){for(var r=0,e=0,n=t.length;e<n;e++)r+=t[e];return r}function v(t){var r=Math.min.apply(Math,f(t));return t.map((function(t){return t-r+1}))}function g(t){var r,e=0,n=s(t);try{for(n.s();!(r=n.n()).done;){var a=r.value;e+=a}}catch(o){n.e(o)}finally{n.f()}return t.map((function(t){return t/e}))}var d=function(t){var r,e=0,n=s(t);try{for(n.s();!(r=n.n()).done;){var a=r.value;e+=a*Math.log2(a)}}catch(o){n.e(o)}finally{n.f()}return-e};var p=e(2);p.sum,p.max,p.mean,p.min;var m=.3,y=.5,w=.3;function b(t){for(var r=[],e=0;e<t.length;e++)for(var n=e+1;n<t[e].length;n++)r.push([[e,n],Math.abs(t[e][n])]);return r}function M(t,r){return t[r]===r?r:t[r]=M(t,t[r])}function x(t,r,e){var n=M(t,r),a=M(t,e);t[n]=a,M(t,r),M(t,e)}function E(t,r,e){return t[e]===e?e:(t[e]=E(t,r,t[e]),r[e]=r[t[e]],t[e])}function S(t,r,e,n){var a=E(t,r,e),o=E(t,r,n),i=r[a],u=r[o];t[a]=o,r[a]=r[o]=i+u,E(t,r,e),E(t,r,n)}function _(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:4,e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=b(t);n.sort((function(t,r){return r[1]-t[1]}));var a,o=[],i=t.map((function(t,r){return r})),u=f(i),l=!1,h=s(n);try{for(h.s();!(a=h.n()).done;){var c=a.value;M(i,c[0][0])!==M(i,c[0][1])&&(x(i,c[0][0],c[0][1]),o.push([c[0],c[1],l]));for(var v=0;v<i.length;v++)i[v]=M(i,v);var g=new Set(i);if(g.size<=r||c[1]<e?l=!0:u=f(i),1===g.size)break}}catch(d){h.e(d)}finally{h.f()}return{edgesInMST:o,groups:u}}var q=function(t){var r,e=t.matrix,n=t.measures,a=(t.method,t.groupMaxSize),o=void 0===a?4:a,i=t.limitSize,u=void 0!==i&&i,f=t.threshold,l=void 0===f?0:f;r=u?function(t,r){var e=b(t);e.sort((function(t,r){return r[1]-t[1]}));var n,a=t.map((function(t,r){return r})),o=t.map((function(){return 1})),i=s(e);try{for(i.s();!(n=i.n()).done;){var u=n.value;if(E(a,o,u[0][0])!==E(a,o,u[0][1])){if(o[u[0][0]]+o[u[0][1]]>r)continue;S(a,o,u[0][0],u[0][1])}for(var f=0;f<a.length;f++)a[f]=E(a,o,f);if(1===new Set(a).size)break}}catch(c){i.e(c)}finally{i.f()}for(var l=new Map,h=0;h<a.length;h++)l.has(a[h])||l.set(a[h],[]),l.get(a[h]).push(h);return l}(e,o):function(t,r){var e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=b(t);n.sort((function(t,r){return r[1]-t[1]}));var a,o=t.map((function(t,r){return r})),i=s(n);try{for(i.s();!(a=i.n()).done;){var u=a.value;M(o,u[0][0])!==M(o,u[0][1])&&x(o,u[0][0],u[0][1]);for(var f=0;f<o.length;f++)o[f]=M(o,f);if(new Set(o).size<=r||u[1]<e)break}}catch(c){i.e(c)}finally{i.f()}for(var l=new Map,h=0;h<o.length;h++)l.has(o[h])||l.set(o[h],[]),l.get(o[h]).push(h);return l}(e,o,l);var h,c=[],v=s(r.values());try{for(v.s();!(h=v.n()).done;){var g=h.value;c.push(g.map((function(t){return n[t]})))}}catch(d){v.e(d)}finally{v.f()}return c};var T=e(1),O=e.n(T);e(0);var D;!function(t){t.outlier=\\\"default_outlier\\\",t.cluster=\\\"default_group\\\",t.trend=\\\"default_trend\\\"}(D||(D={}));var j;!function(t){t.outlier=\\\"default_outlier\\\",t.trend=\\\"default_trend\\\"}(j||(j={}));function k(t,r,e,n){for(var a=[],o=0;o<t.length;o++){var i=t[o];a.push([]);var u,f=O()({dataSource:e,dimensions:i,measures:r,asFields:r,operator:n||\\\"sum\\\"}),l=s(r);try{var h=function(){var t=u.value,r=g(v(f.map((function(r){return r[t]})))),e=d(r);a[o].push(e)};for(l.s();!(u=l.n()).done;)h()}catch(c){l.e(c)}finally{l.f()}}return a}function F(t,r,e,a){for(var o=e.map((function(t){return e.map((function(t){return 0}))})),i=0;i<e.length;i++){o[i][i]=1;for(var u=i+1;u<e.length;u++){var c=h(t,e[i],e[u]);o[u][i]=o[i][u]=c}}for(var v=n.kruskal({matrix:o,measures:e,groupMaxSize:Math.round(e.length/6),threshold:w}),g=r.map((function(t){return r.map((function(t){return 0}))})),d=0;d<r.length;d++){g[d][d]=1;for(var p=d+1;p<r.length;p++)g[d][p]=g[p][d]=l(t,r[d],r[p])}var m,y=new Set,b=s(a);try{for(b.s();!(m=b.n()).done;){var M,x=s(m.value[0]);try{for(x.s();!(M=x.n()).done;){var E=M.value;y.add(E)}}catch(D){x.e(D)}finally{x.f()}}}catch(D){b.e(D)}finally{b.f()}var S,_=f(y),q=[],T=s(v);try{var O=function(){for(var n=S.value,a=n.map((function(t){return n.map((function(t){return 0}))})),i=0;i<n.length;i++)for(var u=e.indexOf(n[i]),f=0;f<n.length;f++){var s=e.indexOf(n[f]);a[i][f]=o[u][s]}for(var l=_.map((function(t){return _.map((function(t){return 0}))})),h=0;h<_.length;h++)for(var c=r.indexOf(_[h]),v=0;v<_.length;v++){var d=r.indexOf(_[v]);l[h][v]=g[c][d]}q.push({dimensions:_,measures:n,correlationMatrix:a,dimensionCorrelationMatrix:l,entropyMatrix:k(_.map((function(t){return[t]})),n,t)})};for(T.s();!(S=T.n()).done;)O()}catch(D){T.e(D)}finally{T.f()}return q}function P(t,r){var e,a=t.dimensions,o=t.measures,i=t.entropyMatrix,u=t.dimensionCorrelationMatrix,f=[],l=s(n.kruskal({matrix:t.correlationMatrix,measures:o,groupMaxSize:Math.round(o.length/3),threshold:y}));try{var h=function(){var t=e.value,r=t.map((function(t){return o.indexOf(t)})),n=a.map((function(t,e){var n,a=0,o=s(r);try{for(o.s();!(n=o.n()).done;){var u=n.value;a+=i[e][u]}}catch(f){o.e(f)}finally{o.f()}return a})),u=a[N(n)];f.push({type:\\\"target\\\",dimensions:[u],measures:t})};for(l.s();!(e=l.n()).done;)h()}catch(p){l.e(p)}finally{l.f()}for(var c=n.kruskal({matrix:u,measures:a,groupMaxSize:2,limitSize:!0,threshold:m}),v=k(c,o,r),g=0;g<c.length;g++){var d=o[N(v[g])];f.push({type:\\\"feature\\\",dimensions:c[g],measures:[d]})}return f}function N(t){var r=0,e=t.length,n=1/0,a=-1;for(r=0;r<e;r++)t[r]<n&&(n=t[r],a=r);return a}var L;self.addEventListener(\\\"message\\\",(L=t=>{const{dataSource:r,dimensions:e,measures:n,subspaces:o}=t.data;try{const t=function(t){let r=[];for(let e of t){let t={};e.measures.forEach((r=>{t[r.name]=r.value})),r.push([e.dimensions,t,e.correlationMatrix])}return r}(o),i=a.getDashBoardSubspace(r,e,n,t),u=[];for(let e=0;e<i.length;e++){const t=a.getDashBoardView(i[e],r);t.sort(((t,r)=>\\\"feature\\\"===t.type&&\\\"target\\\"===r.type?1:t.measures.length-r.measures.length)),u.push(t)}self.postMessage({success:!0,data:u})}catch(i){self.postMessage({success:!1,message:i})}},function(t){var r=(new Date).getTime();try{L(t)}finally{var e=(new Date).getTime()-r;console.log(\\\"Task [\\\".concat(L.name,\\\"] cost \\\").concat(e,\\\" ms.\\\"))}}),!1)}]);\\n//# sourceMappingURL=dashboard.worker.d28c7181.worker.js.map\", \"Worker\", undefined, __webpack_public_path__ + \"static/js/dashboard.worker.d28c7181.worker.js\");\n}\n","\nimport worker from \"!!../../../../node_modules/worker-loader/dist/runtime/inline.js\";\n\nexport default function Worker_fn() {\n  return worker(\"!function(t){var r={};function e(n){if(r[n])return r[n].exports;var o=r[n]={i:n,l:!1,exports:{}};return t[n].call(o.exports,o,o.exports,e),o.l=!0,o.exports}e.m=t,e.c=r,e.d=function(t,r,n){e.o(t,r)||Object.defineProperty(t,r,{enumerable:!0,get:n})},e.r=function(t){\\\"undefined\\\"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:\\\"Module\\\"}),Object.defineProperty(t,\\\"__esModule\\\",{value:!0})},e.t=function(t,r){if(1&r&&(t=e(t)),8&r)return t;if(4&r&&\\\"object\\\"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(e.r(n),Object.defineProperty(n,\\\"default\\\",{enumerable:!0,value:t}),2&r&&\\\"string\\\"!=typeof t)for(var o in t)e.d(n,o,function(r){return t[r]}.bind(null,o));return n},e.n=function(t){var r=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(r,\\\"a\\\",r),r},e.o=function(t,r){return Object.prototype.hasOwnProperty.call(t,r)},e.p=\\\"./\\\",e(e.s=9)}([function(t,r,e){t.exports=e(8)},function(t,r,e){\\\"use strict\\\";this&&this.__assign;Object.defineProperty(r,\\\"__esModule\\\",{value:!0});var n=e(4),o=e(7),a=e(3),i={sum:a.sum_unsafe,mean:a.mean,count:a.count};function u(t){var r=t.type,e=t.aggFunc,o=void 0===e?a.count:e,i=t.factTable,u=void 0===i?[]:i,f=t.dimensions,s=void 0===f?[]:f,l=t.measures,h=void 0===l?[]:l;switch(r){case\\\"period\\\":return new n.periodCube({aggFunc:o,factTable:u,dimensions:s,measures:h});case\\\"moment\\\":default:return new n.momentCube({aggFunc:o,factTable:u,dimensions:s,measures:h})}}r.createCube=u,r.default=function(t){var r=t.dimensions,e=t.measures,n=t.asFields,f=t.operator,s=t.dataSource,l=u({type:\\\"moment\\\",aggFunc:i[f]||a.count,dimensions:r,measures:e,factTable:s}),h=o.tree2Table({dimensions:r,measures:e,cube:l});return h.forEach((function(t){n.forEach((function(r,n){t[r]=t[e[n]]}))})),h},function(t){for(var e in t)r.hasOwnProperty(e)||(r[e]=t[e])}(e(3))},function(t,r,e){!function(t){\\\"use strict\\\";function r(t){if(0===t.length)return 0;for(var r,e=t[0],n=0,o=1;o<t.length;o++)r=e+t[o],Math.abs(e)>=Math.abs(t[o])?n+=e-r+t[o]:n+=t[o]-r+e,e=r;return e+n}function e(t){if(0===t.length)throw new Error(\\\"mean requires at least one data point\\\");return r(t)/t.length}function n(t,r){var n,o,a=e(t),i=0;if(2===r)for(o=0;o<t.length;o++)i+=(n=t[o]-a)*n;else for(o=0;o<t.length;o++)i+=Math.pow(t[o]-a,r);return i}function o(t){if(0===t.length)throw new Error(\\\"variance requires at least one data point\\\");return n(t,2)/t.length}function a(t){if(1===t.length)return 0;var r=o(t);return Math.sqrt(r)}function i(t){if(0===t.length)throw new Error(\\\"mode requires at least one data point\\\");if(1===t.length)return t[0];for(var r=t[0],e=NaN,n=0,o=1,a=1;a<t.length+1;a++)t[a]!==r?(o>n&&(n=o,e=r),o=1,r=t[a]):o++;return e}function u(t){return t.slice().sort((function(t,r){return t-r}))}function f(t){if(0===t.length)throw new Error(\\\"min requires at least one data point\\\");for(var r=t[0],e=1;e<t.length;e++)t[e]<r&&(r=t[e]);return r}function s(t){if(0===t.length)throw new Error(\\\"max requires at least one data point\\\");for(var r=t[0],e=1;e<t.length;e++)t[e]>r&&(r=t[e]);return r}function l(t){for(var r=0,e=0;e<t.length;e++)r+=t[e];return r}function h(t,r){var e=t.length*r;if(0===t.length)throw new Error(\\\"quantile requires at least one data point.\\\");if(r<0||r>1)throw new Error(\\\"quantiles must be between 0 and 1\\\");return 1===r?t[t.length-1]:0===r?t[0]:e%1!=0?t[Math.ceil(e)-1]:t.length%2==0?(t[e-1]+t[e])/2:t[e]}function c(t,r,e,n){for(e=e||0,n=n||t.length-1;n>e;){if(n-e>600){var o=n-e+1,a=r-e+1,i=Math.log(o),u=.5*Math.exp(2*i/3),f=.5*Math.sqrt(i*u*(o-u)/o);a-o/2<0&&(f*=-1),c(t,r,Math.max(e,Math.floor(r-a*u/o+f)),Math.min(n,Math.floor(r+(o-a)*u/o+f)))}var s=t[r],l=e,h=n;for(v(t,e,r),t[n]>s&&v(t,e,n);l<h;){for(v(t,l,h),l++,h--;t[l]<s;)l++;for(;t[h]>s;)h--}t[e]===s?v(t,e,h):v(t,++h,n),h<=r&&(e=h+1),r<=h&&(n=h-1)}}function v(t,r,e){var n=t[r];t[r]=t[e],t[e]=n}function g(t,r){var e=t.slice();if(Array.isArray(r)){!function(t,r){for(var e=[0],n=0;n<r.length;n++)e.push(m(t.length,r[n]));e.push(t.length-1),e.sort(d);for(var o=[0,e.length-1];o.length;){var a=Math.ceil(o.pop()),i=Math.floor(o.pop());if(!(a-i<=1)){var u=Math.floor((i+a)/2);p(t,e[u],Math.floor(e[i]),Math.ceil(e[a])),o.push(i,u,u,a)}}}(e,r);for(var n=[],o=0;o<r.length;o++)n[o]=h(e,r[o]);return n}return p(e,m(e.length,r),0,e.length-1),h(e,r)}function p(t,r,e,n){r%1==0?c(t,r,e,n):(c(t,r=Math.floor(r),e,n),c(t,r+1,r+1,n))}function d(t,r){return t-r}function m(t,r){var e=t*r;return 1===r?t-1:0===r?0:e%1!=0?Math.ceil(e)-1:t%2==0?e-.5:e}function y(t,r){if(r<t[0])return 0;if(r>t[t.length-1])return 1;var e=function(t,r){for(var e=0,n=0,o=t.length;n<o;)r<=t[e=n+o>>>1]?o=e:n=-~e;return n}(t,r);if(t[e]!==r)return e/t.length;e++;var n=function(t,r){for(var e=0,n=0,o=t.length;n<o;)r>=t[e=n+o>>>1]?n=-~e:o=e;return n}(t,r);if(n===e)return e/t.length;var o=n-e+1;return o*(n+e)/2/o/t.length}function w(t){var r=g(t,.75),e=g(t,.25);if(\\\"number\\\"==typeof r&&\\\"number\\\"==typeof e)return r-e}function b(t){return+g(t,.5)}function M(t){for(var r=b(t),e=[],n=0;n<t.length;n++)e.push(Math.abs(t[n]-r));return b(e)}function x(t,r){r=r||Math.random;for(var e,n,o=t.length;o>0;)n=Math.floor(r()*o--),e=t[o],t[o]=t[n],t[n]=e;return t}function E(t,r){return x(t.slice(),r)}function _(t,r,e){return E(t,e).slice(0,r)}function S(t,r){for(var e=[],n=0;n<t;n++){for(var o=[],a=0;a<r;a++)o.push(0);e.push(o)}return e}function T(t){for(var r,e=0,n=0;n<t.length;n++)0!==n&&t[n]===r||(r=t[n],e++);return e}function q(t,r,e,n){var o;if(t>0){var a=(e[r]-e[t-1])/(r-t+1);o=n[r]-n[t-1]-(r-t+1)*a*a}else o=n[r]-e[r]*e[r]/(r+1);return o<0?0:o}function D(t,r,e,n,o,a,i){if(!(t>r)){var u=Math.floor((t+r)/2);n[e][u]=n[e-1][u-1],o[e][u]=u;var f=e;t>e&&(f=Math.max(f,o[e][t-1]||0)),f=Math.max(f,o[e-1][u]||0);var s,l,h,c=u-1;r<n[0].length-1&&(c=Math.min(c,o[e][r+1]||0));for(var v=c;v>=f&&!((s=q(v,u,a,i))+n[e-1][f-1]>=n[e][u]);--v)(l=q(f,u,a,i)+n[e-1][f-1])<n[e][u]&&(n[e][u]=l,o[e][u]=f),f++,(h=s+n[e-1][v-1])<n[e][u]&&(n[e][u]=h,o[e][u]=v);D(t,u-1,e,n,o,a,i),D(u+1,r,e,n,o,a,i)}}function O(t,r){if(t.length!==r.length)throw new Error(\\\"sampleCovariance requires samples with equal lengths\\\");if(t.length<2)throw new Error(\\\"sampleCovariance requires at least two data points in each sample\\\");for(var n=e(t),o=e(r),a=0,i=0;i<t.length;i++)a+=(t[i]-n)*(r[i]-o);return a/(t.length-1)}function j(t){if(t.length<2)throw new Error(\\\"sampleVariance requires at least two data points\\\");return n(t,2)/(t.length-1)}function F(t){var r=j(t);return Math.sqrt(r)}function N(t,r,e,n){return(t*r+e*n)/(r+n)}function P(t){if(0===t.length)throw new Error(\\\"meanSimple requires at least one data point\\\");return l(t)/t.length}function k(t){if(0===t.length)throw new Error(\\\"rootMeanSquare requires at least one data point\\\");for(var r=0,e=0;e<t.length;e++)r+=Math.pow(t[e],2);return Math.sqrt(r/t.length)}var L=function(){this.totalCount=0,this.data={}};L.prototype.train=function(t,r){for(var e in this.data[r]||(this.data[r]={}),t){var n=t[e];void 0===this.data[r][e]&&(this.data[r][e]={}),void 0===this.data[r][e][n]&&(this.data[r][e][n]=0),this.data[r][e][n]++}this.totalCount++},L.prototype.score=function(t){var r,e={};for(var n in t){var o=t[n];for(r in this.data)e[r]={},this.data[r][n]?e[r][n+\\\"_\\\"+o]=(this.data[r][n][o]||0)/this.totalCount:e[r][n+\\\"_\\\"+o]=0}var a={};for(r in e)for(var i in a[r]=0,e[r])a[r]+=e[r][i];return a};var A=function(){this.weights=[],this.bias=0};A.prototype.predict=function(t){if(t.length!==this.weights.length)return null;for(var r=0,e=0;e<this.weights.length;e++)r+=this.weights[e]*t[e];return(r+=this.bias)>0?1:0},A.prototype.train=function(t,r){if(0!==r&&1!==r)return null;t.length!==this.weights.length&&(this.weights=t,this.bias=1);var e=this.predict(t);if(\\\"number\\\"==typeof e&&e!==r){for(var n=r-e,o=0;o<this.weights.length;o++)this.weights[o]+=n*t[o];this.bias+=n}return this};var I=1e-4;function C(t){if(t<0)throw new Error(\\\"factorial requires a non-negative value\\\");if(Math.floor(t)!==t)throw new Error(\\\"factorial requires an integer input\\\");for(var r=1,e=2;e<=t;e++)r*=e;return r}var z=[.9999999999999971,57.15623566586292,-59.59796035547549,14.136097974741746,-.4919138160976202,3399464998481189e-20,4652362892704858e-20,-9837447530487956e-20,.0001580887032249125,-.00021026444172410488,.00021743961811521265,-.0001643181065367639,8441822398385275e-20,-26190838401581408e-21,36899182659531625e-22],G=Math.log(Math.sqrt(2*Math.PI)),R={1:{.995:0,.99:0,.975:0,.95:0,.9:.02,.5:.45,.1:2.71,.05:3.84,.025:5.02,.01:6.63,.005:7.88},2:{.995:.01,.99:.02,.975:.05,.95:.1,.9:.21,.5:1.39,.1:4.61,.05:5.99,.025:7.38,.01:9.21,.005:10.6},3:{.995:.07,.99:.11,.975:.22,.95:.35,.9:.58,.5:2.37,.1:6.25,.05:7.81,.025:9.35,.01:11.34,.005:12.84},4:{.995:.21,.99:.3,.975:.48,.95:.71,.9:1.06,.5:3.36,.1:7.78,.05:9.49,.025:11.14,.01:13.28,.005:14.86},5:{.995:.41,.99:.55,.975:.83,.95:1.15,.9:1.61,.5:4.35,.1:9.24,.05:11.07,.025:12.83,.01:15.09,.005:16.75},6:{.995:.68,.99:.87,.975:1.24,.95:1.64,.9:2.2,.5:5.35,.1:10.65,.05:12.59,.025:14.45,.01:16.81,.005:18.55},7:{.995:.99,.99:1.25,.975:1.69,.95:2.17,.9:2.83,.5:6.35,.1:12.02,.05:14.07,.025:16.01,.01:18.48,.005:20.28},8:{.995:1.34,.99:1.65,.975:2.18,.95:2.73,.9:3.49,.5:7.34,.1:13.36,.05:15.51,.025:17.53,.01:20.09,.005:21.96},9:{.995:1.73,.99:2.09,.975:2.7,.95:3.33,.9:4.17,.5:8.34,.1:14.68,.05:16.92,.025:19.02,.01:21.67,.005:23.59},10:{.995:2.16,.99:2.56,.975:3.25,.95:3.94,.9:4.87,.5:9.34,.1:15.99,.05:18.31,.025:20.48,.01:23.21,.005:25.19},11:{.995:2.6,.99:3.05,.975:3.82,.95:4.57,.9:5.58,.5:10.34,.1:17.28,.05:19.68,.025:21.92,.01:24.72,.005:26.76},12:{.995:3.07,.99:3.57,.975:4.4,.95:5.23,.9:6.3,.5:11.34,.1:18.55,.05:21.03,.025:23.34,.01:26.22,.005:28.3},13:{.995:3.57,.99:4.11,.975:5.01,.95:5.89,.9:7.04,.5:12.34,.1:19.81,.05:22.36,.025:24.74,.01:27.69,.005:29.82},14:{.995:4.07,.99:4.66,.975:5.63,.95:6.57,.9:7.79,.5:13.34,.1:21.06,.05:23.68,.025:26.12,.01:29.14,.005:31.32},15:{.995:4.6,.99:5.23,.975:6.27,.95:7.26,.9:8.55,.5:14.34,.1:22.31,.05:25,.025:27.49,.01:30.58,.005:32.8},16:{.995:5.14,.99:5.81,.975:6.91,.95:7.96,.9:9.31,.5:15.34,.1:23.54,.05:26.3,.025:28.85,.01:32,.005:34.27},17:{.995:5.7,.99:6.41,.975:7.56,.95:8.67,.9:10.09,.5:16.34,.1:24.77,.05:27.59,.025:30.19,.01:33.41,.005:35.72},18:{.995:6.26,.99:7.01,.975:8.23,.95:9.39,.9:10.87,.5:17.34,.1:25.99,.05:28.87,.025:31.53,.01:34.81,.005:37.16},19:{.995:6.84,.99:7.63,.975:8.91,.95:10.12,.9:11.65,.5:18.34,.1:27.2,.05:30.14,.025:32.85,.01:36.19,.005:38.58},20:{.995:7.43,.99:8.26,.975:9.59,.95:10.85,.9:12.44,.5:19.34,.1:28.41,.05:31.41,.025:34.17,.01:37.57,.005:40},21:{.995:8.03,.99:8.9,.975:10.28,.95:11.59,.9:13.24,.5:20.34,.1:29.62,.05:32.67,.025:35.48,.01:38.93,.005:41.4},22:{.995:8.64,.99:9.54,.975:10.98,.95:12.34,.9:14.04,.5:21.34,.1:30.81,.05:33.92,.025:36.78,.01:40.29,.005:42.8},23:{.995:9.26,.99:10.2,.975:11.69,.95:13.09,.9:14.85,.5:22.34,.1:32.01,.05:35.17,.025:38.08,.01:41.64,.005:44.18},24:{.995:9.89,.99:10.86,.975:12.4,.95:13.85,.9:15.66,.5:23.34,.1:33.2,.05:36.42,.025:39.36,.01:42.98,.005:45.56},25:{.995:10.52,.99:11.52,.975:13.12,.95:14.61,.9:16.47,.5:24.34,.1:34.28,.05:37.65,.025:40.65,.01:44.31,.005:46.93},26:{.995:11.16,.99:12.2,.975:13.84,.95:15.38,.9:17.29,.5:25.34,.1:35.56,.05:38.89,.025:41.92,.01:45.64,.005:48.29},27:{.995:11.81,.99:12.88,.975:14.57,.95:16.15,.9:18.11,.5:26.34,.1:36.74,.05:40.11,.025:43.19,.01:46.96,.005:49.65},28:{.995:12.46,.99:13.57,.975:15.31,.95:16.93,.9:18.94,.5:27.34,.1:37.92,.05:41.34,.025:44.46,.01:48.28,.005:50.99},29:{.995:13.12,.99:14.26,.975:16.05,.95:17.71,.9:19.77,.5:28.34,.1:39.09,.05:42.56,.025:45.72,.01:49.59,.005:52.34},30:{.995:13.79,.99:14.95,.975:16.79,.95:18.49,.9:20.6,.5:29.34,.1:40.26,.05:43.77,.025:46.98,.01:50.89,.005:53.67},40:{.995:20.71,.99:22.16,.975:24.43,.95:26.51,.9:29.05,.5:39.34,.1:51.81,.05:55.76,.025:59.34,.01:63.69,.005:66.77},50:{.995:27.99,.99:29.71,.975:32.36,.95:34.76,.9:37.69,.5:49.33,.1:63.17,.05:67.5,.025:71.42,.01:76.15,.005:79.49},60:{.995:35.53,.99:37.48,.975:40.48,.95:43.19,.9:46.46,.5:59.33,.1:74.4,.05:79.08,.025:83.3,.01:88.38,.005:91.95},70:{.995:43.28,.99:45.44,.975:48.76,.95:51.74,.9:55.33,.5:69.33,.1:85.53,.05:90.53,.025:95.02,.01:100.42,.005:104.22},80:{.995:51.17,.99:53.54,.975:57.15,.95:60.39,.9:64.28,.5:79.33,.1:96.58,.05:101.88,.025:106.63,.01:112.33,.005:116.32},90:{.995:59.2,.99:61.75,.975:65.65,.95:69.13,.9:73.29,.5:89.33,.1:107.57,.05:113.14,.025:118.14,.01:124.12,.005:128.3},100:{.995:67.33,.99:70.06,.975:74.22,.95:77.93,.9:82.36,.5:99.33,.1:118.5,.05:124.34,.025:129.56,.01:135.81,.005:140.17}},U=Math.sqrt(2*Math.PI),V={gaussian:function(t){return Math.exp(-.5*t*t)/U}},W={nrd:function(t){var r=F(t),e=w(t);return\\\"number\\\"==typeof e&&(r=Math.min(r,e/1.34)),1.06*r*Math.pow(t.length,-.2)}};function X(t,r,e){var n,o;if(void 0===r)n=V.gaussian;else if(\\\"string\\\"==typeof r){if(!V[r])throw new Error('Unknown kernel \\\"'+r+'\\\"');n=V[r]}else n=r;if(void 0===e)o=W.nrd(t);else if(\\\"string\\\"==typeof e){if(!W[e])throw new Error('Unknown bandwidth method \\\"'+e+'\\\"');o=W[e](t)}else o=e;return function(r){var e=0,a=0;for(e=0;e<t.length;e++)a+=n((r-t[e])/o);return a/o/t.length}}var B=Math.sqrt(2*Math.PI);function K(t){for(var r=t,e=t,n=1;n<15;n++)r+=e*=t*t/(2*n+1);return Math.round(1e4*(.5+r/B*Math.exp(-t*t/2)))/1e4}for(var Y=[],H=0;H<=3.09;H+=.01)Y.push(K(H));function $(t){var r=1/(1+.5*Math.abs(t)),e=r*Math.exp(-t*t+((((((((.17087277*r-.82215223)*r+1.48851587)*r-1.13520398)*r+.27886807)*r-.18628806)*r+.09678418)*r+.37409196)*r+1.00002368)*r-1.26551223);return t>=0?1-e:e-1}function J(t){var r=8*(Math.PI-3)/(3*Math.PI*(4-Math.PI)),e=Math.sqrt(Math.sqrt(Math.pow(2/(Math.PI*r)+Math.log(1-t*t)/2,2)-Math.log(1-t*t)/r)-(2/(Math.PI*r)+Math.log(1-t*t)/2));return t>=0?e:-e}function Q(t){if(\\\"number\\\"==typeof t)return t<0?-1:0===t?0:1;throw new TypeError(\\\"not a number\\\")}function Z(t,r){for(var e=0,n=0;n<t.length;n++){var o=t[n]-r[n];e+=o*o}return Math.sqrt(e)}function tt(t,r){return t.map((function(t){for(var e=Number.MAX_VALUE,n=-1,o=0;o<r.length;o++){var a=Z(t,r[o]);a<e&&(e=a,n=o)}return n}))}function rt(t,r,e){for(var n=t[0].length,o=S(e,n),a=Array(e).fill(0),i=t.length,u=0;u<i;u++){for(var f=t[u],s=r[u],l=o[s],h=0;h<n;h++)l[h]+=f[h];a[s]+=1}for(var c=0;c<e;c++){if(0===a[c])throw new Error(\\\"Centroid \\\"+c+\\\" has no friends\\\");for(var v=o[c],g=0;g<n;g++)v[g]/=a[c]}return o}function et(t,r){for(var e=0,n=0;n<t.length;n++)e+=Z(t[n],r[n]);return e}function nt(t,r){if(t.length!==r.length)throw new Error(\\\"must have exactly as many labels as points\\\");for(var e=function(t){for(var r=1+s(t),e=Array(r),n=0;n<t.length;n++){var o=t[n];void 0===e[o]&&(e[o]=[]),e[o].push(n)}return e}(r),n=function(t){for(var r=t.length,e=S(r,r),n=0;n<r;n++)for(var o=0;o<n;o++)e[n][o]=Z(t[n],t[o]),e[o][n]=e[n][o];return e}(t),o=[],a=0;a<t.length;a++){var i=0;if(e[r[a]].length>1){var u=at(a,e[r[a]],n),f=ot(a,r,e,n);i=(f-u)/Math.max(u,f)}o.push(i)}return o}function ot(t,r,e,n){for(var o=r[t],a=Number.MAX_VALUE,i=0;i<e.length;i++)if(i!==o){var u=at(t,e[i],n);u<a&&(a=u)}return a}function at(t,r,e){for(var n=0,o=0;o<r.length;o++)n+=e[t][r[o]];return n/r.length}function it(t,r){return 0===t&&0===r?0:Math.abs((t-r)/r)}t.BayesianClassifier=L,t.PerceptronModel=A,t.addToMean=function(t,r,e){return t+(e-t)/(r+1)},t.approxEqual=function(t,r,e){return void 0===e&&(e=I),it(t,r)<=e},t.average=e,t.averageSimple=P,t.bayesian=L,t.bernoulliDistribution=function(t){if(t<0||t>1)throw new Error(\\\"bernoulliDistribution requires probability to be between 0 and 1 inclusive\\\");return[1-t,t]},t.binomialDistribution=function(t,r){if(!(r<0||r>1||t<=0||t%1!=0)){var e=0,n=0,o=[],a=1;do{o[e]=a*Math.pow(r,e)*Math.pow(1-r,t-e),n+=o[e],a=a*(t-++e+1)/e}while(n<.9999);return o}},t.bisect=function(t,r,e,n,o){if(\\\"function\\\"!=typeof t)throw new TypeError(\\\"func must be a function\\\");for(var a=0;a<n;a++){var i=(r+e)/2;if(0===t(i)||Math.abs((e-r)/2)<o)return i;Q(t(i))===Q(t(r))?r=i:e=i}throw new Error(\\\"maximum number of iterations exceeded\\\")},t.chiSquaredDistributionTable=R,t.chiSquaredGoodnessOfFit=function(t,r,n){for(var o=0,a=r(e(t)),i=[],u=[],f=0;f<t.length;f++)void 0===i[t[f]]&&(i[t[f]]=0),i[t[f]]++;for(var s=0;s<i.length;s++)void 0===i[s]&&(i[s]=0);for(var l in a)l in i&&(u[+l]=a[l]*t.length);for(var h=u.length-1;h>=0;h--)u[h]<3&&(u[h-1]+=u[h],u.pop(),i[h-1]+=i[h],i.pop());for(var c=0;c<i.length;c++)o+=Math.pow(i[c]-u[c],2)/u[c];var v=i.length-1-1;return R[v][n]<o},t.chunk=function(t,r){var e=[];if(r<1)throw new Error(\\\"chunk size must be a positive number\\\");if(Math.floor(r)!==r)throw new Error(\\\"chunk size must be an integer\\\");for(var n=0;n<t.length;n+=r)e.push(t.slice(n,n+r));return e},t.ckmeans=function(t,r){if(r>t.length)throw new Error(\\\"cannot generate more classes than there are data values\\\");var e=u(t);if(1===T(e))return[e];var n=S(r,e.length),o=S(r,e.length);!function(t,r,e){for(var n=r[0].length,o=t[Math.floor(n/2)],a=[],i=[],u=0,f=void 0;u<n;++u)f=t[u]-o,0===u?(a.push(f),i.push(f*f)):(a.push(a[u-1]+f),i.push(i[u-1]+f*f)),r[0][u]=q(0,u,a,i),e[0][u]=0;for(var s=1;s<r.length;++s)D(s<r.length-1?s:n-1,n-1,s,r,e,a,i)}(e,n,o);for(var a=[],i=o[0].length-1,f=o.length-1;f>=0;f--){var s=o[f][i];a[f]=e.slice(s,i+1),f>0&&(i=s-1)}return a},t.combinations=function t(r,e){var n,o,a,i,u=[];for(n=0;n<r.length;n++)if(1===e)u.push([r[n]]);else for(a=t(r.slice(n+1,r.length),e-1),o=0;o<a.length;o++)(i=a[o]).unshift(r[n]),u.push(i);return u},t.combinationsReplacement=function t(r,e){for(var n=[],o=0;o<r.length;o++)if(1===e)n.push([r[o]]);else for(var a=t(r.slice(o,r.length),e-1),i=0;i<a.length;i++)n.push([r[o]].concat(a[i]));return n},t.combineMeans=N,t.combineVariances=function(t,r,e,n,o,a){var i=N(r,e,o,a);return(e*(t+Math.pow(r-i,2))+a*(n+Math.pow(o-i,2)))/(e+a)},t.cumulativeStdNormalProbability=function(t){var r=Math.abs(t),e=Math.min(Math.round(100*r),Y.length-1);return t>=0?Y[e]:+(1-Y[e]).toFixed(4)},t.epsilon=I,t.equalIntervalBreaks=function(t,r){if(t.length<2)return t;for(var e=f(t),n=s(t),o=[e],a=(n-e)/r,i=1;i<r;i++)o.push(o[0]+a*i);return o.push(n),o},t.erf=$,t.errorFunction=$,t.extent=function(t){if(0===t.length)throw new Error(\\\"extent requires at least one data point\\\");for(var r=t[0],e=t[0],n=1;n<t.length;n++)t[n]>e&&(e=t[n]),t[n]<r&&(r=t[n]);return[r,e]},t.extentSorted=function(t){return[t[0],t[t.length-1]]},t.factorial=C,t.gamma=function t(r){if(Number.isInteger(r))return r<=0?NaN:C(r-1);if(--r<0)return Math.PI/(Math.sin(Math.PI*-r)*t(-r));var e=r+1/4;return Math.pow(r/Math.E,r)*Math.sqrt(2*Math.PI*(r+1/6))*(1+1/144/Math.pow(e,2)-1/12960/Math.pow(e,3)-257/207360/Math.pow(e,4)-52/2612736/Math.pow(e,5)+5741173/9405849600/Math.pow(e,6)+37529/18811699200/Math.pow(e,7))},t.gammaln=function(t){if(t<=0)return 1/0;t--;for(var r=z[0],e=1;e<15;e++)r+=z[e]/(t+e);var n=5.2421875+t;return G+Math.log(r)-n+(t+.5)*Math.log(n)},t.geometricMean=function(t){if(0===t.length)throw new Error(\\\"geometricMean requires at least one data point\\\");for(var r=1,e=0;e<t.length;e++){if(t[e]<=0)throw new Error(\\\"geometricMean requires only positive numbers as input\\\");r*=t[e]}return Math.pow(r,1/t.length)},t.harmonicMean=function(t){if(0===t.length)throw new Error(\\\"harmonicMean requires at least one data point\\\");for(var r=0,e=0;e<t.length;e++){if(t[e]<=0)throw new Error(\\\"harmonicMean requires only positive numbers as input\\\");r+=1/t[e]}return t.length/r},t.interquartileRange=w,t.inverseErrorFunction=J,t.iqr=w,t.kMeansCluster=function(t,r,e){void 0===e&&(e=Math.random);for(var n=null,o=_(t,r,e),a=null,i=Number.MAX_VALUE;0!==i;)n=o,i=et(o=rt(t,a=tt(t,o),r),n);return{labels:a,centroids:o}},t.kde=X,t.kernelDensityEstimation=X,t.linearRegression=function(t){var r,e,n=t.length;if(1===n)r=0,e=t[0][1];else{for(var o,a,i,u=0,f=0,s=0,l=0,h=0;h<n;h++)u+=a=(o=t[h])[0],f+=i=o[1],s+=a*a,l+=a*i;e=f/n-(r=(n*l-u*f)/(n*s-u*u))*u/n}return{m:r,b:e}},t.linearRegressionLine=function(t){return function(r){return t.b+t.m*r}},t.mad=M,t.max=s,t.maxSorted=function(t){return t[t.length-1]},t.mean=e,t.meanSimple=P,t.median=b,t.medianAbsoluteDeviation=M,t.medianSorted=function(t){return h(t,.5)},t.min=f,t.minSorted=function(t){return t[0]},t.mode=function(t){return i(u(t))},t.modeFast=function(t){for(var r,e=new Map,n=0,o=0;o<t.length;o++){var a=e.get(t[o]);void 0===a?a=1:a++,a>n&&(r=t[o],n=a),e.set(t[o],a)}if(0===n)throw new Error(\\\"mode requires at last one data point\\\");return r},t.modeSorted=i,t.numericSort=u,t.perceptron=A,t.permutationTest=function(t,r,n,o,a){if(void 0===o&&(o=1e4),void 0===n&&(n=\\\"two_side\\\"),\\\"two_side\\\"!==n&&\\\"greater\\\"!==n&&\\\"less\\\"!==n)throw new Error(\\\"`alternative` must be either 'two_side', 'greater', or 'less'\\\");for(var i=e(t)-e(r),u=new Array(o),f=t.concat(r),s=Math.floor(f.length/2),l=0;l<o;l++){x(f,a);var h=f.slice(0,s),c=f.slice(s,f.length),v=e(h)-e(c);u[l]=v}var g=0;if(\\\"two_side\\\"===n)for(var p=0;p<=o;p++)Math.abs(u[p])>=Math.abs(i)&&(g+=1);else if(\\\"greater\\\"===n)for(var d=0;d<=o;d++)u[d]>=i&&(g+=1);else for(var m=0;m<=o;m++)u[m]<=i&&(g+=1);return g/o},t.permutationsHeap=function(t){for(var r=new Array(t.length),e=[t.slice()],n=0;n<t.length;n++)r[n]=0;for(var o=0;o<t.length;)if(r[o]<o){var a=0;o%2!=0&&(a=r[o]);var i=t[a];t[a]=t[o],t[o]=i,e.push(t.slice()),r[o]++,o=0}else r[o]=0,o++;return e},t.poissonDistribution=function(t){if(!(t<=0)){var r=0,e=0,n=[],o=1;do{n[r]=Math.exp(-t)*Math.pow(t,r)/o,e+=n[r],o*=++r}while(e<.9999);return n}},t.probit=function(t){return 0===t?t=I:t>=1&&(t=.9999),Math.sqrt(2)*J(2*t-1)},t.product=function(t){for(var r=1,e=0;e<t.length;e++)r*=t[e];return r},t.quantile=g,t.quantileRank=function(t,r){return y(u(t),r)},t.quantileRankSorted=y,t.quantileSorted=h,t.quickselect=c,t.rSquared=function(t,r){if(t.length<2)return 1;for(var e=0,n=0;n<t.length;n++)e+=t[n][1];for(var o=e/t.length,a=0,i=0;i<t.length;i++)a+=Math.pow(o-t[i][1],2);for(var u=0,f=0;f<t.length;f++)u+=Math.pow(t[f][1]-r(t[f][0]),2);return 1-u/a},t.relativeError=it,t.rms=k,t.rootMeanSquare=k,t.sample=_,t.sampleCorrelation=function(t,r){return O(t,r)/F(t)/F(r)},t.sampleCovariance=O,t.sampleKurtosis=function(t){var r=t.length;if(r<4)throw new Error(\\\"sampleKurtosis requires at least four data points\\\");for(var n,o=e(t),a=0,i=0,u=0;u<r;u++)a+=(n=t[u]-o)*n,i+=n*n*n*n;return(r-1)/((r-2)*(r-3))*(r*(r+1)*i/(a*a)-3*(r-1))},t.sampleSkewness=function(t){if(t.length<3)throw new Error(\\\"sampleSkewness requires at least three data points\\\");for(var r,n=e(t),o=0,a=0,i=0;i<t.length;i++)o+=(r=t[i]-n)*r,a+=r*r*r;var u=t.length-1,f=Math.sqrt(o/u),s=t.length;return s*a/((s-1)*(s-2)*Math.pow(f,3))},t.sampleStandardDeviation=F,t.sampleVariance=j,t.sampleWithReplacement=function(t,r,e){if(0===t.length)return[];e=e||Math.random;for(var n=t.length,o=[],a=0;a<r;a++){var i=Math.floor(e()*n);o.push(t[i])}return o},t.shuffle=E,t.shuffleInPlace=x,t.sign=Q,t.silhouette=nt,t.silhouetteMetric=function(t,r){return s(nt(t,r))},t.standardDeviation=a,t.standardNormalTable=Y,t.subtractFromMean=function(t,r,e){return(t*r-e)/(r-1)},t.sum=r,t.sumNthPowerDeviations=n,t.sumSimple=l,t.tTest=function(t,r){return(e(t)-r)/(a(t)/Math.sqrt(t.length))},t.tTestTwoSample=function(t,r,n){var o=t.length,a=r.length;if(!o||!a)return null;n||(n=0);var i=e(t),u=e(r),f=j(t),s=j(r);if(\\\"number\\\"==typeof i&&\\\"number\\\"==typeof u&&\\\"number\\\"==typeof f&&\\\"number\\\"==typeof s){var l=((o-1)*f+(a-1)*s)/(o+a-2);return(i-u-n)/Math.sqrt(l*(1/o+1/a))}},t.uniqueCountSorted=T,t.variance=o,t.zScore=function(t,r,e){return(t-r)/e},Object.defineProperty(t,\\\"__esModule\\\",{value:!0})}(r)},function(t,r,e){\\\"use strict\\\";Object.defineProperty(r,\\\"__esModule\\\",{value:!0}),r.sum_unsafe=function(t,r){var e={};r.forEach((function(t){e[t]=0}));for(var n=function(n,o){r.forEach((function(r){e[r]+=t[n][r]}))},o=0,a=t.length;o<a;o++)n(o);return e},r.sum=function(t,r){var e={};r.forEach((function(t){e[t]=0}));for(var n=function(n,o){r.forEach((function(r){e[r]+=Number(t[n][r])||0}))},o=0,a=t.length;o<a;o++)n(o);return e},r.count=function(t,r){var e={};r.forEach((function(t){e[t]=0}));for(var n=0,o=t.length;n<o;n++)r.forEach((function(t){e[t]++}));return e},r.mean=function(t,r){var e={};r.forEach((function(t){e[t]=0}));for(var n=function(n,o){r.forEach((function(r){e[r]+=Number(t[n][r])||0}))},o=0,a=t.length;o<a;o++)n(o);return r.forEach((function(r){e[r]/=t.length})),e}},function(t,r,e){\\\"use strict\\\";Object.defineProperty(r,\\\"__esModule\\\",{value:!0});var n=e(5);r.periodCube=n.default;var o=e(6);r.momentCube=o.default},function(t,r,e){\\\"use strict\\\";var n=this&&this.__read||function(t,r){var e=\\\"function\\\"===typeof Symbol&&t[Symbol.iterator];if(!e)return t;var n,o,a=e.call(t),i=[];try{for(;(void 0===r||r-- >0)&&!(n=a.next()).done;)i.push(n.value)}catch(u){o={error:u}}finally{try{n&&!n.done&&(e=a.return)&&e.call(a)}finally{if(o)throw o.error}}return i},o=this&&this.__spread||function(){for(var t=[],r=0;r<arguments.length;r++)t=t.concat(n(arguments[r]));return t},a=this&&this.__values||function(t){var r=\\\"function\\\"===typeof Symbol&&Symbol.iterator,e=r&&t[r],n=0;if(e)return e.call(t);if(t&&\\\"number\\\"===typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(r?\\\"Object is not iterable.\\\":\\\"Symbol.iterator is not defined.\\\")};Object.defineProperty(r,\\\"__esModule\\\",{value:!0});var i=function(){function t(t){this.children=new Map,this._rawData=[],this.aggFunc=t,this.cache=!1}return t.prototype.push=function(){for(var t,r=[],e=0;e<arguments.length;e++)r[e]=arguments[e];(t=this._rawData).push.apply(t,o(r))},t.prototype.aggData=function(t){return void 0===t&&(t=[]),this.cache||(this._aggData=this.aggFunc(this.rawData,t),this.cache=!0),this._aggData},t.prototype.clearCache=function(){this.cache=!1},Object.defineProperty(t.prototype,\\\"rawData\\\",{get:function(){var t,r;if(!this.cache){if(0!==this.children.size){var e=this.children.values(),n=[];try{for(var o=a(e),i=o.next();!i.done;i=o.next()){var u=i.value,f=void 0,s=u.rawData,l=s.length;for(f=0;f<l;f++)n.push(s[f])}}catch(h){t={error:h}}finally{try{i&&!i.done&&(r=o.return)&&r.call(o)}finally{if(t)throw t.error}}this._rawData=n}this.cache=!0}return this._rawData},enumerable:!0,configurable:!0}),t.prototype.getNode=function(t){return function r(e,o){var i,u;if(o===t.length)return e;var f=e.children.entries();try{for(var s=a(f),l=s.next();!l.done;l=s.next()){var h=n(l.value,2),c=h[0],v=h[1];if(c===t[o])return r(v,o+1)}}catch(g){i={error:g}}finally{try{l&&!l.done&&(u=s.return)&&u.call(s)}finally{if(i)throw i.error}}return null}(this,0)},t}(),u=function(){function t(t){this.aggFunc=t.aggFunc,this.factTable=t.factTable,this.dimensions=t.dimensions,this.measures=t.measures}return t.prototype.get=function(t){var r=this,e=r.tree,o=(r.aggFunc,r.measures);return function r(e,i){var u,f;if(i===t.length)return e.aggData(o);var s=e.children.entries();try{for(var l=a(s),h=l.next();!h.done;h=l.next()){var c=n(h.value,2),v=c[0],g=c[1];if(v===t[i])return r(g,i+1)}}catch(p){u={error:p}}finally{try{h&&!h.done&&(f=l.return)&&f.call(l)}finally{if(u)throw u.error}}return!1}(e,0)},t.prototype.getNode=function(t){return this.tree.getNode(t)},t.prototype.buildTree=function(){var t,r=new i(this.aggFunc),e=this.factTable.length;for(t=0;t<e;t++)this.insertNode(this.factTable[t],r,0);return this.tree=r,r},t.prototype.insertNode=function(t,r,e){if(r.push(t),r.cache=!1,e<this.dimensions.length){var n=t[this.dimensions[e]];r.children.has(n)||r.children.set(n,new i(this.aggFunc)),this.insertNode(t,r.children.get(n),e+1)}},t.prototype.aggTree=function(t){var r,e;void 0===t&&(t=this.tree);var n=t.children.values();try{for(var o=a(n),i=o.next();!i.done;i=o.next()){var u=i.value;this.aggTree(u)}}catch(f){r={error:f}}finally{try{i&&!i.done&&(e=o.return)&&e.call(o)}finally{if(r)throw r.error}}return t.aggData(this.measures),t},t.prototype.aggNode=function(t){var r,e;void 0===t&&(t=this.tree);var n=t.children.values();try{for(var o=a(n),i=o.next();!i.done;i=o.next()){var u=i.value;this.aggTree(u)}}catch(f){r={error:f}}finally{try{i&&!i.done&&(e=o.return)&&e.call(o)}finally{if(r)throw r.error}}return t.aggData(this.measures),t},t}();r.default=u},function(t,r,e){\\\"use strict\\\";var n=this&&this.__read||function(t,r){var e=\\\"function\\\"===typeof Symbol&&t[Symbol.iterator];if(!e)return t;var n,o,a=e.call(t),i=[];try{for(;(void 0===r||r-- >0)&&!(n=a.next()).done;)i.push(n.value)}catch(u){o={error:u}}finally{try{n&&!n.done&&(e=a.return)&&e.call(a)}finally{if(o)throw o.error}}return i},o=this&&this.__spread||function(){for(var t=[],r=0;r<arguments.length;r++)t=t.concat(n(arguments[r]));return t},a=this&&this.__values||function(t){var r=\\\"function\\\"===typeof Symbol&&Symbol.iterator,e=r&&t[r],n=0;if(e)return e.call(t);if(t&&\\\"number\\\"===typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(r?\\\"Object is not iterable.\\\":\\\"Symbol.iterator is not defined.\\\")};Object.defineProperty(r,\\\"__esModule\\\",{value:!0});var i=function(){function t(){this.children=new Map,this.rawData=[]}return t.prototype.push=function(){for(var t,r=[],e=0;e<arguments.length;e++)r[e]=arguments[e];(t=this.rawData).push.apply(t,o(r))},t.prototype.aggData=function(t,r){return void 0===r&&(r=[]),this._aggData=t(this.rawData,r),this._aggData},t.prototype.getNode=function(t){return function r(e,o){var i,u;if(o===t.length)return e;var f=e.children.entries();try{for(var s=a(f),l=s.next();!l.done;l=s.next()){var h=n(l.value,2),c=h[0],v=h[1];if(c===t[o])return r(v,o+1)}}catch(g){i={error:g}}finally{try{l&&!l.done&&(u=s.return)&&u.call(s)}finally{if(i)throw i.error}}return null}(this,0)},t}();r.Node=i;var u=function(){function t(t){this.aggFunc=t.aggFunc,this.factTable=t.factTable,this.dimensions=t.dimensions,this.measures=t.measures,this.buildTree(),this.aggTree()}return t.prototype.get=function(t){var r=this,e=r.tree,o=r.aggFunc,i=r.measures;return function r(e,u){var f,s;if(u===t.length)return e.aggData(o,i);var l=e.children.entries();try{for(var h=a(l),c=h.next();!c.done;c=h.next()){var v=n(c.value,2),g=v[0],p=v[1];if(g===t[u])return r(p,u+1)}}catch(d){f={error:d}}finally{try{c&&!c.done&&(s=h.return)&&s.call(h)}finally{if(f)throw f.error}}return!1}(e,0)},t.prototype.getNode=function(t){return this.tree.getNode(t)},t.prototype.setData=function(t){var r=t.aggFunc,e=void 0===r?this.aggFunc:r,n=t.factTable,o=void 0===n?this.factTable:n,a=t.dimensions,i=void 0===a?this.dimensions:a,u=t.measures,f=void 0===u?this.measures:u;i!==this.dimensions||o!==this.factTable?(this.dimensions=i,this.factTable=o,this.measures=f,this.aggFunc=e,this.buildTree(),this.aggTree()):f===this.measures&&e===this.aggFunc||(this.measures=f,this.aggFunc=e,this.aggTree())},t.prototype.buildTree=function(){var t,r=new i,e=this.factTable.length;for(t=0;t<e;t++)this.insertNode(this.factTable[t],r,0);return this.tree=r,r},t.prototype.insertNode=function(t,r,e){if(e===this.dimensions.length)r.push(t);else{var n=t[this.dimensions[e]];r.children.has(n)||r.children.set(n,new i),this.insertNode(t,r.children.get(n),e+1)}},t.prototype.aggTree=function(t){var r,e;if(void 0===t&&(t=this.tree),t.children.size>0){t.rawData=[];var n=t.children.values();try{for(var o=a(n),i=o.next();!i.done;i=o.next()){var u=i.value,f=void 0,s=this.aggTree(u).rawData,l=s.length;for(f=0;f<l;f++)t.rawData.push(s[f])}}catch(h){r={error:h}}finally{try{i&&!i.done&&(e=o.return)&&e.call(o)}finally{if(r)throw r.error}}}return t.aggData(this.aggFunc,this.measures),t},t}();r.default=u},function(t,r,e){\\\"use strict\\\";var n=this&&this.__assign||function(){return(n=Object.assign||function(t){for(var r,e=1,n=arguments.length;e<n;e++)for(var o in r=arguments[e])Object.prototype.hasOwnProperty.call(r,o)&&(t[o]=r[o]);return t}).apply(this,arguments)},o=this&&this.__values||function(t){var r=\\\"function\\\"===typeof Symbol&&Symbol.iterator,e=r&&t[r],n=0;if(e)return e.call(t);if(t&&\\\"number\\\"===typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(r?\\\"Object is not iterable.\\\":\\\"Symbol.iterator is not defined.\\\")},a=this&&this.__read||function(t,r){var e=\\\"function\\\"===typeof Symbol&&t[Symbol.iterator];if(!e)return t;var n,o,a=e.call(t),i=[];try{for(;(void 0===r||r-- >0)&&!(n=a.next()).done;)i.push(n.value)}catch(u){o={error:u}}finally{try{n&&!n.done&&(e=a.return)&&e.call(a)}finally{if(o)throw o.error}}return i};Object.defineProperty(r,\\\"__esModule\\\",{value:!0}),r.tree2Table=function(t){var r=t.dimensions,e=(t.measures,t.cube),i=(e.aggFunc,[]);return function t(e,u,f){var s,l,h;if(0!==e.children.size)try{for(var c=o(e.children.entries()),v=c.next();!v.done;v=c.next()){var g=a(v.value,2),p=g[0];t(g[1],n(n({},u),((h={})[r[f]]=p,h)),f+1)}}catch(m){s={error:m}}finally{try{v&&!v.done&&(l=c.return)&&l.call(c)}finally{if(s)throw s.error}}else{var d=e._aggData;i.push(n(n({},u),d))}}(e.tree,{},0),i}},function(t,r,e){var n=function(t){\\\"use strict\\\";var r,e=Object.prototype,n=e.hasOwnProperty,o=\\\"function\\\"===typeof Symbol?Symbol:{},a=o.iterator||\\\"@@iterator\\\",i=o.asyncIterator||\\\"@@asyncIterator\\\",u=o.toStringTag||\\\"@@toStringTag\\\";function f(t,r,e){return Object.defineProperty(t,r,{value:e,enumerable:!0,configurable:!0,writable:!0}),t[r]}try{f({},\\\"\\\")}catch(F){f=function(t,r,e){return t[r]=e}}function s(t,r,e,n){var o=r&&r.prototype instanceof d?r:d,a=Object.create(o.prototype),i=new D(n||[]);return a._invoke=function(t,r,e){var n=h;return function(o,a){if(n===v)throw new Error(\\\"Generator is already running\\\");if(n===g){if(\\\"throw\\\"===o)throw a;return j()}for(e.method=o,e.arg=a;;){var i=e.delegate;if(i){var u=S(i,e);if(u){if(u===p)continue;return u}}if(\\\"next\\\"===e.method)e.sent=e._sent=e.arg;else if(\\\"throw\\\"===e.method){if(n===h)throw n=g,e.arg;e.dispatchException(e.arg)}else\\\"return\\\"===e.method&&e.abrupt(\\\"return\\\",e.arg);n=v;var f=l(t,r,e);if(\\\"normal\\\"===f.type){if(n=e.done?g:c,f.arg===p)continue;return{value:f.arg,done:e.done}}\\\"throw\\\"===f.type&&(n=g,e.method=\\\"throw\\\",e.arg=f.arg)}}}(t,e,i),a}function l(t,r,e){try{return{type:\\\"normal\\\",arg:t.call(r,e)}}catch(F){return{type:\\\"throw\\\",arg:F}}}t.wrap=s;var h=\\\"suspendedStart\\\",c=\\\"suspendedYield\\\",v=\\\"executing\\\",g=\\\"completed\\\",p={};function d(){}function m(){}function y(){}var w={};w[a]=function(){return this};var b=Object.getPrototypeOf,M=b&&b(b(O([])));M&&M!==e&&n.call(M,a)&&(w=M);var x=y.prototype=d.prototype=Object.create(w);function E(t){[\\\"next\\\",\\\"throw\\\",\\\"return\\\"].forEach((function(r){f(t,r,(function(t){return this._invoke(r,t)}))}))}function _(t,r){function e(o,a,i,u){var f=l(t[o],t,a);if(\\\"throw\\\"!==f.type){var s=f.arg,h=s.value;return h&&\\\"object\\\"===typeof h&&n.call(h,\\\"__await\\\")?r.resolve(h.__await).then((function(t){e(\\\"next\\\",t,i,u)}),(function(t){e(\\\"throw\\\",t,i,u)})):r.resolve(h).then((function(t){s.value=t,i(s)}),(function(t){return e(\\\"throw\\\",t,i,u)}))}u(f.arg)}var o;this._invoke=function(t,n){function a(){return new r((function(r,o){e(t,n,r,o)}))}return o=o?o.then(a,a):a()}}function S(t,e){var n=t.iterator[e.method];if(n===r){if(e.delegate=null,\\\"throw\\\"===e.method){if(t.iterator.return&&(e.method=\\\"return\\\",e.arg=r,S(t,e),\\\"throw\\\"===e.method))return p;e.method=\\\"throw\\\",e.arg=new TypeError(\\\"The iterator does not provide a 'throw' method\\\")}return p}var o=l(n,t.iterator,e.arg);if(\\\"throw\\\"===o.type)return e.method=\\\"throw\\\",e.arg=o.arg,e.delegate=null,p;var a=o.arg;return a?a.done?(e[t.resultName]=a.value,e.next=t.nextLoc,\\\"return\\\"!==e.method&&(e.method=\\\"next\\\",e.arg=r),e.delegate=null,p):a:(e.method=\\\"throw\\\",e.arg=new TypeError(\\\"iterator result is not an object\\\"),e.delegate=null,p)}function T(t){var r={tryLoc:t[0]};1 in t&&(r.catchLoc=t[1]),2 in t&&(r.finallyLoc=t[2],r.afterLoc=t[3]),this.tryEntries.push(r)}function q(t){var r=t.completion||{};r.type=\\\"normal\\\",delete r.arg,t.completion=r}function D(t){this.tryEntries=[{tryLoc:\\\"root\\\"}],t.forEach(T,this),this.reset(!0)}function O(t){if(t){var e=t[a];if(e)return e.call(t);if(\\\"function\\\"===typeof t.next)return t;if(!isNaN(t.length)){var o=-1,i=function e(){for(;++o<t.length;)if(n.call(t,o))return e.value=t[o],e.done=!1,e;return e.value=r,e.done=!0,e};return i.next=i}}return{next:j}}function j(){return{value:r,done:!0}}return m.prototype=x.constructor=y,y.constructor=m,m.displayName=f(y,u,\\\"GeneratorFunction\\\"),t.isGeneratorFunction=function(t){var r=\\\"function\\\"===typeof t&&t.constructor;return!!r&&(r===m||\\\"GeneratorFunction\\\"===(r.displayName||r.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,y):(t.__proto__=y,f(t,u,\\\"GeneratorFunction\\\")),t.prototype=Object.create(x),t},t.awrap=function(t){return{__await:t}},E(_.prototype),_.prototype[i]=function(){return this},t.AsyncIterator=_,t.async=function(r,e,n,o,a){void 0===a&&(a=Promise);var i=new _(s(r,e,n,o),a);return t.isGeneratorFunction(e)?i:i.next().then((function(t){return t.done?t.value:i.next()}))},E(x),f(x,u,\\\"Generator\\\"),x[a]=function(){return this},x.toString=function(){return\\\"[object Generator]\\\"},t.keys=function(t){var r=[];for(var e in t)r.push(e);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=O,D.prototype={constructor:D,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=r,this.done=!1,this.delegate=null,this.method=\\\"next\\\",this.arg=r,this.tryEntries.forEach(q),!t)for(var e in this)\\\"t\\\"===e.charAt(0)&&n.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=r)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if(\\\"throw\\\"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function o(n,o){return u.type=\\\"throw\\\",u.arg=t,e.next=n,o&&(e.method=\\\"next\\\",e.arg=r),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],u=i.completion;if(\\\"root\\\"===i.tryLoc)return o(\\\"end\\\");if(i.tryLoc<=this.prev){var f=n.call(i,\\\"catchLoc\\\"),s=n.call(i,\\\"finallyLoc\\\");if(f&&s){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(f){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!s)throw new Error(\\\"try statement without catch or finally\\\");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(t,r){for(var e=this.tryEntries.length-1;e>=0;--e){var o=this.tryEntries[e];if(o.tryLoc<=this.prev&&n.call(o,\\\"finallyLoc\\\")&&this.prev<o.finallyLoc){var a=o;break}}a&&(\\\"break\\\"===t||\\\"continue\\\"===t)&&a.tryLoc<=r&&r<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=t,i.arg=r,a?(this.method=\\\"next\\\",this.next=a.finallyLoc,p):this.complete(i)},complete:function(t,r){if(\\\"throw\\\"===t.type)throw t.arg;return\\\"break\\\"===t.type||\\\"continue\\\"===t.type?this.next=t.arg:\\\"return\\\"===t.type?(this.rval=this.arg=t.arg,this.method=\\\"return\\\",this.next=\\\"end\\\"):\\\"normal\\\"===t.type&&r&&(this.next=r),p},finish:function(t){for(var r=this.tryEntries.length-1;r>=0;--r){var e=this.tryEntries[r];if(e.finallyLoc===t)return this.complete(e.completion,e.afterLoc),q(e),p}},catch:function(t){for(var r=this.tryEntries.length-1;r>=0;--r){var e=this.tryEntries[r];if(e.tryLoc===t){var n=e.completion;if(\\\"throw\\\"===n.type){var o=n.arg;q(e)}return o}}throw new Error(\\\"illegal catch attempt\\\")},delegateYield:function(t,e,n){return this.delegate={iterator:O(t),resultName:e,nextLoc:n},\\\"next\\\"===this.method&&(this.arg=r),p}},t}(t.exports);try{regeneratorRuntime=n}catch(o){Function(\\\"r\\\",\\\"regeneratorRuntime = r\\\")(n)}},function(t,r,e){\\\"use strict\\\";e.r(r);var n={};function o(t,r){(null==r||r>t.length)&&(r=t.length);for(var e=0,n=new Array(r);e<r;e++)n[e]=t[e];return n}function a(t,r){if(t){if(\\\"string\\\"===typeof t)return o(t,r);var e=Object.prototype.toString.call(t).slice(8,-1);return\\\"Object\\\"===e&&t.constructor&&(e=t.constructor.name),\\\"Map\\\"===e||\\\"Set\\\"===e?Array.from(t):\\\"Arguments\\\"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?o(t,r):void 0}}function i(t){return function(t){if(Array.isArray(t))return o(t)}(t)||function(t){if(\\\"undefined\\\"!==typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||a(t)||function(){throw new TypeError(\\\"Invalid attempt to spread non-iterable instance.\\\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\\\")}()}function u(t,r){var e;if(\\\"undefined\\\"===typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(e=a(t))||r&&t&&\\\"number\\\"===typeof t.length){e&&(t=e);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError(\\\"Invalid attempt to iterate non-iterable instance.\\\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\\\")}var i,u=!0,f=!1;return{s:function(){e=t[Symbol.iterator]()},n:function(){var t=e.next();return u=t.done,t},e:function(t){f=!0,i=t},f:function(){try{u||null==e.return||e.return()}finally{if(f)throw i}}}}e.r(n),e.d(n,\\\"kruskal\\\",(function(){return p})),e.d(n,\\\"kruskalWithFullMST\\\",(function(){return g}));var f=e(2);f.sum,f.max,f.mean,f.min;function s(t){for(var r=[],e=0;e<t.length;e++)for(var n=e+1;n<t[e].length;n++)r.push([[e,n],Math.abs(t[e][n])]);return r}function l(t,r){return t[r]===r?r:t[r]=l(t,t[r])}function h(t,r,e){var n=l(t,r),o=l(t,e);t[n]=o,l(t,r),l(t,e)}function c(t,r,e){return t[e]===e?e:(t[e]=c(t,r,t[e]),r[e]=r[t[e]],t[e])}function v(t,r,e,n){var o=c(t,r,e),a=c(t,r,n),i=r[o],u=r[a];t[o]=a,r[o]=r[a]=i+u,c(t,r,e),c(t,r,n)}function g(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:4,e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=s(t);n.sort((function(t,r){return r[1]-t[1]}));var o,a=[],f=t.map((function(t,r){return r})),c=i(f),v=!1,g=u(n);try{for(g.s();!(o=g.n()).done;){var p=o.value;l(f,p[0][0])!==l(f,p[0][1])&&(h(f,p[0][0],p[0][1]),a.push([p[0],p[1],v]));for(var d=0;d<f.length;d++)f[d]=l(f,d);var m=new Set(f);if(m.size<=r||p[1]<e?v=!0:c=i(f),1===m.size)break}}catch(y){g.e(y)}finally{g.f()}return{edgesInMST:a,groups:c}}var p=function(t){var r,e=t.matrix,n=t.measures,o=(t.method,t.groupMaxSize),a=void 0===o?4:o,i=t.limitSize,f=void 0!==i&&i,g=t.threshold,p=void 0===g?0:g;r=f?function(t,r){var e=s(t);e.sort((function(t,r){return r[1]-t[1]}));var n,o=t.map((function(t,r){return r})),a=t.map((function(){return 1})),i=u(e);try{for(i.s();!(n=i.n()).done;){var f=n.value;if(c(o,a,f[0][0])!==c(o,a,f[0][1])){if(a[f[0][0]]+a[f[0][1]]>r)continue;v(o,a,f[0][0],f[0][1])}for(var l=0;l<o.length;l++)o[l]=c(o,a,l);if(1===new Set(o).size)break}}catch(p){i.e(p)}finally{i.f()}for(var h=new Map,g=0;g<o.length;g++)h.has(o[g])||h.set(o[g],[]),h.get(o[g]).push(g);return h}(e,a):function(t,r){var e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=s(t);n.sort((function(t,r){return r[1]-t[1]}));var o,a=t.map((function(t,r){return r})),i=u(n);try{for(i.s();!(o=i.n()).done;){var f=o.value;l(a,f[0][0])!==l(a,f[0][1])&&h(a,f[0][0],f[0][1]);for(var c=0;c<a.length;c++)a[c]=l(a,c);if(new Set(a).size<=r||f[1]<e)break}}catch(p){i.e(p)}finally{i.f()}for(var v=new Map,g=0;g<a.length;g++)v.has(a[g])||v.set(a[g],[]),v.get(a[g]).push(g);return v}(e,a,p);var d,m=[],y=u(r.values());try{for(y.s();!(d=y.n()).done;){var w=d.value;m.push(w.map((function(t){return n[t]})))}}catch(b){y.e(b)}finally{y.f()}return m};e(1);e(0);var d;!function(t){t.outlier=\\\"default_outlier\\\",t.cluster=\\\"default_group\\\",t.trend=\\\"default_trend\\\"}(d||(d={}));var m;!function(t){t.outlier=\\\"default_outlier\\\",t.trend=\\\"default_trend\\\"}(m||(m={}));function y(t){let r=0,e=t.length;for(let n=0;n<e;n++)r+=t[n];return r}var w;self.addEventListener(\\\"message\\\",(w=t=>{try{const{spaces:r,maxGroupNumber:e}=t.data;let o=[];for(let t of r){const{edgesInMST:r,groups:a}=n.kruskalWithFullMST(t.matrix,e,.5);let i=new Map;for(let e=0;e<a.length;e++)i.has(a[e])||i.set(a[e],[]),i.get(a[e]).push(t.measures[e]);for(let e of i.values())o.push({dimensions:t.dimensions,measures:e.map((t=>t.name)),score:y(e.map((t=>t.value)))})}o.sort(((t,r)=>t.score-r.score)),self.postMessage({success:!0,data:o})}catch(r){self.postMessage({success:!1,message:r.toString()})}},function(t){var r=(new Date).getTime();try{w(t)}finally{var e=(new Date).getTime()-r;console.log(\\\"Task [\\\".concat(w.name,\\\"] cost \\\").concat(e,\\\" ms.\\\"))}}),!1)}]);\\n//# sourceMappingURL=cluster.worker.57bceacd.worker.js.map\", \"Worker\", undefined, __webpack_public_path__ + \"static/js/cluster.worker.57bceacd.worker.js\");\n}\n","\nimport worker from \"!!../../../../node_modules/worker-loader/dist/runtime/inline.js\";\n\nexport default function Worker_fn() {\n  return worker(\"!function(t){var e={};function r(n){if(e[n])return e[n].exports;var a=e[n]={i:n,l:!1,exports:{}};return t[n].call(a.exports,a,a.exports,r),a.l=!0,a.exports}r.m=t,r.c=e,r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},r.r=function(t){\\\"undefined\\\"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:\\\"Module\\\"}),Object.defineProperty(t,\\\"__esModule\\\",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&\\\"object\\\"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,\\\"default\\\",{enumerable:!0,value:t}),2&e&&\\\"string\\\"!=typeof t)for(var a in t)r.d(n,a,function(e){return t[e]}.bind(null,a));return n},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,\\\"a\\\",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p=\\\"./\\\",r(r.s=9)}([function(t,e,r){t.exports=r(8)},function(t,e,r){\\\"use strict\\\";this&&this.__assign;Object.defineProperty(e,\\\"__esModule\\\",{value:!0});var n=r(4),a=r(7),i=r(3),o={sum:i.sum_unsafe,mean:i.mean,count:i.count};function u(t){var e=t.type,r=t.aggFunc,a=void 0===r?i.count:r,o=t.factTable,u=void 0===o?[]:o,s=t.dimensions,c=void 0===s?[]:s,f=t.measures,h=void 0===f?[]:f;switch(e){case\\\"period\\\":return new n.periodCube({aggFunc:a,factTable:u,dimensions:c,measures:h});case\\\"moment\\\":default:return new n.momentCube({aggFunc:a,factTable:u,dimensions:c,measures:h})}}e.createCube=u,e.default=function(t){var e=t.dimensions,r=t.measures,n=t.asFields,s=t.operator,c=t.dataSource,f=u({type:\\\"moment\\\",aggFunc:o[s]||i.count,dimensions:e,measures:r,factTable:c}),h=a.tree2Table({dimensions:e,measures:r,cube:f});return h.forEach((function(t){n.forEach((function(e,n){t[e]=t[r[n]]}))})),h},function(t){for(var r in t)e.hasOwnProperty(r)||(e[r]=t[r])}(r(3))},function(t,e,r){!function(t){\\\"use strict\\\";function e(t){if(0===t.length)return 0;for(var e,r=t[0],n=0,a=1;a<t.length;a++)e=r+t[a],Math.abs(r)>=Math.abs(t[a])?n+=r-e+t[a]:n+=t[a]-e+r,r=e;return r+n}function r(t){if(0===t.length)throw new Error(\\\"mean requires at least one data point\\\");return e(t)/t.length}function n(t,e){var n,a,i=r(t),o=0;if(2===e)for(a=0;a<t.length;a++)o+=(n=t[a]-i)*n;else for(a=0;a<t.length;a++)o+=Math.pow(t[a]-i,e);return o}function a(t){if(0===t.length)throw new Error(\\\"variance requires at least one data point\\\");return n(t,2)/t.length}function i(t){if(1===t.length)return 0;var e=a(t);return Math.sqrt(e)}function o(t){if(0===t.length)throw new Error(\\\"mode requires at least one data point\\\");if(1===t.length)return t[0];for(var e=t[0],r=NaN,n=0,a=1,i=1;i<t.length+1;i++)t[i]!==e?(a>n&&(n=a,r=e),a=1,e=t[i]):a++;return r}function u(t){return t.slice().sort((function(t,e){return t-e}))}function s(t){if(0===t.length)throw new Error(\\\"min requires at least one data point\\\");for(var e=t[0],r=1;r<t.length;r++)t[r]<e&&(e=t[r]);return e}function c(t){if(0===t.length)throw new Error(\\\"max requires at least one data point\\\");for(var e=t[0],r=1;r<t.length;r++)t[r]>e&&(e=t[r]);return e}function f(t){for(var e=0,r=0;r<t.length;r++)e+=t[r];return e}function h(t,e){var r=t.length*e;if(0===t.length)throw new Error(\\\"quantile requires at least one data point.\\\");if(e<0||e>1)throw new Error(\\\"quantiles must be between 0 and 1\\\");return 1===e?t[t.length-1]:0===e?t[0]:r%1!=0?t[Math.ceil(r)-1]:t.length%2==0?(t[r-1]+t[r])/2:t[r]}function l(t,e,r,n){for(r=r||0,n=n||t.length-1;n>r;){if(n-r>600){var a=n-r+1,i=e-r+1,o=Math.log(a),u=.5*Math.exp(2*o/3),s=.5*Math.sqrt(o*u*(a-u)/a);i-a/2<0&&(s*=-1),l(t,e,Math.max(r,Math.floor(e-i*u/a+s)),Math.min(n,Math.floor(e+(a-i)*u/a+s)))}var c=t[e],f=r,h=n;for(v(t,r,e),t[n]>c&&v(t,r,n);f<h;){for(v(t,f,h),f++,h--;t[f]<c;)f++;for(;t[h]>c;)h--}t[r]===c?v(t,r,h):v(t,++h,n),h<=e&&(r=h+1),e<=h&&(n=h-1)}}function v(t,e,r){var n=t[e];t[e]=t[r],t[r]=n}function p(t,e){var r=t.slice();if(Array.isArray(e)){!function(t,e){for(var r=[0],n=0;n<e.length;n++)r.push(g(t.length,e[n]));r.push(t.length-1),r.sort(m);for(var a=[0,r.length-1];a.length;){var i=Math.ceil(a.pop()),o=Math.floor(a.pop());if(!(i-o<=1)){var u=Math.floor((o+i)/2);d(t,r[u],Math.floor(r[o]),Math.ceil(r[i])),a.push(o,u,u,i)}}}(r,e);for(var n=[],a=0;a<e.length;a++)n[a]=h(r,e[a]);return n}return d(r,g(r.length,e),0,r.length-1),h(r,e)}function d(t,e,r,n){e%1==0?l(t,e,r,n):(l(t,e=Math.floor(e),r,n),l(t,e+1,e+1,n))}function m(t,e){return t-e}function g(t,e){var r=t*e;return 1===e?t-1:0===e?0:r%1!=0?Math.ceil(r)-1:t%2==0?r-.5:r}function y(t,e){if(e<t[0])return 0;if(e>t[t.length-1])return 1;var r=function(t,e){for(var r=0,n=0,a=t.length;n<a;)e<=t[r=n+a>>>1]?a=r:n=-~r;return n}(t,e);if(t[r]!==e)return r/t.length;r++;var n=function(t,e){for(var r=0,n=0,a=t.length;n<a;)e>=t[r=n+a>>>1]?n=-~r:a=r;return n}(t,e);if(n===r)return r/t.length;var a=n-r+1;return a*(n+r)/2/a/t.length}function w(t){var e=p(t,.75),r=p(t,.25);if(\\\"number\\\"==typeof e&&\\\"number\\\"==typeof r)return e-r}function b(t){return+p(t,.5)}function M(t){for(var e=b(t),r=[],n=0;n<t.length;n++)r.push(Math.abs(t[n]-e));return b(r)}function S(t,e){e=e||Math.random;for(var r,n,a=t.length;a>0;)n=Math.floor(e()*a--),r=t[a],t[a]=t[n],t[n]=r;return t}function E(t,e){return S(t.slice(),e)}function k(t,e,r){return E(t,r).slice(0,e)}function x(t,e){for(var r=[],n=0;n<t;n++){for(var a=[],i=0;i<e;i++)a.push(0);r.push(a)}return r}function _(t){for(var e,r=0,n=0;n<t.length;n++)0!==n&&t[n]===e||(e=t[n],r++);return r}function D(t,e,r,n){var a;if(t>0){var i=(r[e]-r[t-1])/(e-t+1);a=n[e]-n[t-1]-(e-t+1)*i*i}else a=n[e]-r[e]*r[e]/(e+1);return a<0?0:a}function T(t,e,r,n,a,i,o){if(!(t>e)){var u=Math.floor((t+e)/2);n[r][u]=n[r-1][u-1],a[r][u]=u;var s=r;t>r&&(s=Math.max(s,a[r][t-1]||0)),s=Math.max(s,a[r-1][u]||0);var c,f,h,l=u-1;e<n[0].length-1&&(l=Math.min(l,a[r][e+1]||0));for(var v=l;v>=s&&!((c=D(v,u,i,o))+n[r-1][s-1]>=n[r][u]);--v)(f=D(s,u,i,o)+n[r-1][s-1])<n[r][u]&&(n[r][u]=f,a[r][u]=s),s++,(h=c+n[r-1][v-1])<n[r][u]&&(n[r][u]=h,a[r][u]=v);T(t,u-1,r,n,a,i,o),T(u+1,e,r,n,a,i,o)}}function O(t,e){if(t.length!==e.length)throw new Error(\\\"sampleCovariance requires samples with equal lengths\\\");if(t.length<2)throw new Error(\\\"sampleCovariance requires at least two data points in each sample\\\");for(var n=r(t),a=r(e),i=0,o=0;o<t.length;o++)i+=(t[o]-n)*(e[o]-a);return i/(t.length-1)}function I(t){if(t.length<2)throw new Error(\\\"sampleVariance requires at least two data points\\\");return n(t,2)/(t.length-1)}function z(t){var e=I(t);return Math.sqrt(e)}function N(t,e,r,n){return(t*e+r*n)/(e+n)}function j(t){if(0===t.length)throw new Error(\\\"meanSimple requires at least one data point\\\");return f(t)/t.length}function P(t){if(0===t.length)throw new Error(\\\"rootMeanSquare requires at least one data point\\\");for(var e=0,r=0;r<t.length;r++)e+=Math.pow(t[r],2);return Math.sqrt(e/t.length)}var q=function(){this.totalCount=0,this.data={}};q.prototype.train=function(t,e){for(var r in this.data[e]||(this.data[e]={}),t){var n=t[r];void 0===this.data[e][r]&&(this.data[e][r]={}),void 0===this.data[e][r][n]&&(this.data[e][r][n]=0),this.data[e][r][n]++}this.totalCount++},q.prototype.score=function(t){var e,r={};for(var n in t){var a=t[n];for(e in this.data)r[e]={},this.data[e][n]?r[e][n+\\\"_\\\"+a]=(this.data[e][n][a]||0)/this.totalCount:r[e][n+\\\"_\\\"+a]=0}var i={};for(e in r)for(var o in i[e]=0,r[e])i[e]+=r[e][o];return i};var F=function(){this.weights=[],this.bias=0};F.prototype.predict=function(t){if(t.length!==this.weights.length)return null;for(var e=0,r=0;r<this.weights.length;r++)e+=this.weights[r]*t[r];return(e+=this.bias)>0?1:0},F.prototype.train=function(t,e){if(0!==e&&1!==e)return null;t.length!==this.weights.length&&(this.weights=t,this.bias=1);var r=this.predict(t);if(\\\"number\\\"==typeof r&&r!==e){for(var n=e-r,a=0;a<this.weights.length;a++)this.weights[a]+=n*t[a];this.bias+=n}return this};var C=1e-4;function L(t){if(t<0)throw new Error(\\\"factorial requires a non-negative value\\\");if(Math.floor(t)!==t)throw new Error(\\\"factorial requires an integer input\\\");for(var e=1,r=2;r<=t;r++)e*=r;return e}var R=[.9999999999999971,57.15623566586292,-59.59796035547549,14.136097974741746,-.4919138160976202,3399464998481189e-20,4652362892704858e-20,-9837447530487956e-20,.0001580887032249125,-.00021026444172410488,.00021743961811521265,-.0001643181065367639,8441822398385275e-20,-26190838401581408e-21,36899182659531625e-22],A=Math.log(Math.sqrt(2*Math.PI)),G={1:{.995:0,.99:0,.975:0,.95:0,.9:.02,.5:.45,.1:2.71,.05:3.84,.025:5.02,.01:6.63,.005:7.88},2:{.995:.01,.99:.02,.975:.05,.95:.1,.9:.21,.5:1.39,.1:4.61,.05:5.99,.025:7.38,.01:9.21,.005:10.6},3:{.995:.07,.99:.11,.975:.22,.95:.35,.9:.58,.5:2.37,.1:6.25,.05:7.81,.025:9.35,.01:11.34,.005:12.84},4:{.995:.21,.99:.3,.975:.48,.95:.71,.9:1.06,.5:3.36,.1:7.78,.05:9.49,.025:11.14,.01:13.28,.005:14.86},5:{.995:.41,.99:.55,.975:.83,.95:1.15,.9:1.61,.5:4.35,.1:9.24,.05:11.07,.025:12.83,.01:15.09,.005:16.75},6:{.995:.68,.99:.87,.975:1.24,.95:1.64,.9:2.2,.5:5.35,.1:10.65,.05:12.59,.025:14.45,.01:16.81,.005:18.55},7:{.995:.99,.99:1.25,.975:1.69,.95:2.17,.9:2.83,.5:6.35,.1:12.02,.05:14.07,.025:16.01,.01:18.48,.005:20.28},8:{.995:1.34,.99:1.65,.975:2.18,.95:2.73,.9:3.49,.5:7.34,.1:13.36,.05:15.51,.025:17.53,.01:20.09,.005:21.96},9:{.995:1.73,.99:2.09,.975:2.7,.95:3.33,.9:4.17,.5:8.34,.1:14.68,.05:16.92,.025:19.02,.01:21.67,.005:23.59},10:{.995:2.16,.99:2.56,.975:3.25,.95:3.94,.9:4.87,.5:9.34,.1:15.99,.05:18.31,.025:20.48,.01:23.21,.005:25.19},11:{.995:2.6,.99:3.05,.975:3.82,.95:4.57,.9:5.58,.5:10.34,.1:17.28,.05:19.68,.025:21.92,.01:24.72,.005:26.76},12:{.995:3.07,.99:3.57,.975:4.4,.95:5.23,.9:6.3,.5:11.34,.1:18.55,.05:21.03,.025:23.34,.01:26.22,.005:28.3},13:{.995:3.57,.99:4.11,.975:5.01,.95:5.89,.9:7.04,.5:12.34,.1:19.81,.05:22.36,.025:24.74,.01:27.69,.005:29.82},14:{.995:4.07,.99:4.66,.975:5.63,.95:6.57,.9:7.79,.5:13.34,.1:21.06,.05:23.68,.025:26.12,.01:29.14,.005:31.32},15:{.995:4.6,.99:5.23,.975:6.27,.95:7.26,.9:8.55,.5:14.34,.1:22.31,.05:25,.025:27.49,.01:30.58,.005:32.8},16:{.995:5.14,.99:5.81,.975:6.91,.95:7.96,.9:9.31,.5:15.34,.1:23.54,.05:26.3,.025:28.85,.01:32,.005:34.27},17:{.995:5.7,.99:6.41,.975:7.56,.95:8.67,.9:10.09,.5:16.34,.1:24.77,.05:27.59,.025:30.19,.01:33.41,.005:35.72},18:{.995:6.26,.99:7.01,.975:8.23,.95:9.39,.9:10.87,.5:17.34,.1:25.99,.05:28.87,.025:31.53,.01:34.81,.005:37.16},19:{.995:6.84,.99:7.63,.975:8.91,.95:10.12,.9:11.65,.5:18.34,.1:27.2,.05:30.14,.025:32.85,.01:36.19,.005:38.58},20:{.995:7.43,.99:8.26,.975:9.59,.95:10.85,.9:12.44,.5:19.34,.1:28.41,.05:31.41,.025:34.17,.01:37.57,.005:40},21:{.995:8.03,.99:8.9,.975:10.28,.95:11.59,.9:13.24,.5:20.34,.1:29.62,.05:32.67,.025:35.48,.01:38.93,.005:41.4},22:{.995:8.64,.99:9.54,.975:10.98,.95:12.34,.9:14.04,.5:21.34,.1:30.81,.05:33.92,.025:36.78,.01:40.29,.005:42.8},23:{.995:9.26,.99:10.2,.975:11.69,.95:13.09,.9:14.85,.5:22.34,.1:32.01,.05:35.17,.025:38.08,.01:41.64,.005:44.18},24:{.995:9.89,.99:10.86,.975:12.4,.95:13.85,.9:15.66,.5:23.34,.1:33.2,.05:36.42,.025:39.36,.01:42.98,.005:45.56},25:{.995:10.52,.99:11.52,.975:13.12,.95:14.61,.9:16.47,.5:24.34,.1:34.28,.05:37.65,.025:40.65,.01:44.31,.005:46.93},26:{.995:11.16,.99:12.2,.975:13.84,.95:15.38,.9:17.29,.5:25.34,.1:35.56,.05:38.89,.025:41.92,.01:45.64,.005:48.29},27:{.995:11.81,.99:12.88,.975:14.57,.95:16.15,.9:18.11,.5:26.34,.1:36.74,.05:40.11,.025:43.19,.01:46.96,.005:49.65},28:{.995:12.46,.99:13.57,.975:15.31,.95:16.93,.9:18.94,.5:27.34,.1:37.92,.05:41.34,.025:44.46,.01:48.28,.005:50.99},29:{.995:13.12,.99:14.26,.975:16.05,.95:17.71,.9:19.77,.5:28.34,.1:39.09,.05:42.56,.025:45.72,.01:49.59,.005:52.34},30:{.995:13.79,.99:14.95,.975:16.79,.95:18.49,.9:20.6,.5:29.34,.1:40.26,.05:43.77,.025:46.98,.01:50.89,.005:53.67},40:{.995:20.71,.99:22.16,.975:24.43,.95:26.51,.9:29.05,.5:39.34,.1:51.81,.05:55.76,.025:59.34,.01:63.69,.005:66.77},50:{.995:27.99,.99:29.71,.975:32.36,.95:34.76,.9:37.69,.5:49.33,.1:63.17,.05:67.5,.025:71.42,.01:76.15,.005:79.49},60:{.995:35.53,.99:37.48,.975:40.48,.95:43.19,.9:46.46,.5:59.33,.1:74.4,.05:79.08,.025:83.3,.01:88.38,.005:91.95},70:{.995:43.28,.99:45.44,.975:48.76,.95:51.74,.9:55.33,.5:69.33,.1:85.53,.05:90.53,.025:95.02,.01:100.42,.005:104.22},80:{.995:51.17,.99:53.54,.975:57.15,.95:60.39,.9:64.28,.5:79.33,.1:96.58,.05:101.88,.025:106.63,.01:112.33,.005:116.32},90:{.995:59.2,.99:61.75,.975:65.65,.95:69.13,.9:73.29,.5:89.33,.1:107.57,.05:113.14,.025:118.14,.01:124.12,.005:128.3},100:{.995:67.33,.99:70.06,.975:74.22,.95:77.93,.9:82.36,.5:99.33,.1:118.5,.05:124.34,.025:129.56,.01:135.81,.005:140.17}},V=Math.sqrt(2*Math.PI),U={gaussian:function(t){return Math.exp(-.5*t*t)/V}},W={nrd:function(t){var e=z(t),r=w(t);return\\\"number\\\"==typeof r&&(e=Math.min(e,r/1.34)),1.06*e*Math.pow(t.length,-.2)}};function X(t,e,r){var n,a;if(void 0===e)n=U.gaussian;else if(\\\"string\\\"==typeof e){if(!U[e])throw new Error('Unknown kernel \\\"'+e+'\\\"');n=U[e]}else n=e;if(void 0===r)a=W.nrd(t);else if(\\\"string\\\"==typeof r){if(!W[r])throw new Error('Unknown bandwidth method \\\"'+r+'\\\"');a=W[r](t)}else a=r;return function(e){var r=0,i=0;for(r=0;r<t.length;r++)i+=n((e-t[r])/a);return i/a/t.length}}var H=Math.sqrt(2*Math.PI);function K(t){for(var e=t,r=t,n=1;n<15;n++)e+=r*=t*t/(2*n+1);return Math.round(1e4*(.5+e/H*Math.exp(-t*t/2)))/1e4}for(var Y=[],B=0;B<=3.09;B+=.01)Y.push(K(B));function $(t){var e=1/(1+.5*Math.abs(t)),r=e*Math.exp(-t*t+((((((((.17087277*e-.82215223)*e+1.48851587)*e-1.13520398)*e+.27886807)*e-.18628806)*e+.09678418)*e+.37409196)*e+1.00002368)*e-1.26551223);return t>=0?1-r:r-1}function J(t){var e=8*(Math.PI-3)/(3*Math.PI*(4-Math.PI)),r=Math.sqrt(Math.sqrt(Math.pow(2/(Math.PI*e)+Math.log(1-t*t)/2,2)-Math.log(1-t*t)/e)-(2/(Math.PI*e)+Math.log(1-t*t)/2));return t>=0?r:-r}function Q(t){if(\\\"number\\\"==typeof t)return t<0?-1:0===t?0:1;throw new TypeError(\\\"not a number\\\")}function Z(t,e){for(var r=0,n=0;n<t.length;n++){var a=t[n]-e[n];r+=a*a}return Math.sqrt(r)}function tt(t,e){return t.map((function(t){for(var r=Number.MAX_VALUE,n=-1,a=0;a<e.length;a++){var i=Z(t,e[a]);i<r&&(r=i,n=a)}return n}))}function et(t,e,r){for(var n=t[0].length,a=x(r,n),i=Array(r).fill(0),o=t.length,u=0;u<o;u++){for(var s=t[u],c=e[u],f=a[c],h=0;h<n;h++)f[h]+=s[h];i[c]+=1}for(var l=0;l<r;l++){if(0===i[l])throw new Error(\\\"Centroid \\\"+l+\\\" has no friends\\\");for(var v=a[l],p=0;p<n;p++)v[p]/=i[l]}return a}function rt(t,e){for(var r=0,n=0;n<t.length;n++)r+=Z(t[n],e[n]);return r}function nt(t,e){if(t.length!==e.length)throw new Error(\\\"must have exactly as many labels as points\\\");for(var r=function(t){for(var e=1+c(t),r=Array(e),n=0;n<t.length;n++){var a=t[n];void 0===r[a]&&(r[a]=[]),r[a].push(n)}return r}(e),n=function(t){for(var e=t.length,r=x(e,e),n=0;n<e;n++)for(var a=0;a<n;a++)r[n][a]=Z(t[n],t[a]),r[a][n]=r[n][a];return r}(t),a=[],i=0;i<t.length;i++){var o=0;if(r[e[i]].length>1){var u=it(i,r[e[i]],n),s=at(i,e,r,n);o=(s-u)/Math.max(u,s)}a.push(o)}return a}function at(t,e,r,n){for(var a=e[t],i=Number.MAX_VALUE,o=0;o<r.length;o++)if(o!==a){var u=it(t,r[o],n);u<i&&(i=u)}return i}function it(t,e,r){for(var n=0,a=0;a<e.length;a++)n+=r[t][e[a]];return n/e.length}function ot(t,e){return 0===t&&0===e?0:Math.abs((t-e)/e)}t.BayesianClassifier=q,t.PerceptronModel=F,t.addToMean=function(t,e,r){return t+(r-t)/(e+1)},t.approxEqual=function(t,e,r){return void 0===r&&(r=C),ot(t,e)<=r},t.average=r,t.averageSimple=j,t.bayesian=q,t.bernoulliDistribution=function(t){if(t<0||t>1)throw new Error(\\\"bernoulliDistribution requires probability to be between 0 and 1 inclusive\\\");return[1-t,t]},t.binomialDistribution=function(t,e){if(!(e<0||e>1||t<=0||t%1!=0)){var r=0,n=0,a=[],i=1;do{a[r]=i*Math.pow(e,r)*Math.pow(1-e,t-r),n+=a[r],i=i*(t-++r+1)/r}while(n<.9999);return a}},t.bisect=function(t,e,r,n,a){if(\\\"function\\\"!=typeof t)throw new TypeError(\\\"func must be a function\\\");for(var i=0;i<n;i++){var o=(e+r)/2;if(0===t(o)||Math.abs((r-e)/2)<a)return o;Q(t(o))===Q(t(e))?e=o:r=o}throw new Error(\\\"maximum number of iterations exceeded\\\")},t.chiSquaredDistributionTable=G,t.chiSquaredGoodnessOfFit=function(t,e,n){for(var a=0,i=e(r(t)),o=[],u=[],s=0;s<t.length;s++)void 0===o[t[s]]&&(o[t[s]]=0),o[t[s]]++;for(var c=0;c<o.length;c++)void 0===o[c]&&(o[c]=0);for(var f in i)f in o&&(u[+f]=i[f]*t.length);for(var h=u.length-1;h>=0;h--)u[h]<3&&(u[h-1]+=u[h],u.pop(),o[h-1]+=o[h],o.pop());for(var l=0;l<o.length;l++)a+=Math.pow(o[l]-u[l],2)/u[l];var v=o.length-1-1;return G[v][n]<a},t.chunk=function(t,e){var r=[];if(e<1)throw new Error(\\\"chunk size must be a positive number\\\");if(Math.floor(e)!==e)throw new Error(\\\"chunk size must be an integer\\\");for(var n=0;n<t.length;n+=e)r.push(t.slice(n,n+e));return r},t.ckmeans=function(t,e){if(e>t.length)throw new Error(\\\"cannot generate more classes than there are data values\\\");var r=u(t);if(1===_(r))return[r];var n=x(e,r.length),a=x(e,r.length);!function(t,e,r){for(var n=e[0].length,a=t[Math.floor(n/2)],i=[],o=[],u=0,s=void 0;u<n;++u)s=t[u]-a,0===u?(i.push(s),o.push(s*s)):(i.push(i[u-1]+s),o.push(o[u-1]+s*s)),e[0][u]=D(0,u,i,o),r[0][u]=0;for(var c=1;c<e.length;++c)T(c<e.length-1?c:n-1,n-1,c,e,r,i,o)}(r,n,a);for(var i=[],o=a[0].length-1,s=a.length-1;s>=0;s--){var c=a[s][o];i[s]=r.slice(c,o+1),s>0&&(o=c-1)}return i},t.combinations=function t(e,r){var n,a,i,o,u=[];for(n=0;n<e.length;n++)if(1===r)u.push([e[n]]);else for(i=t(e.slice(n+1,e.length),r-1),a=0;a<i.length;a++)(o=i[a]).unshift(e[n]),u.push(o);return u},t.combinationsReplacement=function t(e,r){for(var n=[],a=0;a<e.length;a++)if(1===r)n.push([e[a]]);else for(var i=t(e.slice(a,e.length),r-1),o=0;o<i.length;o++)n.push([e[a]].concat(i[o]));return n},t.combineMeans=N,t.combineVariances=function(t,e,r,n,a,i){var o=N(e,r,a,i);return(r*(t+Math.pow(e-o,2))+i*(n+Math.pow(a-o,2)))/(r+i)},t.cumulativeStdNormalProbability=function(t){var e=Math.abs(t),r=Math.min(Math.round(100*e),Y.length-1);return t>=0?Y[r]:+(1-Y[r]).toFixed(4)},t.epsilon=C,t.equalIntervalBreaks=function(t,e){if(t.length<2)return t;for(var r=s(t),n=c(t),a=[r],i=(n-r)/e,o=1;o<e;o++)a.push(a[0]+i*o);return a.push(n),a},t.erf=$,t.errorFunction=$,t.extent=function(t){if(0===t.length)throw new Error(\\\"extent requires at least one data point\\\");for(var e=t[0],r=t[0],n=1;n<t.length;n++)t[n]>r&&(r=t[n]),t[n]<e&&(e=t[n]);return[e,r]},t.extentSorted=function(t){return[t[0],t[t.length-1]]},t.factorial=L,t.gamma=function t(e){if(Number.isInteger(e))return e<=0?NaN:L(e-1);if(--e<0)return Math.PI/(Math.sin(Math.PI*-e)*t(-e));var r=e+1/4;return Math.pow(e/Math.E,e)*Math.sqrt(2*Math.PI*(e+1/6))*(1+1/144/Math.pow(r,2)-1/12960/Math.pow(r,3)-257/207360/Math.pow(r,4)-52/2612736/Math.pow(r,5)+5741173/9405849600/Math.pow(r,6)+37529/18811699200/Math.pow(r,7))},t.gammaln=function(t){if(t<=0)return 1/0;t--;for(var e=R[0],r=1;r<15;r++)e+=R[r]/(t+r);var n=5.2421875+t;return A+Math.log(e)-n+(t+.5)*Math.log(n)},t.geometricMean=function(t){if(0===t.length)throw new Error(\\\"geometricMean requires at least one data point\\\");for(var e=1,r=0;r<t.length;r++){if(t[r]<=0)throw new Error(\\\"geometricMean requires only positive numbers as input\\\");e*=t[r]}return Math.pow(e,1/t.length)},t.harmonicMean=function(t){if(0===t.length)throw new Error(\\\"harmonicMean requires at least one data point\\\");for(var e=0,r=0;r<t.length;r++){if(t[r]<=0)throw new Error(\\\"harmonicMean requires only positive numbers as input\\\");e+=1/t[r]}return t.length/e},t.interquartileRange=w,t.inverseErrorFunction=J,t.iqr=w,t.kMeansCluster=function(t,e,r){void 0===r&&(r=Math.random);for(var n=null,a=k(t,e,r),i=null,o=Number.MAX_VALUE;0!==o;)n=a,o=rt(a=et(t,i=tt(t,a),e),n);return{labels:i,centroids:a}},t.kde=X,t.kernelDensityEstimation=X,t.linearRegression=function(t){var e,r,n=t.length;if(1===n)e=0,r=t[0][1];else{for(var a,i,o,u=0,s=0,c=0,f=0,h=0;h<n;h++)u+=i=(a=t[h])[0],s+=o=a[1],c+=i*i,f+=i*o;r=s/n-(e=(n*f-u*s)/(n*c-u*u))*u/n}return{m:e,b:r}},t.linearRegressionLine=function(t){return function(e){return t.b+t.m*e}},t.mad=M,t.max=c,t.maxSorted=function(t){return t[t.length-1]},t.mean=r,t.meanSimple=j,t.median=b,t.medianAbsoluteDeviation=M,t.medianSorted=function(t){return h(t,.5)},t.min=s,t.minSorted=function(t){return t[0]},t.mode=function(t){return o(u(t))},t.modeFast=function(t){for(var e,r=new Map,n=0,a=0;a<t.length;a++){var i=r.get(t[a]);void 0===i?i=1:i++,i>n&&(e=t[a],n=i),r.set(t[a],i)}if(0===n)throw new Error(\\\"mode requires at last one data point\\\");return e},t.modeSorted=o,t.numericSort=u,t.perceptron=F,t.permutationTest=function(t,e,n,a,i){if(void 0===a&&(a=1e4),void 0===n&&(n=\\\"two_side\\\"),\\\"two_side\\\"!==n&&\\\"greater\\\"!==n&&\\\"less\\\"!==n)throw new Error(\\\"`alternative` must be either 'two_side', 'greater', or 'less'\\\");for(var o=r(t)-r(e),u=new Array(a),s=t.concat(e),c=Math.floor(s.length/2),f=0;f<a;f++){S(s,i);var h=s.slice(0,c),l=s.slice(c,s.length),v=r(h)-r(l);u[f]=v}var p=0;if(\\\"two_side\\\"===n)for(var d=0;d<=a;d++)Math.abs(u[d])>=Math.abs(o)&&(p+=1);else if(\\\"greater\\\"===n)for(var m=0;m<=a;m++)u[m]>=o&&(p+=1);else for(var g=0;g<=a;g++)u[g]<=o&&(p+=1);return p/a},t.permutationsHeap=function(t){for(var e=new Array(t.length),r=[t.slice()],n=0;n<t.length;n++)e[n]=0;for(var a=0;a<t.length;)if(e[a]<a){var i=0;a%2!=0&&(i=e[a]);var o=t[i];t[i]=t[a],t[a]=o,r.push(t.slice()),e[a]++,a=0}else e[a]=0,a++;return r},t.poissonDistribution=function(t){if(!(t<=0)){var e=0,r=0,n=[],a=1;do{n[e]=Math.exp(-t)*Math.pow(t,e)/a,r+=n[e],a*=++e}while(r<.9999);return n}},t.probit=function(t){return 0===t?t=C:t>=1&&(t=.9999),Math.sqrt(2)*J(2*t-1)},t.product=function(t){for(var e=1,r=0;r<t.length;r++)e*=t[r];return e},t.quantile=p,t.quantileRank=function(t,e){return y(u(t),e)},t.quantileRankSorted=y,t.quantileSorted=h,t.quickselect=l,t.rSquared=function(t,e){if(t.length<2)return 1;for(var r=0,n=0;n<t.length;n++)r+=t[n][1];for(var a=r/t.length,i=0,o=0;o<t.length;o++)i+=Math.pow(a-t[o][1],2);for(var u=0,s=0;s<t.length;s++)u+=Math.pow(t[s][1]-e(t[s][0]),2);return 1-u/i},t.relativeError=ot,t.rms=P,t.rootMeanSquare=P,t.sample=k,t.sampleCorrelation=function(t,e){return O(t,e)/z(t)/z(e)},t.sampleCovariance=O,t.sampleKurtosis=function(t){var e=t.length;if(e<4)throw new Error(\\\"sampleKurtosis requires at least four data points\\\");for(var n,a=r(t),i=0,o=0,u=0;u<e;u++)i+=(n=t[u]-a)*n,o+=n*n*n*n;return(e-1)/((e-2)*(e-3))*(e*(e+1)*o/(i*i)-3*(e-1))},t.sampleSkewness=function(t){if(t.length<3)throw new Error(\\\"sampleSkewness requires at least three data points\\\");for(var e,n=r(t),a=0,i=0,o=0;o<t.length;o++)a+=(e=t[o]-n)*e,i+=e*e*e;var u=t.length-1,s=Math.sqrt(a/u),c=t.length;return c*i/((c-1)*(c-2)*Math.pow(s,3))},t.sampleStandardDeviation=z,t.sampleVariance=I,t.sampleWithReplacement=function(t,e,r){if(0===t.length)return[];r=r||Math.random;for(var n=t.length,a=[],i=0;i<e;i++){var o=Math.floor(r()*n);a.push(t[o])}return a},t.shuffle=E,t.shuffleInPlace=S,t.sign=Q,t.silhouette=nt,t.silhouetteMetric=function(t,e){return c(nt(t,e))},t.standardDeviation=i,t.standardNormalTable=Y,t.subtractFromMean=function(t,e,r){return(t*e-r)/(e-1)},t.sum=e,t.sumNthPowerDeviations=n,t.sumSimple=f,t.tTest=function(t,e){return(r(t)-e)/(i(t)/Math.sqrt(t.length))},t.tTestTwoSample=function(t,e,n){var a=t.length,i=e.length;if(!a||!i)return null;n||(n=0);var o=r(t),u=r(e),s=I(t),c=I(e);if(\\\"number\\\"==typeof o&&\\\"number\\\"==typeof u&&\\\"number\\\"==typeof s&&\\\"number\\\"==typeof c){var f=((a-1)*s+(i-1)*c)/(a+i-2);return(o-u-n)/Math.sqrt(f*(1/a+1/i))}},t.uniqueCountSorted=_,t.variance=a,t.zScore=function(t,e,r){return(t-e)/r},Object.defineProperty(t,\\\"__esModule\\\",{value:!0})}(e)},function(t,e,r){\\\"use strict\\\";Object.defineProperty(e,\\\"__esModule\\\",{value:!0}),e.sum_unsafe=function(t,e){var r={};e.forEach((function(t){r[t]=0}));for(var n=function(n,a){e.forEach((function(e){r[e]+=t[n][e]}))},a=0,i=t.length;a<i;a++)n(a);return r},e.sum=function(t,e){var r={};e.forEach((function(t){r[t]=0}));for(var n=function(n,a){e.forEach((function(e){r[e]+=Number(t[n][e])||0}))},a=0,i=t.length;a<i;a++)n(a);return r},e.count=function(t,e){var r={};e.forEach((function(t){r[t]=0}));for(var n=0,a=t.length;n<a;n++)e.forEach((function(t){r[t]++}));return r},e.mean=function(t,e){var r={};e.forEach((function(t){r[t]=0}));for(var n=function(n,a){e.forEach((function(e){r[e]+=Number(t[n][e])||0}))},a=0,i=t.length;a<i;a++)n(a);return e.forEach((function(e){r[e]/=t.length})),r}},function(t,e,r){\\\"use strict\\\";Object.defineProperty(e,\\\"__esModule\\\",{value:!0});var n=r(5);e.periodCube=n.default;var a=r(6);e.momentCube=a.default},function(t,e,r){\\\"use strict\\\";var n=this&&this.__read||function(t,e){var r=\\\"function\\\"===typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,a,i=r.call(t),o=[];try{for(;(void 0===e||e-- >0)&&!(n=i.next()).done;)o.push(n.value)}catch(u){a={error:u}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(a)throw a.error}}return o},a=this&&this.__spread||function(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(n(arguments[e]));return t},i=this&&this.__values||function(t){var e=\\\"function\\\"===typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&\\\"number\\\"===typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?\\\"Object is not iterable.\\\":\\\"Symbol.iterator is not defined.\\\")};Object.defineProperty(e,\\\"__esModule\\\",{value:!0});var o=function(){function t(t){this.children=new Map,this._rawData=[],this.aggFunc=t,this.cache=!1}return t.prototype.push=function(){for(var t,e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];(t=this._rawData).push.apply(t,a(e))},t.prototype.aggData=function(t){return void 0===t&&(t=[]),this.cache||(this._aggData=this.aggFunc(this.rawData,t),this.cache=!0),this._aggData},t.prototype.clearCache=function(){this.cache=!1},Object.defineProperty(t.prototype,\\\"rawData\\\",{get:function(){var t,e;if(!this.cache){if(0!==this.children.size){var r=this.children.values(),n=[];try{for(var a=i(r),o=a.next();!o.done;o=a.next()){var u=o.value,s=void 0,c=u.rawData,f=c.length;for(s=0;s<f;s++)n.push(c[s])}}catch(h){t={error:h}}finally{try{o&&!o.done&&(e=a.return)&&e.call(a)}finally{if(t)throw t.error}}this._rawData=n}this.cache=!0}return this._rawData},enumerable:!0,configurable:!0}),t.prototype.getNode=function(t){return function e(r,a){var o,u;if(a===t.length)return r;var s=r.children.entries();try{for(var c=i(s),f=c.next();!f.done;f=c.next()){var h=n(f.value,2),l=h[0],v=h[1];if(l===t[a])return e(v,a+1)}}catch(p){o={error:p}}finally{try{f&&!f.done&&(u=c.return)&&u.call(c)}finally{if(o)throw o.error}}return null}(this,0)},t}(),u=function(){function t(t){this.aggFunc=t.aggFunc,this.factTable=t.factTable,this.dimensions=t.dimensions,this.measures=t.measures}return t.prototype.get=function(t){var e=this,r=e.tree,a=(e.aggFunc,e.measures);return function e(r,o){var u,s;if(o===t.length)return r.aggData(a);var c=r.children.entries();try{for(var f=i(c),h=f.next();!h.done;h=f.next()){var l=n(h.value,2),v=l[0],p=l[1];if(v===t[o])return e(p,o+1)}}catch(d){u={error:d}}finally{try{h&&!h.done&&(s=f.return)&&s.call(f)}finally{if(u)throw u.error}}return!1}(r,0)},t.prototype.getNode=function(t){return this.tree.getNode(t)},t.prototype.buildTree=function(){var t,e=new o(this.aggFunc),r=this.factTable.length;for(t=0;t<r;t++)this.insertNode(this.factTable[t],e,0);return this.tree=e,e},t.prototype.insertNode=function(t,e,r){if(e.push(t),e.cache=!1,r<this.dimensions.length){var n=t[this.dimensions[r]];e.children.has(n)||e.children.set(n,new o(this.aggFunc)),this.insertNode(t,e.children.get(n),r+1)}},t.prototype.aggTree=function(t){var e,r;void 0===t&&(t=this.tree);var n=t.children.values();try{for(var a=i(n),o=a.next();!o.done;o=a.next()){var u=o.value;this.aggTree(u)}}catch(s){e={error:s}}finally{try{o&&!o.done&&(r=a.return)&&r.call(a)}finally{if(e)throw e.error}}return t.aggData(this.measures),t},t.prototype.aggNode=function(t){var e,r;void 0===t&&(t=this.tree);var n=t.children.values();try{for(var a=i(n),o=a.next();!o.done;o=a.next()){var u=o.value;this.aggTree(u)}}catch(s){e={error:s}}finally{try{o&&!o.done&&(r=a.return)&&r.call(a)}finally{if(e)throw e.error}}return t.aggData(this.measures),t},t}();e.default=u},function(t,e,r){\\\"use strict\\\";var n=this&&this.__read||function(t,e){var r=\\\"function\\\"===typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,a,i=r.call(t),o=[];try{for(;(void 0===e||e-- >0)&&!(n=i.next()).done;)o.push(n.value)}catch(u){a={error:u}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(a)throw a.error}}return o},a=this&&this.__spread||function(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(n(arguments[e]));return t},i=this&&this.__values||function(t){var e=\\\"function\\\"===typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&\\\"number\\\"===typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?\\\"Object is not iterable.\\\":\\\"Symbol.iterator is not defined.\\\")};Object.defineProperty(e,\\\"__esModule\\\",{value:!0});var o=function(){function t(){this.children=new Map,this.rawData=[]}return t.prototype.push=function(){for(var t,e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];(t=this.rawData).push.apply(t,a(e))},t.prototype.aggData=function(t,e){return void 0===e&&(e=[]),this._aggData=t(this.rawData,e),this._aggData},t.prototype.getNode=function(t){return function e(r,a){var o,u;if(a===t.length)return r;var s=r.children.entries();try{for(var c=i(s),f=c.next();!f.done;f=c.next()){var h=n(f.value,2),l=h[0],v=h[1];if(l===t[a])return e(v,a+1)}}catch(p){o={error:p}}finally{try{f&&!f.done&&(u=c.return)&&u.call(c)}finally{if(o)throw o.error}}return null}(this,0)},t}();e.Node=o;var u=function(){function t(t){this.aggFunc=t.aggFunc,this.factTable=t.factTable,this.dimensions=t.dimensions,this.measures=t.measures,this.buildTree(),this.aggTree()}return t.prototype.get=function(t){var e=this,r=e.tree,a=e.aggFunc,o=e.measures;return function e(r,u){var s,c;if(u===t.length)return r.aggData(a,o);var f=r.children.entries();try{for(var h=i(f),l=h.next();!l.done;l=h.next()){var v=n(l.value,2),p=v[0],d=v[1];if(p===t[u])return e(d,u+1)}}catch(m){s={error:m}}finally{try{l&&!l.done&&(c=h.return)&&c.call(h)}finally{if(s)throw s.error}}return!1}(r,0)},t.prototype.getNode=function(t){return this.tree.getNode(t)},t.prototype.setData=function(t){var e=t.aggFunc,r=void 0===e?this.aggFunc:e,n=t.factTable,a=void 0===n?this.factTable:n,i=t.dimensions,o=void 0===i?this.dimensions:i,u=t.measures,s=void 0===u?this.measures:u;o!==this.dimensions||a!==this.factTable?(this.dimensions=o,this.factTable=a,this.measures=s,this.aggFunc=r,this.buildTree(),this.aggTree()):s===this.measures&&r===this.aggFunc||(this.measures=s,this.aggFunc=r,this.aggTree())},t.prototype.buildTree=function(){var t,e=new o,r=this.factTable.length;for(t=0;t<r;t++)this.insertNode(this.factTable[t],e,0);return this.tree=e,e},t.prototype.insertNode=function(t,e,r){if(r===this.dimensions.length)e.push(t);else{var n=t[this.dimensions[r]];e.children.has(n)||e.children.set(n,new o),this.insertNode(t,e.children.get(n),r+1)}},t.prototype.aggTree=function(t){var e,r;if(void 0===t&&(t=this.tree),t.children.size>0){t.rawData=[];var n=t.children.values();try{for(var a=i(n),o=a.next();!o.done;o=a.next()){var u=o.value,s=void 0,c=this.aggTree(u).rawData,f=c.length;for(s=0;s<f;s++)t.rawData.push(c[s])}}catch(h){e={error:h}}finally{try{o&&!o.done&&(r=a.return)&&r.call(a)}finally{if(e)throw e.error}}}return t.aggData(this.aggFunc,this.measures),t},t}();e.default=u},function(t,e,r){\\\"use strict\\\";var n=this&&this.__assign||function(){return(n=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var a in e=arguments[r])Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t}).apply(this,arguments)},a=this&&this.__values||function(t){var e=\\\"function\\\"===typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&\\\"number\\\"===typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?\\\"Object is not iterable.\\\":\\\"Symbol.iterator is not defined.\\\")},i=this&&this.__read||function(t,e){var r=\\\"function\\\"===typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,a,i=r.call(t),o=[];try{for(;(void 0===e||e-- >0)&&!(n=i.next()).done;)o.push(n.value)}catch(u){a={error:u}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(a)throw a.error}}return o};Object.defineProperty(e,\\\"__esModule\\\",{value:!0}),e.tree2Table=function(t){var e=t.dimensions,r=(t.measures,t.cube),o=(r.aggFunc,[]);return function t(r,u,s){var c,f,h;if(0!==r.children.size)try{for(var l=a(r.children.entries()),v=l.next();!v.done;v=l.next()){var p=i(v.value,2),d=p[0];t(p[1],n(n({},u),((h={})[e[s]]=d,h)),s+1)}}catch(g){c={error:g}}finally{try{v&&!v.done&&(f=l.return)&&f.call(l)}finally{if(c)throw c.error}}else{var m=r._aggData;o.push(n(n({},u),m))}}(r.tree,{},0),o}},function(t,e,r){var n=function(t){\\\"use strict\\\";var e,r=Object.prototype,n=r.hasOwnProperty,a=\\\"function\\\"===typeof Symbol?Symbol:{},i=a.iterator||\\\"@@iterator\\\",o=a.asyncIterator||\\\"@@asyncIterator\\\",u=a.toStringTag||\\\"@@toStringTag\\\";function s(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},\\\"\\\")}catch(z){s=function(t,e,r){return t[e]=r}}function c(t,e,r,n){var a=e&&e.prototype instanceof m?e:m,i=Object.create(a.prototype),o=new T(n||[]);return i._invoke=function(t,e,r){var n=h;return function(a,i){if(n===v)throw new Error(\\\"Generator is already running\\\");if(n===p){if(\\\"throw\\\"===a)throw i;return I()}for(r.method=a,r.arg=i;;){var o=r.delegate;if(o){var u=x(o,r);if(u){if(u===d)continue;return u}}if(\\\"next\\\"===r.method)r.sent=r._sent=r.arg;else if(\\\"throw\\\"===r.method){if(n===h)throw n=p,r.arg;r.dispatchException(r.arg)}else\\\"return\\\"===r.method&&r.abrupt(\\\"return\\\",r.arg);n=v;var s=f(t,e,r);if(\\\"normal\\\"===s.type){if(n=r.done?p:l,s.arg===d)continue;return{value:s.arg,done:r.done}}\\\"throw\\\"===s.type&&(n=p,r.method=\\\"throw\\\",r.arg=s.arg)}}}(t,r,o),i}function f(t,e,r){try{return{type:\\\"normal\\\",arg:t.call(e,r)}}catch(z){return{type:\\\"throw\\\",arg:z}}}t.wrap=c;var h=\\\"suspendedStart\\\",l=\\\"suspendedYield\\\",v=\\\"executing\\\",p=\\\"completed\\\",d={};function m(){}function g(){}function y(){}var w={};w[i]=function(){return this};var b=Object.getPrototypeOf,M=b&&b(b(O([])));M&&M!==r&&n.call(M,i)&&(w=M);var S=y.prototype=m.prototype=Object.create(w);function E(t){[\\\"next\\\",\\\"throw\\\",\\\"return\\\"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function k(t,e){function r(a,i,o,u){var s=f(t[a],t,i);if(\\\"throw\\\"!==s.type){var c=s.arg,h=c.value;return h&&\\\"object\\\"===typeof h&&n.call(h,\\\"__await\\\")?e.resolve(h.__await).then((function(t){r(\\\"next\\\",t,o,u)}),(function(t){r(\\\"throw\\\",t,o,u)})):e.resolve(h).then((function(t){c.value=t,o(c)}),(function(t){return r(\\\"throw\\\",t,o,u)}))}u(s.arg)}var a;this._invoke=function(t,n){function i(){return new e((function(e,a){r(t,n,e,a)}))}return a=a?a.then(i,i):i()}}function x(t,r){var n=t.iterator[r.method];if(n===e){if(r.delegate=null,\\\"throw\\\"===r.method){if(t.iterator.return&&(r.method=\\\"return\\\",r.arg=e,x(t,r),\\\"throw\\\"===r.method))return d;r.method=\\\"throw\\\",r.arg=new TypeError(\\\"The iterator does not provide a 'throw' method\\\")}return d}var a=f(n,t.iterator,r.arg);if(\\\"throw\\\"===a.type)return r.method=\\\"throw\\\",r.arg=a.arg,r.delegate=null,d;var i=a.arg;return i?i.done?(r[t.resultName]=i.value,r.next=t.nextLoc,\\\"return\\\"!==r.method&&(r.method=\\\"next\\\",r.arg=e),r.delegate=null,d):i:(r.method=\\\"throw\\\",r.arg=new TypeError(\\\"iterator result is not an object\\\"),r.delegate=null,d)}function _(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function D(t){var e=t.completion||{};e.type=\\\"normal\\\",delete e.arg,t.completion=e}function T(t){this.tryEntries=[{tryLoc:\\\"root\\\"}],t.forEach(_,this),this.reset(!0)}function O(t){if(t){var r=t[i];if(r)return r.call(t);if(\\\"function\\\"===typeof t.next)return t;if(!isNaN(t.length)){var a=-1,o=function r(){for(;++a<t.length;)if(n.call(t,a))return r.value=t[a],r.done=!1,r;return r.value=e,r.done=!0,r};return o.next=o}}return{next:I}}function I(){return{value:e,done:!0}}return g.prototype=S.constructor=y,y.constructor=g,g.displayName=s(y,u,\\\"GeneratorFunction\\\"),t.isGeneratorFunction=function(t){var e=\\\"function\\\"===typeof t&&t.constructor;return!!e&&(e===g||\\\"GeneratorFunction\\\"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,y):(t.__proto__=y,s(t,u,\\\"GeneratorFunction\\\")),t.prototype=Object.create(S),t},t.awrap=function(t){return{__await:t}},E(k.prototype),k.prototype[o]=function(){return this},t.AsyncIterator=k,t.async=function(e,r,n,a,i){void 0===i&&(i=Promise);var o=new k(c(e,r,n,a),i);return t.isGeneratorFunction(r)?o:o.next().then((function(t){return t.done?t.value:o.next()}))},E(S),s(S,u,\\\"Generator\\\"),S[i]=function(){return this},S.toString=function(){return\\\"[object Generator]\\\"},t.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},t.values=O,T.prototype={constructor:T,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method=\\\"next\\\",this.arg=e,this.tryEntries.forEach(D),!t)for(var r in this)\\\"t\\\"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if(\\\"throw\\\"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function a(n,a){return u.type=\\\"throw\\\",u.arg=t,r.next=n,a&&(r.method=\\\"next\\\",r.arg=e),!!a}for(var i=this.tryEntries.length-1;i>=0;--i){var o=this.tryEntries[i],u=o.completion;if(\\\"root\\\"===o.tryLoc)return a(\\\"end\\\");if(o.tryLoc<=this.prev){var s=n.call(o,\\\"catchLoc\\\"),c=n.call(o,\\\"finallyLoc\\\");if(s&&c){if(this.prev<o.catchLoc)return a(o.catchLoc,!0);if(this.prev<o.finallyLoc)return a(o.finallyLoc)}else if(s){if(this.prev<o.catchLoc)return a(o.catchLoc,!0)}else{if(!c)throw new Error(\\\"try statement without catch or finally\\\");if(this.prev<o.finallyLoc)return a(o.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var a=this.tryEntries[r];if(a.tryLoc<=this.prev&&n.call(a,\\\"finallyLoc\\\")&&this.prev<a.finallyLoc){var i=a;break}}i&&(\\\"break\\\"===t||\\\"continue\\\"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var o=i?i.completion:{};return o.type=t,o.arg=e,i?(this.method=\\\"next\\\",this.next=i.finallyLoc,d):this.complete(o)},complete:function(t,e){if(\\\"throw\\\"===t.type)throw t.arg;return\\\"break\\\"===t.type||\\\"continue\\\"===t.type?this.next=t.arg:\\\"return\\\"===t.type?(this.rval=this.arg=t.arg,this.method=\\\"return\\\",this.next=\\\"end\\\"):\\\"normal\\\"===t.type&&e&&(this.next=e),d},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),D(r),d}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if(\\\"throw\\\"===n.type){var a=n.arg;D(r)}return a}}throw new Error(\\\"illegal catch attempt\\\")},delegateYield:function(t,r,n){return this.delegate={iterator:O(t),resultName:r,nextLoc:n},\\\"next\\\"===this.method&&(this.arg=e),d}},t}(t.exports);try{regeneratorRuntime=n}catch(a){Function(\\\"r\\\",\\\"regeneratorRuntime = r\\\")(n)}},function(t,e,r){\\\"use strict\\\";r.r(e);var n={};r.r(n),r.d(n,\\\"kruskal\\\",(function(){return C})),r.d(n,\\\"kruskalWithFullMST\\\",(function(){return F}));var a={};r.r(a),r.d(a,\\\"getDimCorrelationMatrix\\\",(function(){return Y})),r.d(a,\\\"getMeaCorrelationMatrix\\\",(function(){return B})),r.d(a,\\\"getDimClusterGroups\\\",(function(){return $})),r.d(a,\\\"getDimSetsBasedOnClusterGroups\\\",(function(){return J})),r.d(a,\\\"getMeaSetsBasedOnClusterGroups\\\",(function(){return Q})),r.d(a,\\\"subspaceSearching\\\",(function(){return Z})),r.d(a,\\\"getRelatedVertices\\\",(function(){return tt}));var i={};function o(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function u(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function s(t,e){if(t){if(\\\"string\\\"===typeof t)return u(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return\\\"Object\\\"===r&&t.constructor&&(r=t.constructor.name),\\\"Map\\\"===r||\\\"Set\\\"===r?Array.from(t):\\\"Arguments\\\"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?u(t,e):void 0}}function c(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if(\\\"undefined\\\"!==typeof Symbol&&Symbol.iterator in Object(t)){var r=[],n=!0,a=!1,i=void 0;try{for(var o,u=t[Symbol.iterator]();!(n=(o=u.next()).done)&&(r.push(o.value),!e||r.length!==e);n=!0);}catch(s){a=!0,i=s}finally{try{n||null==u.return||u.return()}finally{if(a)throw i}}return r}}(t,e)||s(t,e)||function(){throw new TypeError(\\\"Invalid attempt to destructure non-iterable instance.\\\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\\\")}()}function f(t){return function(t){if(Array.isArray(t))return u(t)}(t)||function(t){if(\\\"undefined\\\"!==typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||s(t)||function(){throw new TypeError(\\\"Invalid attempt to spread non-iterable instance.\\\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\\\")}()}function h(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function l(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?h(Object(r),!0).forEach((function(e){o(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):h(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function v(t,e){var r;if(\\\"undefined\\\"===typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(r=s(t))||e&&t&&\\\"number\\\"===typeof t.length){r&&(t=r);var n=0,a=function(){};return{s:a,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:a}}throw new TypeError(\\\"Invalid attempt to iterate non-iterable instance.\\\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\\\")}var i,o=!0,u=!1;return{s:function(){r=t[Symbol.iterator]()},n:function(){var t=r.next();return o=t.done,t},e:function(t){u=!0,i=t},f:function(){try{o||null==r.return||r.return()}finally{if(u)throw i}}}}r.r(i),r.d(i,\\\"insightExtraction\\\",(function(){return it})),r.d(i,\\\"subspaceSearching\\\",(function(){return at})),r.d(i,\\\"getVisSpaces\\\",(function(){return St})),r.d(i,\\\"IntentionWorkerCollection\\\",(function(){return wt})),r.d(i,\\\"DefaultIWorker\\\",(function(){return pt})),r.d(i,\\\"getIntentionSpaces\\\",(function(){return bt})),r.d(i,\\\"Subspace\\\",(function(){return a})),r.d(i,\\\"VIEngine\\\",(function(){return At}));var p=function(t,e,r){for(var n=new Set,a=new Set,i=new Map,o=t.length,u=0;u<o;u++){var s=t[u];n.add(s[e]),a.add(s[r]),i.has(s[e])||i.set(s[e],new Map);var f=i.get(s[e]);f.has(s[r])||f.set(s[r],0),f.set(s[r],f.get(s[r])+1)}var h=function(t,e,r){if(\\\"undefined\\\"===typeof t||\\\"undefined\\\"===typeof e||\\\"undefined\\\"===typeof r)return 0;var n,a=new Map,i=new Map,o=0,u=v(e);try{for(u.s();!(n=u.n()).done;){var s=n.value;a.set(s,0)}}catch(P){u.e(P)}finally{u.f()}var f,h=v(r);try{for(h.s();!(f=h.n()).done;){var l=f.value;i.set(l,0)}}catch(P){h.e(P)}finally{h.f()}var p,d=v(t);try{for(d.s();!(p=d.n()).done;){var m,g=c(p.value,2),y=g[0],w=v(g[1]);try{for(w.s();!(m=w.n()).done;){var b=c(m.value,2),M=b[0],S=b[1];a.set(y,a.get(y)+S),i.set(M,i.get(M)+S),o+=S}}catch(P){w.e(P)}finally{w.f()}}}catch(P){d.e(P)}finally{d.f()}var E,k=0,x=v(t);try{for(x.s();!(E=x.n()).done;){var _,D=c(E.value,2),T=D[0],O=v(D[1]);try{for(O.s();!(_=O.n()).done;){var I=c(_.value,2),z=I[0],N=I[1],j=a.get(T)*i.get(z)/o;k+=Math.pow(N-j,2)/j}}catch(P){O.e(P)}finally{O.f()}}}catch(P){x.e(P)}finally{x.f()}return k}(i,n,a);return Math.sqrt(h/(t.length*Math.min(n.size-1,a.size-1)))},d=function(t,e,r){var n=m(t.map((function(t){return t[e]})))/t.length,a=m(t.map((function(t){return t[r]})))/t.length;return m(t.map((function(t){return(t[e]-n)*(t[r]-a)})))/Math.sqrt(m(t.map((function(t){return Math.pow(t[e]-n,2)})))*m(t.map((function(t){return Math.pow(t[r]-a,2)}))))};function m(t){for(var e=0,r=0,n=t.length;r<n;r++)e+=t[r];return e}function g(t){var e=Math.min.apply(Math,f(t));return t.map((function(t){return t-e+1}))}function y(t){for(var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t.length,n=[],a=function e(r,a,i){a.length!==i?r>=t.length||(e(r+1,[].concat(f(a),[t[r]]),i),e(r+1,a,i)):n.push(f(a))},i=e;i<=r;i++)a(0,[],i);return n}function w(t){var e,r=0,n=v(t);try{for(n.s();!(e=n.n()).done;){var a=e.value;r+=a}}catch(i){n.e(i)}finally{n.f()}return t.map((function(t){return t/r}))}var b=function(t){var e,r=0,n=v(t);try{for(n.s();!(e=n.n()).done;){var a=e.value;r+=a*Math.log2(a)}}catch(i){n.e(i)}finally{n.f()}return-r};function M(t,e){if(!(t instanceof e))throw new TypeError(\\\"Cannot call a class as a function\\\")}function S(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,\\\"value\\\"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function E(t,e,r){return e&&S(t.prototype,e),r&&S(t,r),t}var k=function(){function t(e,r,n){M(this,t),this.dataSource=e,this.X=r,this.Y=n,this.normalizedDataSource=e}return E(t,[{key:\\\"normalizeDimensions\\\",value:function(t){var e=this;return this.normalizedDataSource=[],this.valueSets=[],t.forEach((function(){e.valueSets.push(new Map)})),this.dataSource.forEach((function(r){t.forEach((function(t,n){var a=(r[t]||\\\"others\\\").toString();e.valueSets[n].has(a)||e.valueSets[n].set(a,e.valueSets[n].size)}))})),this.dataSource.forEach((function(r){var n=e.normalizeRecord(r,t);e.normalizedDataSource.push(n)})),this.normalizedDataSource}},{key:\\\"normalizeRecord\\\",value:function(t,e){var r=this,n={};return Object.keys(t).forEach((function(e){n[e]=t[e]})),e.forEach((function(e,a){var i=(t[e]||\\\"others\\\").toString();n[e]=r.valueSets[a].get(i)})),n}},{key:\\\"mean\\\",value:function(){var t=this,e=0,r=0;return 0===this.normalizedDataSource.length||(this.normalizedDataSource.forEach((function(n,a){e+=n[t.X],r+=n[t.Y]})),e/=this.normalizedDataSource.length,r/=this.normalizedDataSource.length),[e,r]}},{key:\\\"getRegressionEquation\\\",value:function(){var t=this;if(0===this.normalizedDataSource.length)return[0,0];var e,r=c(this.mean(),2),n=r[0],a=r[1],i=0,o=0;return this.normalizedDataSource.forEach((function(e){i+=(e[t.X]-n)*(e[t.Y]-a),o+=Math.pow(e[t.X]-n,2)})),[a-n*(e=i/o),e]}},{key:\\\"r_squared\\\",value:function(){var t=this,e=c(this.mean(),2)[1],r=c(this.getRegressionEquation(),2),n=r[0],a=r[1],i=0,o=0;return this.normalizedDataSource.forEach((function(r){var u=r[t.X],s=r[t.Y],c=u*a+n;i+=Math.pow(c-e,2),o+=Math.pow(s-e,2)})),i/o}},{key:\\\"cumulativeLogisticDistribution\\\",value:function(t){return 1/(1+Math.pow(Math.E,-(t-.2)/2))}},{key:\\\"pValue\\\",value:function(){var t=c(this.getRegressionEquation(),2)[1],e=this.cumulativeLogisticDistribution(Math.abs(t));return e>.5?2*(1-e):2*e}},{key:\\\"significance\\\",value:function(){return this.r_squared()*(1-this.pValue())}}]),t}(),x=r(2),_=\\\"_join_\\\",D={sum:x.sum,max:x.max,mean:x.mean,min:x.min,count:function(t){return t.length}};function T(t){return D[t]||x.sum}var O=.3,I=.5;function z(t){for(var e=[],r=0;r<t.length;r++)for(var n=r+1;n<t[r].length;n++)e.push([[r,n],Math.abs(t[r][n])]);return e}function N(t,e){return t[e]===e?e:t[e]=N(t,t[e])}function j(t,e,r){var n=N(t,e),a=N(t,r);t[n]=a,N(t,e),N(t,r)}function P(t,e,r){return t[r]===r?r:(t[r]=P(t,e,t[r]),e[r]=e[t[r]],t[r])}function q(t,e,r,n){var a=P(t,e,r),i=P(t,e,n),o=e[a],u=e[i];t[a]=i,e[a]=e[i]=o+u,P(t,e,r),P(t,e,n)}function F(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:4,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=z(t);n.sort((function(t,e){return e[1]-t[1]}));var a,i=[],o=t.map((function(t,e){return e})),u=f(o),s=!1,c=v(n);try{for(c.s();!(a=c.n()).done;){var h=a.value;N(o,h[0][0])!==N(o,h[0][1])&&(j(o,h[0][0],h[0][1]),i.push([h[0],h[1],s]));for(var l=0;l<o.length;l++)o[l]=N(o,l);var p=new Set(o);if(p.size<=e||h[1]<r?s=!0:u=f(o),1===p.size)break}}catch(d){c.e(d)}finally{c.f()}return{edgesInMST:i,groups:u}}var C=function(t){var e,r=t.matrix,n=t.measures,a=(t.method,t.groupMaxSize),i=void 0===a?4:a,o=t.limitSize,u=void 0!==o&&o,s=t.threshold,c=void 0===s?0:s;e=u?function(t,e){var r=z(t);r.sort((function(t,e){return e[1]-t[1]}));var n,a=t.map((function(t,e){return e})),i=t.map((function(){return 1})),o=v(r);try{for(o.s();!(n=o.n()).done;){var u=n.value;if(P(a,i,u[0][0])!==P(a,i,u[0][1])){if(i[u[0][0]]+i[u[0][1]]>e)continue;q(a,i,u[0][0],u[0][1])}for(var s=0;s<a.length;s++)a[s]=P(a,i,s);if(1===new Set(a).size)break}}catch(h){o.e(h)}finally{o.f()}for(var c=new Map,f=0;f<a.length;f++)c.has(a[f])||c.set(a[f],[]),c.get(a[f]).push(f);return c}(r,i):function(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=z(t);n.sort((function(t,e){return e[1]-t[1]}));var a,i=t.map((function(t,e){return e})),o=v(n);try{for(o.s();!(a=o.n()).done;){var u=a.value;N(i,u[0][0])!==N(i,u[0][1])&&j(i,u[0][0],u[0][1]);for(var s=0;s<i.length;s++)i[s]=N(i,s);if(new Set(i).size<=e||u[1]<r)break}}catch(h){o.e(h)}finally{o.f()}for(var c=new Map,f=0;f<i.length;f++)c.has(i[f])||c.set(i[f],[]),c.get(i[f]).push(f);return c}(r,i,c);var f,h=[],l=v(e.values());try{for(l.s();!(f=l.n()).done;){var p=f.value;h.push(p.map((function(t){return n[t]})))}}catch(d){l.e(d)}finally{l.f()}return h};function L(t,e){return(L=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function R(t,e){if(\\\"function\\\"!==typeof e&&null!==e)throw new TypeError(\\\"Super expression must either be null or a function\\\");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&L(t,e)}function A(t){return(A=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function G(t){return(G=\\\"function\\\"===typeof Symbol&&\\\"symbol\\\"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&\\\"function\\\"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?\\\"symbol\\\":typeof t})(t)}function V(t,e){return!e||\\\"object\\\"!==G(e)&&\\\"function\\\"!==typeof e?function(t){if(void 0===t)throw new ReferenceError(\\\"this hasn't been initialised - super() hasn't been called\\\");return t}(t):e}function U(t){var e=function(){if(\\\"undefined\\\"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if(\\\"function\\\"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=A(t);if(e){var a=A(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return V(this,r)}}var W=function(t){R(r,t);var e=U(r);function r(t){var n;M(this,r),n=e.call(this,t);var a=t.K;return n.K=a,n.normalize(),n}return E(r,[{key:\\\"getNeighbors\\\",value:function(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];r.length!==e.length&&e.forEach((function(t){r.push(1)}));for(var n=[],a=[],i=[],o=[],u=new Set(this.dimensions),s=0;s<e.length;s++)u.has(e[s])?(n.push(e[s]),i.push(r[s])):(a.push(e[s]),o.push(r[s]));var c=[];this.normalizedDataSource.forEach((function(e,r){var u=0;a.forEach((function(r,n){u+=Math.pow((e[r]-t[r])*o[n],2)})),n.forEach((function(r,n){e[r]!==t[r]&&(u+=Math.pow(i[n],2))})),c.push({dis:u,index:r})})),c.sort((function(t,e){return t.dis-e.dis}));for(var f=[],h=Math.min(this.K,c.length),l=0;l<h;l++)f.push(this.normalizedDataSource[c[l].index]);return f}},{key:\\\"getTargetValue\\\",value:function(t,e){var r=this,n=[];return t.forEach((function(t){var a=new Map;e.forEach((function(e){a.has(e[t])||a.set(e[t],0),a.set(e[t],a.get(e[t])+1)}));var i,o=0,u=0,s=v(a);try{for(s.s();!(i=s.n()).done;){var c=i.value;c[1]>o&&(o=c[1],u=c[0])}}catch(h){s.e(h)}finally{s.f()}var f=r.dimensions.indexOf(t);f>-1?n.push(r.valueParser[f][u]):n.push(u)})),n}}]),r}(function(){function t(e){M(this,t);var r=e.dataSource,n=e.dimensions,a=e.measures;this.dataSource=r,this.dimensions=n,this.measures=a}return E(t,[{key:\\\"normalize\\\",value:function(){var t=this;return this.normalizedDataSource=[],this.valueSets=[],this.valueParser=[],this.ranges=[],this.dimensions.forEach((function(e){t.valueSets.push(new Map),t.valueParser.push([])})),this.measures.forEach((function(){t.ranges.push([1/0,-1/0])})),this.dataSource.forEach((function(e){t.dimensions.forEach((function(r,n){var a=(e[r]||\\\"others\\\").toString();t.valueSets[n].has(a)||(t.valueSets[n].set(a,t.valueSets[n].size),t.valueParser[n].push(a))})),t.measures.forEach((function(r,n){var a=e[r];\\\"number\\\"===typeof a&&(t.ranges[n][0]=Math.min(t.ranges[n][0],a),t.ranges[n][1]=Math.max(t.ranges[n][1],a))}))})),this.dataSource.forEach((function(e){var r=t.normalizeRecord(e);t.normalizedDataSource.push(r)})),this.normalizedDataSource}},{key:\\\"normalizeRecord\\\",value:function(t){var e=this,r={};return this.measures.forEach((function(n,a){r[n]=(t[n]-e.ranges[a][0])/(e.ranges[a][1]-e.ranges[a][0])})),this.dimensions.forEach((function(n,a){var i=(t[n]||\\\"others\\\").toString();r[n]=e.valueSets[a].get(i)})),r}}]),t}());function X(t,e){for(var r=function(t,e){if(0===t)return[];for(var r=2147483647,n=[e],a=1;a<t;a++)n.push((1103515245*n[a-1]+12345)%r);return n.map((function(t){return t/r}))}(e,2147483647*Math.random()),n=[],a=0;a<e;a++){var i=Math.floor(r[a]*e)%e;n.push(t[i])}return n}var H=8,K={IsolationForest:function(){function t(e,r,n){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:100,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:256;M(this,t),this.dimensions=e,this.measures=r,this.dataSource=n,n.length<i?(this.treeNumber=Math.max(1,Math.ceil(i/50)),this.sampleSize=Math.max(2,Math.floor(n.length/2))):(this.treeNumber=a,this.sampleSize=i),this.limitHeight=Math.ceil(Math.log2(this.sampleSize)),this.iForest=[],this.normalizeDimensions()}return E(t,[{key:\\\"normalizeDimensions\\\",value:function(){var t=this;return this.normalizedDataSource=[],this.valueSets=[],this.ranges=[],this.dimensions.forEach((function(){t.valueSets.push(new Map)})),this.measures.forEach((function(){t.ranges.push([1/0,-1/0])})),this.dataSource.forEach((function(e){t.dimensions.forEach((function(r,n){var a=(e[r]||\\\"others\\\").toString();t.valueSets[n].has(a)||t.valueSets[n].set(a,t.valueSets[n].size)})),t.measures.forEach((function(r,n){var a=e[r];\\\"number\\\"===typeof a&&(t.ranges[n][0]=Math.min(t.ranges[n][0],a),t.ranges[n][1]=Math.max(t.ranges[n][1],a))}))})),this.dataSource.forEach((function(e){var r=t.normalizeRecord(e);t.normalizedDataSource.push(r)})),this.normalizedDataSource}},{key:\\\"normalizeRecord\\\",value:function(t){var e=this,r={};return this.measures.forEach((function(e){r[e]=t[e]})),this.dimensions.forEach((function(n,a){var i=(t[n]||\\\"others\\\").toString();r[n]=e.valueSets[a].get(i)})),r}},{key:\\\"buildIsolationTree\\\",value:function(t,e){if(e>=this.limitHeight||t.length<=1)return null;var r=Math.random(),n=this.measures[0]||this.dimensions[0],a=this.dimensions.length,i=this.measures.length,o=0;if(r>=a/(a+i)){var u=Math.floor(Math.random()*i)%i;n=this.measures[u],o=this.ranges[u][0]+(this.ranges[u][1]-this.ranges[u][0])*Math.random()}else{var s=Math.floor(Math.random()*a)%a;n=this.dimensions[s],o=Math.floor(this.valueSets[s].size*Math.random())%this.valueSets[s].size}var c,f=[],h=[],l=v(t);try{for(l.s();!(c=l.n()).done;){var p=c.value;p[n]<o?f.push(p):h.push(p)}}catch(m){l.e(m)}finally{l.f()}var d={field:n,value:o,size:t.length};return d.left=this.buildIsolationTree(f,e+1),d.right=this.buildIsolationTree(h,e+1),d}},{key:\\\"AFS\\\",value:function(t){return t>2?2*(Math.log(t-1)+.5772156649)-2*(t-1)/t:2===t?1:0}},{key:\\\"getPathLength\\\",value:function(t,e,r,n){return null===e?r+this.AFS(n):t[e.field]<e.value?this.getPathLength(t,e.left,r+1,e.size):this.getPathLength(t,e.right,r+1,e.size)}},{key:\\\"buildIsolationForest\\\",value:function(){this.iForest=[];for(var t=0;t<this.treeNumber;t++){var e=X(this.normalizedDataSource,this.sampleSize),r=this.buildIsolationTree(e,0);this.iForest.push(r)}return this.iForest}},{key:\\\"estimateOutierScore\\\",value:function(){var t=this;return this.recordScoreList=[],this.normalizedDataSource.forEach((function(e){var r,n=0;t.iForest.forEach((function(r){n+=t.getPathLength(e,r,0,t.sampleSize)})),n/=t.iForest.length,r=Math.pow(2,-n/t.AFS(t.sampleSize)),t.recordScoreList.push(r)})),this.recordScoreList}}]),t}()};function Y(t,e){for(var r=e.map((function(t){return e.map((function(t){return 0}))})),n=0;n<e.length;n++){r[n][n]=1;for(var a=n+1;a<e.length;a++)r[n][a]=r[a][n]=p(t,e[n],e[a])}return r}function B(t,e){for(var r=e.map((function(t){return e.map((function(t){return 0}))})),n=0;n<e.length;n++){r[n][n]=1;for(var a=n+1;a<e.length;a++){var i=d(t,e[n],e[a]);r[a][n]=r[n][a]=i}}return r}function $(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:O,a=arguments.length>3?arguments[3]:void 0,i=4,o=Y(t,e),u=n.kruskal({matrix:o,measures:e,groupMaxSize:a||Math.round(e.length/i),threshold:r});return u}function J(t,e,r,n){var a,i=[],o=v($(t,e,r));try{for(o.s();!(a=o.n()).done;){var u=y(a.value,1,n||H);i.push.apply(i,f(u))}}catch(s){o.e(s)}finally{o.f()}return i}function Q(t,e,r){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:3,i=3,o=B(t,e),u=n.kruskal({matrix:o,measures:e,groupMaxSize:a||Math.round(e.length/i),threshold:r||I});return u}function Z(t,e){var r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return r?J(t,e):y(e)}function tt(t,e,r,n){for(var a=e.map((function(t){return r.includes(t)})),i=[],o=[],u=0;u<t.length;u++)if(a[u])for(var s=0;s<t[u].length;s++)a[s]||i.push([t[u][s],[u,s]]);i.sort((function(t,e){return e[0]-t[0]}));for(var c=0;c<i.length;c++){var f=i[c][1][1];a[f]||(a[f]=!0,o.push({field:e[f],corValue:i[c][0]}))}return o.slice(0,n||o.length)}var et=r(1),rt=r.n(et);function nt(t,e){var r,a=[],i=function(t,e){for(var r=e.map((function(t){return e.map((function(t){return 0}))})),n=0;n<e.length;n++){r[n][n]=1;for(var a=n+1;a<e.length;a++)r[n][a]=r[a][n]=p(t,e[n],e[a])}return r}(t,e),o=v(n.kruskal({matrix:i,measures:e,groupMaxSize:Math.round(e.length/4),threshold:O}));try{for(o.s();!(r=o.n()).done;){var u=y(r.value,1,H);a.push.apply(a,f(u))}}catch(s){o.e(s)}finally{o.f()}return a}function at(t,e){var r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return r?nt(t,e):y(e)}function it(t,e,r){var n,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:\\\"sum\\\",i=[],o=at(t,e,!0),u=v(o);try{for(u.s();!(n=u.n()).done;){var s,c=n.value,f={},h=rt()({dataSource:t,dimensions:c,measures:r,asFields:r,operator:a||\\\"sum\\\"}),l=v(r);try{var p=function(){var t=s.value,e=w(g(h.map((function(e){return e[t]})))),r=b(e);f[t]=r};for(l.s();!(s=l.n()).done;)p()}catch(E){l.e(E)}finally{l.f()}for(var m=r.map((function(t){return r.map((function(t){return 0}))})),y=0;y<r.length;y++){m[y][y]=1;for(var M=y+1;M<r.length;M++){var S=d(h,r[y],r[M]);m[M][y]=m[y][M]=S}}i.push([c,f,m])}}catch(E){u.e(E)}finally{u.f()}return i}var ot=r(0),ut=r.n(ot);function st(t,e,r,n,a,i,o){try{var u=t[i](o),s=u.value}catch(c){return void r(c)}u.done?e(s):Promise.resolve(s).then(n,a)}function ct(t){return function(){var e=this,r=arguments;return new Promise((function(n,a){var i=t.apply(e,r);function o(t){st(i,n,a,o,u,\\\"next\\\",t)}function u(t){st(i,n,a,o,u,\\\"throw\\\",t)}o(void 0)}))}}var ft=function(t){R(r,t);var e=U(r);function r(){return M(this,r),e.apply(this,arguments)}return E(r,[{key:\\\"getTargetValuePercent\\\",value:function(t,e,r){var n=[];return t.forEach((function(t,a){var i=0;r.forEach((function(r){r[t]===e[t]&&i++})),n.push(i/r.length)})),n}},{key:\\\"getSignificance\\\",value:function(t,e){var r=this,n=0;return this.normalizedDataSource.forEach((function(a){var i=r.getNeighbors(a,t),o=r.getTargetValuePercent(e,a,i),u=0;o.forEach((function(t){u+=t})),u/=o.length,n+=u})),n/=this.normalizedDataSource.length}}]),r}(W),ht=\\\"=;=\\\";function lt(t,e){var r,n=[],a=v(t);try{for(a.s();!(r=a.n()).done;){var i,o=r.value,u=v(e);try{for(u.s();!(i=u.n()).done;){var s=i.value;n.push({dimensions:o,measures:s})}}catch(c){u.e(c)}finally{u.f()}}}catch(c){a.e(c)}finally{a.f()}return n}function vt(t){var e,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:H,n=[],a=v(t);try{for(a.s();!(e=a.n()).done;){var i=e.value,o=y(i,1,r);n.push.apply(n,f(o))}}catch(u){a.e(u)}finally{a.f()}return n}var pt,dt=function(){var t=ct(ut.a.mark((function t(e,r,n){var a,i,o,u,s;return ut.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:a=0,i=0,o=v(n);try{for(s=function(){var t=u.value,r=e.map((function(e){return e[t]})),n=w(g(r)),o=b(n);a+=o,i+=o/Math.log2(r.length)},o.s();!(u=o.n()).done;)s()}catch(c){o.e(c)}finally{o.f()}return a/=n.length,i=1-(i/=n.length),t.abrupt(\\\"return\\\",{dimensions:r,measures:n,type:\\\"default_general\\\",score:a,impurity:a,significance:i,order:\\\"asc\\\"});case 8:case\\\"end\\\":return t.stop()}}),t)})));return function(e,r,n){return t.apply(this,arguments)}}(),mt=function(){var t=ct(ut.a.mark((function t(e,r,n){var a,i,o,u,s,c;return ut.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:for((a=new K.IsolationForest([],n,e)).buildIsolationForest(),i=a.estimateOutierScore(),o=0,u=0,s=0;s<i.length;s++)i[s]>u&&(u=i[s],o=s);return c={},r.concat(n).forEach((function(t){c[t]=e[o][t]})),t.abrupt(\\\"return\\\",{dimensions:r,measures:n,score:u,significance:u,order:\\\"desc\\\",description:c});case 9:case\\\"end\\\":return t.stop()}}),t)})));return function(e,r,n){return t.apply(this,arguments)}}(),gt=function(){var t=ct(ut.a.mark((function t(e,r,n){var a,i,o,u,s,c;return ut.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(1===r.length){t.next=2;break}return t.abrupt(\\\"return\\\",null);case 2:(a=f(e)).sort((function(t,e){return t[r[0]]>e[r[0]]?1:t[r[0]]===e[r[0]]?0:t[r[0]]<e[r[0]]?-1:void 0})),i=0,o=v(n);try{for(o.s();!(u=o.n()).done;)s=u.value,(c=new k(a,r[0],s)).normalizeDimensions(r),i+=c.significance()}catch(h){o.e(h)}finally{o.f()}return i/=n.length,t.abrupt(\\\"return\\\",{dimensions:r,measures:n,score:i,significance:i,order:\\\"desc\\\"});case 9:case\\\"end\\\":return t.stop()}}),t)})));return function(e,r,n){return t.apply(this,arguments)}}(),yt=function(){var t=ct(ut.a.mark((function t(e,r,n){var a,i;return ut.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(r.length<2)){t.next=2;break}return t.abrupt(\\\"return\\\",null);case 2:return 0,i=new ft({dataSource:e,dimensions:r,measures:n,K:8}),a=i.getSignificance(n.concat(r.slice(0,-1)),r.slice(-1)),t.abrupt(\\\"return\\\",{dimensions:r,measures:n,score:a,significance:a,order:\\\"desc\\\"});case 6:case\\\"end\\\":return t.stop()}}),t)})));return function(e,r,n){return t.apply(this,arguments)}}();!function(t){t.outlier=\\\"default_outlier\\\",t.cluster=\\\"default_group\\\",t.trend=\\\"default_trend\\\"}(pt||(pt={}));var wt=function(){function t(){M(this,t),this.workers=new Map}return E(t,[{key:\\\"register\\\",value:function(t,e){if(this.workers.has(t))throw new Error(\\\"There has been a worker named: \\\".concat(t,\\\" already.\\\"));this.workers.set(t,[!0,e])}},{key:\\\"enable\\\",value:function(t,e){if(!this.workers.has(t))throw new Error('Intention Worker \\\"'.concat(t,'\\\" does not exist.'));var r=this.workers.get(t);r[0]=e,this.workers.set(t,r)}},{key:\\\"each\\\",value:function(t){var e,r=v(this.workers);try{for(r.s();!(e=r.n()).done;){var n=c(e.value,2),a=n[0],i=n[1];i[0]&&t(i[1],a)}}catch(o){r.e(o)}finally{r.f()}}}],[{key:\\\"init\\\",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{withDefaultIWorkers:!0},r=e.withDefaultIWorkers,n=void 0===r||r;for(var a in t.colletion||(t.colletion=new t,n&&(t.colletion.register(pt.outlier,mt),t.colletion.register(pt.cluster,yt),t.colletion.register(pt.trend,gt))),pt)t.colletion.enable(pt[a],n);return t.colletion}}]),t}();function bt(t,e,r){return Mt.apply(this,arguments)}function Mt(){return(Mt=ct(ut.a.mark((function t(e,r,n){var a,i,o,u;return ut.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:a=[],i=v(r),t.prev=2,u=ut.a.mark((function t(){var r,i,u,s,c,f;return ut.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=o.value,i=r.dimensions,u=r.measures,s=i.join(ht),!e.has(s)){t.next=9;break}return c=e.get(s),t.next=7,dt(c,i,u);case 7:f=t.sent,n.each(function(){var t=ct(ut.a.mark((function t(e,r){var n;return ut.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e(c,i,u);case 3:null!==(n=t.sent)&&(n.type=r,n.impurity=f.impurity,a.push(n)),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.error(\\\"worker failed\\\",{dimensions:i,measures:u,aggData:c},t.t0);case 10:case\\\"end\\\":return t.stop()}}),t,null,[[0,7]])})));return function(e,r){return t.apply(this,arguments)}}());case 9:case\\\"end\\\":return t.stop()}}),t)})),i.s();case 5:if((o=i.n()).done){t.next=9;break}return t.delegateYield(u(),\\\"t0\\\",7);case 7:t.next=5;break;case 9:t.next=14;break;case 11:t.prev=11,t.t1=t.catch(2),i.e(t.t1);case 14:return t.prev=14,i.f(),t.finish(14);case 17:return t.abrupt(\\\"return\\\",a);case 18:case\\\"end\\\":return t.stop()}}),t,null,[[2,11,14,17]])})))).apply(this,arguments)}function St(t){return Et.apply(this,arguments)}function Et(){return(Et=ct(ut.a.mark((function t(e){var r,n,a,i,o,u,s,c,f,h,l,p,d,m,g,y,w,b,M,S,E,k,x,_,D,T,z;return ut.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r=e.dataSource,n=e.dimensions,a=e.measures,i=e.collection,o=e.dimension_correlation_threshold,u=void 0===o?O:o,s=e.measure_correlation_threshold,c=void 0===s?I:s,f=e.max_dimension_num_in_view,h=void 0===f?3:f,l=e.max_measure_num_in_view,p=void 0===l?3:l,d=$(r,n,u),m=vt(d,h),g=Q(r,a,c),y=vt(g,p),w=lt(m,y),b=new Map,M=(new Date).getTime(),S=v(m);try{for(S.s();!(E=S.n()).done;)k=E.value,x=k.join(ht),_=rt()({dataSource:r,dimensions:k,measures:a,asFields:a,operator:\\\"sum\\\"}),b.set(x,_)}catch(N){S.e(N)}finally{S.f()}return D=(new Date).getTime(),console.log(\\\"cube cost\\\",D-M),b.set(\\\"*\\\",r),T=i||wt.init(),t.next=18,bt(b,w,T);case 18:return z=t.sent,t.abrupt(\\\"return\\\",z);case 20:case\\\"end\\\":return t.stop()}}),t)})))).apply(this,arguments)}function kt(t,e){return function(t,e){return t.every((function(t){return Number(t[e])>=1800&&Number(t[e])<=2200||!isNaN(Date.parse(t[e]))&&\\\"string\\\"===typeof t[e]&&/^[0-9]{0,4}[-/][0-9]{0,2}([-/][0-9]{0,2}$)?/.test(t[e])||\\\"undefined\\\"===typeof t[e]||null===t[e]}))}(t,e)?\\\"temporal\\\":function(t,e){return t.every((function(t){return\\\"number\\\"===typeof t[e]||\\\"undefined\\\"===typeof t[e]||null===t[e]}))}(t,e)?\\\"quantitative\\\":(function(t,e){t.every((function(t){return\\\"string\\\"===typeof t[e]||\\\"undefined\\\"===typeof t[e]||null===t[e]}))}(t,e),\\\"nominal\\\")}var xt={boolean:function(t){return\\\"true\\\"===t||\\\"false\\\"===t||!0===t||!1===t},integer:function(t){return xt.number(t)&&(t=+t)===~~t},number:function(t){return!isNaN(+t)},date:function(t){return!isNaN(Date.parse(t))}};function _t(t,e){var r,n=[],a=new Map,i=v(t);try{var o=function(){var t=r.value,i=new Map;e.forEach((function(e){i.has(e[t])||i.set(e[t],0),i.set(e[t],i.get(e[t])+1)}));var o=function(t){var e,r,n=[\\\"boolean\\\",\\\"integer\\\",\\\"number\\\",\\\"date\\\"],a=v(t);try{for(a.s();!(e=a.n()).done;){for(var i=e.value,o=0;o<n.length;++o)null==(r=i)||r!==r||xt[n[o]](i)||(n.splice(o,1),o-=1);if(0===n.length)return\\\"string\\\"}}catch(u){a.e(u)}finally{a.f()}return n[0]}(f(i.keys())),u=kt(e,t),s=\\\"dimension\\\";\\\"integer\\\"!==o&&\\\"number\\\"!==o||(s=\\\"measure\\\");var c={key:t,analyticType:s,semanticType:u,dataType:o,domain:i};n.push(c),a.set(c.key,c)};for(i.s();!(r=i.n()).done;)o()}catch(u){i.e(u)}finally{i.f()}return{fields:n,dictonary:a}}var Dt,Tt=function(){function t(e,r,n){M(this,t),this.DIMENSION_CORRELATION_THRESHOLD=O,this.MEASURE_CORRELATION_THRESHOLD=I,this.dimensions=r,this.measures=n,this.computeDGraph(e),this.computeMGraph(e)}return E(t,[{key:\\\"computeGraph\\\",value:function(t,e,r){for(var n=e.map((function(t){return e.map((function(){return 0}))})),a=0;a<e.length;a++){n[a][a]=1;for(var i=a+1;i<e.length;i++)n[a][i]=n[i][a]=r(t,e[a],e[i])}return n}},{key:\\\"computeDGraph\\\",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:p;return this.DG=this.computeGraph(t,this.dimensions,e),this.DG}},{key:\\\"computeMGraph\\\",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:d;return this.MG=this.computeGraph(t,this.measures,e),this.MG}},{key:\\\"clusterDGraph\\\",value:function(t,e){var r=this.dimensions,n=this.DIMENSION_CORRELATION_THRESHOLD;return this.DClusters=$(t,r,e||n),this.DClusters}},{key:\\\"clusterMGraph\\\",value:function(t,e){var r=this.measures,n=this.MEASURE_CORRELATION_THRESHOLD;return this.MClusters=Q(t,r,e||n),this.MClusters}}]),t}(),Ot=[\\\"max\\\",\\\"min\\\",\\\"sum\\\",\\\"mean\\\",\\\"count\\\"],It=function(){function t(e){M(this,t);var r=e.dimensions,n=e.measures,a=e.ops,i=void 0===a?Ot:a;this.dimensions=r,this.measures=n,this.ops=i,this.state=[]}return E(t,[{key:\\\"setData\\\",value:function(t){return this.state=function(t){var e,r=t.dataSource,n=t.dimensions,a=t.measures,i=t.ops,o=new Map,u=v(r);try{var s=function(){var t=e.value,r=n.map((function(e){return t[e]})).join(_);o.has(r)||o.set(r,[]),o.get(r).push(t)};for(u.s();!(e=u.n()).done;)s()}catch(d){u.e(d)}finally{u.f()}var f,h=[],l=v(o);try{var p=function(){var t=c(f.value,2),e=t[0],r=t[1],o={};a.forEach((function(t,e){o[t]={},i.forEach((function(e){var n=T(e);o[t][e]=n(r.map((function(e){return e[t]})))}))}));var u=e.split(_);n.forEach((function(t,e){o[t]=u[e]})),h.push(o)};for(l.s();!(f=l.n()).done;)p()}catch(d){l.e(d)}finally{l.f()}return h}({dimensions:this.dimensions,measures:this.measures,ops:this.ops,dataSource:t}),this.state}},{key:\\\"computeFromCuboid\\\",value:function(t){var e=this.ops,r=this.measures,n=this.dimensions;return this.state=function(t){var e,r=t.dataSource,n=t.dimensions,a=t.measures,i=t.ops,o=new Map,u=v(r);try{var s=function(){var t=e.value,r=n.map((function(e){return t[e]})).join(_);o.has(r)||o.set(r,[]),o.get(r).push(t)};for(u.s();!(e=u.n()).done;)s()}catch(d){u.e(d)}finally{u.f()}var f,h=[],l=v(o);try{var p=function(){var t=c(f.value,2),e=t[0],r=t[1],o={};a.forEach((function(t,e){o[t]={},i.filter((function(t){return![\\\"sum\\\",\\\"count\\\",\\\"mean\\\"].includes(t)})).forEach((function(e){var n=T(e);o[t][e]=n(r.map((function(r){return r[t][e]})))})),o[t].sum=T(\\\"sum\\\")(r.map((function(e){return e[t].sum}))),o[t].count=T(\\\"sum\\\")(r.map((function(e){return e[t].count}))),o[t].mean=o[t].sum/o[t].count}));var u=e.split(_);n.forEach((function(t,e){o[t]=u[e]})),h.push(o)};for(l.s();!(f=l.n()).done;)p()}catch(d){l.e(d)}finally{l.f()}return h}({dimensions:n,measures:r,ops:e,dataSource:t.getRawState()}),this.state}},{key:\\\"getState\\\",value:function(t,e){var r,n=[],a=this.state,i=this.dimensions,o=v(a);try{for(o.s();!(r=o.n()).done;){var u,s=r.value,c={},f=v(i);try{for(f.s();!(u=f.n()).done;){var h=u.value;c[h]=s[h]}}catch(m){f.e(m)}finally{f.f()}for(var l=0;l<t.length;l++){var p=t[l],d=e[l];c[p]=s[p][d]}n.push(c)}}catch(m){o.e(m)}finally{o.f()}return n}},{key:\\\"getRawState\\\",value:function(){return this.state}},{key:\\\"size\\\",get:function(){return this.state.length}}]),t}(),zt=\\\"_join_\\\",Nt=[\\\"max\\\",\\\"min\\\",\\\"sum\\\",\\\"mean\\\",\\\"count\\\"],jt=function(){function t(e){var r=this;M(this,t);var n=e.dimensions,a=e.measures,i=e.dataSource,o=e.ops,u=void 0===o?Nt:o;this.dimensions=n,this.measures=a,this.dataSource=i,this.ops=u,this.dimOrder=new Map,n.forEach((function(t,e){r.dimOrder.set(t,e)})),this.cuboids=new Map}return E(t,[{key:\\\"sortDimension\\\",value:function(t){var e=this,r=f(t);return r.sort((function(t,r){return e.dimOrder.get(t)-e.dimOrder.get(r)})),r}},{key:\\\"getCuboid\\\",value:function(t){var e=this.sortDimension(t),r=e.join(zt);if(this.cuboids.has(r))return this.cuboids.get(r);var n,a=new Set(t),i=[],o=[],u=v(this.dimensions);try{for(u.s();!(n=u.n()).done;){var s=n.value;if(!a.has(s)){var c=this.sortDimension([].concat(f(e),[s])).join(zt);this.cuboids.has(c)?i.push(c):o.push(c)}}}catch(b){u.e(b)}finally{u.f()}var h=1/0,l=this.dimensions.join(zt);if(i.length>0){var p,d=v(i);try{for(d.s();!(p=d.n()).done;){var m=p.value,g=this.cuboids.get(m);g.size<h&&(h=g.size,l=m)}}catch(b){d.e(b)}finally{d.f()}}else o.length>0&&(l=o[0]);var y=this.getCuboid(l.split(zt)),w=new It({dimensions:t,measures:this.measures,ops:this.ops});return w.computeFromCuboid(y),this.cuboids.set(r,w),w}},{key:\\\"buildBaseCuboid\\\",value:function(){var t=new It({dimensions:this.dimensions,measures:this.measures,ops:this.ops});return t.setData(this.dataSource),this.cuboids.set(this.dimensions.join(zt),t),t}},{key:\\\"baseCuboid\\\",get:function(){var t=this.dimensions.join(zt);return this.cuboids.has(t)?this.cuboids.get(t):this.buildBaseCuboid()}}]),t}(),Pt=function(){var t=ct(ut.a.mark((function t(e,r,n){var a,i,o,u,s,c;return ut.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:for((a=new K.IsolationForest([],n,e)).buildIsolationForest(),i=a.estimateOutierScore(),o=0,u=0,s=0;s<i.length;s++)i[s]>u&&(u=i[s],o=s);return c={},r.concat(n).forEach((function(t){c[t]=e[o][t]})),t.abrupt(\\\"return\\\",{dimensions:r,measures:n,significance:u,description:c});case 9:case\\\"end\\\":return t.stop()}}),t)})));return function(e,r,n){return t.apply(this,arguments)}}(),qt=function(){var t=ct(ut.a.mark((function t(e,r,n){var a,i,o,u,s,c;return ut.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(1===r.length){t.next=2;break}return t.abrupt(\\\"return\\\",null);case 2:(a=f(e)).sort((function(t,e){return t[r[0]]>e[r[0]]?1:t[r[0]]===e[r[0]]?0:-1})),i=0,o=v(n);try{for(o.s();!(u=o.n()).done;)s=u.value,(c=new k(a,r[0],s)).normalizeDimensions(r),i+=c.significance()}catch(h){o.e(h)}finally{o.f()}return i/=n.length,t.abrupt(\\\"return\\\",{dimensions:r,measures:n,significance:i});case 9:case\\\"end\\\":return t.stop()}}),t)})));return function(e,r,n){return t.apply(this,arguments)}}();!function(t){t.outlier=\\\"default_outlier\\\",t.trend=\\\"default_trend\\\"}(Dt||(Dt={}));var Ft=function(){function t(){M(this,t),this.workers=new Map}return E(t,[{key:\\\"register\\\",value:function(t,e){if(this.workers.has(t))throw new Error(\\\"There has been a worker named: \\\".concat(t,\\\" already.\\\"));this.workers.set(t,[!0,e])}},{key:\\\"enable\\\",value:function(t,e){if(!this.workers.has(t))throw new Error('Intention Worker \\\"'.concat(t,'\\\" does not exist.'));var r=this.workers.get(t);r[0]=e,this.workers.set(t,r)}},{key:\\\"each\\\",value:function(t){var e,r=v(this.workers);try{for(r.s();!(e=r.n()).done;){var n=c(e.value,2),a=n[0],i=n[1];i[0]&&t(i[1],a)}}catch(o){r.e(o)}finally{r.f()}}}],[{key:\\\"init\\\",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{withDefaultIWorkers:!0},r=e.withDefaultIWorkers,n=void 0===r||r;return t.colletion||(t.colletion=new t,n&&(t.colletion.register(Dt.outlier,Pt),t.colletion.register(Dt.trend,qt))),Object.values(Dt).forEach((function(e){t.colletion.enable(e,n)})),t.colletion}}]),t}(),Ct={interval:[0,10],line:[11,1/0],area:[11,1/0],point:[0,1e3],path:[0,100],density:[1001,1/0]};function Lt(t,e){for(var r=e.length-1;r>=0;r--)if(e[r].semanticType===t&&!e[r].choosen)return e[r];return!1}function Rt(t,e){var r=function(t){for(var e={},r={position:2,color:1,size:1,shape:1,opacity:1,facets:2,page:1,filter:1,highFacets:1e3},n=t.map((function(t){return l(l({},t),{},{choosen:!1})})),a=[[\\\"quantitative\\\",[\\\"position\\\",\\\"size\\\",\\\"color\\\",\\\"highFacets\\\",\\\"opacity\\\",\\\"page\\\",\\\"filter\\\"]],[\\\"temporal\\\",[\\\"position\\\",\\\"page\\\",\\\"filter\\\"]],[\\\"ordinal\\\",[\\\"position\\\",\\\"color\\\",\\\"opacity\\\",\\\"facets\\\",\\\"size\\\",\\\"page\\\",\\\"filter\\\",\\\"highFacets\\\"]],[\\\"nominal\\\",[\\\"position\\\",\\\"color\\\",\\\"facets\\\",\\\"shape\\\",\\\"page\\\",\\\"filter\\\",\\\"hightFacets\\\"]]],i=n.length,o=0;o<a.length&&i>0;o++)for(var u=a[o][0],s=a[o][1],c=0;c<s.length&&i>0;c++)for(var f=s[c],h=void 0;r[f]>0&&(h=Lt(u,n));)\\\"undefined\\\"===typeof e[f]&&(e[f]=[]),e[f].push(h.key),r[f]--,i--,h.choosen=!0;return e}(t.sort((function(t,e){return t.impurity-e.impurity}))),n=new Set(t.filter((function(t){return\\\"dimension\\\"===t.analyticType})).map((function(t){return t.key}))),a=new Set(t.filter((function(t){return\\\"measure\\\"===t.analyticType})).map((function(t){return t.key})));if(r.position&&2===r.position.length)if(n.has(r.position[0])&&a.has(r.position[1])||n.has(r.position[1])&&a.has(r.position[0])){var i=n.has(r.position[0])?0:1,o=r.position[i],u=r.position[(i+1)%2];r.position=[o,u];var s=t.find((function(t){return t.key===o})),c=s?s.domain.size:0;r.geomType=[\\\"interval\\\",\\\"line\\\",\\\"area\\\"].filter((function(t){return c>=Ct[t][0]&&c<=Ct[t][1]})),\\\"nominal\\\"===s.semanticType&&(r.geomType=[\\\"interval\\\"])}else r.geomType=[\\\"point\\\",\\\"density\\\"].filter((function(t){return e.length>=Ct[t][0]&&e.length<=Ct[t][1]}));return{schema:r,dataView:e}}var At=function(){function t(){M(this,t),this.DIMENSION_NUM_IN_VIEW={MAX:3,MIN:1},this.MEASURE_NUM_IN_VIEW={MAX:3,MIN:1},this.cube=null,this.aggregators=[\\\"max\\\",\\\"min\\\",\\\"sum\\\",\\\"mean\\\",\\\"count\\\"],this.workerCollection=Ft.init()}return E(t,[{key:\\\"setDataSource\\\",value:function(t){return this.dataSource=t,this}},{key:\\\"setDimensions\\\",value:function(t){return this._dimensions=t,this._fields.forEach((function(e){\\\"dimension\\\"!==e.analyticType&&t.includes(e.key)&&(e.analyticType=\\\"dimension\\\")})),this}},{key:\\\"setMeasures\\\",value:function(t){return this._measures=t,this._fields.forEach((function(e){\\\"measure\\\"!==e.analyticType&&t.includes(e.key)&&(e.analyticType=\\\"measure\\\")})),this}},{key:\\\"setFieldKeys\\\",value:function(t){return this._fieldKeys=t,this}},{key:\\\"buildfieldsSummary\\\",value:function(){var t=this,e=_t(this._fieldKeys,this.dataSource),r=e.fields,n=e.dictonary;return this.dimensions&&this.measures&&r.forEach((function(e){t.dimensions.includes(e.key)?e.analyticType=\\\"dimension\\\":e.analyticType=\\\"measure\\\"})),this.fields=r,this.fieldDictonary=n,this}},{key:\\\"buildGraph\\\",value:function(){return this.dataGraph=new Tt(this.dataSource,this.dimensions,this.measures),this}},{key:\\\"buildCube\\\",value:function(){var t=this.measures,e=this.dataSource,r=this.dataGraph,n=this.dimensions,a=this.aggregators,i=new jt({dimensions:n,measures:t,dataSource:e,ops:a});return i.buildBaseCuboid(),r.DClusters.forEach((function(t){i.getCuboid(t)})),this.cube=i,this}},{key:\\\"clusterFields\\\",value:function(){return this.dataGraph.clusterDGraph(this.dataSource),this.dataGraph.clusterMGraph(this.dataSource),this}},{key:\\\"buildSubspaces\\\",value:function(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.DIMENSION_NUM_IN_VIEW,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.MEASURE_NUM_IN_VIEW,a=this.dataGraph.DClusters,i=this.dataGraph.MClusters,o=t.getCombinationFromClusterGroups(i,n),u=[],s=v(a);try{for(s.s();!(e=s.n()).done;){var c,f=e.value,h=y(f,r.MIN,r.MAX),l=v(h);try{for(l.s();!(c=l.n()).done;){var p,d=c.value,m=v(o);try{for(m.s();!(p=m.n()).done;){var g=p.value;u.push({dimensions:d,measures:g})}}catch(w){m.e(w)}finally{m.f()}}}catch(w){l.e(w)}finally{l.f()}}}catch(w){s.e(w)}finally{s.f()}return this.subSpaces=u,this}},{key:\\\"insightExtraction\\\",value:function(){var e=ct(ut.a.mark((function e(){var r,n,a,i,o,u,s=this,c=arguments;return ut.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=c.length>0&&void 0!==c[0]?c[0]:this.subSpaces,n=this,a=[],i=v(r),e.prev=4,u=ut.a.mark((function e(){var r,i,u,c,f,h,l,v;return ut.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=o.value,i=r.dimensions,u=r.measures,c=n.cube,f=c.getCuboid(i),h=f.getState(u,u.map((function(){return\\\"sum\\\"}))),l=t.getSpaceImpurity(h,i,u),v=[],s.workerCollection.each((function(t,e){var r=function(){var t=ct(ut.a.mark((function t(e,r){var o;return ut.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e(h,i,u,n.fieldDictonary,n);case 3:null!==(o=t.sent)&&(o.type=r,o.impurity=l,a.push(o)),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.error(\\\"worker failed\\\",{dimensions:i,measures:u,aggData:h},t.t0);case 10:case\\\"end\\\":return t.stop()}}),t,null,[[0,7]])})));return function(e,r){return t.apply(this,arguments)}}();v.push(r(t,e))})),e.next=10,Promise.all(v);case 10:case\\\"end\\\":return e.stop()}}),e)})),i.s();case 7:if((o=i.n()).done){e.next=11;break}return e.delegateYield(u(),\\\"t0\\\",9);case 9:e.next=7;break;case 11:e.next=16;break;case 13:e.prev=13,e.t1=e.catch(4),i.e(e.t1);case 16:return e.prev=16,i.f(),e.finish(16);case 19:return n.insightSpaces=a,e.abrupt(\\\"return\\\",a);case 21:case\\\"end\\\":return e.stop()}}),e,this,[[4,13,16,19]])})));return function(){return e.apply(this,arguments)}}()},{key:\\\"setInsightScores\\\",value:function(){return this.insightSpaces.forEach((function(t){t.score=t.impurity/t.significance})),this}},{key:\\\"getFieldInfoInVis\\\",value:function(t){var e=[],r=this.cube,n=this.fieldDictonary,a=t.dimensions,i=t.measures;a.forEach((function(t){var a=r.getCuboid([t]).getState(i,i.map((function(){return\\\"sum\\\"}))),o=0;i.forEach((function(t){var e=w(g(a.map((function(e){return e[t]})))),r=b(e);o+=r})),e.push(l(l({},n.get(t)),{},{impurity:o}))}));var o=r.getCuboid(a).getState(i,i.map((function(){return\\\"sum\\\"})));return i.forEach((function(t){var r=w(g(o.map((function(e){return e[t]})))),a=b(r);e.push(l(l({},n.get(t)),{},{impurity:a}))})),e}},{key:\\\"specification\\\",value:function(t){var e=t.dimensions,r=t.measures;return Rt(this.getFieldInfoInVis(t),this.cube.getCuboid(e).getState(r,r.map((function(){return\\\"sum\\\"}))))}},{key:\\\"fields\\\",get:function(){return this._fields},set:function(t){this._fields=t,this._dimensions=t.filter((function(t){return\\\"dimension\\\"===t.analyticType})).map((function(t){return t.key})),this._measures=t.filter((function(t){return\\\"measure\\\"===t.analyticType})).map((function(t){return t.key}))}},{key:\\\"dimensions\\\",get:function(){return this._dimensions}},{key:\\\"measures\\\",get:function(){return this._measures}}],[{key:\\\"getCombinationFromClusterGroups\\\",value:function(t,e){var r,n=[],a=v(t);try{for(a.s();!(r=a.n()).done;){var i=y(r.value,e.MIN,e.MAX);n.push.apply(n,f(i))}}catch(o){a.e(o)}finally{a.f()}return n}},{key:\\\"getSpaceImpurity\\\",value:function(t,e,r){var n,a=0,i=v(r);try{var o=function(){var e=n.value,r=w(g(t.map((function(t){return t[e]})))),i=b(r);a+=i};for(i.s();!(n=i.n()).done;)o()}catch(u){i.e(u)}finally{i.f()}return a/=r.length}}]),t}();var Gt;self.addEventListener(\\\"message\\\",(Gt=t=>{try{const{dataSource:e,dimensions:r,measures:n,operator:a,topKPercent:o=1}=t.data;let u=i.insightExtraction(e,r,n,a).map((t=>{let e=0;for(let r in t[1])e+=t[1][r];return{...t,score:e}}));u.sort(((t,e)=>t.score-e.score));let s=Math.round(o*u.length);self.postMessage({success:!0,data:u.slice(0,s).map((t=>({score:t.score,dimensions:t[0],measures:n.map((e=>({name:e,value:t[1][e]}))),correlationMatrix:t[2]})))})}catch(e){self.postMessage({success:!1,message:e.toString()})}},function(t){var e=(new Date).getTime();try{Gt(t)}finally{var r=(new Date).getTime()-e;console.log(\\\"Task [\\\".concat(Gt.name,\\\"] cost \\\").concat(r,\\\" ms.\\\"))}}),!1)}]);\\n//# sourceMappingURL=combineFields.worker.34201631.worker.js.map\", \"Worker\", undefined, __webpack_public_path__ + \"static/js/combineFields.worker.34201631.worker.js\");\n}\n","\nimport worker from \"!!../../../../node_modules/worker-loader/dist/runtime/inline.js\";\n\nexport default function Worker_fn() {\n  return worker(\"!function(t){var r={};function e(n){if(r[n])return r[n].exports;var o=r[n]={i:n,l:!1,exports:{}};return t[n].call(o.exports,o,o.exports,e),o.l=!0,o.exports}e.m=t,e.c=r,e.d=function(t,r,n){e.o(t,r)||Object.defineProperty(t,r,{enumerable:!0,get:n})},e.r=function(t){\\\"undefined\\\"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:\\\"Module\\\"}),Object.defineProperty(t,\\\"__esModule\\\",{value:!0})},e.t=function(t,r){if(1&r&&(t=e(t)),8&r)return t;if(4&r&&\\\"object\\\"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(e.r(n),Object.defineProperty(n,\\\"default\\\",{enumerable:!0,value:t}),2&r&&\\\"string\\\"!=typeof t)for(var o in t)e.d(n,o,function(r){return t[r]}.bind(null,o));return n},e.n=function(t){var r=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(r,\\\"a\\\",r),r},e.o=function(t,r){return Object.prototype.hasOwnProperty.call(t,r)},e.p=\\\"./\\\",e(e.s=9)}([function(t,r,e){t.exports=e(8)},function(t,r,e){\\\"use strict\\\";this&&this.__assign;Object.defineProperty(r,\\\"__esModule\\\",{value:!0});var n=e(4),o=e(7),a=e(3),i={sum:a.sum_unsafe,mean:a.mean,count:a.count};function u(t){var r=t.type,e=t.aggFunc,o=void 0===e?a.count:e,i=t.factTable,u=void 0===i?[]:i,f=t.dimensions,l=void 0===f?[]:f,s=t.measures,c=void 0===s?[]:s;switch(r){case\\\"period\\\":return new n.periodCube({aggFunc:o,factTable:u,dimensions:l,measures:c});case\\\"moment\\\":default:return new n.momentCube({aggFunc:o,factTable:u,dimensions:l,measures:c})}}r.createCube=u,r.default=function(t){var r=t.dimensions,e=t.measures,n=t.asFields,f=t.operator,l=t.dataSource,s=u({type:\\\"moment\\\",aggFunc:i[f]||a.count,dimensions:r,measures:e,factTable:l}),c=o.tree2Table({dimensions:r,measures:e,cube:s});return c.forEach((function(t){n.forEach((function(r,n){t[r]=t[e[n]]}))})),c},function(t){for(var e in t)r.hasOwnProperty(e)||(r[e]=t[e])}(e(3))},function(t,r,e){!function(t){\\\"use strict\\\";function r(t){if(0===t.length)return 0;for(var r,e=t[0],n=0,o=1;o<t.length;o++)r=e+t[o],Math.abs(e)>=Math.abs(t[o])?n+=e-r+t[o]:n+=t[o]-r+e,e=r;return e+n}function e(t){if(0===t.length)throw new Error(\\\"mean requires at least one data point\\\");return r(t)/t.length}function n(t,r){var n,o,a=e(t),i=0;if(2===r)for(o=0;o<t.length;o++)i+=(n=t[o]-a)*n;else for(o=0;o<t.length;o++)i+=Math.pow(t[o]-a,r);return i}function o(t){if(0===t.length)throw new Error(\\\"variance requires at least one data point\\\");return n(t,2)/t.length}function a(t){if(1===t.length)return 0;var r=o(t);return Math.sqrt(r)}function i(t){if(0===t.length)throw new Error(\\\"mode requires at least one data point\\\");if(1===t.length)return t[0];for(var r=t[0],e=NaN,n=0,o=1,a=1;a<t.length+1;a++)t[a]!==r?(o>n&&(n=o,e=r),o=1,r=t[a]):o++;return e}function u(t){return t.slice().sort((function(t,r){return t-r}))}function f(t){if(0===t.length)throw new Error(\\\"min requires at least one data point\\\");for(var r=t[0],e=1;e<t.length;e++)t[e]<r&&(r=t[e]);return r}function l(t){if(0===t.length)throw new Error(\\\"max requires at least one data point\\\");for(var r=t[0],e=1;e<t.length;e++)t[e]>r&&(r=t[e]);return r}function s(t){for(var r=0,e=0;e<t.length;e++)r+=t[e];return r}function c(t,r){var e=t.length*r;if(0===t.length)throw new Error(\\\"quantile requires at least one data point.\\\");if(r<0||r>1)throw new Error(\\\"quantiles must be between 0 and 1\\\");return 1===r?t[t.length-1]:0===r?t[0]:e%1!=0?t[Math.ceil(e)-1]:t.length%2==0?(t[e-1]+t[e])/2:t[e]}function h(t,r,e,n){for(e=e||0,n=n||t.length-1;n>e;){if(n-e>600){var o=n-e+1,a=r-e+1,i=Math.log(o),u=.5*Math.exp(2*i/3),f=.5*Math.sqrt(i*u*(o-u)/o);a-o/2<0&&(f*=-1),h(t,r,Math.max(e,Math.floor(r-a*u/o+f)),Math.min(n,Math.floor(r+(o-a)*u/o+f)))}var l=t[r],s=e,c=n;for(v(t,e,r),t[n]>l&&v(t,e,n);s<c;){for(v(t,s,c),s++,c--;t[s]<l;)s++;for(;t[c]>l;)c--}t[e]===l?v(t,e,c):v(t,++c,n),c<=r&&(e=c+1),r<=c&&(n=c-1)}}function v(t,r,e){var n=t[r];t[r]=t[e],t[e]=n}function p(t,r){var e=t.slice();if(Array.isArray(r)){!function(t,r){for(var e=[0],n=0;n<r.length;n++)e.push(y(t.length,r[n]));e.push(t.length-1),e.sort(d);for(var o=[0,e.length-1];o.length;){var a=Math.ceil(o.pop()),i=Math.floor(o.pop());if(!(a-i<=1)){var u=Math.floor((i+a)/2);g(t,e[u],Math.floor(e[i]),Math.ceil(e[a])),o.push(i,u,u,a)}}}(e,r);for(var n=[],o=0;o<r.length;o++)n[o]=c(e,r[o]);return n}return g(e,y(e.length,r),0,e.length-1),c(e,r)}function g(t,r,e,n){r%1==0?h(t,r,e,n):(h(t,r=Math.floor(r),e,n),h(t,r+1,r+1,n))}function d(t,r){return t-r}function y(t,r){var e=t*r;return 1===r?t-1:0===r?0:e%1!=0?Math.ceil(e)-1:t%2==0?e-.5:e}function m(t,r){if(r<t[0])return 0;if(r>t[t.length-1])return 1;var e=function(t,r){for(var e=0,n=0,o=t.length;n<o;)r<=t[e=n+o>>>1]?o=e:n=-~e;return n}(t,r);if(t[e]!==r)return e/t.length;e++;var n=function(t,r){for(var e=0,n=0,o=t.length;n<o;)r>=t[e=n+o>>>1]?n=-~e:o=e;return n}(t,r);if(n===e)return e/t.length;var o=n-e+1;return o*(n+e)/2/o/t.length}function w(t){var r=p(t,.75),e=p(t,.25);if(\\\"number\\\"==typeof r&&\\\"number\\\"==typeof e)return r-e}function b(t){return+p(t,.5)}function M(t){for(var r=b(t),e=[],n=0;n<t.length;n++)e.push(Math.abs(t[n]-r));return b(e)}function E(t,r){r=r||Math.random;for(var e,n,o=t.length;o>0;)n=Math.floor(r()*o--),e=t[o],t[o]=t[n],t[n]=e;return t}function x(t,r){return E(t.slice(),r)}function _(t,r,e){return x(t,e).slice(0,r)}function S(t,r){for(var e=[],n=0;n<t;n++){for(var o=[],a=0;a<r;a++)o.push(0);e.push(o)}return e}function T(t){for(var r,e=0,n=0;n<t.length;n++)0!==n&&t[n]===r||(r=t[n],e++);return e}function O(t,r,e,n){var o;if(t>0){var a=(e[r]-e[t-1])/(r-t+1);o=n[r]-n[t-1]-(r-t+1)*a*a}else o=n[r]-e[r]*e[r]/(r+1);return o<0?0:o}function q(t,r,e,n,o,a,i){if(!(t>r)){var u=Math.floor((t+r)/2);n[e][u]=n[e-1][u-1],o[e][u]=u;var f=e;t>e&&(f=Math.max(f,o[e][t-1]||0)),f=Math.max(f,o[e-1][u]||0);var l,s,c,h=u-1;r<n[0].length-1&&(h=Math.min(h,o[e][r+1]||0));for(var v=h;v>=f&&!((l=O(v,u,a,i))+n[e-1][f-1]>=n[e][u]);--v)(s=O(f,u,a,i)+n[e-1][f-1])<n[e][u]&&(n[e][u]=s,o[e][u]=f),f++,(c=l+n[e-1][v-1])<n[e][u]&&(n[e][u]=c,o[e][u]=v);q(t,u-1,e,n,o,a,i),q(u+1,r,e,n,o,a,i)}}function F(t,r){if(t.length!==r.length)throw new Error(\\\"sampleCovariance requires samples with equal lengths\\\");if(t.length<2)throw new Error(\\\"sampleCovariance requires at least two data points in each sample\\\");for(var n=e(t),o=e(r),a=0,i=0;i<t.length;i++)a+=(t[i]-n)*(r[i]-o);return a/(t.length-1)}function N(t){if(t.length<2)throw new Error(\\\"sampleVariance requires at least two data points\\\");return n(t,2)/(t.length-1)}function j(t){var r=N(t);return Math.sqrt(r)}function D(t,r,e,n){return(t*r+e*n)/(r+n)}function P(t){if(0===t.length)throw new Error(\\\"meanSimple requires at least one data point\\\");return s(t)/t.length}function k(t){if(0===t.length)throw new Error(\\\"rootMeanSquare requires at least one data point\\\");for(var r=0,e=0;e<t.length;e++)r+=Math.pow(t[e],2);return Math.sqrt(r/t.length)}var L=function(){this.totalCount=0,this.data={}};L.prototype.train=function(t,r){for(var e in this.data[r]||(this.data[r]={}),t){var n=t[e];void 0===this.data[r][e]&&(this.data[r][e]={}),void 0===this.data[r][e][n]&&(this.data[r][e][n]=0),this.data[r][e][n]++}this.totalCount++},L.prototype.score=function(t){var r,e={};for(var n in t){var o=t[n];for(r in this.data)e[r]={},this.data[r][n]?e[r][n+\\\"_\\\"+o]=(this.data[r][n][o]||0)/this.totalCount:e[r][n+\\\"_\\\"+o]=0}var a={};for(r in e)for(var i in a[r]=0,e[r])a[r]+=e[r][i];return a};var A=function(){this.weights=[],this.bias=0};A.prototype.predict=function(t){if(t.length!==this.weights.length)return null;for(var r=0,e=0;e<this.weights.length;e++)r+=this.weights[e]*t[e];return(r+=this.bias)>0?1:0},A.prototype.train=function(t,r){if(0!==r&&1!==r)return null;t.length!==this.weights.length&&(this.weights=t,this.bias=1);var e=this.predict(t);if(\\\"number\\\"==typeof e&&e!==r){for(var n=r-e,o=0;o<this.weights.length;o++)this.weights[o]+=n*t[o];this.bias+=n}return this};var I=1e-4;function C(t){if(t<0)throw new Error(\\\"factorial requires a non-negative value\\\");if(Math.floor(t)!==t)throw new Error(\\\"factorial requires an integer input\\\");for(var r=1,e=2;e<=t;e++)r*=e;return r}var z=[.9999999999999971,57.15623566586292,-59.59796035547549,14.136097974741746,-.4919138160976202,3399464998481189e-20,4652362892704858e-20,-9837447530487956e-20,.0001580887032249125,-.00021026444172410488,.00021743961811521265,-.0001643181065367639,8441822398385275e-20,-26190838401581408e-21,36899182659531625e-22],G=Math.log(Math.sqrt(2*Math.PI)),R={1:{.995:0,.99:0,.975:0,.95:0,.9:.02,.5:.45,.1:2.71,.05:3.84,.025:5.02,.01:6.63,.005:7.88},2:{.995:.01,.99:.02,.975:.05,.95:.1,.9:.21,.5:1.39,.1:4.61,.05:5.99,.025:7.38,.01:9.21,.005:10.6},3:{.995:.07,.99:.11,.975:.22,.95:.35,.9:.58,.5:2.37,.1:6.25,.05:7.81,.025:9.35,.01:11.34,.005:12.84},4:{.995:.21,.99:.3,.975:.48,.95:.71,.9:1.06,.5:3.36,.1:7.78,.05:9.49,.025:11.14,.01:13.28,.005:14.86},5:{.995:.41,.99:.55,.975:.83,.95:1.15,.9:1.61,.5:4.35,.1:9.24,.05:11.07,.025:12.83,.01:15.09,.005:16.75},6:{.995:.68,.99:.87,.975:1.24,.95:1.64,.9:2.2,.5:5.35,.1:10.65,.05:12.59,.025:14.45,.01:16.81,.005:18.55},7:{.995:.99,.99:1.25,.975:1.69,.95:2.17,.9:2.83,.5:6.35,.1:12.02,.05:14.07,.025:16.01,.01:18.48,.005:20.28},8:{.995:1.34,.99:1.65,.975:2.18,.95:2.73,.9:3.49,.5:7.34,.1:13.36,.05:15.51,.025:17.53,.01:20.09,.005:21.96},9:{.995:1.73,.99:2.09,.975:2.7,.95:3.33,.9:4.17,.5:8.34,.1:14.68,.05:16.92,.025:19.02,.01:21.67,.005:23.59},10:{.995:2.16,.99:2.56,.975:3.25,.95:3.94,.9:4.87,.5:9.34,.1:15.99,.05:18.31,.025:20.48,.01:23.21,.005:25.19},11:{.995:2.6,.99:3.05,.975:3.82,.95:4.57,.9:5.58,.5:10.34,.1:17.28,.05:19.68,.025:21.92,.01:24.72,.005:26.76},12:{.995:3.07,.99:3.57,.975:4.4,.95:5.23,.9:6.3,.5:11.34,.1:18.55,.05:21.03,.025:23.34,.01:26.22,.005:28.3},13:{.995:3.57,.99:4.11,.975:5.01,.95:5.89,.9:7.04,.5:12.34,.1:19.81,.05:22.36,.025:24.74,.01:27.69,.005:29.82},14:{.995:4.07,.99:4.66,.975:5.63,.95:6.57,.9:7.79,.5:13.34,.1:21.06,.05:23.68,.025:26.12,.01:29.14,.005:31.32},15:{.995:4.6,.99:5.23,.975:6.27,.95:7.26,.9:8.55,.5:14.34,.1:22.31,.05:25,.025:27.49,.01:30.58,.005:32.8},16:{.995:5.14,.99:5.81,.975:6.91,.95:7.96,.9:9.31,.5:15.34,.1:23.54,.05:26.3,.025:28.85,.01:32,.005:34.27},17:{.995:5.7,.99:6.41,.975:7.56,.95:8.67,.9:10.09,.5:16.34,.1:24.77,.05:27.59,.025:30.19,.01:33.41,.005:35.72},18:{.995:6.26,.99:7.01,.975:8.23,.95:9.39,.9:10.87,.5:17.34,.1:25.99,.05:28.87,.025:31.53,.01:34.81,.005:37.16},19:{.995:6.84,.99:7.63,.975:8.91,.95:10.12,.9:11.65,.5:18.34,.1:27.2,.05:30.14,.025:32.85,.01:36.19,.005:38.58},20:{.995:7.43,.99:8.26,.975:9.59,.95:10.85,.9:12.44,.5:19.34,.1:28.41,.05:31.41,.025:34.17,.01:37.57,.005:40},21:{.995:8.03,.99:8.9,.975:10.28,.95:11.59,.9:13.24,.5:20.34,.1:29.62,.05:32.67,.025:35.48,.01:38.93,.005:41.4},22:{.995:8.64,.99:9.54,.975:10.98,.95:12.34,.9:14.04,.5:21.34,.1:30.81,.05:33.92,.025:36.78,.01:40.29,.005:42.8},23:{.995:9.26,.99:10.2,.975:11.69,.95:13.09,.9:14.85,.5:22.34,.1:32.01,.05:35.17,.025:38.08,.01:41.64,.005:44.18},24:{.995:9.89,.99:10.86,.975:12.4,.95:13.85,.9:15.66,.5:23.34,.1:33.2,.05:36.42,.025:39.36,.01:42.98,.005:45.56},25:{.995:10.52,.99:11.52,.975:13.12,.95:14.61,.9:16.47,.5:24.34,.1:34.28,.05:37.65,.025:40.65,.01:44.31,.005:46.93},26:{.995:11.16,.99:12.2,.975:13.84,.95:15.38,.9:17.29,.5:25.34,.1:35.56,.05:38.89,.025:41.92,.01:45.64,.005:48.29},27:{.995:11.81,.99:12.88,.975:14.57,.95:16.15,.9:18.11,.5:26.34,.1:36.74,.05:40.11,.025:43.19,.01:46.96,.005:49.65},28:{.995:12.46,.99:13.57,.975:15.31,.95:16.93,.9:18.94,.5:27.34,.1:37.92,.05:41.34,.025:44.46,.01:48.28,.005:50.99},29:{.995:13.12,.99:14.26,.975:16.05,.95:17.71,.9:19.77,.5:28.34,.1:39.09,.05:42.56,.025:45.72,.01:49.59,.005:52.34},30:{.995:13.79,.99:14.95,.975:16.79,.95:18.49,.9:20.6,.5:29.34,.1:40.26,.05:43.77,.025:46.98,.01:50.89,.005:53.67},40:{.995:20.71,.99:22.16,.975:24.43,.95:26.51,.9:29.05,.5:39.34,.1:51.81,.05:55.76,.025:59.34,.01:63.69,.005:66.77},50:{.995:27.99,.99:29.71,.975:32.36,.95:34.76,.9:37.69,.5:49.33,.1:63.17,.05:67.5,.025:71.42,.01:76.15,.005:79.49},60:{.995:35.53,.99:37.48,.975:40.48,.95:43.19,.9:46.46,.5:59.33,.1:74.4,.05:79.08,.025:83.3,.01:88.38,.005:91.95},70:{.995:43.28,.99:45.44,.975:48.76,.95:51.74,.9:55.33,.5:69.33,.1:85.53,.05:90.53,.025:95.02,.01:100.42,.005:104.22},80:{.995:51.17,.99:53.54,.975:57.15,.95:60.39,.9:64.28,.5:79.33,.1:96.58,.05:101.88,.025:106.63,.01:112.33,.005:116.32},90:{.995:59.2,.99:61.75,.975:65.65,.95:69.13,.9:73.29,.5:89.33,.1:107.57,.05:113.14,.025:118.14,.01:124.12,.005:128.3},100:{.995:67.33,.99:70.06,.975:74.22,.95:77.93,.9:82.36,.5:99.33,.1:118.5,.05:124.34,.025:129.56,.01:135.81,.005:140.17}},U=Math.sqrt(2*Math.PI),V={gaussian:function(t){return Math.exp(-.5*t*t)/U}},X={nrd:function(t){var r=j(t),e=w(t);return\\\"number\\\"==typeof e&&(r=Math.min(r,e/1.34)),1.06*r*Math.pow(t.length,-.2)}};function B(t,r,e){var n,o;if(void 0===r)n=V.gaussian;else if(\\\"string\\\"==typeof r){if(!V[r])throw new Error('Unknown kernel \\\"'+r+'\\\"');n=V[r]}else n=r;if(void 0===e)o=X.nrd(t);else if(\\\"string\\\"==typeof e){if(!X[e])throw new Error('Unknown bandwidth method \\\"'+e+'\\\"');o=X[e](t)}else o=e;return function(r){var e=0,a=0;for(e=0;e<t.length;e++)a+=n((r-t[e])/o);return a/o/t.length}}var J=Math.sqrt(2*Math.PI);function K(t){for(var r=t,e=t,n=1;n<15;n++)r+=e*=t*t/(2*n+1);return Math.round(1e4*(.5+r/J*Math.exp(-t*t/2)))/1e4}for(var W=[],Y=0;Y<=3.09;Y+=.01)W.push(K(Y));function $(t){var r=1/(1+.5*Math.abs(t)),e=r*Math.exp(-t*t+((((((((.17087277*r-.82215223)*r+1.48851587)*r-1.13520398)*r+.27886807)*r-.18628806)*r+.09678418)*r+.37409196)*r+1.00002368)*r-1.26551223);return t>=0?1-e:e-1}function H(t){var r=8*(Math.PI-3)/(3*Math.PI*(4-Math.PI)),e=Math.sqrt(Math.sqrt(Math.pow(2/(Math.PI*r)+Math.log(1-t*t)/2,2)-Math.log(1-t*t)/r)-(2/(Math.PI*r)+Math.log(1-t*t)/2));return t>=0?e:-e}function Q(t){if(\\\"number\\\"==typeof t)return t<0?-1:0===t?0:1;throw new TypeError(\\\"not a number\\\")}function Z(t,r){for(var e=0,n=0;n<t.length;n++){var o=t[n]-r[n];e+=o*o}return Math.sqrt(e)}function tt(t,r){return t.map((function(t){for(var e=Number.MAX_VALUE,n=-1,o=0;o<r.length;o++){var a=Z(t,r[o]);a<e&&(e=a,n=o)}return n}))}function rt(t,r,e){for(var n=t[0].length,o=S(e,n),a=Array(e).fill(0),i=t.length,u=0;u<i;u++){for(var f=t[u],l=r[u],s=o[l],c=0;c<n;c++)s[c]+=f[c];a[l]+=1}for(var h=0;h<e;h++){if(0===a[h])throw new Error(\\\"Centroid \\\"+h+\\\" has no friends\\\");for(var v=o[h],p=0;p<n;p++)v[p]/=a[h]}return o}function et(t,r){for(var e=0,n=0;n<t.length;n++)e+=Z(t[n],r[n]);return e}function nt(t,r){if(t.length!==r.length)throw new Error(\\\"must have exactly as many labels as points\\\");for(var e=function(t){for(var r=1+l(t),e=Array(r),n=0;n<t.length;n++){var o=t[n];void 0===e[o]&&(e[o]=[]),e[o].push(n)}return e}(r),n=function(t){for(var r=t.length,e=S(r,r),n=0;n<r;n++)for(var o=0;o<n;o++)e[n][o]=Z(t[n],t[o]),e[o][n]=e[n][o];return e}(t),o=[],a=0;a<t.length;a++){var i=0;if(e[r[a]].length>1){var u=at(a,e[r[a]],n),f=ot(a,r,e,n);i=(f-u)/Math.max(u,f)}o.push(i)}return o}function ot(t,r,e,n){for(var o=r[t],a=Number.MAX_VALUE,i=0;i<e.length;i++)if(i!==o){var u=at(t,e[i],n);u<a&&(a=u)}return a}function at(t,r,e){for(var n=0,o=0;o<r.length;o++)n+=e[t][r[o]];return n/r.length}function it(t,r){return 0===t&&0===r?0:Math.abs((t-r)/r)}t.BayesianClassifier=L,t.PerceptronModel=A,t.addToMean=function(t,r,e){return t+(e-t)/(r+1)},t.approxEqual=function(t,r,e){return void 0===e&&(e=I),it(t,r)<=e},t.average=e,t.averageSimple=P,t.bayesian=L,t.bernoulliDistribution=function(t){if(t<0||t>1)throw new Error(\\\"bernoulliDistribution requires probability to be between 0 and 1 inclusive\\\");return[1-t,t]},t.binomialDistribution=function(t,r){if(!(r<0||r>1||t<=0||t%1!=0)){var e=0,n=0,o=[],a=1;do{o[e]=a*Math.pow(r,e)*Math.pow(1-r,t-e),n+=o[e],a=a*(t-++e+1)/e}while(n<.9999);return o}},t.bisect=function(t,r,e,n,o){if(\\\"function\\\"!=typeof t)throw new TypeError(\\\"func must be a function\\\");for(var a=0;a<n;a++){var i=(r+e)/2;if(0===t(i)||Math.abs((e-r)/2)<o)return i;Q(t(i))===Q(t(r))?r=i:e=i}throw new Error(\\\"maximum number of iterations exceeded\\\")},t.chiSquaredDistributionTable=R,t.chiSquaredGoodnessOfFit=function(t,r,n){for(var o=0,a=r(e(t)),i=[],u=[],f=0;f<t.length;f++)void 0===i[t[f]]&&(i[t[f]]=0),i[t[f]]++;for(var l=0;l<i.length;l++)void 0===i[l]&&(i[l]=0);for(var s in a)s in i&&(u[+s]=a[s]*t.length);for(var c=u.length-1;c>=0;c--)u[c]<3&&(u[c-1]+=u[c],u.pop(),i[c-1]+=i[c],i.pop());for(var h=0;h<i.length;h++)o+=Math.pow(i[h]-u[h],2)/u[h];var v=i.length-1-1;return R[v][n]<o},t.chunk=function(t,r){var e=[];if(r<1)throw new Error(\\\"chunk size must be a positive number\\\");if(Math.floor(r)!==r)throw new Error(\\\"chunk size must be an integer\\\");for(var n=0;n<t.length;n+=r)e.push(t.slice(n,n+r));return e},t.ckmeans=function(t,r){if(r>t.length)throw new Error(\\\"cannot generate more classes than there are data values\\\");var e=u(t);if(1===T(e))return[e];var n=S(r,e.length),o=S(r,e.length);!function(t,r,e){for(var n=r[0].length,o=t[Math.floor(n/2)],a=[],i=[],u=0,f=void 0;u<n;++u)f=t[u]-o,0===u?(a.push(f),i.push(f*f)):(a.push(a[u-1]+f),i.push(i[u-1]+f*f)),r[0][u]=O(0,u,a,i),e[0][u]=0;for(var l=1;l<r.length;++l)q(l<r.length-1?l:n-1,n-1,l,r,e,a,i)}(e,n,o);for(var a=[],i=o[0].length-1,f=o.length-1;f>=0;f--){var l=o[f][i];a[f]=e.slice(l,i+1),f>0&&(i=l-1)}return a},t.combinations=function t(r,e){var n,o,a,i,u=[];for(n=0;n<r.length;n++)if(1===e)u.push([r[n]]);else for(a=t(r.slice(n+1,r.length),e-1),o=0;o<a.length;o++)(i=a[o]).unshift(r[n]),u.push(i);return u},t.combinationsReplacement=function t(r,e){for(var n=[],o=0;o<r.length;o++)if(1===e)n.push([r[o]]);else for(var a=t(r.slice(o,r.length),e-1),i=0;i<a.length;i++)n.push([r[o]].concat(a[i]));return n},t.combineMeans=D,t.combineVariances=function(t,r,e,n,o,a){var i=D(r,e,o,a);return(e*(t+Math.pow(r-i,2))+a*(n+Math.pow(o-i,2)))/(e+a)},t.cumulativeStdNormalProbability=function(t){var r=Math.abs(t),e=Math.min(Math.round(100*r),W.length-1);return t>=0?W[e]:+(1-W[e]).toFixed(4)},t.epsilon=I,t.equalIntervalBreaks=function(t,r){if(t.length<2)return t;for(var e=f(t),n=l(t),o=[e],a=(n-e)/r,i=1;i<r;i++)o.push(o[0]+a*i);return o.push(n),o},t.erf=$,t.errorFunction=$,t.extent=function(t){if(0===t.length)throw new Error(\\\"extent requires at least one data point\\\");for(var r=t[0],e=t[0],n=1;n<t.length;n++)t[n]>e&&(e=t[n]),t[n]<r&&(r=t[n]);return[r,e]},t.extentSorted=function(t){return[t[0],t[t.length-1]]},t.factorial=C,t.gamma=function t(r){if(Number.isInteger(r))return r<=0?NaN:C(r-1);if(--r<0)return Math.PI/(Math.sin(Math.PI*-r)*t(-r));var e=r+1/4;return Math.pow(r/Math.E,r)*Math.sqrt(2*Math.PI*(r+1/6))*(1+1/144/Math.pow(e,2)-1/12960/Math.pow(e,3)-257/207360/Math.pow(e,4)-52/2612736/Math.pow(e,5)+5741173/9405849600/Math.pow(e,6)+37529/18811699200/Math.pow(e,7))},t.gammaln=function(t){if(t<=0)return 1/0;t--;for(var r=z[0],e=1;e<15;e++)r+=z[e]/(t+e);var n=5.2421875+t;return G+Math.log(r)-n+(t+.5)*Math.log(n)},t.geometricMean=function(t){if(0===t.length)throw new Error(\\\"geometricMean requires at least one data point\\\");for(var r=1,e=0;e<t.length;e++){if(t[e]<=0)throw new Error(\\\"geometricMean requires only positive numbers as input\\\");r*=t[e]}return Math.pow(r,1/t.length)},t.harmonicMean=function(t){if(0===t.length)throw new Error(\\\"harmonicMean requires at least one data point\\\");for(var r=0,e=0;e<t.length;e++){if(t[e]<=0)throw new Error(\\\"harmonicMean requires only positive numbers as input\\\");r+=1/t[e]}return t.length/r},t.interquartileRange=w,t.inverseErrorFunction=H,t.iqr=w,t.kMeansCluster=function(t,r,e){void 0===e&&(e=Math.random);for(var n=null,o=_(t,r,e),a=null,i=Number.MAX_VALUE;0!==i;)n=o,i=et(o=rt(t,a=tt(t,o),r),n);return{labels:a,centroids:o}},t.kde=B,t.kernelDensityEstimation=B,t.linearRegression=function(t){var r,e,n=t.length;if(1===n)r=0,e=t[0][1];else{for(var o,a,i,u=0,f=0,l=0,s=0,c=0;c<n;c++)u+=a=(o=t[c])[0],f+=i=o[1],l+=a*a,s+=a*i;e=f/n-(r=(n*s-u*f)/(n*l-u*u))*u/n}return{m:r,b:e}},t.linearRegressionLine=function(t){return function(r){return t.b+t.m*r}},t.mad=M,t.max=l,t.maxSorted=function(t){return t[t.length-1]},t.mean=e,t.meanSimple=P,t.median=b,t.medianAbsoluteDeviation=M,t.medianSorted=function(t){return c(t,.5)},t.min=f,t.minSorted=function(t){return t[0]},t.mode=function(t){return i(u(t))},t.modeFast=function(t){for(var r,e=new Map,n=0,o=0;o<t.length;o++){var a=e.get(t[o]);void 0===a?a=1:a++,a>n&&(r=t[o],n=a),e.set(t[o],a)}if(0===n)throw new Error(\\\"mode requires at last one data point\\\");return r},t.modeSorted=i,t.numericSort=u,t.perceptron=A,t.permutationTest=function(t,r,n,o,a){if(void 0===o&&(o=1e4),void 0===n&&(n=\\\"two_side\\\"),\\\"two_side\\\"!==n&&\\\"greater\\\"!==n&&\\\"less\\\"!==n)throw new Error(\\\"`alternative` must be either 'two_side', 'greater', or 'less'\\\");for(var i=e(t)-e(r),u=new Array(o),f=t.concat(r),l=Math.floor(f.length/2),s=0;s<o;s++){E(f,a);var c=f.slice(0,l),h=f.slice(l,f.length),v=e(c)-e(h);u[s]=v}var p=0;if(\\\"two_side\\\"===n)for(var g=0;g<=o;g++)Math.abs(u[g])>=Math.abs(i)&&(p+=1);else if(\\\"greater\\\"===n)for(var d=0;d<=o;d++)u[d]>=i&&(p+=1);else for(var y=0;y<=o;y++)u[y]<=i&&(p+=1);return p/o},t.permutationsHeap=function(t){for(var r=new Array(t.length),e=[t.slice()],n=0;n<t.length;n++)r[n]=0;for(var o=0;o<t.length;)if(r[o]<o){var a=0;o%2!=0&&(a=r[o]);var i=t[a];t[a]=t[o],t[o]=i,e.push(t.slice()),r[o]++,o=0}else r[o]=0,o++;return e},t.poissonDistribution=function(t){if(!(t<=0)){var r=0,e=0,n=[],o=1;do{n[r]=Math.exp(-t)*Math.pow(t,r)/o,e+=n[r],o*=++r}while(e<.9999);return n}},t.probit=function(t){return 0===t?t=I:t>=1&&(t=.9999),Math.sqrt(2)*H(2*t-1)},t.product=function(t){for(var r=1,e=0;e<t.length;e++)r*=t[e];return r},t.quantile=p,t.quantileRank=function(t,r){return m(u(t),r)},t.quantileRankSorted=m,t.quantileSorted=c,t.quickselect=h,t.rSquared=function(t,r){if(t.length<2)return 1;for(var e=0,n=0;n<t.length;n++)e+=t[n][1];for(var o=e/t.length,a=0,i=0;i<t.length;i++)a+=Math.pow(o-t[i][1],2);for(var u=0,f=0;f<t.length;f++)u+=Math.pow(t[f][1]-r(t[f][0]),2);return 1-u/a},t.relativeError=it,t.rms=k,t.rootMeanSquare=k,t.sample=_,t.sampleCorrelation=function(t,r){return F(t,r)/j(t)/j(r)},t.sampleCovariance=F,t.sampleKurtosis=function(t){var r=t.length;if(r<4)throw new Error(\\\"sampleKurtosis requires at least four data points\\\");for(var n,o=e(t),a=0,i=0,u=0;u<r;u++)a+=(n=t[u]-o)*n,i+=n*n*n*n;return(r-1)/((r-2)*(r-3))*(r*(r+1)*i/(a*a)-3*(r-1))},t.sampleSkewness=function(t){if(t.length<3)throw new Error(\\\"sampleSkewness requires at least three data points\\\");for(var r,n=e(t),o=0,a=0,i=0;i<t.length;i++)o+=(r=t[i]-n)*r,a+=r*r*r;var u=t.length-1,f=Math.sqrt(o/u),l=t.length;return l*a/((l-1)*(l-2)*Math.pow(f,3))},t.sampleStandardDeviation=j,t.sampleVariance=N,t.sampleWithReplacement=function(t,r,e){if(0===t.length)return[];e=e||Math.random;for(var n=t.length,o=[],a=0;a<r;a++){var i=Math.floor(e()*n);o.push(t[i])}return o},t.shuffle=x,t.shuffleInPlace=E,t.sign=Q,t.silhouette=nt,t.silhouetteMetric=function(t,r){return l(nt(t,r))},t.standardDeviation=a,t.standardNormalTable=W,t.subtractFromMean=function(t,r,e){return(t*r-e)/(r-1)},t.sum=r,t.sumNthPowerDeviations=n,t.sumSimple=s,t.tTest=function(t,r){return(e(t)-r)/(a(t)/Math.sqrt(t.length))},t.tTestTwoSample=function(t,r,n){var o=t.length,a=r.length;if(!o||!a)return null;n||(n=0);var i=e(t),u=e(r),f=N(t),l=N(r);if(\\\"number\\\"==typeof i&&\\\"number\\\"==typeof u&&\\\"number\\\"==typeof f&&\\\"number\\\"==typeof l){var s=((o-1)*f+(a-1)*l)/(o+a-2);return(i-u-n)/Math.sqrt(s*(1/o+1/a))}},t.uniqueCountSorted=T,t.variance=o,t.zScore=function(t,r,e){return(t-r)/e},Object.defineProperty(t,\\\"__esModule\\\",{value:!0})}(r)},function(t,r,e){\\\"use strict\\\";Object.defineProperty(r,\\\"__esModule\\\",{value:!0}),r.sum_unsafe=function(t,r){var e={};r.forEach((function(t){e[t]=0}));for(var n=function(n,o){r.forEach((function(r){e[r]+=t[n][r]}))},o=0,a=t.length;o<a;o++)n(o);return e},r.sum=function(t,r){var e={};r.forEach((function(t){e[t]=0}));for(var n=function(n,o){r.forEach((function(r){e[r]+=Number(t[n][r])||0}))},o=0,a=t.length;o<a;o++)n(o);return e},r.count=function(t,r){var e={};r.forEach((function(t){e[t]=0}));for(var n=0,o=t.length;n<o;n++)r.forEach((function(t){e[t]++}));return e},r.mean=function(t,r){var e={};r.forEach((function(t){e[t]=0}));for(var n=function(n,o){r.forEach((function(r){e[r]+=Number(t[n][r])||0}))},o=0,a=t.length;o<a;o++)n(o);return r.forEach((function(r){e[r]/=t.length})),e}},function(t,r,e){\\\"use strict\\\";Object.defineProperty(r,\\\"__esModule\\\",{value:!0});var n=e(5);r.periodCube=n.default;var o=e(6);r.momentCube=o.default},function(t,r,e){\\\"use strict\\\";var n=this&&this.__read||function(t,r){var e=\\\"function\\\"===typeof Symbol&&t[Symbol.iterator];if(!e)return t;var n,o,a=e.call(t),i=[];try{for(;(void 0===r||r-- >0)&&!(n=a.next()).done;)i.push(n.value)}catch(u){o={error:u}}finally{try{n&&!n.done&&(e=a.return)&&e.call(a)}finally{if(o)throw o.error}}return i},o=this&&this.__spread||function(){for(var t=[],r=0;r<arguments.length;r++)t=t.concat(n(arguments[r]));return t},a=this&&this.__values||function(t){var r=\\\"function\\\"===typeof Symbol&&Symbol.iterator,e=r&&t[r],n=0;if(e)return e.call(t);if(t&&\\\"number\\\"===typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(r?\\\"Object is not iterable.\\\":\\\"Symbol.iterator is not defined.\\\")};Object.defineProperty(r,\\\"__esModule\\\",{value:!0});var i=function(){function t(t){this.children=new Map,this._rawData=[],this.aggFunc=t,this.cache=!1}return t.prototype.push=function(){for(var t,r=[],e=0;e<arguments.length;e++)r[e]=arguments[e];(t=this._rawData).push.apply(t,o(r))},t.prototype.aggData=function(t){return void 0===t&&(t=[]),this.cache||(this._aggData=this.aggFunc(this.rawData,t),this.cache=!0),this._aggData},t.prototype.clearCache=function(){this.cache=!1},Object.defineProperty(t.prototype,\\\"rawData\\\",{get:function(){var t,r;if(!this.cache){if(0!==this.children.size){var e=this.children.values(),n=[];try{for(var o=a(e),i=o.next();!i.done;i=o.next()){var u=i.value,f=void 0,l=u.rawData,s=l.length;for(f=0;f<s;f++)n.push(l[f])}}catch(c){t={error:c}}finally{try{i&&!i.done&&(r=o.return)&&r.call(o)}finally{if(t)throw t.error}}this._rawData=n}this.cache=!0}return this._rawData},enumerable:!0,configurable:!0}),t.prototype.getNode=function(t){return function r(e,o){var i,u;if(o===t.length)return e;var f=e.children.entries();try{for(var l=a(f),s=l.next();!s.done;s=l.next()){var c=n(s.value,2),h=c[0],v=c[1];if(h===t[o])return r(v,o+1)}}catch(p){i={error:p}}finally{try{s&&!s.done&&(u=l.return)&&u.call(l)}finally{if(i)throw i.error}}return null}(this,0)},t}(),u=function(){function t(t){this.aggFunc=t.aggFunc,this.factTable=t.factTable,this.dimensions=t.dimensions,this.measures=t.measures}return t.prototype.get=function(t){var r=this,e=r.tree,o=(r.aggFunc,r.measures);return function r(e,i){var u,f;if(i===t.length)return e.aggData(o);var l=e.children.entries();try{for(var s=a(l),c=s.next();!c.done;c=s.next()){var h=n(c.value,2),v=h[0],p=h[1];if(v===t[i])return r(p,i+1)}}catch(g){u={error:g}}finally{try{c&&!c.done&&(f=s.return)&&f.call(s)}finally{if(u)throw u.error}}return!1}(e,0)},t.prototype.getNode=function(t){return this.tree.getNode(t)},t.prototype.buildTree=function(){var t,r=new i(this.aggFunc),e=this.factTable.length;for(t=0;t<e;t++)this.insertNode(this.factTable[t],r,0);return this.tree=r,r},t.prototype.insertNode=function(t,r,e){if(r.push(t),r.cache=!1,e<this.dimensions.length){var n=t[this.dimensions[e]];r.children.has(n)||r.children.set(n,new i(this.aggFunc)),this.insertNode(t,r.children.get(n),e+1)}},t.prototype.aggTree=function(t){var r,e;void 0===t&&(t=this.tree);var n=t.children.values();try{for(var o=a(n),i=o.next();!i.done;i=o.next()){var u=i.value;this.aggTree(u)}}catch(f){r={error:f}}finally{try{i&&!i.done&&(e=o.return)&&e.call(o)}finally{if(r)throw r.error}}return t.aggData(this.measures),t},t.prototype.aggNode=function(t){var r,e;void 0===t&&(t=this.tree);var n=t.children.values();try{for(var o=a(n),i=o.next();!i.done;i=o.next()){var u=i.value;this.aggTree(u)}}catch(f){r={error:f}}finally{try{i&&!i.done&&(e=o.return)&&e.call(o)}finally{if(r)throw r.error}}return t.aggData(this.measures),t},t}();r.default=u},function(t,r,e){\\\"use strict\\\";var n=this&&this.__read||function(t,r){var e=\\\"function\\\"===typeof Symbol&&t[Symbol.iterator];if(!e)return t;var n,o,a=e.call(t),i=[];try{for(;(void 0===r||r-- >0)&&!(n=a.next()).done;)i.push(n.value)}catch(u){o={error:u}}finally{try{n&&!n.done&&(e=a.return)&&e.call(a)}finally{if(o)throw o.error}}return i},o=this&&this.__spread||function(){for(var t=[],r=0;r<arguments.length;r++)t=t.concat(n(arguments[r]));return t},a=this&&this.__values||function(t){var r=\\\"function\\\"===typeof Symbol&&Symbol.iterator,e=r&&t[r],n=0;if(e)return e.call(t);if(t&&\\\"number\\\"===typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(r?\\\"Object is not iterable.\\\":\\\"Symbol.iterator is not defined.\\\")};Object.defineProperty(r,\\\"__esModule\\\",{value:!0});var i=function(){function t(){this.children=new Map,this.rawData=[]}return t.prototype.push=function(){for(var t,r=[],e=0;e<arguments.length;e++)r[e]=arguments[e];(t=this.rawData).push.apply(t,o(r))},t.prototype.aggData=function(t,r){return void 0===r&&(r=[]),this._aggData=t(this.rawData,r),this._aggData},t.prototype.getNode=function(t){return function r(e,o){var i,u;if(o===t.length)return e;var f=e.children.entries();try{for(var l=a(f),s=l.next();!s.done;s=l.next()){var c=n(s.value,2),h=c[0],v=c[1];if(h===t[o])return r(v,o+1)}}catch(p){i={error:p}}finally{try{s&&!s.done&&(u=l.return)&&u.call(l)}finally{if(i)throw i.error}}return null}(this,0)},t}();r.Node=i;var u=function(){function t(t){this.aggFunc=t.aggFunc,this.factTable=t.factTable,this.dimensions=t.dimensions,this.measures=t.measures,this.buildTree(),this.aggTree()}return t.prototype.get=function(t){var r=this,e=r.tree,o=r.aggFunc,i=r.measures;return function r(e,u){var f,l;if(u===t.length)return e.aggData(o,i);var s=e.children.entries();try{for(var c=a(s),h=c.next();!h.done;h=c.next()){var v=n(h.value,2),p=v[0],g=v[1];if(p===t[u])return r(g,u+1)}}catch(d){f={error:d}}finally{try{h&&!h.done&&(l=c.return)&&l.call(c)}finally{if(f)throw f.error}}return!1}(e,0)},t.prototype.getNode=function(t){return this.tree.getNode(t)},t.prototype.setData=function(t){var r=t.aggFunc,e=void 0===r?this.aggFunc:r,n=t.factTable,o=void 0===n?this.factTable:n,a=t.dimensions,i=void 0===a?this.dimensions:a,u=t.measures,f=void 0===u?this.measures:u;i!==this.dimensions||o!==this.factTable?(this.dimensions=i,this.factTable=o,this.measures=f,this.aggFunc=e,this.buildTree(),this.aggTree()):f===this.measures&&e===this.aggFunc||(this.measures=f,this.aggFunc=e,this.aggTree())},t.prototype.buildTree=function(){var t,r=new i,e=this.factTable.length;for(t=0;t<e;t++)this.insertNode(this.factTable[t],r,0);return this.tree=r,r},t.prototype.insertNode=function(t,r,e){if(e===this.dimensions.length)r.push(t);else{var n=t[this.dimensions[e]];r.children.has(n)||r.children.set(n,new i),this.insertNode(t,r.children.get(n),e+1)}},t.prototype.aggTree=function(t){var r,e;if(void 0===t&&(t=this.tree),t.children.size>0){t.rawData=[];var n=t.children.values();try{for(var o=a(n),i=o.next();!i.done;i=o.next()){var u=i.value,f=void 0,l=this.aggTree(u).rawData,s=l.length;for(f=0;f<s;f++)t.rawData.push(l[f])}}catch(c){r={error:c}}finally{try{i&&!i.done&&(e=o.return)&&e.call(o)}finally{if(r)throw r.error}}}return t.aggData(this.aggFunc,this.measures),t},t}();r.default=u},function(t,r,e){\\\"use strict\\\";var n=this&&this.__assign||function(){return(n=Object.assign||function(t){for(var r,e=1,n=arguments.length;e<n;e++)for(var o in r=arguments[e])Object.prototype.hasOwnProperty.call(r,o)&&(t[o]=r[o]);return t}).apply(this,arguments)},o=this&&this.__values||function(t){var r=\\\"function\\\"===typeof Symbol&&Symbol.iterator,e=r&&t[r],n=0;if(e)return e.call(t);if(t&&\\\"number\\\"===typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(r?\\\"Object is not iterable.\\\":\\\"Symbol.iterator is not defined.\\\")},a=this&&this.__read||function(t,r){var e=\\\"function\\\"===typeof Symbol&&t[Symbol.iterator];if(!e)return t;var n,o,a=e.call(t),i=[];try{for(;(void 0===r||r-- >0)&&!(n=a.next()).done;)i.push(n.value)}catch(u){o={error:u}}finally{try{n&&!n.done&&(e=a.return)&&e.call(a)}finally{if(o)throw o.error}}return i};Object.defineProperty(r,\\\"__esModule\\\",{value:!0}),r.tree2Table=function(t){var r=t.dimensions,e=(t.measures,t.cube),i=(e.aggFunc,[]);return function t(e,u,f){var l,s,c;if(0!==e.children.size)try{for(var h=o(e.children.entries()),v=h.next();!v.done;v=h.next()){var p=a(v.value,2),g=p[0];t(p[1],n(n({},u),((c={})[r[f]]=g,c)),f+1)}}catch(y){l={error:y}}finally{try{v&&!v.done&&(s=h.return)&&s.call(h)}finally{if(l)throw l.error}}else{var d=e._aggData;i.push(n(n({},u),d))}}(e.tree,{},0),i}},function(t,r,e){var n=function(t){\\\"use strict\\\";var r,e=Object.prototype,n=e.hasOwnProperty,o=\\\"function\\\"===typeof Symbol?Symbol:{},a=o.iterator||\\\"@@iterator\\\",i=o.asyncIterator||\\\"@@asyncIterator\\\",u=o.toStringTag||\\\"@@toStringTag\\\";function f(t,r,e){return Object.defineProperty(t,r,{value:e,enumerable:!0,configurable:!0,writable:!0}),t[r]}try{f({},\\\"\\\")}catch(j){f=function(t,r,e){return t[r]=e}}function l(t,r,e,n){var o=r&&r.prototype instanceof d?r:d,a=Object.create(o.prototype),i=new q(n||[]);return a._invoke=function(t,r,e){var n=c;return function(o,a){if(n===v)throw new Error(\\\"Generator is already running\\\");if(n===p){if(\\\"throw\\\"===o)throw a;return N()}for(e.method=o,e.arg=a;;){var i=e.delegate;if(i){var u=S(i,e);if(u){if(u===g)continue;return u}}if(\\\"next\\\"===e.method)e.sent=e._sent=e.arg;else if(\\\"throw\\\"===e.method){if(n===c)throw n=p,e.arg;e.dispatchException(e.arg)}else\\\"return\\\"===e.method&&e.abrupt(\\\"return\\\",e.arg);n=v;var f=s(t,r,e);if(\\\"normal\\\"===f.type){if(n=e.done?p:h,f.arg===g)continue;return{value:f.arg,done:e.done}}\\\"throw\\\"===f.type&&(n=p,e.method=\\\"throw\\\",e.arg=f.arg)}}}(t,e,i),a}function s(t,r,e){try{return{type:\\\"normal\\\",arg:t.call(r,e)}}catch(j){return{type:\\\"throw\\\",arg:j}}}t.wrap=l;var c=\\\"suspendedStart\\\",h=\\\"suspendedYield\\\",v=\\\"executing\\\",p=\\\"completed\\\",g={};function d(){}function y(){}function m(){}var w={};w[a]=function(){return this};var b=Object.getPrototypeOf,M=b&&b(b(F([])));M&&M!==e&&n.call(M,a)&&(w=M);var E=m.prototype=d.prototype=Object.create(w);function x(t){[\\\"next\\\",\\\"throw\\\",\\\"return\\\"].forEach((function(r){f(t,r,(function(t){return this._invoke(r,t)}))}))}function _(t,r){function e(o,a,i,u){var f=s(t[o],t,a);if(\\\"throw\\\"!==f.type){var l=f.arg,c=l.value;return c&&\\\"object\\\"===typeof c&&n.call(c,\\\"__await\\\")?r.resolve(c.__await).then((function(t){e(\\\"next\\\",t,i,u)}),(function(t){e(\\\"throw\\\",t,i,u)})):r.resolve(c).then((function(t){l.value=t,i(l)}),(function(t){return e(\\\"throw\\\",t,i,u)}))}u(f.arg)}var o;this._invoke=function(t,n){function a(){return new r((function(r,o){e(t,n,r,o)}))}return o=o?o.then(a,a):a()}}function S(t,e){var n=t.iterator[e.method];if(n===r){if(e.delegate=null,\\\"throw\\\"===e.method){if(t.iterator.return&&(e.method=\\\"return\\\",e.arg=r,S(t,e),\\\"throw\\\"===e.method))return g;e.method=\\\"throw\\\",e.arg=new TypeError(\\\"The iterator does not provide a 'throw' method\\\")}return g}var o=s(n,t.iterator,e.arg);if(\\\"throw\\\"===o.type)return e.method=\\\"throw\\\",e.arg=o.arg,e.delegate=null,g;var a=o.arg;return a?a.done?(e[t.resultName]=a.value,e.next=t.nextLoc,\\\"return\\\"!==e.method&&(e.method=\\\"next\\\",e.arg=r),e.delegate=null,g):a:(e.method=\\\"throw\\\",e.arg=new TypeError(\\\"iterator result is not an object\\\"),e.delegate=null,g)}function T(t){var r={tryLoc:t[0]};1 in t&&(r.catchLoc=t[1]),2 in t&&(r.finallyLoc=t[2],r.afterLoc=t[3]),this.tryEntries.push(r)}function O(t){var r=t.completion||{};r.type=\\\"normal\\\",delete r.arg,t.completion=r}function q(t){this.tryEntries=[{tryLoc:\\\"root\\\"}],t.forEach(T,this),this.reset(!0)}function F(t){if(t){var e=t[a];if(e)return e.call(t);if(\\\"function\\\"===typeof t.next)return t;if(!isNaN(t.length)){var o=-1,i=function e(){for(;++o<t.length;)if(n.call(t,o))return e.value=t[o],e.done=!1,e;return e.value=r,e.done=!0,e};return i.next=i}}return{next:N}}function N(){return{value:r,done:!0}}return y.prototype=E.constructor=m,m.constructor=y,y.displayName=f(m,u,\\\"GeneratorFunction\\\"),t.isGeneratorFunction=function(t){var r=\\\"function\\\"===typeof t&&t.constructor;return!!r&&(r===y||\\\"GeneratorFunction\\\"===(r.displayName||r.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,m):(t.__proto__=m,f(t,u,\\\"GeneratorFunction\\\")),t.prototype=Object.create(E),t},t.awrap=function(t){return{__await:t}},x(_.prototype),_.prototype[i]=function(){return this},t.AsyncIterator=_,t.async=function(r,e,n,o,a){void 0===a&&(a=Promise);var i=new _(l(r,e,n,o),a);return t.isGeneratorFunction(e)?i:i.next().then((function(t){return t.done?t.value:i.next()}))},x(E),f(E,u,\\\"Generator\\\"),E[a]=function(){return this},E.toString=function(){return\\\"[object Generator]\\\"},t.keys=function(t){var r=[];for(var e in t)r.push(e);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=F,q.prototype={constructor:q,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=r,this.done=!1,this.delegate=null,this.method=\\\"next\\\",this.arg=r,this.tryEntries.forEach(O),!t)for(var e in this)\\\"t\\\"===e.charAt(0)&&n.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=r)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if(\\\"throw\\\"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function o(n,o){return u.type=\\\"throw\\\",u.arg=t,e.next=n,o&&(e.method=\\\"next\\\",e.arg=r),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],u=i.completion;if(\\\"root\\\"===i.tryLoc)return o(\\\"end\\\");if(i.tryLoc<=this.prev){var f=n.call(i,\\\"catchLoc\\\"),l=n.call(i,\\\"finallyLoc\\\");if(f&&l){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(f){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!l)throw new Error(\\\"try statement without catch or finally\\\");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(t,r){for(var e=this.tryEntries.length-1;e>=0;--e){var o=this.tryEntries[e];if(o.tryLoc<=this.prev&&n.call(o,\\\"finallyLoc\\\")&&this.prev<o.finallyLoc){var a=o;break}}a&&(\\\"break\\\"===t||\\\"continue\\\"===t)&&a.tryLoc<=r&&r<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=t,i.arg=r,a?(this.method=\\\"next\\\",this.next=a.finallyLoc,g):this.complete(i)},complete:function(t,r){if(\\\"throw\\\"===t.type)throw t.arg;return\\\"break\\\"===t.type||\\\"continue\\\"===t.type?this.next=t.arg:\\\"return\\\"===t.type?(this.rval=this.arg=t.arg,this.method=\\\"return\\\",this.next=\\\"end\\\"):\\\"normal\\\"===t.type&&r&&(this.next=r),g},finish:function(t){for(var r=this.tryEntries.length-1;r>=0;--r){var e=this.tryEntries[r];if(e.finallyLoc===t)return this.complete(e.completion,e.afterLoc),O(e),g}},catch:function(t){for(var r=this.tryEntries.length-1;r>=0;--r){var e=this.tryEntries[r];if(e.tryLoc===t){var n=e.completion;if(\\\"throw\\\"===n.type){var o=n.arg;O(e)}return o}}throw new Error(\\\"illegal catch attempt\\\")},delegateYield:function(t,e,n){return this.delegate={iterator:F(t),resultName:e,nextLoc:n},\\\"next\\\"===this.method&&(this.arg=r),g}},t}(t.exports);try{regeneratorRuntime=n}catch(o){Function(\\\"r\\\",\\\"regeneratorRuntime = r\\\")(n)}},function(t,r,e){\\\"use strict\\\";e.r(r);var n={};e.r(n),e.d(n,\\\"kruskal\\\",(function(){return T})),e.d(n,\\\"kruskalWithFullMST\\\",(function(){return S}));var o={};function a(t,r,e){return r in t?Object.defineProperty(t,r,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[r]=e,t}function i(t,r){(null==r||r>t.length)&&(r=t.length);for(var e=0,n=new Array(r);e<r;e++)n[e]=t[e];return n}function u(t,r){if(t){if(\\\"string\\\"===typeof t)return i(t,r);var e=Object.prototype.toString.call(t).slice(8,-1);return\\\"Object\\\"===e&&t.constructor&&(e=t.constructor.name),\\\"Map\\\"===e||\\\"Set\\\"===e?Array.from(t):\\\"Arguments\\\"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?i(t,r):void 0}}function f(t){return function(t){if(Array.isArray(t))return i(t)}(t)||function(t){if(\\\"undefined\\\"!==typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||u(t)||function(){throw new TypeError(\\\"Invalid attempt to spread non-iterable instance.\\\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\\\")}()}function l(t,r){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable}))),e.push.apply(e,n)}return e}function s(t){for(var r=1;r<arguments.length;r++){var e=null!=arguments[r]?arguments[r]:{};r%2?l(Object(e),!0).forEach((function(r){a(t,r,e[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):l(Object(e)).forEach((function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(e,r))}))}return t}function c(t,r){var e;if(\\\"undefined\\\"===typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(e=u(t))||r&&t&&\\\"number\\\"===typeof t.length){e&&(t=e);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError(\\\"Invalid attempt to iterate non-iterable instance.\\\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\\\")}var a,i=!0,f=!1;return{s:function(){e=t[Symbol.iterator]()},n:function(){var t=e.next();return i=t.done,t},e:function(t){f=!0,a=t},f:function(){try{i||null==e.return||e.return()}finally{if(f)throw a}}}}e.r(o),e.d(o,\\\"getFieldType\\\",(function(){return q})),e.d(o,\\\"getAllFieldTypes\\\",(function(){return F})),e.d(o,\\\"getFieldDistribution\\\",(function(){return N})),e.d(o,\\\"getAllFieldsDistribution\\\",(function(){return j})),e.d(o,\\\"getFieldEntropy\\\",(function(){return D})),e.d(o,\\\"getAllFieldsEntropy\\\",(function(){return P})),e.d(o,\\\"groupFields\\\",(function(){return k}));function h(t){return JSON.parse(JSON.stringify(t))}function v(t,r){var e,n=new Map,o=c(t);try{for(o.s();!(e=o.n()).done;){var a=e.value[r];n.has(a)||n.set(a,0),n.set(a,n.get(a)+1)}}catch(i){o.e(i)}finally{o.f()}return f(n.entries())}function p(t){for(var r=t.dataSource,e=t.field,n=t.newField,o=void 0===n?\\\"\\\".concat(e,\\\"(con-group)\\\"):n,a=t.groupNumber,i=r.map((function(t){return t[e]})),u=Math.max.apply(Math,f(i)),l=Math.min.apply(Math,f(i)),s=(u-l)/a,c=[],h=0;h<a;h++){var v=l+h*s,p=l+(h+1)*s;c.push([v,p])}c[0][0]=-1/0,c[c.length-1][1]=1/0;for(var g=Math.max(1,Math.log10(Math.abs(l))-Math.log10(s))+1,d=function(t){var n=r[t],a=c.findIndex((function(t){return t[0]<=n[e]&&n[e]<t[1]})),i=c[a];n[o]=\\\"undefined\\\"!==typeof i?\\\"\\\".concat(a+1,\\\":[\\\").concat(Number(i[0].toPrecision(g)),\\\", \\\").concat(Number(i[1].toPrecision(g)),\\\")\\\"):\\\"null\\\"},y=0;y<r.length;y++)d(y);return r}function g(t){var r=t.dataSource,e=t.field,n=t.newField,o=void 0===n?\\\"\\\".concat(e,\\\"(cat-group)\\\"):n,i=t.groupNumber,u=v(r,e);u.sort((function(t,r){return r[1]-t[1]}));var f=u.map((function(t){return t[1]}));i=u.length;for(var l=f.length-2;l>=0;l--)f[l]=f[l+1]+f[l];for(var h=0;h<u.length-2;h++)if(5*u[h][1]>=f[h+1]&&u[h+1][1]/5<f[h+2]){i=h+2;break}if(i===u.length)return r.map((function(t){return s(s({},t),{},a({},o,t[e]))}));for(var p=new Set,g=i-1;g<u.length;g++)p.add(u[g][0]);var d,y=c(r);try{for(y.s();!(d=y.n()).done;){var m=d.value;p.has(m[e])?m[o]=\\\"others\\\":m[o]=m[e]}}catch(w){y.e(w)}finally{y.f()}return r}function d(t,r){return v(t,r).every((function(t){return 1===t[1]}))}function y(t){var r,e=0,n=c(t);try{for(n.s();!(r=n.n()).done;){var o=r.value;e+=o}}catch(a){n.e(a)}finally{n.f()}return t.map((function(t){return t/e}))}var m=function(t){var r,e=0,n=c(t);try{for(n.s();!(r=n.n()).done;){var o=r.value;e+=o*Math.log2(o)}}catch(a){n.e(a)}finally{n.f()}return-e};var w=e(2);w.sum,w.max,w.mean,w.min;function b(t){for(var r=[],e=0;e<t.length;e++)for(var n=e+1;n<t[e].length;n++)r.push([[e,n],Math.abs(t[e][n])]);return r}function M(t,r){return t[r]===r?r:t[r]=M(t,t[r])}function E(t,r,e){var n=M(t,r),o=M(t,e);t[n]=o,M(t,r),M(t,e)}function x(t,r,e){return t[e]===e?e:(t[e]=x(t,r,t[e]),r[e]=r[t[e]],t[e])}function _(t,r,e,n){var o=x(t,r,e),a=x(t,r,n),i=r[o],u=r[a];t[o]=a,r[o]=r[a]=i+u,x(t,r,e),x(t,r,n)}function S(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:4,e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=b(t);n.sort((function(t,r){return r[1]-t[1]}));var o,a=[],i=t.map((function(t,r){return r})),u=f(i),l=!1,s=c(n);try{for(s.s();!(o=s.n()).done;){var h=o.value;M(i,h[0][0])!==M(i,h[0][1])&&(E(i,h[0][0],h[0][1]),a.push([h[0],h[1],l]));for(var v=0;v<i.length;v++)i[v]=M(i,v);var p=new Set(i);if(p.size<=r||h[1]<e?l=!0:u=f(i),1===p.size)break}}catch(g){s.e(g)}finally{s.f()}return{edgesInMST:a,groups:u}}var T=function(t){var r,e=t.matrix,n=t.measures,o=(t.method,t.groupMaxSize),a=void 0===o?4:o,i=t.limitSize,u=void 0!==i&&i,f=t.threshold,l=void 0===f?0:f;r=u?function(t,r){var e=b(t);e.sort((function(t,r){return r[1]-t[1]}));var n,o=t.map((function(t,r){return r})),a=t.map((function(){return 1})),i=c(e);try{for(i.s();!(n=i.n()).done;){var u=n.value;if(x(o,a,u[0][0])!==x(o,a,u[0][1])){if(a[u[0][0]]+a[u[0][1]]>r)continue;_(o,a,u[0][0],u[0][1])}for(var f=0;f<o.length;f++)o[f]=x(o,a,f);if(1===new Set(o).size)break}}catch(h){i.e(h)}finally{i.f()}for(var l=new Map,s=0;s<o.length;s++)l.has(o[s])||l.set(o[s],[]),l.get(o[s]).push(s);return l}(e,a):function(t,r){var e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=b(t);n.sort((function(t,r){return r[1]-t[1]}));var o,a=t.map((function(t,r){return r})),i=c(n);try{for(i.s();!(o=i.n()).done;){var u=o.value;M(a,u[0][0])!==M(a,u[0][1])&&E(a,u[0][0],u[0][1]);for(var f=0;f<a.length;f++)a[f]=M(a,f);if(new Set(a).size<=r||u[1]<e)break}}catch(h){i.e(h)}finally{i.f()}for(var l=new Map,s=0;s<a.length;s++)l.has(a[s])||l.set(a[s],[]),l.get(a[s]).push(s);return l}(e,a,l);var s,h=[],v=c(r.values());try{for(v.s();!(s=v.n()).done;){var p=s.value;h.push(p.map((function(t){return n[t]})))}}catch(g){v.e(g)}finally{v.f()}return h};e(1);e(0);var O;!function(t){t.outlier=\\\"default_outlier\\\",t.cluster=\\\"default_group\\\",t.trend=\\\"default_trend\\\"}(O||(O={}));function q(t,r){return function(t,r){return t.every((function(t){return Number(t[r])>=1800&&Number(t[r])<=2200||!isNaN(Date.parse(t[r]))&&\\\"string\\\"===typeof t[r]&&/^[0-9]{0,4}[-/][0-9]{0,2}([-/][0-9]{0,2}$)?/.test(t[r])||\\\"undefined\\\"===typeof t[r]||null===t[r]}))}(t,r)?\\\"temporal\\\":function(t,r){return t.every((function(t){return\\\"number\\\"===typeof t[r]||\\\"undefined\\\"===typeof t[r]||null===t[r]}))}(t,r)?\\\"quantitative\\\":(function(t,r){t.every((function(t){return\\\"string\\\"===typeof t[r]||\\\"undefined\\\"===typeof t[r]||null===t[r]}))}(t,r),\\\"nominal\\\")}function F(t,r){var e,n=[],o=c(r);try{for(o.s();!(e=o.n()).done;){var a=e.value;n.push({name:a,type:q(t,a)})}}catch(i){o.e(i)}finally{o.f()}return n}function N(t,r){return v(t,r).map((function(t){return{memberName:t[0],count:t[1]}}))}function j(t,r){var e,n=[],o=c(r);try{for(o.s();!(e=o.n()).done;){var a=e.value;n.push({fieldName:a,distribution:N(t,a)})}}catch(i){o.e(i)}finally{o.f()}return n}function D(t,r){var e=v(t,r),n=y(e.map((function(t){return t[1]})));return{fieldName:r,entropy:m(n),maxEntropy:Math.log2(e.length)}}function P(t,r){var e,n=[],o=c(r);try{for(o.s();!(e=o.n()).done;){var a=e.value;n.push(D(t,a))}}catch(i){o.e(i)}finally{o.f()}return n}function k(t,r){var e,n=h(t),o=[],a=c(r);try{for(a.s();!(e=a.n()).done;){var i=e.value,u=\\\"\\\".concat(i.name,\\\"(group)\\\");\\\"quantitative\\\"===i.type&&v(t,i.name).length>50?d(t,i.name)||(n=p({dataSource:n,field:i.name,newField:u,groupNumber:8}),o.push({name:u,type:\\\"ordinal\\\"})):(\\\"ordinal\\\"===i.type||\\\"nominal\\\"===i.type)&&v(t,i.name).length>25&&(d(t,i.name)||(n=g({dataSource:n,field:i.name,newField:u,groupNumber:8}),o.push({name:u,type:i.type})))}}catch(f){a.e(f)}finally{a.f()}return{groupedData:n,fields:r,newFields:o}}var L;!function(t){t.outlier=\\\"default_outlier\\\",t.trend=\\\"default_trend\\\"}(L||(L={}));const{getAllFieldsDistribution:A,getAllFieldTypes:I,getAllFieldsEntropy:C}=o;var z;self.addEventListener(\\\"message\\\",(z=t=>{const{fields:r,dataSource:e}=t.data;let n=[];for(let a=0;a<r.length;a++)\\\"string\\\"===typeof r[a]?n.push(r[a]):n.push(r[a].name);try{const t=A(e,n),o=I(e,n).map(((t,e)=>({...t,type:\\\"string\\\"===typeof r[e]?t.type:r[e].type}))),a=C(e,n);self.postMessage({success:!0,data:t.map(((t,r)=>({...t,...a[r],type:o[r].type})))})}catch(o){self.postMessage({success:!1,message:o.toString()})}},function(t){var r=(new Date).getTime();try{z(t)}finally{var e=(new Date).getTime()-r;console.log(\\\"Task [\\\".concat(z.name,\\\"] cost \\\").concat(e,\\\" ms.\\\"))}}),!1)}]);\\n//# sourceMappingURL=fieldsSummary.worker.00e3ebd5.worker.js.map\", \"Worker\", undefined, __webpack_public_path__ + \"static/js/fieldsSummary.worker.00e3ebd5.worker.js\");\n}\n","\nimport worker from \"!!../../../../node_modules/worker-loader/dist/runtime/inline.js\";\n\nexport default function Worker_fn() {\n  return worker(\"!function(t){var r={};function e(n){if(r[n])return r[n].exports;var o=r[n]={i:n,l:!1,exports:{}};return t[n].call(o.exports,o,o.exports,e),o.l=!0,o.exports}e.m=t,e.c=r,e.d=function(t,r,n){e.o(t,r)||Object.defineProperty(t,r,{enumerable:!0,get:n})},e.r=function(t){\\\"undefined\\\"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:\\\"Module\\\"}),Object.defineProperty(t,\\\"__esModule\\\",{value:!0})},e.t=function(t,r){if(1&r&&(t=e(t)),8&r)return t;if(4&r&&\\\"object\\\"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(e.r(n),Object.defineProperty(n,\\\"default\\\",{enumerable:!0,value:t}),2&r&&\\\"string\\\"!=typeof t)for(var o in t)e.d(n,o,function(r){return t[r]}.bind(null,o));return n},e.n=function(t){var r=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(r,\\\"a\\\",r),r},e.o=function(t,r){return Object.prototype.hasOwnProperty.call(t,r)},e.p=\\\"./\\\",e(e.s=9)}([function(t,r,e){t.exports=e(8)},function(t,r,e){\\\"use strict\\\";this&&this.__assign;Object.defineProperty(r,\\\"__esModule\\\",{value:!0});var n=e(4),o=e(7),a=e(3),i={sum:a.sum_unsafe,mean:a.mean,count:a.count};function u(t){var r=t.type,e=t.aggFunc,o=void 0===e?a.count:e,i=t.factTable,u=void 0===i?[]:i,f=t.dimensions,l=void 0===f?[]:f,s=t.measures,c=void 0===s?[]:s;switch(r){case\\\"period\\\":return new n.periodCube({aggFunc:o,factTable:u,dimensions:l,measures:c});case\\\"moment\\\":default:return new n.momentCube({aggFunc:o,factTable:u,dimensions:l,measures:c})}}r.createCube=u,r.default=function(t){var r=t.dimensions,e=t.measures,n=t.asFields,f=t.operator,l=t.dataSource,s=u({type:\\\"moment\\\",aggFunc:i[f]||a.count,dimensions:r,measures:e,factTable:l}),c=o.tree2Table({dimensions:r,measures:e,cube:s});return c.forEach((function(t){n.forEach((function(r,n){t[r]=t[e[n]]}))})),c},function(t){for(var e in t)r.hasOwnProperty(e)||(r[e]=t[e])}(e(3))},function(t,r,e){!function(t){\\\"use strict\\\";function r(t){if(0===t.length)return 0;for(var r,e=t[0],n=0,o=1;o<t.length;o++)r=e+t[o],Math.abs(e)>=Math.abs(t[o])?n+=e-r+t[o]:n+=t[o]-r+e,e=r;return e+n}function e(t){if(0===t.length)throw new Error(\\\"mean requires at least one data point\\\");return r(t)/t.length}function n(t,r){var n,o,a=e(t),i=0;if(2===r)for(o=0;o<t.length;o++)i+=(n=t[o]-a)*n;else for(o=0;o<t.length;o++)i+=Math.pow(t[o]-a,r);return i}function o(t){if(0===t.length)throw new Error(\\\"variance requires at least one data point\\\");return n(t,2)/t.length}function a(t){if(1===t.length)return 0;var r=o(t);return Math.sqrt(r)}function i(t){if(0===t.length)throw new Error(\\\"mode requires at least one data point\\\");if(1===t.length)return t[0];for(var r=t[0],e=NaN,n=0,o=1,a=1;a<t.length+1;a++)t[a]!==r?(o>n&&(n=o,e=r),o=1,r=t[a]):o++;return e}function u(t){return t.slice().sort((function(t,r){return t-r}))}function f(t){if(0===t.length)throw new Error(\\\"min requires at least one data point\\\");for(var r=t[0],e=1;e<t.length;e++)t[e]<r&&(r=t[e]);return r}function l(t){if(0===t.length)throw new Error(\\\"max requires at least one data point\\\");for(var r=t[0],e=1;e<t.length;e++)t[e]>r&&(r=t[e]);return r}function s(t){for(var r=0,e=0;e<t.length;e++)r+=t[e];return r}function c(t,r){var e=t.length*r;if(0===t.length)throw new Error(\\\"quantile requires at least one data point.\\\");if(r<0||r>1)throw new Error(\\\"quantiles must be between 0 and 1\\\");return 1===r?t[t.length-1]:0===r?t[0]:e%1!=0?t[Math.ceil(e)-1]:t.length%2==0?(t[e-1]+t[e])/2:t[e]}function h(t,r,e,n){for(e=e||0,n=n||t.length-1;n>e;){if(n-e>600){var o=n-e+1,a=r-e+1,i=Math.log(o),u=.5*Math.exp(2*i/3),f=.5*Math.sqrt(i*u*(o-u)/o);a-o/2<0&&(f*=-1),h(t,r,Math.max(e,Math.floor(r-a*u/o+f)),Math.min(n,Math.floor(r+(o-a)*u/o+f)))}var l=t[r],s=e,c=n;for(v(t,e,r),t[n]>l&&v(t,e,n);s<c;){for(v(t,s,c),s++,c--;t[s]<l;)s++;for(;t[c]>l;)c--}t[e]===l?v(t,e,c):v(t,++c,n),c<=r&&(e=c+1),r<=c&&(n=c-1)}}function v(t,r,e){var n=t[r];t[r]=t[e],t[e]=n}function g(t,r){var e=t.slice();if(Array.isArray(r)){!function(t,r){for(var e=[0],n=0;n<r.length;n++)e.push(y(t.length,r[n]));e.push(t.length-1),e.sort(d);for(var o=[0,e.length-1];o.length;){var a=Math.ceil(o.pop()),i=Math.floor(o.pop());if(!(a-i<=1)){var u=Math.floor((i+a)/2);p(t,e[u],Math.floor(e[i]),Math.ceil(e[a])),o.push(i,u,u,a)}}}(e,r);for(var n=[],o=0;o<r.length;o++)n[o]=c(e,r[o]);return n}return p(e,y(e.length,r),0,e.length-1),c(e,r)}function p(t,r,e,n){r%1==0?h(t,r,e,n):(h(t,r=Math.floor(r),e,n),h(t,r+1,r+1,n))}function d(t,r){return t-r}function y(t,r){var e=t*r;return 1===r?t-1:0===r?0:e%1!=0?Math.ceil(e)-1:t%2==0?e-.5:e}function m(t,r){if(r<t[0])return 0;if(r>t[t.length-1])return 1;var e=function(t,r){for(var e=0,n=0,o=t.length;n<o;)r<=t[e=n+o>>>1]?o=e:n=-~e;return n}(t,r);if(t[e]!==r)return e/t.length;e++;var n=function(t,r){for(var e=0,n=0,o=t.length;n<o;)r>=t[e=n+o>>>1]?n=-~e:o=e;return n}(t,r);if(n===e)return e/t.length;var o=n-e+1;return o*(n+e)/2/o/t.length}function w(t){var r=g(t,.75),e=g(t,.25);if(\\\"number\\\"==typeof r&&\\\"number\\\"==typeof e)return r-e}function b(t){return+g(t,.5)}function M(t){for(var r=b(t),e=[],n=0;n<t.length;n++)e.push(Math.abs(t[n]-r));return b(e)}function E(t,r){r=r||Math.random;for(var e,n,o=t.length;o>0;)n=Math.floor(r()*o--),e=t[o],t[o]=t[n],t[n]=e;return t}function x(t,r){return E(t.slice(),r)}function _(t,r,e){return x(t,e).slice(0,r)}function S(t,r){for(var e=[],n=0;n<t;n++){for(var o=[],a=0;a<r;a++)o.push(0);e.push(o)}return e}function O(t){for(var r,e=0,n=0;n<t.length;n++)0!==n&&t[n]===r||(r=t[n],e++);return e}function T(t,r,e,n){var o;if(t>0){var a=(e[r]-e[t-1])/(r-t+1);o=n[r]-n[t-1]-(r-t+1)*a*a}else o=n[r]-e[r]*e[r]/(r+1);return o<0?0:o}function q(t,r,e,n,o,a,i){if(!(t>r)){var u=Math.floor((t+r)/2);n[e][u]=n[e-1][u-1],o[e][u]=u;var f=e;t>e&&(f=Math.max(f,o[e][t-1]||0)),f=Math.max(f,o[e-1][u]||0);var l,s,c,h=u-1;r<n[0].length-1&&(h=Math.min(h,o[e][r+1]||0));for(var v=h;v>=f&&!((l=T(v,u,a,i))+n[e-1][f-1]>=n[e][u]);--v)(s=T(f,u,a,i)+n[e-1][f-1])<n[e][u]&&(n[e][u]=s,o[e][u]=f),f++,(c=l+n[e-1][v-1])<n[e][u]&&(n[e][u]=c,o[e][u]=v);q(t,u-1,e,n,o,a,i),q(u+1,r,e,n,o,a,i)}}function N(t,r){if(t.length!==r.length)throw new Error(\\\"sampleCovariance requires samples with equal lengths\\\");if(t.length<2)throw new Error(\\\"sampleCovariance requires at least two data points in each sample\\\");for(var n=e(t),o=e(r),a=0,i=0;i<t.length;i++)a+=(t[i]-n)*(r[i]-o);return a/(t.length-1)}function j(t){if(t.length<2)throw new Error(\\\"sampleVariance requires at least two data points\\\");return n(t,2)/(t.length-1)}function F(t){var r=j(t);return Math.sqrt(r)}function P(t,r,e,n){return(t*r+e*n)/(r+n)}function D(t){if(0===t.length)throw new Error(\\\"meanSimple requires at least one data point\\\");return s(t)/t.length}function k(t){if(0===t.length)throw new Error(\\\"rootMeanSquare requires at least one data point\\\");for(var r=0,e=0;e<t.length;e++)r+=Math.pow(t[e],2);return Math.sqrt(r/t.length)}var L=function(){this.totalCount=0,this.data={}};L.prototype.train=function(t,r){for(var e in this.data[r]||(this.data[r]={}),t){var n=t[e];void 0===this.data[r][e]&&(this.data[r][e]={}),void 0===this.data[r][e][n]&&(this.data[r][e][n]=0),this.data[r][e][n]++}this.totalCount++},L.prototype.score=function(t){var r,e={};for(var n in t){var o=t[n];for(r in this.data)e[r]={},this.data[r][n]?e[r][n+\\\"_\\\"+o]=(this.data[r][n][o]||0)/this.totalCount:e[r][n+\\\"_\\\"+o]=0}var a={};for(r in e)for(var i in a[r]=0,e[r])a[r]+=e[r][i];return a};var A=function(){this.weights=[],this.bias=0};A.prototype.predict=function(t){if(t.length!==this.weights.length)return null;for(var r=0,e=0;e<this.weights.length;e++)r+=this.weights[e]*t[e];return(r+=this.bias)>0?1:0},A.prototype.train=function(t,r){if(0!==r&&1!==r)return null;t.length!==this.weights.length&&(this.weights=t,this.bias=1);var e=this.predict(t);if(\\\"number\\\"==typeof e&&e!==r){for(var n=r-e,o=0;o<this.weights.length;o++)this.weights[o]+=n*t[o];this.bias+=n}return this};var I=1e-4;function C(t){if(t<0)throw new Error(\\\"factorial requires a non-negative value\\\");if(Math.floor(t)!==t)throw new Error(\\\"factorial requires an integer input\\\");for(var r=1,e=2;e<=t;e++)r*=e;return r}var z=[.9999999999999971,57.15623566586292,-59.59796035547549,14.136097974741746,-.4919138160976202,3399464998481189e-20,4652362892704858e-20,-9837447530487956e-20,.0001580887032249125,-.00021026444172410488,.00021743961811521265,-.0001643181065367639,8441822398385275e-20,-26190838401581408e-21,36899182659531625e-22],G=Math.log(Math.sqrt(2*Math.PI)),R={1:{.995:0,.99:0,.975:0,.95:0,.9:.02,.5:.45,.1:2.71,.05:3.84,.025:5.02,.01:6.63,.005:7.88},2:{.995:.01,.99:.02,.975:.05,.95:.1,.9:.21,.5:1.39,.1:4.61,.05:5.99,.025:7.38,.01:9.21,.005:10.6},3:{.995:.07,.99:.11,.975:.22,.95:.35,.9:.58,.5:2.37,.1:6.25,.05:7.81,.025:9.35,.01:11.34,.005:12.84},4:{.995:.21,.99:.3,.975:.48,.95:.71,.9:1.06,.5:3.36,.1:7.78,.05:9.49,.025:11.14,.01:13.28,.005:14.86},5:{.995:.41,.99:.55,.975:.83,.95:1.15,.9:1.61,.5:4.35,.1:9.24,.05:11.07,.025:12.83,.01:15.09,.005:16.75},6:{.995:.68,.99:.87,.975:1.24,.95:1.64,.9:2.2,.5:5.35,.1:10.65,.05:12.59,.025:14.45,.01:16.81,.005:18.55},7:{.995:.99,.99:1.25,.975:1.69,.95:2.17,.9:2.83,.5:6.35,.1:12.02,.05:14.07,.025:16.01,.01:18.48,.005:20.28},8:{.995:1.34,.99:1.65,.975:2.18,.95:2.73,.9:3.49,.5:7.34,.1:13.36,.05:15.51,.025:17.53,.01:20.09,.005:21.96},9:{.995:1.73,.99:2.09,.975:2.7,.95:3.33,.9:4.17,.5:8.34,.1:14.68,.05:16.92,.025:19.02,.01:21.67,.005:23.59},10:{.995:2.16,.99:2.56,.975:3.25,.95:3.94,.9:4.87,.5:9.34,.1:15.99,.05:18.31,.025:20.48,.01:23.21,.005:25.19},11:{.995:2.6,.99:3.05,.975:3.82,.95:4.57,.9:5.58,.5:10.34,.1:17.28,.05:19.68,.025:21.92,.01:24.72,.005:26.76},12:{.995:3.07,.99:3.57,.975:4.4,.95:5.23,.9:6.3,.5:11.34,.1:18.55,.05:21.03,.025:23.34,.01:26.22,.005:28.3},13:{.995:3.57,.99:4.11,.975:5.01,.95:5.89,.9:7.04,.5:12.34,.1:19.81,.05:22.36,.025:24.74,.01:27.69,.005:29.82},14:{.995:4.07,.99:4.66,.975:5.63,.95:6.57,.9:7.79,.5:13.34,.1:21.06,.05:23.68,.025:26.12,.01:29.14,.005:31.32},15:{.995:4.6,.99:5.23,.975:6.27,.95:7.26,.9:8.55,.5:14.34,.1:22.31,.05:25,.025:27.49,.01:30.58,.005:32.8},16:{.995:5.14,.99:5.81,.975:6.91,.95:7.96,.9:9.31,.5:15.34,.1:23.54,.05:26.3,.025:28.85,.01:32,.005:34.27},17:{.995:5.7,.99:6.41,.975:7.56,.95:8.67,.9:10.09,.5:16.34,.1:24.77,.05:27.59,.025:30.19,.01:33.41,.005:35.72},18:{.995:6.26,.99:7.01,.975:8.23,.95:9.39,.9:10.87,.5:17.34,.1:25.99,.05:28.87,.025:31.53,.01:34.81,.005:37.16},19:{.995:6.84,.99:7.63,.975:8.91,.95:10.12,.9:11.65,.5:18.34,.1:27.2,.05:30.14,.025:32.85,.01:36.19,.005:38.58},20:{.995:7.43,.99:8.26,.975:9.59,.95:10.85,.9:12.44,.5:19.34,.1:28.41,.05:31.41,.025:34.17,.01:37.57,.005:40},21:{.995:8.03,.99:8.9,.975:10.28,.95:11.59,.9:13.24,.5:20.34,.1:29.62,.05:32.67,.025:35.48,.01:38.93,.005:41.4},22:{.995:8.64,.99:9.54,.975:10.98,.95:12.34,.9:14.04,.5:21.34,.1:30.81,.05:33.92,.025:36.78,.01:40.29,.005:42.8},23:{.995:9.26,.99:10.2,.975:11.69,.95:13.09,.9:14.85,.5:22.34,.1:32.01,.05:35.17,.025:38.08,.01:41.64,.005:44.18},24:{.995:9.89,.99:10.86,.975:12.4,.95:13.85,.9:15.66,.5:23.34,.1:33.2,.05:36.42,.025:39.36,.01:42.98,.005:45.56},25:{.995:10.52,.99:11.52,.975:13.12,.95:14.61,.9:16.47,.5:24.34,.1:34.28,.05:37.65,.025:40.65,.01:44.31,.005:46.93},26:{.995:11.16,.99:12.2,.975:13.84,.95:15.38,.9:17.29,.5:25.34,.1:35.56,.05:38.89,.025:41.92,.01:45.64,.005:48.29},27:{.995:11.81,.99:12.88,.975:14.57,.95:16.15,.9:18.11,.5:26.34,.1:36.74,.05:40.11,.025:43.19,.01:46.96,.005:49.65},28:{.995:12.46,.99:13.57,.975:15.31,.95:16.93,.9:18.94,.5:27.34,.1:37.92,.05:41.34,.025:44.46,.01:48.28,.005:50.99},29:{.995:13.12,.99:14.26,.975:16.05,.95:17.71,.9:19.77,.5:28.34,.1:39.09,.05:42.56,.025:45.72,.01:49.59,.005:52.34},30:{.995:13.79,.99:14.95,.975:16.79,.95:18.49,.9:20.6,.5:29.34,.1:40.26,.05:43.77,.025:46.98,.01:50.89,.005:53.67},40:{.995:20.71,.99:22.16,.975:24.43,.95:26.51,.9:29.05,.5:39.34,.1:51.81,.05:55.76,.025:59.34,.01:63.69,.005:66.77},50:{.995:27.99,.99:29.71,.975:32.36,.95:34.76,.9:37.69,.5:49.33,.1:63.17,.05:67.5,.025:71.42,.01:76.15,.005:79.49},60:{.995:35.53,.99:37.48,.975:40.48,.95:43.19,.9:46.46,.5:59.33,.1:74.4,.05:79.08,.025:83.3,.01:88.38,.005:91.95},70:{.995:43.28,.99:45.44,.975:48.76,.95:51.74,.9:55.33,.5:69.33,.1:85.53,.05:90.53,.025:95.02,.01:100.42,.005:104.22},80:{.995:51.17,.99:53.54,.975:57.15,.95:60.39,.9:64.28,.5:79.33,.1:96.58,.05:101.88,.025:106.63,.01:112.33,.005:116.32},90:{.995:59.2,.99:61.75,.975:65.65,.95:69.13,.9:73.29,.5:89.33,.1:107.57,.05:113.14,.025:118.14,.01:124.12,.005:128.3},100:{.995:67.33,.99:70.06,.975:74.22,.95:77.93,.9:82.36,.5:99.33,.1:118.5,.05:124.34,.025:129.56,.01:135.81,.005:140.17}},U=Math.sqrt(2*Math.PI),V={gaussian:function(t){return Math.exp(-.5*t*t)/U}},X={nrd:function(t){var r=F(t),e=w(t);return\\\"number\\\"==typeof e&&(r=Math.min(r,e/1.34)),1.06*r*Math.pow(t.length,-.2)}};function B(t,r,e){var n,o;if(void 0===r)n=V.gaussian;else if(\\\"string\\\"==typeof r){if(!V[r])throw new Error('Unknown kernel \\\"'+r+'\\\"');n=V[r]}else n=r;if(void 0===e)o=X.nrd(t);else if(\\\"string\\\"==typeof e){if(!X[e])throw new Error('Unknown bandwidth method \\\"'+e+'\\\"');o=X[e](t)}else o=e;return function(r){var e=0,a=0;for(e=0;e<t.length;e++)a+=n((r-t[e])/o);return a/o/t.length}}var J=Math.sqrt(2*Math.PI);function K(t){for(var r=t,e=t,n=1;n<15;n++)r+=e*=t*t/(2*n+1);return Math.round(1e4*(.5+r/J*Math.exp(-t*t/2)))/1e4}for(var W=[],Y=0;Y<=3.09;Y+=.01)W.push(K(Y));function $(t){var r=1/(1+.5*Math.abs(t)),e=r*Math.exp(-t*t+((((((((.17087277*r-.82215223)*r+1.48851587)*r-1.13520398)*r+.27886807)*r-.18628806)*r+.09678418)*r+.37409196)*r+1.00002368)*r-1.26551223);return t>=0?1-e:e-1}function H(t){var r=8*(Math.PI-3)/(3*Math.PI*(4-Math.PI)),e=Math.sqrt(Math.sqrt(Math.pow(2/(Math.PI*r)+Math.log(1-t*t)/2,2)-Math.log(1-t*t)/r)-(2/(Math.PI*r)+Math.log(1-t*t)/2));return t>=0?e:-e}function Q(t){if(\\\"number\\\"==typeof t)return t<0?-1:0===t?0:1;throw new TypeError(\\\"not a number\\\")}function Z(t,r){for(var e=0,n=0;n<t.length;n++){var o=t[n]-r[n];e+=o*o}return Math.sqrt(e)}function tt(t,r){return t.map((function(t){for(var e=Number.MAX_VALUE,n=-1,o=0;o<r.length;o++){var a=Z(t,r[o]);a<e&&(e=a,n=o)}return n}))}function rt(t,r,e){for(var n=t[0].length,o=S(e,n),a=Array(e).fill(0),i=t.length,u=0;u<i;u++){for(var f=t[u],l=r[u],s=o[l],c=0;c<n;c++)s[c]+=f[c];a[l]+=1}for(var h=0;h<e;h++){if(0===a[h])throw new Error(\\\"Centroid \\\"+h+\\\" has no friends\\\");for(var v=o[h],g=0;g<n;g++)v[g]/=a[h]}return o}function et(t,r){for(var e=0,n=0;n<t.length;n++)e+=Z(t[n],r[n]);return e}function nt(t,r){if(t.length!==r.length)throw new Error(\\\"must have exactly as many labels as points\\\");for(var e=function(t){for(var r=1+l(t),e=Array(r),n=0;n<t.length;n++){var o=t[n];void 0===e[o]&&(e[o]=[]),e[o].push(n)}return e}(r),n=function(t){for(var r=t.length,e=S(r,r),n=0;n<r;n++)for(var o=0;o<n;o++)e[n][o]=Z(t[n],t[o]),e[o][n]=e[n][o];return e}(t),o=[],a=0;a<t.length;a++){var i=0;if(e[r[a]].length>1){var u=at(a,e[r[a]],n),f=ot(a,r,e,n);i=(f-u)/Math.max(u,f)}o.push(i)}return o}function ot(t,r,e,n){for(var o=r[t],a=Number.MAX_VALUE,i=0;i<e.length;i++)if(i!==o){var u=at(t,e[i],n);u<a&&(a=u)}return a}function at(t,r,e){for(var n=0,o=0;o<r.length;o++)n+=e[t][r[o]];return n/r.length}function it(t,r){return 0===t&&0===r?0:Math.abs((t-r)/r)}t.BayesianClassifier=L,t.PerceptronModel=A,t.addToMean=function(t,r,e){return t+(e-t)/(r+1)},t.approxEqual=function(t,r,e){return void 0===e&&(e=I),it(t,r)<=e},t.average=e,t.averageSimple=D,t.bayesian=L,t.bernoulliDistribution=function(t){if(t<0||t>1)throw new Error(\\\"bernoulliDistribution requires probability to be between 0 and 1 inclusive\\\");return[1-t,t]},t.binomialDistribution=function(t,r){if(!(r<0||r>1||t<=0||t%1!=0)){var e=0,n=0,o=[],a=1;do{o[e]=a*Math.pow(r,e)*Math.pow(1-r,t-e),n+=o[e],a=a*(t-++e+1)/e}while(n<.9999);return o}},t.bisect=function(t,r,e,n,o){if(\\\"function\\\"!=typeof t)throw new TypeError(\\\"func must be a function\\\");for(var a=0;a<n;a++){var i=(r+e)/2;if(0===t(i)||Math.abs((e-r)/2)<o)return i;Q(t(i))===Q(t(r))?r=i:e=i}throw new Error(\\\"maximum number of iterations exceeded\\\")},t.chiSquaredDistributionTable=R,t.chiSquaredGoodnessOfFit=function(t,r,n){for(var o=0,a=r(e(t)),i=[],u=[],f=0;f<t.length;f++)void 0===i[t[f]]&&(i[t[f]]=0),i[t[f]]++;for(var l=0;l<i.length;l++)void 0===i[l]&&(i[l]=0);for(var s in a)s in i&&(u[+s]=a[s]*t.length);for(var c=u.length-1;c>=0;c--)u[c]<3&&(u[c-1]+=u[c],u.pop(),i[c-1]+=i[c],i.pop());for(var h=0;h<i.length;h++)o+=Math.pow(i[h]-u[h],2)/u[h];var v=i.length-1-1;return R[v][n]<o},t.chunk=function(t,r){var e=[];if(r<1)throw new Error(\\\"chunk size must be a positive number\\\");if(Math.floor(r)!==r)throw new Error(\\\"chunk size must be an integer\\\");for(var n=0;n<t.length;n+=r)e.push(t.slice(n,n+r));return e},t.ckmeans=function(t,r){if(r>t.length)throw new Error(\\\"cannot generate more classes than there are data values\\\");var e=u(t);if(1===O(e))return[e];var n=S(r,e.length),o=S(r,e.length);!function(t,r,e){for(var n=r[0].length,o=t[Math.floor(n/2)],a=[],i=[],u=0,f=void 0;u<n;++u)f=t[u]-o,0===u?(a.push(f),i.push(f*f)):(a.push(a[u-1]+f),i.push(i[u-1]+f*f)),r[0][u]=T(0,u,a,i),e[0][u]=0;for(var l=1;l<r.length;++l)q(l<r.length-1?l:n-1,n-1,l,r,e,a,i)}(e,n,o);for(var a=[],i=o[0].length-1,f=o.length-1;f>=0;f--){var l=o[f][i];a[f]=e.slice(l,i+1),f>0&&(i=l-1)}return a},t.combinations=function t(r,e){var n,o,a,i,u=[];for(n=0;n<r.length;n++)if(1===e)u.push([r[n]]);else for(a=t(r.slice(n+1,r.length),e-1),o=0;o<a.length;o++)(i=a[o]).unshift(r[n]),u.push(i);return u},t.combinationsReplacement=function t(r,e){for(var n=[],o=0;o<r.length;o++)if(1===e)n.push([r[o]]);else for(var a=t(r.slice(o,r.length),e-1),i=0;i<a.length;i++)n.push([r[o]].concat(a[i]));return n},t.combineMeans=P,t.combineVariances=function(t,r,e,n,o,a){var i=P(r,e,o,a);return(e*(t+Math.pow(r-i,2))+a*(n+Math.pow(o-i,2)))/(e+a)},t.cumulativeStdNormalProbability=function(t){var r=Math.abs(t),e=Math.min(Math.round(100*r),W.length-1);return t>=0?W[e]:+(1-W[e]).toFixed(4)},t.epsilon=I,t.equalIntervalBreaks=function(t,r){if(t.length<2)return t;for(var e=f(t),n=l(t),o=[e],a=(n-e)/r,i=1;i<r;i++)o.push(o[0]+a*i);return o.push(n),o},t.erf=$,t.errorFunction=$,t.extent=function(t){if(0===t.length)throw new Error(\\\"extent requires at least one data point\\\");for(var r=t[0],e=t[0],n=1;n<t.length;n++)t[n]>e&&(e=t[n]),t[n]<r&&(r=t[n]);return[r,e]},t.extentSorted=function(t){return[t[0],t[t.length-1]]},t.factorial=C,t.gamma=function t(r){if(Number.isInteger(r))return r<=0?NaN:C(r-1);if(--r<0)return Math.PI/(Math.sin(Math.PI*-r)*t(-r));var e=r+1/4;return Math.pow(r/Math.E,r)*Math.sqrt(2*Math.PI*(r+1/6))*(1+1/144/Math.pow(e,2)-1/12960/Math.pow(e,3)-257/207360/Math.pow(e,4)-52/2612736/Math.pow(e,5)+5741173/9405849600/Math.pow(e,6)+37529/18811699200/Math.pow(e,7))},t.gammaln=function(t){if(t<=0)return 1/0;t--;for(var r=z[0],e=1;e<15;e++)r+=z[e]/(t+e);var n=5.2421875+t;return G+Math.log(r)-n+(t+.5)*Math.log(n)},t.geometricMean=function(t){if(0===t.length)throw new Error(\\\"geometricMean requires at least one data point\\\");for(var r=1,e=0;e<t.length;e++){if(t[e]<=0)throw new Error(\\\"geometricMean requires only positive numbers as input\\\");r*=t[e]}return Math.pow(r,1/t.length)},t.harmonicMean=function(t){if(0===t.length)throw new Error(\\\"harmonicMean requires at least one data point\\\");for(var r=0,e=0;e<t.length;e++){if(t[e]<=0)throw new Error(\\\"harmonicMean requires only positive numbers as input\\\");r+=1/t[e]}return t.length/r},t.interquartileRange=w,t.inverseErrorFunction=H,t.iqr=w,t.kMeansCluster=function(t,r,e){void 0===e&&(e=Math.random);for(var n=null,o=_(t,r,e),a=null,i=Number.MAX_VALUE;0!==i;)n=o,i=et(o=rt(t,a=tt(t,o),r),n);return{labels:a,centroids:o}},t.kde=B,t.kernelDensityEstimation=B,t.linearRegression=function(t){var r,e,n=t.length;if(1===n)r=0,e=t[0][1];else{for(var o,a,i,u=0,f=0,l=0,s=0,c=0;c<n;c++)u+=a=(o=t[c])[0],f+=i=o[1],l+=a*a,s+=a*i;e=f/n-(r=(n*s-u*f)/(n*l-u*u))*u/n}return{m:r,b:e}},t.linearRegressionLine=function(t){return function(r){return t.b+t.m*r}},t.mad=M,t.max=l,t.maxSorted=function(t){return t[t.length-1]},t.mean=e,t.meanSimple=D,t.median=b,t.medianAbsoluteDeviation=M,t.medianSorted=function(t){return c(t,.5)},t.min=f,t.minSorted=function(t){return t[0]},t.mode=function(t){return i(u(t))},t.modeFast=function(t){for(var r,e=new Map,n=0,o=0;o<t.length;o++){var a=e.get(t[o]);void 0===a?a=1:a++,a>n&&(r=t[o],n=a),e.set(t[o],a)}if(0===n)throw new Error(\\\"mode requires at last one data point\\\");return r},t.modeSorted=i,t.numericSort=u,t.perceptron=A,t.permutationTest=function(t,r,n,o,a){if(void 0===o&&(o=1e4),void 0===n&&(n=\\\"two_side\\\"),\\\"two_side\\\"!==n&&\\\"greater\\\"!==n&&\\\"less\\\"!==n)throw new Error(\\\"`alternative` must be either 'two_side', 'greater', or 'less'\\\");for(var i=e(t)-e(r),u=new Array(o),f=t.concat(r),l=Math.floor(f.length/2),s=0;s<o;s++){E(f,a);var c=f.slice(0,l),h=f.slice(l,f.length),v=e(c)-e(h);u[s]=v}var g=0;if(\\\"two_side\\\"===n)for(var p=0;p<=o;p++)Math.abs(u[p])>=Math.abs(i)&&(g+=1);else if(\\\"greater\\\"===n)for(var d=0;d<=o;d++)u[d]>=i&&(g+=1);else for(var y=0;y<=o;y++)u[y]<=i&&(g+=1);return g/o},t.permutationsHeap=function(t){for(var r=new Array(t.length),e=[t.slice()],n=0;n<t.length;n++)r[n]=0;for(var o=0;o<t.length;)if(r[o]<o){var a=0;o%2!=0&&(a=r[o]);var i=t[a];t[a]=t[o],t[o]=i,e.push(t.slice()),r[o]++,o=0}else r[o]=0,o++;return e},t.poissonDistribution=function(t){if(!(t<=0)){var r=0,e=0,n=[],o=1;do{n[r]=Math.exp(-t)*Math.pow(t,r)/o,e+=n[r],o*=++r}while(e<.9999);return n}},t.probit=function(t){return 0===t?t=I:t>=1&&(t=.9999),Math.sqrt(2)*H(2*t-1)},t.product=function(t){for(var r=1,e=0;e<t.length;e++)r*=t[e];return r},t.quantile=g,t.quantileRank=function(t,r){return m(u(t),r)},t.quantileRankSorted=m,t.quantileSorted=c,t.quickselect=h,t.rSquared=function(t,r){if(t.length<2)return 1;for(var e=0,n=0;n<t.length;n++)e+=t[n][1];for(var o=e/t.length,a=0,i=0;i<t.length;i++)a+=Math.pow(o-t[i][1],2);for(var u=0,f=0;f<t.length;f++)u+=Math.pow(t[f][1]-r(t[f][0]),2);return 1-u/a},t.relativeError=it,t.rms=k,t.rootMeanSquare=k,t.sample=_,t.sampleCorrelation=function(t,r){return N(t,r)/F(t)/F(r)},t.sampleCovariance=N,t.sampleKurtosis=function(t){var r=t.length;if(r<4)throw new Error(\\\"sampleKurtosis requires at least four data points\\\");for(var n,o=e(t),a=0,i=0,u=0;u<r;u++)a+=(n=t[u]-o)*n,i+=n*n*n*n;return(r-1)/((r-2)*(r-3))*(r*(r+1)*i/(a*a)-3*(r-1))},t.sampleSkewness=function(t){if(t.length<3)throw new Error(\\\"sampleSkewness requires at least three data points\\\");for(var r,n=e(t),o=0,a=0,i=0;i<t.length;i++)o+=(r=t[i]-n)*r,a+=r*r*r;var u=t.length-1,f=Math.sqrt(o/u),l=t.length;return l*a/((l-1)*(l-2)*Math.pow(f,3))},t.sampleStandardDeviation=F,t.sampleVariance=j,t.sampleWithReplacement=function(t,r,e){if(0===t.length)return[];e=e||Math.random;for(var n=t.length,o=[],a=0;a<r;a++){var i=Math.floor(e()*n);o.push(t[i])}return o},t.shuffle=x,t.shuffleInPlace=E,t.sign=Q,t.silhouette=nt,t.silhouetteMetric=function(t,r){return l(nt(t,r))},t.standardDeviation=a,t.standardNormalTable=W,t.subtractFromMean=function(t,r,e){return(t*r-e)/(r-1)},t.sum=r,t.sumNthPowerDeviations=n,t.sumSimple=s,t.tTest=function(t,r){return(e(t)-r)/(a(t)/Math.sqrt(t.length))},t.tTestTwoSample=function(t,r,n){var o=t.length,a=r.length;if(!o||!a)return null;n||(n=0);var i=e(t),u=e(r),f=j(t),l=j(r);if(\\\"number\\\"==typeof i&&\\\"number\\\"==typeof u&&\\\"number\\\"==typeof f&&\\\"number\\\"==typeof l){var s=((o-1)*f+(a-1)*l)/(o+a-2);return(i-u-n)/Math.sqrt(s*(1/o+1/a))}},t.uniqueCountSorted=O,t.variance=o,t.zScore=function(t,r,e){return(t-r)/e},Object.defineProperty(t,\\\"__esModule\\\",{value:!0})}(r)},function(t,r,e){\\\"use strict\\\";Object.defineProperty(r,\\\"__esModule\\\",{value:!0}),r.sum_unsafe=function(t,r){var e={};r.forEach((function(t){e[t]=0}));for(var n=function(n,o){r.forEach((function(r){e[r]+=t[n][r]}))},o=0,a=t.length;o<a;o++)n(o);return e},r.sum=function(t,r){var e={};r.forEach((function(t){e[t]=0}));for(var n=function(n,o){r.forEach((function(r){e[r]+=Number(t[n][r])||0}))},o=0,a=t.length;o<a;o++)n(o);return e},r.count=function(t,r){var e={};r.forEach((function(t){e[t]=0}));for(var n=0,o=t.length;n<o;n++)r.forEach((function(t){e[t]++}));return e},r.mean=function(t,r){var e={};r.forEach((function(t){e[t]=0}));for(var n=function(n,o){r.forEach((function(r){e[r]+=Number(t[n][r])||0}))},o=0,a=t.length;o<a;o++)n(o);return r.forEach((function(r){e[r]/=t.length})),e}},function(t,r,e){\\\"use strict\\\";Object.defineProperty(r,\\\"__esModule\\\",{value:!0});var n=e(5);r.periodCube=n.default;var o=e(6);r.momentCube=o.default},function(t,r,e){\\\"use strict\\\";var n=this&&this.__read||function(t,r){var e=\\\"function\\\"===typeof Symbol&&t[Symbol.iterator];if(!e)return t;var n,o,a=e.call(t),i=[];try{for(;(void 0===r||r-- >0)&&!(n=a.next()).done;)i.push(n.value)}catch(u){o={error:u}}finally{try{n&&!n.done&&(e=a.return)&&e.call(a)}finally{if(o)throw o.error}}return i},o=this&&this.__spread||function(){for(var t=[],r=0;r<arguments.length;r++)t=t.concat(n(arguments[r]));return t},a=this&&this.__values||function(t){var r=\\\"function\\\"===typeof Symbol&&Symbol.iterator,e=r&&t[r],n=0;if(e)return e.call(t);if(t&&\\\"number\\\"===typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(r?\\\"Object is not iterable.\\\":\\\"Symbol.iterator is not defined.\\\")};Object.defineProperty(r,\\\"__esModule\\\",{value:!0});var i=function(){function t(t){this.children=new Map,this._rawData=[],this.aggFunc=t,this.cache=!1}return t.prototype.push=function(){for(var t,r=[],e=0;e<arguments.length;e++)r[e]=arguments[e];(t=this._rawData).push.apply(t,o(r))},t.prototype.aggData=function(t){return void 0===t&&(t=[]),this.cache||(this._aggData=this.aggFunc(this.rawData,t),this.cache=!0),this._aggData},t.prototype.clearCache=function(){this.cache=!1},Object.defineProperty(t.prototype,\\\"rawData\\\",{get:function(){var t,r;if(!this.cache){if(0!==this.children.size){var e=this.children.values(),n=[];try{for(var o=a(e),i=o.next();!i.done;i=o.next()){var u=i.value,f=void 0,l=u.rawData,s=l.length;for(f=0;f<s;f++)n.push(l[f])}}catch(c){t={error:c}}finally{try{i&&!i.done&&(r=o.return)&&r.call(o)}finally{if(t)throw t.error}}this._rawData=n}this.cache=!0}return this._rawData},enumerable:!0,configurable:!0}),t.prototype.getNode=function(t){return function r(e,o){var i,u;if(o===t.length)return e;var f=e.children.entries();try{for(var l=a(f),s=l.next();!s.done;s=l.next()){var c=n(s.value,2),h=c[0],v=c[1];if(h===t[o])return r(v,o+1)}}catch(g){i={error:g}}finally{try{s&&!s.done&&(u=l.return)&&u.call(l)}finally{if(i)throw i.error}}return null}(this,0)},t}(),u=function(){function t(t){this.aggFunc=t.aggFunc,this.factTable=t.factTable,this.dimensions=t.dimensions,this.measures=t.measures}return t.prototype.get=function(t){var r=this,e=r.tree,o=(r.aggFunc,r.measures);return function r(e,i){var u,f;if(i===t.length)return e.aggData(o);var l=e.children.entries();try{for(var s=a(l),c=s.next();!c.done;c=s.next()){var h=n(c.value,2),v=h[0],g=h[1];if(v===t[i])return r(g,i+1)}}catch(p){u={error:p}}finally{try{c&&!c.done&&(f=s.return)&&f.call(s)}finally{if(u)throw u.error}}return!1}(e,0)},t.prototype.getNode=function(t){return this.tree.getNode(t)},t.prototype.buildTree=function(){var t,r=new i(this.aggFunc),e=this.factTable.length;for(t=0;t<e;t++)this.insertNode(this.factTable[t],r,0);return this.tree=r,r},t.prototype.insertNode=function(t,r,e){if(r.push(t),r.cache=!1,e<this.dimensions.length){var n=t[this.dimensions[e]];r.children.has(n)||r.children.set(n,new i(this.aggFunc)),this.insertNode(t,r.children.get(n),e+1)}},t.prototype.aggTree=function(t){var r,e;void 0===t&&(t=this.tree);var n=t.children.values();try{for(var o=a(n),i=o.next();!i.done;i=o.next()){var u=i.value;this.aggTree(u)}}catch(f){r={error:f}}finally{try{i&&!i.done&&(e=o.return)&&e.call(o)}finally{if(r)throw r.error}}return t.aggData(this.measures),t},t.prototype.aggNode=function(t){var r,e;void 0===t&&(t=this.tree);var n=t.children.values();try{for(var o=a(n),i=o.next();!i.done;i=o.next()){var u=i.value;this.aggTree(u)}}catch(f){r={error:f}}finally{try{i&&!i.done&&(e=o.return)&&e.call(o)}finally{if(r)throw r.error}}return t.aggData(this.measures),t},t}();r.default=u},function(t,r,e){\\\"use strict\\\";var n=this&&this.__read||function(t,r){var e=\\\"function\\\"===typeof Symbol&&t[Symbol.iterator];if(!e)return t;var n,o,a=e.call(t),i=[];try{for(;(void 0===r||r-- >0)&&!(n=a.next()).done;)i.push(n.value)}catch(u){o={error:u}}finally{try{n&&!n.done&&(e=a.return)&&e.call(a)}finally{if(o)throw o.error}}return i},o=this&&this.__spread||function(){for(var t=[],r=0;r<arguments.length;r++)t=t.concat(n(arguments[r]));return t},a=this&&this.__values||function(t){var r=\\\"function\\\"===typeof Symbol&&Symbol.iterator,e=r&&t[r],n=0;if(e)return e.call(t);if(t&&\\\"number\\\"===typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(r?\\\"Object is not iterable.\\\":\\\"Symbol.iterator is not defined.\\\")};Object.defineProperty(r,\\\"__esModule\\\",{value:!0});var i=function(){function t(){this.children=new Map,this.rawData=[]}return t.prototype.push=function(){for(var t,r=[],e=0;e<arguments.length;e++)r[e]=arguments[e];(t=this.rawData).push.apply(t,o(r))},t.prototype.aggData=function(t,r){return void 0===r&&(r=[]),this._aggData=t(this.rawData,r),this._aggData},t.prototype.getNode=function(t){return function r(e,o){var i,u;if(o===t.length)return e;var f=e.children.entries();try{for(var l=a(f),s=l.next();!s.done;s=l.next()){var c=n(s.value,2),h=c[0],v=c[1];if(h===t[o])return r(v,o+1)}}catch(g){i={error:g}}finally{try{s&&!s.done&&(u=l.return)&&u.call(l)}finally{if(i)throw i.error}}return null}(this,0)},t}();r.Node=i;var u=function(){function t(t){this.aggFunc=t.aggFunc,this.factTable=t.factTable,this.dimensions=t.dimensions,this.measures=t.measures,this.buildTree(),this.aggTree()}return t.prototype.get=function(t){var r=this,e=r.tree,o=r.aggFunc,i=r.measures;return function r(e,u){var f,l;if(u===t.length)return e.aggData(o,i);var s=e.children.entries();try{for(var c=a(s),h=c.next();!h.done;h=c.next()){var v=n(h.value,2),g=v[0],p=v[1];if(g===t[u])return r(p,u+1)}}catch(d){f={error:d}}finally{try{h&&!h.done&&(l=c.return)&&l.call(c)}finally{if(f)throw f.error}}return!1}(e,0)},t.prototype.getNode=function(t){return this.tree.getNode(t)},t.prototype.setData=function(t){var r=t.aggFunc,e=void 0===r?this.aggFunc:r,n=t.factTable,o=void 0===n?this.factTable:n,a=t.dimensions,i=void 0===a?this.dimensions:a,u=t.measures,f=void 0===u?this.measures:u;i!==this.dimensions||o!==this.factTable?(this.dimensions=i,this.factTable=o,this.measures=f,this.aggFunc=e,this.buildTree(),this.aggTree()):f===this.measures&&e===this.aggFunc||(this.measures=f,this.aggFunc=e,this.aggTree())},t.prototype.buildTree=function(){var t,r=new i,e=this.factTable.length;for(t=0;t<e;t++)this.insertNode(this.factTable[t],r,0);return this.tree=r,r},t.prototype.insertNode=function(t,r,e){if(e===this.dimensions.length)r.push(t);else{var n=t[this.dimensions[e]];r.children.has(n)||r.children.set(n,new i),this.insertNode(t,r.children.get(n),e+1)}},t.prototype.aggTree=function(t){var r,e;if(void 0===t&&(t=this.tree),t.children.size>0){t.rawData=[];var n=t.children.values();try{for(var o=a(n),i=o.next();!i.done;i=o.next()){var u=i.value,f=void 0,l=this.aggTree(u).rawData,s=l.length;for(f=0;f<s;f++)t.rawData.push(l[f])}}catch(c){r={error:c}}finally{try{i&&!i.done&&(e=o.return)&&e.call(o)}finally{if(r)throw r.error}}}return t.aggData(this.aggFunc,this.measures),t},t}();r.default=u},function(t,r,e){\\\"use strict\\\";var n=this&&this.__assign||function(){return(n=Object.assign||function(t){for(var r,e=1,n=arguments.length;e<n;e++)for(var o in r=arguments[e])Object.prototype.hasOwnProperty.call(r,o)&&(t[o]=r[o]);return t}).apply(this,arguments)},o=this&&this.__values||function(t){var r=\\\"function\\\"===typeof Symbol&&Symbol.iterator,e=r&&t[r],n=0;if(e)return e.call(t);if(t&&\\\"number\\\"===typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(r?\\\"Object is not iterable.\\\":\\\"Symbol.iterator is not defined.\\\")},a=this&&this.__read||function(t,r){var e=\\\"function\\\"===typeof Symbol&&t[Symbol.iterator];if(!e)return t;var n,o,a=e.call(t),i=[];try{for(;(void 0===r||r-- >0)&&!(n=a.next()).done;)i.push(n.value)}catch(u){o={error:u}}finally{try{n&&!n.done&&(e=a.return)&&e.call(a)}finally{if(o)throw o.error}}return i};Object.defineProperty(r,\\\"__esModule\\\",{value:!0}),r.tree2Table=function(t){var r=t.dimensions,e=(t.measures,t.cube),i=(e.aggFunc,[]);return function t(e,u,f){var l,s,c;if(0!==e.children.size)try{for(var h=o(e.children.entries()),v=h.next();!v.done;v=h.next()){var g=a(v.value,2),p=g[0];t(g[1],n(n({},u),((c={})[r[f]]=p,c)),f+1)}}catch(y){l={error:y}}finally{try{v&&!v.done&&(s=h.return)&&s.call(h)}finally{if(l)throw l.error}}else{var d=e._aggData;i.push(n(n({},u),d))}}(e.tree,{},0),i}},function(t,r,e){var n=function(t){\\\"use strict\\\";var r,e=Object.prototype,n=e.hasOwnProperty,o=\\\"function\\\"===typeof Symbol?Symbol:{},a=o.iterator||\\\"@@iterator\\\",i=o.asyncIterator||\\\"@@asyncIterator\\\",u=o.toStringTag||\\\"@@toStringTag\\\";function f(t,r,e){return Object.defineProperty(t,r,{value:e,enumerable:!0,configurable:!0,writable:!0}),t[r]}try{f({},\\\"\\\")}catch(F){f=function(t,r,e){return t[r]=e}}function l(t,r,e,n){var o=r&&r.prototype instanceof d?r:d,a=Object.create(o.prototype),i=new q(n||[]);return a._invoke=function(t,r,e){var n=c;return function(o,a){if(n===v)throw new Error(\\\"Generator is already running\\\");if(n===g){if(\\\"throw\\\"===o)throw a;return j()}for(e.method=o,e.arg=a;;){var i=e.delegate;if(i){var u=S(i,e);if(u){if(u===p)continue;return u}}if(\\\"next\\\"===e.method)e.sent=e._sent=e.arg;else if(\\\"throw\\\"===e.method){if(n===c)throw n=g,e.arg;e.dispatchException(e.arg)}else\\\"return\\\"===e.method&&e.abrupt(\\\"return\\\",e.arg);n=v;var f=s(t,r,e);if(\\\"normal\\\"===f.type){if(n=e.done?g:h,f.arg===p)continue;return{value:f.arg,done:e.done}}\\\"throw\\\"===f.type&&(n=g,e.method=\\\"throw\\\",e.arg=f.arg)}}}(t,e,i),a}function s(t,r,e){try{return{type:\\\"normal\\\",arg:t.call(r,e)}}catch(F){return{type:\\\"throw\\\",arg:F}}}t.wrap=l;var c=\\\"suspendedStart\\\",h=\\\"suspendedYield\\\",v=\\\"executing\\\",g=\\\"completed\\\",p={};function d(){}function y(){}function m(){}var w={};w[a]=function(){return this};var b=Object.getPrototypeOf,M=b&&b(b(N([])));M&&M!==e&&n.call(M,a)&&(w=M);var E=m.prototype=d.prototype=Object.create(w);function x(t){[\\\"next\\\",\\\"throw\\\",\\\"return\\\"].forEach((function(r){f(t,r,(function(t){return this._invoke(r,t)}))}))}function _(t,r){function e(o,a,i,u){var f=s(t[o],t,a);if(\\\"throw\\\"!==f.type){var l=f.arg,c=l.value;return c&&\\\"object\\\"===typeof c&&n.call(c,\\\"__await\\\")?r.resolve(c.__await).then((function(t){e(\\\"next\\\",t,i,u)}),(function(t){e(\\\"throw\\\",t,i,u)})):r.resolve(c).then((function(t){l.value=t,i(l)}),(function(t){return e(\\\"throw\\\",t,i,u)}))}u(f.arg)}var o;this._invoke=function(t,n){function a(){return new r((function(r,o){e(t,n,r,o)}))}return o=o?o.then(a,a):a()}}function S(t,e){var n=t.iterator[e.method];if(n===r){if(e.delegate=null,\\\"throw\\\"===e.method){if(t.iterator.return&&(e.method=\\\"return\\\",e.arg=r,S(t,e),\\\"throw\\\"===e.method))return p;e.method=\\\"throw\\\",e.arg=new TypeError(\\\"The iterator does not provide a 'throw' method\\\")}return p}var o=s(n,t.iterator,e.arg);if(\\\"throw\\\"===o.type)return e.method=\\\"throw\\\",e.arg=o.arg,e.delegate=null,p;var a=o.arg;return a?a.done?(e[t.resultName]=a.value,e.next=t.nextLoc,\\\"return\\\"!==e.method&&(e.method=\\\"next\\\",e.arg=r),e.delegate=null,p):a:(e.method=\\\"throw\\\",e.arg=new TypeError(\\\"iterator result is not an object\\\"),e.delegate=null,p)}function O(t){var r={tryLoc:t[0]};1 in t&&(r.catchLoc=t[1]),2 in t&&(r.finallyLoc=t[2],r.afterLoc=t[3]),this.tryEntries.push(r)}function T(t){var r=t.completion||{};r.type=\\\"normal\\\",delete r.arg,t.completion=r}function q(t){this.tryEntries=[{tryLoc:\\\"root\\\"}],t.forEach(O,this),this.reset(!0)}function N(t){if(t){var e=t[a];if(e)return e.call(t);if(\\\"function\\\"===typeof t.next)return t;if(!isNaN(t.length)){var o=-1,i=function e(){for(;++o<t.length;)if(n.call(t,o))return e.value=t[o],e.done=!1,e;return e.value=r,e.done=!0,e};return i.next=i}}return{next:j}}function j(){return{value:r,done:!0}}return y.prototype=E.constructor=m,m.constructor=y,y.displayName=f(m,u,\\\"GeneratorFunction\\\"),t.isGeneratorFunction=function(t){var r=\\\"function\\\"===typeof t&&t.constructor;return!!r&&(r===y||\\\"GeneratorFunction\\\"===(r.displayName||r.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,m):(t.__proto__=m,f(t,u,\\\"GeneratorFunction\\\")),t.prototype=Object.create(E),t},t.awrap=function(t){return{__await:t}},x(_.prototype),_.prototype[i]=function(){return this},t.AsyncIterator=_,t.async=function(r,e,n,o,a){void 0===a&&(a=Promise);var i=new _(l(r,e,n,o),a);return t.isGeneratorFunction(e)?i:i.next().then((function(t){return t.done?t.value:i.next()}))},x(E),f(E,u,\\\"Generator\\\"),E[a]=function(){return this},E.toString=function(){return\\\"[object Generator]\\\"},t.keys=function(t){var r=[];for(var e in t)r.push(e);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=N,q.prototype={constructor:q,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=r,this.done=!1,this.delegate=null,this.method=\\\"next\\\",this.arg=r,this.tryEntries.forEach(T),!t)for(var e in this)\\\"t\\\"===e.charAt(0)&&n.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=r)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if(\\\"throw\\\"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function o(n,o){return u.type=\\\"throw\\\",u.arg=t,e.next=n,o&&(e.method=\\\"next\\\",e.arg=r),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],u=i.completion;if(\\\"root\\\"===i.tryLoc)return o(\\\"end\\\");if(i.tryLoc<=this.prev){var f=n.call(i,\\\"catchLoc\\\"),l=n.call(i,\\\"finallyLoc\\\");if(f&&l){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(f){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!l)throw new Error(\\\"try statement without catch or finally\\\");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(t,r){for(var e=this.tryEntries.length-1;e>=0;--e){var o=this.tryEntries[e];if(o.tryLoc<=this.prev&&n.call(o,\\\"finallyLoc\\\")&&this.prev<o.finallyLoc){var a=o;break}}a&&(\\\"break\\\"===t||\\\"continue\\\"===t)&&a.tryLoc<=r&&r<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=t,i.arg=r,a?(this.method=\\\"next\\\",this.next=a.finallyLoc,p):this.complete(i)},complete:function(t,r){if(\\\"throw\\\"===t.type)throw t.arg;return\\\"break\\\"===t.type||\\\"continue\\\"===t.type?this.next=t.arg:\\\"return\\\"===t.type?(this.rval=this.arg=t.arg,this.method=\\\"return\\\",this.next=\\\"end\\\"):\\\"normal\\\"===t.type&&r&&(this.next=r),p},finish:function(t){for(var r=this.tryEntries.length-1;r>=0;--r){var e=this.tryEntries[r];if(e.finallyLoc===t)return this.complete(e.completion,e.afterLoc),T(e),p}},catch:function(t){for(var r=this.tryEntries.length-1;r>=0;--r){var e=this.tryEntries[r];if(e.tryLoc===t){var n=e.completion;if(\\\"throw\\\"===n.type){var o=n.arg;T(e)}return o}}throw new Error(\\\"illegal catch attempt\\\")},delegateYield:function(t,e,n){return this.delegate={iterator:N(t),resultName:e,nextLoc:n},\\\"next\\\"===this.method&&(this.arg=r),p}},t}(t.exports);try{regeneratorRuntime=n}catch(o){Function(\\\"r\\\",\\\"regeneratorRuntime = r\\\")(n)}},function(t,r,e){\\\"use strict\\\";e.r(r);var n={};e.r(n),e.d(n,\\\"kruskal\\\",(function(){return O})),e.d(n,\\\"kruskalWithFullMST\\\",(function(){return S}));var o={};function a(t,r,e){return r in t?Object.defineProperty(t,r,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[r]=e,t}function i(t,r){(null==r||r>t.length)&&(r=t.length);for(var e=0,n=new Array(r);e<r;e++)n[e]=t[e];return n}function u(t,r){if(t){if(\\\"string\\\"===typeof t)return i(t,r);var e=Object.prototype.toString.call(t).slice(8,-1);return\\\"Object\\\"===e&&t.constructor&&(e=t.constructor.name),\\\"Map\\\"===e||\\\"Set\\\"===e?Array.from(t):\\\"Arguments\\\"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?i(t,r):void 0}}function f(t){return function(t){if(Array.isArray(t))return i(t)}(t)||function(t){if(\\\"undefined\\\"!==typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||u(t)||function(){throw new TypeError(\\\"Invalid attempt to spread non-iterable instance.\\\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\\\")}()}function l(t,r){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable}))),e.push.apply(e,n)}return e}function s(t){for(var r=1;r<arguments.length;r++){var e=null!=arguments[r]?arguments[r]:{};r%2?l(Object(e),!0).forEach((function(r){a(t,r,e[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):l(Object(e)).forEach((function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(e,r))}))}return t}function c(t,r){var e;if(\\\"undefined\\\"===typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(e=u(t))||r&&t&&\\\"number\\\"===typeof t.length){e&&(t=e);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError(\\\"Invalid attempt to iterate non-iterable instance.\\\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\\\")}var a,i=!0,f=!1;return{s:function(){e=t[Symbol.iterator]()},n:function(){var t=e.next();return i=t.done,t},e:function(t){f=!0,a=t},f:function(){try{i||null==e.return||e.return()}finally{if(f)throw a}}}}e.r(o),e.d(o,\\\"getFieldType\\\",(function(){return q})),e.d(o,\\\"getAllFieldTypes\\\",(function(){return N})),e.d(o,\\\"getFieldDistribution\\\",(function(){return j})),e.d(o,\\\"getAllFieldsDistribution\\\",(function(){return F})),e.d(o,\\\"getFieldEntropy\\\",(function(){return P})),e.d(o,\\\"getAllFieldsEntropy\\\",(function(){return D})),e.d(o,\\\"groupFields\\\",(function(){return k}));function h(t){return JSON.parse(JSON.stringify(t))}function v(t,r){var e,n=new Map,o=c(t);try{for(o.s();!(e=o.n()).done;){var a=e.value[r];n.has(a)||n.set(a,0),n.set(a,n.get(a)+1)}}catch(i){o.e(i)}finally{o.f()}return f(n.entries())}function g(t){for(var r=t.dataSource,e=t.field,n=t.newField,o=void 0===n?\\\"\\\".concat(e,\\\"(con-group)\\\"):n,a=t.groupNumber,i=r.map((function(t){return t[e]})),u=Math.max.apply(Math,f(i)),l=Math.min.apply(Math,f(i)),s=(u-l)/a,c=[],h=0;h<a;h++){var v=l+h*s,g=l+(h+1)*s;c.push([v,g])}c[0][0]=-1/0,c[c.length-1][1]=1/0;for(var p=Math.max(1,Math.log10(Math.abs(l))-Math.log10(s))+1,d=function(t){var n=r[t],a=c.findIndex((function(t){return t[0]<=n[e]&&n[e]<t[1]})),i=c[a];n[o]=\\\"undefined\\\"!==typeof i?\\\"\\\".concat(a+1,\\\":[\\\").concat(Number(i[0].toPrecision(p)),\\\", \\\").concat(Number(i[1].toPrecision(p)),\\\")\\\"):\\\"null\\\"},y=0;y<r.length;y++)d(y);return r}function p(t){var r=t.dataSource,e=t.field,n=t.newField,o=void 0===n?\\\"\\\".concat(e,\\\"(cat-group)\\\"):n,i=t.groupNumber,u=v(r,e);u.sort((function(t,r){return r[1]-t[1]}));var f=u.map((function(t){return t[1]}));i=u.length;for(var l=f.length-2;l>=0;l--)f[l]=f[l+1]+f[l];for(var h=0;h<u.length-2;h++)if(5*u[h][1]>=f[h+1]&&u[h+1][1]/5<f[h+2]){i=h+2;break}if(i===u.length)return r.map((function(t){return s(s({},t),{},a({},o,t[e]))}));for(var g=new Set,p=i-1;p<u.length;p++)g.add(u[p][0]);var d,y=c(r);try{for(y.s();!(d=y.n()).done;){var m=d.value;g.has(m[e])?m[o]=\\\"others\\\":m[o]=m[e]}}catch(w){y.e(w)}finally{y.f()}return r}function d(t,r){return v(t,r).every((function(t){return 1===t[1]}))}function y(t){var r,e=0,n=c(t);try{for(n.s();!(r=n.n()).done;){var o=r.value;e+=o}}catch(a){n.e(a)}finally{n.f()}return t.map((function(t){return t/e}))}var m=function(t){var r,e=0,n=c(t);try{for(n.s();!(r=n.n()).done;){var o=r.value;e+=o*Math.log2(o)}}catch(a){n.e(a)}finally{n.f()}return-e};var w=e(2);w.sum,w.max,w.mean,w.min;function b(t){for(var r=[],e=0;e<t.length;e++)for(var n=e+1;n<t[e].length;n++)r.push([[e,n],Math.abs(t[e][n])]);return r}function M(t,r){return t[r]===r?r:t[r]=M(t,t[r])}function E(t,r,e){var n=M(t,r),o=M(t,e);t[n]=o,M(t,r),M(t,e)}function x(t,r,e){return t[e]===e?e:(t[e]=x(t,r,t[e]),r[e]=r[t[e]],t[e])}function _(t,r,e,n){var o=x(t,r,e),a=x(t,r,n),i=r[o],u=r[a];t[o]=a,r[o]=r[a]=i+u,x(t,r,e),x(t,r,n)}function S(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:4,e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=b(t);n.sort((function(t,r){return r[1]-t[1]}));var o,a=[],i=t.map((function(t,r){return r})),u=f(i),l=!1,s=c(n);try{for(s.s();!(o=s.n()).done;){var h=o.value;M(i,h[0][0])!==M(i,h[0][1])&&(E(i,h[0][0],h[0][1]),a.push([h[0],h[1],l]));for(var v=0;v<i.length;v++)i[v]=M(i,v);var g=new Set(i);if(g.size<=r||h[1]<e?l=!0:u=f(i),1===g.size)break}}catch(p){s.e(p)}finally{s.f()}return{edgesInMST:a,groups:u}}var O=function(t){var r,e=t.matrix,n=t.measures,o=(t.method,t.groupMaxSize),a=void 0===o?4:o,i=t.limitSize,u=void 0!==i&&i,f=t.threshold,l=void 0===f?0:f;r=u?function(t,r){var e=b(t);e.sort((function(t,r){return r[1]-t[1]}));var n,o=t.map((function(t,r){return r})),a=t.map((function(){return 1})),i=c(e);try{for(i.s();!(n=i.n()).done;){var u=n.value;if(x(o,a,u[0][0])!==x(o,a,u[0][1])){if(a[u[0][0]]+a[u[0][1]]>r)continue;_(o,a,u[0][0],u[0][1])}for(var f=0;f<o.length;f++)o[f]=x(o,a,f);if(1===new Set(o).size)break}}catch(h){i.e(h)}finally{i.f()}for(var l=new Map,s=0;s<o.length;s++)l.has(o[s])||l.set(o[s],[]),l.get(o[s]).push(s);return l}(e,a):function(t,r){var e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=b(t);n.sort((function(t,r){return r[1]-t[1]}));var o,a=t.map((function(t,r){return r})),i=c(n);try{for(i.s();!(o=i.n()).done;){var u=o.value;M(a,u[0][0])!==M(a,u[0][1])&&E(a,u[0][0],u[0][1]);for(var f=0;f<a.length;f++)a[f]=M(a,f);if(new Set(a).size<=r||u[1]<e)break}}catch(h){i.e(h)}finally{i.f()}for(var l=new Map,s=0;s<a.length;s++)l.has(a[s])||l.set(a[s],[]),l.get(a[s]).push(s);return l}(e,a,l);var s,h=[],v=c(r.values());try{for(v.s();!(s=v.n()).done;){var g=s.value;h.push(g.map((function(t){return n[t]})))}}catch(p){v.e(p)}finally{v.f()}return h};e(1);e(0);var T;!function(t){t.outlier=\\\"default_outlier\\\",t.cluster=\\\"default_group\\\",t.trend=\\\"default_trend\\\"}(T||(T={}));function q(t,r){return function(t,r){return t.every((function(t){return Number(t[r])>=1800&&Number(t[r])<=2200||!isNaN(Date.parse(t[r]))&&\\\"string\\\"===typeof t[r]&&/^[0-9]{0,4}[-/][0-9]{0,2}([-/][0-9]{0,2}$)?/.test(t[r])||\\\"undefined\\\"===typeof t[r]||null===t[r]}))}(t,r)?\\\"temporal\\\":function(t,r){return t.every((function(t){return\\\"number\\\"===typeof t[r]||\\\"undefined\\\"===typeof t[r]||null===t[r]}))}(t,r)?\\\"quantitative\\\":(function(t,r){t.every((function(t){return\\\"string\\\"===typeof t[r]||\\\"undefined\\\"===typeof t[r]||null===t[r]}))}(t,r),\\\"nominal\\\")}function N(t,r){var e,n=[],o=c(r);try{for(o.s();!(e=o.n()).done;){var a=e.value;n.push({name:a,type:q(t,a)})}}catch(i){o.e(i)}finally{o.f()}return n}function j(t,r){return v(t,r).map((function(t){return{memberName:t[0],count:t[1]}}))}function F(t,r){var e,n=[],o=c(r);try{for(o.s();!(e=o.n()).done;){var a=e.value;n.push({fieldName:a,distribution:j(t,a)})}}catch(i){o.e(i)}finally{o.f()}return n}function P(t,r){var e=v(t,r),n=y(e.map((function(t){return t[1]})));return{fieldName:r,entropy:m(n),maxEntropy:Math.log2(e.length)}}function D(t,r){var e,n=[],o=c(r);try{for(o.s();!(e=o.n()).done;){var a=e.value;n.push(P(t,a))}}catch(i){o.e(i)}finally{o.f()}return n}function k(t,r){var e,n=h(t),o=[],a=c(r);try{for(a.s();!(e=a.n()).done;){var i=e.value,u=\\\"\\\".concat(i.name,\\\"(group)\\\");\\\"quantitative\\\"===i.type&&v(t,i.name).length>50?d(t,i.name)||(n=g({dataSource:n,field:i.name,newField:u,groupNumber:8}),o.push({name:u,type:\\\"ordinal\\\"})):(\\\"ordinal\\\"===i.type||\\\"nominal\\\"===i.type)&&v(t,i.name).length>25&&(d(t,i.name)||(n=p({dataSource:n,field:i.name,newField:u,groupNumber:8}),o.push({name:u,type:i.type})))}}catch(f){a.e(f)}finally{a.f()}return{groupedData:n,fields:r,newFields:o}}var L;!function(t){t.outlier=\\\"default_outlier\\\",t.trend=\\\"default_trend\\\"}(L||(L={}));var A;self.addEventListener(\\\"message\\\",(A=t=>{try{const{dataSource:r,fields:e}=t.data,n=o.groupFields(r,e);self.postMessage({success:!0,data:n})}catch(r){self.postMessage({success:!1,message:r.toString()})}},function(t){var r=(new Date).getTime();try{A(t)}finally{var e=(new Date).getTime()-r;console.log(\\\"Task [\\\".concat(A.name,\\\"] cost \\\").concat(e,\\\" ms.\\\"))}}),!1)}]);\\n//# sourceMappingURL=groupFields.worker.ec050abe.worker.js.map\", \"Worker\", undefined, __webpack_public_path__ + \"static/js/groupFields.worker.ec050abe.worker.js\");\n}\n","\nimport worker from \"!!../../../../node_modules/worker-loader/dist/runtime/inline.js\";\n\nexport default function Worker_fn() {\n  return worker(\"!function(t){var r={};function e(n){if(r[n])return r[n].exports;var a=r[n]={i:n,l:!1,exports:{}};return t[n].call(a.exports,a,a.exports,e),a.l=!0,a.exports}e.m=t,e.c=r,e.d=function(t,r,n){e.o(t,r)||Object.defineProperty(t,r,{enumerable:!0,get:n})},e.r=function(t){\\\"undefined\\\"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:\\\"Module\\\"}),Object.defineProperty(t,\\\"__esModule\\\",{value:!0})},e.t=function(t,r){if(1&r&&(t=e(t)),8&r)return t;if(4&r&&\\\"object\\\"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(e.r(n),Object.defineProperty(n,\\\"default\\\",{enumerable:!0,value:t}),2&r&&\\\"string\\\"!=typeof t)for(var a in t)e.d(n,a,function(r){return t[r]}.bind(null,a));return n},e.n=function(t){var r=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(r,\\\"a\\\",r),r},e.o=function(t,r){return Object.prototype.hasOwnProperty.call(t,r)},e.p=\\\"./\\\",e(e.s=9)}([function(t,r,e){t.exports=e(4)},function(t,r,e){!function(t){\\\"use strict\\\";function r(t){if(0===t.length)return 0;for(var r,e=t[0],n=0,a=1;a<t.length;a++)r=e+t[a],Math.abs(e)>=Math.abs(t[a])?n+=e-r+t[a]:n+=t[a]-r+e,e=r;return e+n}function e(t){if(0===t.length)throw new Error(\\\"mean requires at least one data point\\\");return r(t)/t.length}function n(t,r){var n,a,o=e(t),i=0;if(2===r)for(a=0;a<t.length;a++)i+=(n=t[a]-o)*n;else for(a=0;a<t.length;a++)i+=Math.pow(t[a]-o,r);return i}function a(t){if(0===t.length)throw new Error(\\\"variance requires at least one data point\\\");return n(t,2)/t.length}function o(t){if(1===t.length)return 0;var r=a(t);return Math.sqrt(r)}function i(t){if(0===t.length)throw new Error(\\\"mode requires at least one data point\\\");if(1===t.length)return t[0];for(var r=t[0],e=NaN,n=0,a=1,o=1;o<t.length+1;o++)t[o]!==r?(a>n&&(n=a,e=r),a=1,r=t[o]):a++;return e}function u(t){return t.slice().sort((function(t,r){return t-r}))}function s(t){if(0===t.length)throw new Error(\\\"min requires at least one data point\\\");for(var r=t[0],e=1;e<t.length;e++)t[e]<r&&(r=t[e]);return r}function c(t){if(0===t.length)throw new Error(\\\"max requires at least one data point\\\");for(var r=t[0],e=1;e<t.length;e++)t[e]>r&&(r=t[e]);return r}function f(t){for(var r=0,e=0;e<t.length;e++)r+=t[e];return r}function h(t,r){var e=t.length*r;if(0===t.length)throw new Error(\\\"quantile requires at least one data point.\\\");if(r<0||r>1)throw new Error(\\\"quantiles must be between 0 and 1\\\");return 1===r?t[t.length-1]:0===r?t[0]:e%1!=0?t[Math.ceil(e)-1]:t.length%2==0?(t[e-1]+t[e])/2:t[e]}function l(t,r,e,n){for(e=e||0,n=n||t.length-1;n>e;){if(n-e>600){var a=n-e+1,o=r-e+1,i=Math.log(a),u=.5*Math.exp(2*i/3),s=.5*Math.sqrt(i*u*(a-u)/a);o-a/2<0&&(s*=-1),l(t,r,Math.max(e,Math.floor(r-o*u/a+s)),Math.min(n,Math.floor(r+(a-o)*u/a+s)))}var c=t[r],f=e,h=n;for(v(t,e,r),t[n]>c&&v(t,e,n);f<h;){for(v(t,f,h),f++,h--;t[f]<c;)f++;for(;t[h]>c;)h--}t[e]===c?v(t,e,h):v(t,++h,n),h<=r&&(e=h+1),r<=h&&(n=h-1)}}function v(t,r,e){var n=t[r];t[r]=t[e],t[e]=n}function p(t,r){var e=t.slice();if(Array.isArray(r)){!function(t,r){for(var e=[0],n=0;n<r.length;n++)e.push(m(t.length,r[n]));e.push(t.length-1),e.sort(g);for(var a=[0,e.length-1];a.length;){var o=Math.ceil(a.pop()),i=Math.floor(a.pop());if(!(o-i<=1)){var u=Math.floor((i+o)/2);d(t,e[u],Math.floor(e[i]),Math.ceil(e[o])),a.push(i,u,u,o)}}}(e,r);for(var n=[],a=0;a<r.length;a++)n[a]=h(e,r[a]);return n}return d(e,m(e.length,r),0,e.length-1),h(e,r)}function d(t,r,e,n){r%1==0?l(t,r,e,n):(l(t,r=Math.floor(r),e,n),l(t,r+1,r+1,n))}function g(t,r){return t-r}function m(t,r){var e=t*r;return 1===r?t-1:0===r?0:e%1!=0?Math.ceil(e)-1:t%2==0?e-.5:e}function y(t,r){if(r<t[0])return 0;if(r>t[t.length-1])return 1;var e=function(t,r){for(var e=0,n=0,a=t.length;n<a;)r<=t[e=n+a>>>1]?a=e:n=-~e;return n}(t,r);if(t[e]!==r)return e/t.length;e++;var n=function(t,r){for(var e=0,n=0,a=t.length;n<a;)r>=t[e=n+a>>>1]?n=-~e:a=e;return n}(t,r);if(n===e)return e/t.length;var a=n-e+1;return a*(n+e)/2/a/t.length}function w(t){var r=p(t,.75),e=p(t,.25);if(\\\"number\\\"==typeof r&&\\\"number\\\"==typeof e)return r-e}function b(t){return+p(t,.5)}function M(t){for(var r=b(t),e=[],n=0;n<t.length;n++)e.push(Math.abs(t[n]-r));return b(e)}function S(t,r){r=r||Math.random;for(var e,n,a=t.length;a>0;)n=Math.floor(r()*a--),e=t[a],t[a]=t[n],t[n]=e;return t}function E(t,r){return S(t.slice(),r)}function x(t,r,e){return E(t,e).slice(0,r)}function _(t,r){for(var e=[],n=0;n<t;n++){for(var a=[],o=0;o<r;o++)a.push(0);e.push(a)}return e}function k(t){for(var r,e=0,n=0;n<t.length;n++)0!==n&&t[n]===r||(r=t[n],e++);return e}function D(t,r,e,n){var a;if(t>0){var o=(e[r]-e[t-1])/(r-t+1);a=n[r]-n[t-1]-(r-t+1)*o*o}else a=n[r]-e[r]*e[r]/(r+1);return a<0?0:a}function T(t,r,e,n,a,o,i){if(!(t>r)){var u=Math.floor((t+r)/2);n[e][u]=n[e-1][u-1],a[e][u]=u;var s=e;t>e&&(s=Math.max(s,a[e][t-1]||0)),s=Math.max(s,a[e-1][u]||0);var c,f,h,l=u-1;r<n[0].length-1&&(l=Math.min(l,a[e][r+1]||0));for(var v=l;v>=s&&!((c=D(v,u,o,i))+n[e-1][s-1]>=n[e][u]);--v)(f=D(s,u,o,i)+n[e-1][s-1])<n[e][u]&&(n[e][u]=f,a[e][u]=s),s++,(h=c+n[e-1][v-1])<n[e][u]&&(n[e][u]=h,a[e][u]=v);T(t,u-1,e,n,a,o,i),T(u+1,r,e,n,a,o,i)}}function z(t,r){if(t.length!==r.length)throw new Error(\\\"sampleCovariance requires samples with equal lengths\\\");if(t.length<2)throw new Error(\\\"sampleCovariance requires at least two data points in each sample\\\");for(var n=e(t),a=e(r),o=0,i=0;i<t.length;i++)o+=(t[i]-n)*(r[i]-a);return o/(t.length-1)}function q(t){if(t.length<2)throw new Error(\\\"sampleVariance requires at least two data points\\\");return n(t,2)/(t.length-1)}function P(t){var r=q(t);return Math.sqrt(r)}function O(t,r,e,n){return(t*r+e*n)/(r+n)}function F(t){if(0===t.length)throw new Error(\\\"meanSimple requires at least one data point\\\");return f(t)/t.length}function j(t){if(0===t.length)throw new Error(\\\"rootMeanSquare requires at least one data point\\\");for(var r=0,e=0;e<t.length;e++)r+=Math.pow(t[e],2);return Math.sqrt(r/t.length)}var L=function(){this.totalCount=0,this.data={}};L.prototype.train=function(t,r){for(var e in this.data[r]||(this.data[r]={}),t){var n=t[e];void 0===this.data[r][e]&&(this.data[r][e]={}),void 0===this.data[r][e][n]&&(this.data[r][e][n]=0),this.data[r][e][n]++}this.totalCount++},L.prototype.score=function(t){var r,e={};for(var n in t){var a=t[n];for(r in this.data)e[r]={},this.data[r][n]?e[r][n+\\\"_\\\"+a]=(this.data[r][n][a]||0)/this.totalCount:e[r][n+\\\"_\\\"+a]=0}var o={};for(r in e)for(var i in o[r]=0,e[r])o[r]+=e[r][i];return o};var N=function(){this.weights=[],this.bias=0};N.prototype.predict=function(t){if(t.length!==this.weights.length)return null;for(var r=0,e=0;e<this.weights.length;e++)r+=this.weights[e]*t[e];return(r+=this.bias)>0?1:0},N.prototype.train=function(t,r){if(0!==r&&1!==r)return null;t.length!==this.weights.length&&(this.weights=t,this.bias=1);var e=this.predict(t);if(\\\"number\\\"==typeof e&&e!==r){for(var n=r-e,a=0;a<this.weights.length;a++)this.weights[a]+=n*t[a];this.bias+=n}return this};var I=1e-4;function A(t){if(t<0)throw new Error(\\\"factorial requires a non-negative value\\\");if(Math.floor(t)!==t)throw new Error(\\\"factorial requires an integer input\\\");for(var r=1,e=2;e<=t;e++)r*=e;return r}var R=[.9999999999999971,57.15623566586292,-59.59796035547549,14.136097974741746,-.4919138160976202,3399464998481189e-20,4652362892704858e-20,-9837447530487956e-20,.0001580887032249125,-.00021026444172410488,.00021743961811521265,-.0001643181065367639,8441822398385275e-20,-26190838401581408e-21,36899182659531625e-22],C=Math.log(Math.sqrt(2*Math.PI)),V={1:{.995:0,.99:0,.975:0,.95:0,.9:.02,.5:.45,.1:2.71,.05:3.84,.025:5.02,.01:6.63,.005:7.88},2:{.995:.01,.99:.02,.975:.05,.95:.1,.9:.21,.5:1.39,.1:4.61,.05:5.99,.025:7.38,.01:9.21,.005:10.6},3:{.995:.07,.99:.11,.975:.22,.95:.35,.9:.58,.5:2.37,.1:6.25,.05:7.81,.025:9.35,.01:11.34,.005:12.84},4:{.995:.21,.99:.3,.975:.48,.95:.71,.9:1.06,.5:3.36,.1:7.78,.05:9.49,.025:11.14,.01:13.28,.005:14.86},5:{.995:.41,.99:.55,.975:.83,.95:1.15,.9:1.61,.5:4.35,.1:9.24,.05:11.07,.025:12.83,.01:15.09,.005:16.75},6:{.995:.68,.99:.87,.975:1.24,.95:1.64,.9:2.2,.5:5.35,.1:10.65,.05:12.59,.025:14.45,.01:16.81,.005:18.55},7:{.995:.99,.99:1.25,.975:1.69,.95:2.17,.9:2.83,.5:6.35,.1:12.02,.05:14.07,.025:16.01,.01:18.48,.005:20.28},8:{.995:1.34,.99:1.65,.975:2.18,.95:2.73,.9:3.49,.5:7.34,.1:13.36,.05:15.51,.025:17.53,.01:20.09,.005:21.96},9:{.995:1.73,.99:2.09,.975:2.7,.95:3.33,.9:4.17,.5:8.34,.1:14.68,.05:16.92,.025:19.02,.01:21.67,.005:23.59},10:{.995:2.16,.99:2.56,.975:3.25,.95:3.94,.9:4.87,.5:9.34,.1:15.99,.05:18.31,.025:20.48,.01:23.21,.005:25.19},11:{.995:2.6,.99:3.05,.975:3.82,.95:4.57,.9:5.58,.5:10.34,.1:17.28,.05:19.68,.025:21.92,.01:24.72,.005:26.76},12:{.995:3.07,.99:3.57,.975:4.4,.95:5.23,.9:6.3,.5:11.34,.1:18.55,.05:21.03,.025:23.34,.01:26.22,.005:28.3},13:{.995:3.57,.99:4.11,.975:5.01,.95:5.89,.9:7.04,.5:12.34,.1:19.81,.05:22.36,.025:24.74,.01:27.69,.005:29.82},14:{.995:4.07,.99:4.66,.975:5.63,.95:6.57,.9:7.79,.5:13.34,.1:21.06,.05:23.68,.025:26.12,.01:29.14,.005:31.32},15:{.995:4.6,.99:5.23,.975:6.27,.95:7.26,.9:8.55,.5:14.34,.1:22.31,.05:25,.025:27.49,.01:30.58,.005:32.8},16:{.995:5.14,.99:5.81,.975:6.91,.95:7.96,.9:9.31,.5:15.34,.1:23.54,.05:26.3,.025:28.85,.01:32,.005:34.27},17:{.995:5.7,.99:6.41,.975:7.56,.95:8.67,.9:10.09,.5:16.34,.1:24.77,.05:27.59,.025:30.19,.01:33.41,.005:35.72},18:{.995:6.26,.99:7.01,.975:8.23,.95:9.39,.9:10.87,.5:17.34,.1:25.99,.05:28.87,.025:31.53,.01:34.81,.005:37.16},19:{.995:6.84,.99:7.63,.975:8.91,.95:10.12,.9:11.65,.5:18.34,.1:27.2,.05:30.14,.025:32.85,.01:36.19,.005:38.58},20:{.995:7.43,.99:8.26,.975:9.59,.95:10.85,.9:12.44,.5:19.34,.1:28.41,.05:31.41,.025:34.17,.01:37.57,.005:40},21:{.995:8.03,.99:8.9,.975:10.28,.95:11.59,.9:13.24,.5:20.34,.1:29.62,.05:32.67,.025:35.48,.01:38.93,.005:41.4},22:{.995:8.64,.99:9.54,.975:10.98,.95:12.34,.9:14.04,.5:21.34,.1:30.81,.05:33.92,.025:36.78,.01:40.29,.005:42.8},23:{.995:9.26,.99:10.2,.975:11.69,.95:13.09,.9:14.85,.5:22.34,.1:32.01,.05:35.17,.025:38.08,.01:41.64,.005:44.18},24:{.995:9.89,.99:10.86,.975:12.4,.95:13.85,.9:15.66,.5:23.34,.1:33.2,.05:36.42,.025:39.36,.01:42.98,.005:45.56},25:{.995:10.52,.99:11.52,.975:13.12,.95:14.61,.9:16.47,.5:24.34,.1:34.28,.05:37.65,.025:40.65,.01:44.31,.005:46.93},26:{.995:11.16,.99:12.2,.975:13.84,.95:15.38,.9:17.29,.5:25.34,.1:35.56,.05:38.89,.025:41.92,.01:45.64,.005:48.29},27:{.995:11.81,.99:12.88,.975:14.57,.95:16.15,.9:18.11,.5:26.34,.1:36.74,.05:40.11,.025:43.19,.01:46.96,.005:49.65},28:{.995:12.46,.99:13.57,.975:15.31,.95:16.93,.9:18.94,.5:27.34,.1:37.92,.05:41.34,.025:44.46,.01:48.28,.005:50.99},29:{.995:13.12,.99:14.26,.975:16.05,.95:17.71,.9:19.77,.5:28.34,.1:39.09,.05:42.56,.025:45.72,.01:49.59,.005:52.34},30:{.995:13.79,.99:14.95,.975:16.79,.95:18.49,.9:20.6,.5:29.34,.1:40.26,.05:43.77,.025:46.98,.01:50.89,.005:53.67},40:{.995:20.71,.99:22.16,.975:24.43,.95:26.51,.9:29.05,.5:39.34,.1:51.81,.05:55.76,.025:59.34,.01:63.69,.005:66.77},50:{.995:27.99,.99:29.71,.975:32.36,.95:34.76,.9:37.69,.5:49.33,.1:63.17,.05:67.5,.025:71.42,.01:76.15,.005:79.49},60:{.995:35.53,.99:37.48,.975:40.48,.95:43.19,.9:46.46,.5:59.33,.1:74.4,.05:79.08,.025:83.3,.01:88.38,.005:91.95},70:{.995:43.28,.99:45.44,.975:48.76,.95:51.74,.9:55.33,.5:69.33,.1:85.53,.05:90.53,.025:95.02,.01:100.42,.005:104.22},80:{.995:51.17,.99:53.54,.975:57.15,.95:60.39,.9:64.28,.5:79.33,.1:96.58,.05:101.88,.025:106.63,.01:112.33,.005:116.32},90:{.995:59.2,.99:61.75,.975:65.65,.95:69.13,.9:73.29,.5:89.33,.1:107.57,.05:113.14,.025:118.14,.01:124.12,.005:128.3},100:{.995:67.33,.99:70.06,.975:74.22,.95:77.93,.9:82.36,.5:99.33,.1:118.5,.05:124.34,.025:129.56,.01:135.81,.005:140.17}},G=Math.sqrt(2*Math.PI),X={gaussian:function(t){return Math.exp(-.5*t*t)/G}},Y={nrd:function(t){var r=P(t),e=w(t);return\\\"number\\\"==typeof e&&(r=Math.min(r,e/1.34)),1.06*r*Math.pow(t.length,-.2)}};function K(t,r,e){var n,a;if(void 0===r)n=X.gaussian;else if(\\\"string\\\"==typeof r){if(!X[r])throw new Error('Unknown kernel \\\"'+r+'\\\"');n=X[r]}else n=r;if(void 0===e)a=Y.nrd(t);else if(\\\"string\\\"==typeof e){if(!Y[e])throw new Error('Unknown bandwidth method \\\"'+e+'\\\"');a=Y[e](t)}else a=e;return function(r){var e=0,o=0;for(e=0;e<t.length;e++)o+=n((r-t[e])/a);return o/a/t.length}}var U=Math.sqrt(2*Math.PI);function W(t){for(var r=t,e=t,n=1;n<15;n++)r+=e*=t*t/(2*n+1);return Math.round(1e4*(.5+r/U*Math.exp(-t*t/2)))/1e4}for(var H=[],B=0;B<=3.09;B+=.01)H.push(W(B));function $(t){var r=1/(1+.5*Math.abs(t)),e=r*Math.exp(-t*t+((((((((.17087277*r-.82215223)*r+1.48851587)*r-1.13520398)*r+.27886807)*r-.18628806)*r+.09678418)*r+.37409196)*r+1.00002368)*r-1.26551223);return t>=0?1-e:e-1}function J(t){var r=8*(Math.PI-3)/(3*Math.PI*(4-Math.PI)),e=Math.sqrt(Math.sqrt(Math.pow(2/(Math.PI*r)+Math.log(1-t*t)/2,2)-Math.log(1-t*t)/r)-(2/(Math.PI*r)+Math.log(1-t*t)/2));return t>=0?e:-e}function Q(t){if(\\\"number\\\"==typeof t)return t<0?-1:0===t?0:1;throw new TypeError(\\\"not a number\\\")}function Z(t,r){for(var e=0,n=0;n<t.length;n++){var a=t[n]-r[n];e+=a*a}return Math.sqrt(e)}function tt(t,r){return t.map((function(t){for(var e=Number.MAX_VALUE,n=-1,a=0;a<r.length;a++){var o=Z(t,r[a]);o<e&&(e=o,n=a)}return n}))}function rt(t,r,e){for(var n=t[0].length,a=_(e,n),o=Array(e).fill(0),i=t.length,u=0;u<i;u++){for(var s=t[u],c=r[u],f=a[c],h=0;h<n;h++)f[h]+=s[h];o[c]+=1}for(var l=0;l<e;l++){if(0===o[l])throw new Error(\\\"Centroid \\\"+l+\\\" has no friends\\\");for(var v=a[l],p=0;p<n;p++)v[p]/=o[l]}return a}function et(t,r){for(var e=0,n=0;n<t.length;n++)e+=Z(t[n],r[n]);return e}function nt(t,r){if(t.length!==r.length)throw new Error(\\\"must have exactly as many labels as points\\\");for(var e=function(t){for(var r=1+c(t),e=Array(r),n=0;n<t.length;n++){var a=t[n];void 0===e[a]&&(e[a]=[]),e[a].push(n)}return e}(r),n=function(t){for(var r=t.length,e=_(r,r),n=0;n<r;n++)for(var a=0;a<n;a++)e[n][a]=Z(t[n],t[a]),e[a][n]=e[n][a];return e}(t),a=[],o=0;o<t.length;o++){var i=0;if(e[r[o]].length>1){var u=ot(o,e[r[o]],n),s=at(o,r,e,n);i=(s-u)/Math.max(u,s)}a.push(i)}return a}function at(t,r,e,n){for(var a=r[t],o=Number.MAX_VALUE,i=0;i<e.length;i++)if(i!==a){var u=ot(t,e[i],n);u<o&&(o=u)}return o}function ot(t,r,e){for(var n=0,a=0;a<r.length;a++)n+=e[t][r[a]];return n/r.length}function it(t,r){return 0===t&&0===r?0:Math.abs((t-r)/r)}t.BayesianClassifier=L,t.PerceptronModel=N,t.addToMean=function(t,r,e){return t+(e-t)/(r+1)},t.approxEqual=function(t,r,e){return void 0===e&&(e=I),it(t,r)<=e},t.average=e,t.averageSimple=F,t.bayesian=L,t.bernoulliDistribution=function(t){if(t<0||t>1)throw new Error(\\\"bernoulliDistribution requires probability to be between 0 and 1 inclusive\\\");return[1-t,t]},t.binomialDistribution=function(t,r){if(!(r<0||r>1||t<=0||t%1!=0)){var e=0,n=0,a=[],o=1;do{a[e]=o*Math.pow(r,e)*Math.pow(1-r,t-e),n+=a[e],o=o*(t-++e+1)/e}while(n<.9999);return a}},t.bisect=function(t,r,e,n,a){if(\\\"function\\\"!=typeof t)throw new TypeError(\\\"func must be a function\\\");for(var o=0;o<n;o++){var i=(r+e)/2;if(0===t(i)||Math.abs((e-r)/2)<a)return i;Q(t(i))===Q(t(r))?r=i:e=i}throw new Error(\\\"maximum number of iterations exceeded\\\")},t.chiSquaredDistributionTable=V,t.chiSquaredGoodnessOfFit=function(t,r,n){for(var a=0,o=r(e(t)),i=[],u=[],s=0;s<t.length;s++)void 0===i[t[s]]&&(i[t[s]]=0),i[t[s]]++;for(var c=0;c<i.length;c++)void 0===i[c]&&(i[c]=0);for(var f in o)f in i&&(u[+f]=o[f]*t.length);for(var h=u.length-1;h>=0;h--)u[h]<3&&(u[h-1]+=u[h],u.pop(),i[h-1]+=i[h],i.pop());for(var l=0;l<i.length;l++)a+=Math.pow(i[l]-u[l],2)/u[l];var v=i.length-1-1;return V[v][n]<a},t.chunk=function(t,r){var e=[];if(r<1)throw new Error(\\\"chunk size must be a positive number\\\");if(Math.floor(r)!==r)throw new Error(\\\"chunk size must be an integer\\\");for(var n=0;n<t.length;n+=r)e.push(t.slice(n,n+r));return e},t.ckmeans=function(t,r){if(r>t.length)throw new Error(\\\"cannot generate more classes than there are data values\\\");var e=u(t);if(1===k(e))return[e];var n=_(r,e.length),a=_(r,e.length);!function(t,r,e){for(var n=r[0].length,a=t[Math.floor(n/2)],o=[],i=[],u=0,s=void 0;u<n;++u)s=t[u]-a,0===u?(o.push(s),i.push(s*s)):(o.push(o[u-1]+s),i.push(i[u-1]+s*s)),r[0][u]=D(0,u,o,i),e[0][u]=0;for(var c=1;c<r.length;++c)T(c<r.length-1?c:n-1,n-1,c,r,e,o,i)}(e,n,a);for(var o=[],i=a[0].length-1,s=a.length-1;s>=0;s--){var c=a[s][i];o[s]=e.slice(c,i+1),s>0&&(i=c-1)}return o},t.combinations=function t(r,e){var n,a,o,i,u=[];for(n=0;n<r.length;n++)if(1===e)u.push([r[n]]);else for(o=t(r.slice(n+1,r.length),e-1),a=0;a<o.length;a++)(i=o[a]).unshift(r[n]),u.push(i);return u},t.combinationsReplacement=function t(r,e){for(var n=[],a=0;a<r.length;a++)if(1===e)n.push([r[a]]);else for(var o=t(r.slice(a,r.length),e-1),i=0;i<o.length;i++)n.push([r[a]].concat(o[i]));return n},t.combineMeans=O,t.combineVariances=function(t,r,e,n,a,o){var i=O(r,e,a,o);return(e*(t+Math.pow(r-i,2))+o*(n+Math.pow(a-i,2)))/(e+o)},t.cumulativeStdNormalProbability=function(t){var r=Math.abs(t),e=Math.min(Math.round(100*r),H.length-1);return t>=0?H[e]:+(1-H[e]).toFixed(4)},t.epsilon=I,t.equalIntervalBreaks=function(t,r){if(t.length<2)return t;for(var e=s(t),n=c(t),a=[e],o=(n-e)/r,i=1;i<r;i++)a.push(a[0]+o*i);return a.push(n),a},t.erf=$,t.errorFunction=$,t.extent=function(t){if(0===t.length)throw new Error(\\\"extent requires at least one data point\\\");for(var r=t[0],e=t[0],n=1;n<t.length;n++)t[n]>e&&(e=t[n]),t[n]<r&&(r=t[n]);return[r,e]},t.extentSorted=function(t){return[t[0],t[t.length-1]]},t.factorial=A,t.gamma=function t(r){if(Number.isInteger(r))return r<=0?NaN:A(r-1);if(--r<0)return Math.PI/(Math.sin(Math.PI*-r)*t(-r));var e=r+1/4;return Math.pow(r/Math.E,r)*Math.sqrt(2*Math.PI*(r+1/6))*(1+1/144/Math.pow(e,2)-1/12960/Math.pow(e,3)-257/207360/Math.pow(e,4)-52/2612736/Math.pow(e,5)+5741173/9405849600/Math.pow(e,6)+37529/18811699200/Math.pow(e,7))},t.gammaln=function(t){if(t<=0)return 1/0;t--;for(var r=R[0],e=1;e<15;e++)r+=R[e]/(t+e);var n=5.2421875+t;return C+Math.log(r)-n+(t+.5)*Math.log(n)},t.geometricMean=function(t){if(0===t.length)throw new Error(\\\"geometricMean requires at least one data point\\\");for(var r=1,e=0;e<t.length;e++){if(t[e]<=0)throw new Error(\\\"geometricMean requires only positive numbers as input\\\");r*=t[e]}return Math.pow(r,1/t.length)},t.harmonicMean=function(t){if(0===t.length)throw new Error(\\\"harmonicMean requires at least one data point\\\");for(var r=0,e=0;e<t.length;e++){if(t[e]<=0)throw new Error(\\\"harmonicMean requires only positive numbers as input\\\");r+=1/t[e]}return t.length/r},t.interquartileRange=w,t.inverseErrorFunction=J,t.iqr=w,t.kMeansCluster=function(t,r,e){void 0===e&&(e=Math.random);for(var n=null,a=x(t,r,e),o=null,i=Number.MAX_VALUE;0!==i;)n=a,i=et(a=rt(t,o=tt(t,a),r),n);return{labels:o,centroids:a}},t.kde=K,t.kernelDensityEstimation=K,t.linearRegression=function(t){var r,e,n=t.length;if(1===n)r=0,e=t[0][1];else{for(var a,o,i,u=0,s=0,c=0,f=0,h=0;h<n;h++)u+=o=(a=t[h])[0],s+=i=a[1],c+=o*o,f+=o*i;e=s/n-(r=(n*f-u*s)/(n*c-u*u))*u/n}return{m:r,b:e}},t.linearRegressionLine=function(t){return function(r){return t.b+t.m*r}},t.mad=M,t.max=c,t.maxSorted=function(t){return t[t.length-1]},t.mean=e,t.meanSimple=F,t.median=b,t.medianAbsoluteDeviation=M,t.medianSorted=function(t){return h(t,.5)},t.min=s,t.minSorted=function(t){return t[0]},t.mode=function(t){return i(u(t))},t.modeFast=function(t){for(var r,e=new Map,n=0,a=0;a<t.length;a++){var o=e.get(t[a]);void 0===o?o=1:o++,o>n&&(r=t[a],n=o),e.set(t[a],o)}if(0===n)throw new Error(\\\"mode requires at last one data point\\\");return r},t.modeSorted=i,t.numericSort=u,t.perceptron=N,t.permutationTest=function(t,r,n,a,o){if(void 0===a&&(a=1e4),void 0===n&&(n=\\\"two_side\\\"),\\\"two_side\\\"!==n&&\\\"greater\\\"!==n&&\\\"less\\\"!==n)throw new Error(\\\"`alternative` must be either 'two_side', 'greater', or 'less'\\\");for(var i=e(t)-e(r),u=new Array(a),s=t.concat(r),c=Math.floor(s.length/2),f=0;f<a;f++){S(s,o);var h=s.slice(0,c),l=s.slice(c,s.length),v=e(h)-e(l);u[f]=v}var p=0;if(\\\"two_side\\\"===n)for(var d=0;d<=a;d++)Math.abs(u[d])>=Math.abs(i)&&(p+=1);else if(\\\"greater\\\"===n)for(var g=0;g<=a;g++)u[g]>=i&&(p+=1);else for(var m=0;m<=a;m++)u[m]<=i&&(p+=1);return p/a},t.permutationsHeap=function(t){for(var r=new Array(t.length),e=[t.slice()],n=0;n<t.length;n++)r[n]=0;for(var a=0;a<t.length;)if(r[a]<a){var o=0;a%2!=0&&(o=r[a]);var i=t[o];t[o]=t[a],t[a]=i,e.push(t.slice()),r[a]++,a=0}else r[a]=0,a++;return e},t.poissonDistribution=function(t){if(!(t<=0)){var r=0,e=0,n=[],a=1;do{n[r]=Math.exp(-t)*Math.pow(t,r)/a,e+=n[r],a*=++r}while(e<.9999);return n}},t.probit=function(t){return 0===t?t=I:t>=1&&(t=.9999),Math.sqrt(2)*J(2*t-1)},t.product=function(t){for(var r=1,e=0;e<t.length;e++)r*=t[e];return r},t.quantile=p,t.quantileRank=function(t,r){return y(u(t),r)},t.quantileRankSorted=y,t.quantileSorted=h,t.quickselect=l,t.rSquared=function(t,r){if(t.length<2)return 1;for(var e=0,n=0;n<t.length;n++)e+=t[n][1];for(var a=e/t.length,o=0,i=0;i<t.length;i++)o+=Math.pow(a-t[i][1],2);for(var u=0,s=0;s<t.length;s++)u+=Math.pow(t[s][1]-r(t[s][0]),2);return 1-u/o},t.relativeError=it,t.rms=j,t.rootMeanSquare=j,t.sample=x,t.sampleCorrelation=function(t,r){return z(t,r)/P(t)/P(r)},t.sampleCovariance=z,t.sampleKurtosis=function(t){var r=t.length;if(r<4)throw new Error(\\\"sampleKurtosis requires at least four data points\\\");for(var n,a=e(t),o=0,i=0,u=0;u<r;u++)o+=(n=t[u]-a)*n,i+=n*n*n*n;return(r-1)/((r-2)*(r-3))*(r*(r+1)*i/(o*o)-3*(r-1))},t.sampleSkewness=function(t){if(t.length<3)throw new Error(\\\"sampleSkewness requires at least three data points\\\");for(var r,n=e(t),a=0,o=0,i=0;i<t.length;i++)a+=(r=t[i]-n)*r,o+=r*r*r;var u=t.length-1,s=Math.sqrt(a/u),c=t.length;return c*o/((c-1)*(c-2)*Math.pow(s,3))},t.sampleStandardDeviation=P,t.sampleVariance=q,t.sampleWithReplacement=function(t,r,e){if(0===t.length)return[];e=e||Math.random;for(var n=t.length,a=[],o=0;o<r;o++){var i=Math.floor(e()*n);a.push(t[i])}return a},t.shuffle=E,t.shuffleInPlace=S,t.sign=Q,t.silhouette=nt,t.silhouetteMetric=function(t,r){return c(nt(t,r))},t.standardDeviation=o,t.standardNormalTable=H,t.subtractFromMean=function(t,r,e){return(t*r-e)/(r-1)},t.sum=r,t.sumNthPowerDeviations=n,t.sumSimple=f,t.tTest=function(t,r){return(e(t)-r)/(o(t)/Math.sqrt(t.length))},t.tTestTwoSample=function(t,r,n){var a=t.length,o=r.length;if(!a||!o)return null;n||(n=0);var i=e(t),u=e(r),s=q(t),c=q(r);if(\\\"number\\\"==typeof i&&\\\"number\\\"==typeof u&&\\\"number\\\"==typeof s&&\\\"number\\\"==typeof c){var f=((a-1)*s+(o-1)*c)/(a+o-2);return(i-u-n)/Math.sqrt(f*(1/a+1/o))}},t.uniqueCountSorted=k,t.variance=a,t.zScore=function(t,r,e){return(t-r)/e},Object.defineProperty(t,\\\"__esModule\\\",{value:!0})}(r)},function(t,r,e){\\\"use strict\\\";Object.defineProperty(r,\\\"__esModule\\\",{value:!0}),r.sum_unsafe=function(t,r){var e={};r.forEach((function(t){e[t]=0}));for(var n=function(n,a){r.forEach((function(r){e[r]+=t[n][r]}))},a=0,o=t.length;a<o;a++)n(a);return e},r.sum=function(t,r){var e={};r.forEach((function(t){e[t]=0}));for(var n=function(n,a){r.forEach((function(r){e[r]+=Number(t[n][r])||0}))},a=0,o=t.length;a<o;a++)n(a);return e},r.count=function(t,r){var e={};r.forEach((function(t){e[t]=0}));for(var n=0,a=t.length;n<a;n++)r.forEach((function(t){e[t]++}));return e},r.mean=function(t,r){var e={};r.forEach((function(t){e[t]=0}));for(var n=function(n,a){r.forEach((function(r){e[r]+=Number(t[n][r])||0}))},a=0,o=t.length;a<o;a++)n(a);return r.forEach((function(r){e[r]/=t.length})),e}},function(t,r,e){\\\"use strict\\\";this&&this.__assign;Object.defineProperty(r,\\\"__esModule\\\",{value:!0});var n=e(5),a=e(8),o=e(2),i={sum:o.sum_unsafe,mean:o.mean,count:o.count};function u(t){var r=t.type,e=t.aggFunc,a=void 0===e?o.count:e,i=t.factTable,u=void 0===i?[]:i,s=t.dimensions,c=void 0===s?[]:s,f=t.measures,h=void 0===f?[]:f;switch(r){case\\\"period\\\":return new n.periodCube({aggFunc:a,factTable:u,dimensions:c,measures:h});case\\\"moment\\\":default:return new n.momentCube({aggFunc:a,factTable:u,dimensions:c,measures:h})}}r.createCube=u,r.default=function(t){var r=t.dimensions,e=t.measures,n=t.asFields,s=t.operator,c=t.dataSource,f=u({type:\\\"moment\\\",aggFunc:i[s]||o.count,dimensions:r,measures:e,factTable:c}),h=a.tree2Table({dimensions:r,measures:e,cube:f});return h.forEach((function(t){n.forEach((function(r,n){t[r]=t[e[n]]}))})),h},function(t){for(var e in t)r.hasOwnProperty(e)||(r[e]=t[e])}(e(2))},function(t,r,e){var n=function(t){\\\"use strict\\\";var r,e=Object.prototype,n=e.hasOwnProperty,a=\\\"function\\\"===typeof Symbol?Symbol:{},o=a.iterator||\\\"@@iterator\\\",i=a.asyncIterator||\\\"@@asyncIterator\\\",u=a.toStringTag||\\\"@@toStringTag\\\";function s(t,r,e){return Object.defineProperty(t,r,{value:e,enumerable:!0,configurable:!0,writable:!0}),t[r]}try{s({},\\\"\\\")}catch(P){s=function(t,r,e){return t[r]=e}}function c(t,r,e,n){var a=r&&r.prototype instanceof g?r:g,o=Object.create(a.prototype),i=new T(n||[]);return o._invoke=function(t,r,e){var n=h;return function(a,o){if(n===v)throw new Error(\\\"Generator is already running\\\");if(n===p){if(\\\"throw\\\"===a)throw o;return q()}for(e.method=a,e.arg=o;;){var i=e.delegate;if(i){var u=_(i,e);if(u){if(u===d)continue;return u}}if(\\\"next\\\"===e.method)e.sent=e._sent=e.arg;else if(\\\"throw\\\"===e.method){if(n===h)throw n=p,e.arg;e.dispatchException(e.arg)}else\\\"return\\\"===e.method&&e.abrupt(\\\"return\\\",e.arg);n=v;var s=f(t,r,e);if(\\\"normal\\\"===s.type){if(n=e.done?p:l,s.arg===d)continue;return{value:s.arg,done:e.done}}\\\"throw\\\"===s.type&&(n=p,e.method=\\\"throw\\\",e.arg=s.arg)}}}(t,e,i),o}function f(t,r,e){try{return{type:\\\"normal\\\",arg:t.call(r,e)}}catch(P){return{type:\\\"throw\\\",arg:P}}}t.wrap=c;var h=\\\"suspendedStart\\\",l=\\\"suspendedYield\\\",v=\\\"executing\\\",p=\\\"completed\\\",d={};function g(){}function m(){}function y(){}var w={};w[o]=function(){return this};var b=Object.getPrototypeOf,M=b&&b(b(z([])));M&&M!==e&&n.call(M,o)&&(w=M);var S=y.prototype=g.prototype=Object.create(w);function E(t){[\\\"next\\\",\\\"throw\\\",\\\"return\\\"].forEach((function(r){s(t,r,(function(t){return this._invoke(r,t)}))}))}function x(t,r){function e(a,o,i,u){var s=f(t[a],t,o);if(\\\"throw\\\"!==s.type){var c=s.arg,h=c.value;return h&&\\\"object\\\"===typeof h&&n.call(h,\\\"__await\\\")?r.resolve(h.__await).then((function(t){e(\\\"next\\\",t,i,u)}),(function(t){e(\\\"throw\\\",t,i,u)})):r.resolve(h).then((function(t){c.value=t,i(c)}),(function(t){return e(\\\"throw\\\",t,i,u)}))}u(s.arg)}var a;this._invoke=function(t,n){function o(){return new r((function(r,a){e(t,n,r,a)}))}return a=a?a.then(o,o):o()}}function _(t,e){var n=t.iterator[e.method];if(n===r){if(e.delegate=null,\\\"throw\\\"===e.method){if(t.iterator.return&&(e.method=\\\"return\\\",e.arg=r,_(t,e),\\\"throw\\\"===e.method))return d;e.method=\\\"throw\\\",e.arg=new TypeError(\\\"The iterator does not provide a 'throw' method\\\")}return d}var a=f(n,t.iterator,e.arg);if(\\\"throw\\\"===a.type)return e.method=\\\"throw\\\",e.arg=a.arg,e.delegate=null,d;var o=a.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,\\\"return\\\"!==e.method&&(e.method=\\\"next\\\",e.arg=r),e.delegate=null,d):o:(e.method=\\\"throw\\\",e.arg=new TypeError(\\\"iterator result is not an object\\\"),e.delegate=null,d)}function k(t){var r={tryLoc:t[0]};1 in t&&(r.catchLoc=t[1]),2 in t&&(r.finallyLoc=t[2],r.afterLoc=t[3]),this.tryEntries.push(r)}function D(t){var r=t.completion||{};r.type=\\\"normal\\\",delete r.arg,t.completion=r}function T(t){this.tryEntries=[{tryLoc:\\\"root\\\"}],t.forEach(k,this),this.reset(!0)}function z(t){if(t){var e=t[o];if(e)return e.call(t);if(\\\"function\\\"===typeof t.next)return t;if(!isNaN(t.length)){var a=-1,i=function e(){for(;++a<t.length;)if(n.call(t,a))return e.value=t[a],e.done=!1,e;return e.value=r,e.done=!0,e};return i.next=i}}return{next:q}}function q(){return{value:r,done:!0}}return m.prototype=S.constructor=y,y.constructor=m,m.displayName=s(y,u,\\\"GeneratorFunction\\\"),t.isGeneratorFunction=function(t){var r=\\\"function\\\"===typeof t&&t.constructor;return!!r&&(r===m||\\\"GeneratorFunction\\\"===(r.displayName||r.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,y):(t.__proto__=y,s(t,u,\\\"GeneratorFunction\\\")),t.prototype=Object.create(S),t},t.awrap=function(t){return{__await:t}},E(x.prototype),x.prototype[i]=function(){return this},t.AsyncIterator=x,t.async=function(r,e,n,a,o){void 0===o&&(o=Promise);var i=new x(c(r,e,n,a),o);return t.isGeneratorFunction(e)?i:i.next().then((function(t){return t.done?t.value:i.next()}))},E(S),s(S,u,\\\"Generator\\\"),S[o]=function(){return this},S.toString=function(){return\\\"[object Generator]\\\"},t.keys=function(t){var r=[];for(var e in t)r.push(e);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=z,T.prototype={constructor:T,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=r,this.done=!1,this.delegate=null,this.method=\\\"next\\\",this.arg=r,this.tryEntries.forEach(D),!t)for(var e in this)\\\"t\\\"===e.charAt(0)&&n.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=r)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if(\\\"throw\\\"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function a(n,a){return u.type=\\\"throw\\\",u.arg=t,e.next=n,a&&(e.method=\\\"next\\\",e.arg=r),!!a}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],u=i.completion;if(\\\"root\\\"===i.tryLoc)return a(\\\"end\\\");if(i.tryLoc<=this.prev){var s=n.call(i,\\\"catchLoc\\\"),c=n.call(i,\\\"finallyLoc\\\");if(s&&c){if(this.prev<i.catchLoc)return a(i.catchLoc,!0);if(this.prev<i.finallyLoc)return a(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return a(i.catchLoc,!0)}else{if(!c)throw new Error(\\\"try statement without catch or finally\\\");if(this.prev<i.finallyLoc)return a(i.finallyLoc)}}}},abrupt:function(t,r){for(var e=this.tryEntries.length-1;e>=0;--e){var a=this.tryEntries[e];if(a.tryLoc<=this.prev&&n.call(a,\\\"finallyLoc\\\")&&this.prev<a.finallyLoc){var o=a;break}}o&&(\\\"break\\\"===t||\\\"continue\\\"===t)&&o.tryLoc<=r&&r<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=t,i.arg=r,o?(this.method=\\\"next\\\",this.next=o.finallyLoc,d):this.complete(i)},complete:function(t,r){if(\\\"throw\\\"===t.type)throw t.arg;return\\\"break\\\"===t.type||\\\"continue\\\"===t.type?this.next=t.arg:\\\"return\\\"===t.type?(this.rval=this.arg=t.arg,this.method=\\\"return\\\",this.next=\\\"end\\\"):\\\"normal\\\"===t.type&&r&&(this.next=r),d},finish:function(t){for(var r=this.tryEntries.length-1;r>=0;--r){var e=this.tryEntries[r];if(e.finallyLoc===t)return this.complete(e.completion,e.afterLoc),D(e),d}},catch:function(t){for(var r=this.tryEntries.length-1;r>=0;--r){var e=this.tryEntries[r];if(e.tryLoc===t){var n=e.completion;if(\\\"throw\\\"===n.type){var a=n.arg;D(e)}return a}}throw new Error(\\\"illegal catch attempt\\\")},delegateYield:function(t,e,n){return this.delegate={iterator:z(t),resultName:e,nextLoc:n},\\\"next\\\"===this.method&&(this.arg=r),d}},t}(t.exports);try{regeneratorRuntime=n}catch(a){Function(\\\"r\\\",\\\"regeneratorRuntime = r\\\")(n)}},function(t,r,e){\\\"use strict\\\";Object.defineProperty(r,\\\"__esModule\\\",{value:!0});var n=e(6);r.periodCube=n.default;var a=e(7);r.momentCube=a.default},function(t,r,e){\\\"use strict\\\";var n=this&&this.__read||function(t,r){var e=\\\"function\\\"===typeof Symbol&&t[Symbol.iterator];if(!e)return t;var n,a,o=e.call(t),i=[];try{for(;(void 0===r||r-- >0)&&!(n=o.next()).done;)i.push(n.value)}catch(u){a={error:u}}finally{try{n&&!n.done&&(e=o.return)&&e.call(o)}finally{if(a)throw a.error}}return i},a=this&&this.__spread||function(){for(var t=[],r=0;r<arguments.length;r++)t=t.concat(n(arguments[r]));return t},o=this&&this.__values||function(t){var r=\\\"function\\\"===typeof Symbol&&Symbol.iterator,e=r&&t[r],n=0;if(e)return e.call(t);if(t&&\\\"number\\\"===typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(r?\\\"Object is not iterable.\\\":\\\"Symbol.iterator is not defined.\\\")};Object.defineProperty(r,\\\"__esModule\\\",{value:!0});var i=function(){function t(t){this.children=new Map,this._rawData=[],this.aggFunc=t,this.cache=!1}return t.prototype.push=function(){for(var t,r=[],e=0;e<arguments.length;e++)r[e]=arguments[e];(t=this._rawData).push.apply(t,a(r))},t.prototype.aggData=function(t){return void 0===t&&(t=[]),this.cache||(this._aggData=this.aggFunc(this.rawData,t),this.cache=!0),this._aggData},t.prototype.clearCache=function(){this.cache=!1},Object.defineProperty(t.prototype,\\\"rawData\\\",{get:function(){var t,r;if(!this.cache){if(0!==this.children.size){var e=this.children.values(),n=[];try{for(var a=o(e),i=a.next();!i.done;i=a.next()){var u=i.value,s=void 0,c=u.rawData,f=c.length;for(s=0;s<f;s++)n.push(c[s])}}catch(h){t={error:h}}finally{try{i&&!i.done&&(r=a.return)&&r.call(a)}finally{if(t)throw t.error}}this._rawData=n}this.cache=!0}return this._rawData},enumerable:!0,configurable:!0}),t.prototype.getNode=function(t){return function r(e,a){var i,u;if(a===t.length)return e;var s=e.children.entries();try{for(var c=o(s),f=c.next();!f.done;f=c.next()){var h=n(f.value,2),l=h[0],v=h[1];if(l===t[a])return r(v,a+1)}}catch(p){i={error:p}}finally{try{f&&!f.done&&(u=c.return)&&u.call(c)}finally{if(i)throw i.error}}return null}(this,0)},t}(),u=function(){function t(t){this.aggFunc=t.aggFunc,this.factTable=t.factTable,this.dimensions=t.dimensions,this.measures=t.measures}return t.prototype.get=function(t){var r=this,e=r.tree,a=(r.aggFunc,r.measures);return function r(e,i){var u,s;if(i===t.length)return e.aggData(a);var c=e.children.entries();try{for(var f=o(c),h=f.next();!h.done;h=f.next()){var l=n(h.value,2),v=l[0],p=l[1];if(v===t[i])return r(p,i+1)}}catch(d){u={error:d}}finally{try{h&&!h.done&&(s=f.return)&&s.call(f)}finally{if(u)throw u.error}}return!1}(e,0)},t.prototype.getNode=function(t){return this.tree.getNode(t)},t.prototype.buildTree=function(){var t,r=new i(this.aggFunc),e=this.factTable.length;for(t=0;t<e;t++)this.insertNode(this.factTable[t],r,0);return this.tree=r,r},t.prototype.insertNode=function(t,r,e){if(r.push(t),r.cache=!1,e<this.dimensions.length){var n=t[this.dimensions[e]];r.children.has(n)||r.children.set(n,new i(this.aggFunc)),this.insertNode(t,r.children.get(n),e+1)}},t.prototype.aggTree=function(t){var r,e;void 0===t&&(t=this.tree);var n=t.children.values();try{for(var a=o(n),i=a.next();!i.done;i=a.next()){var u=i.value;this.aggTree(u)}}catch(s){r={error:s}}finally{try{i&&!i.done&&(e=a.return)&&e.call(a)}finally{if(r)throw r.error}}return t.aggData(this.measures),t},t.prototype.aggNode=function(t){var r,e;void 0===t&&(t=this.tree);var n=t.children.values();try{for(var a=o(n),i=a.next();!i.done;i=a.next()){var u=i.value;this.aggTree(u)}}catch(s){r={error:s}}finally{try{i&&!i.done&&(e=a.return)&&e.call(a)}finally{if(r)throw r.error}}return t.aggData(this.measures),t},t}();r.default=u},function(t,r,e){\\\"use strict\\\";var n=this&&this.__read||function(t,r){var e=\\\"function\\\"===typeof Symbol&&t[Symbol.iterator];if(!e)return t;var n,a,o=e.call(t),i=[];try{for(;(void 0===r||r-- >0)&&!(n=o.next()).done;)i.push(n.value)}catch(u){a={error:u}}finally{try{n&&!n.done&&(e=o.return)&&e.call(o)}finally{if(a)throw a.error}}return i},a=this&&this.__spread||function(){for(var t=[],r=0;r<arguments.length;r++)t=t.concat(n(arguments[r]));return t},o=this&&this.__values||function(t){var r=\\\"function\\\"===typeof Symbol&&Symbol.iterator,e=r&&t[r],n=0;if(e)return e.call(t);if(t&&\\\"number\\\"===typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(r?\\\"Object is not iterable.\\\":\\\"Symbol.iterator is not defined.\\\")};Object.defineProperty(r,\\\"__esModule\\\",{value:!0});var i=function(){function t(){this.children=new Map,this.rawData=[]}return t.prototype.push=function(){for(var t,r=[],e=0;e<arguments.length;e++)r[e]=arguments[e];(t=this.rawData).push.apply(t,a(r))},t.prototype.aggData=function(t,r){return void 0===r&&(r=[]),this._aggData=t(this.rawData,r),this._aggData},t.prototype.getNode=function(t){return function r(e,a){var i,u;if(a===t.length)return e;var s=e.children.entries();try{for(var c=o(s),f=c.next();!f.done;f=c.next()){var h=n(f.value,2),l=h[0],v=h[1];if(l===t[a])return r(v,a+1)}}catch(p){i={error:p}}finally{try{f&&!f.done&&(u=c.return)&&u.call(c)}finally{if(i)throw i.error}}return null}(this,0)},t}();r.Node=i;var u=function(){function t(t){this.aggFunc=t.aggFunc,this.factTable=t.factTable,this.dimensions=t.dimensions,this.measures=t.measures,this.buildTree(),this.aggTree()}return t.prototype.get=function(t){var r=this,e=r.tree,a=r.aggFunc,i=r.measures;return function r(e,u){var s,c;if(u===t.length)return e.aggData(a,i);var f=e.children.entries();try{for(var h=o(f),l=h.next();!l.done;l=h.next()){var v=n(l.value,2),p=v[0],d=v[1];if(p===t[u])return r(d,u+1)}}catch(g){s={error:g}}finally{try{l&&!l.done&&(c=h.return)&&c.call(h)}finally{if(s)throw s.error}}return!1}(e,0)},t.prototype.getNode=function(t){return this.tree.getNode(t)},t.prototype.setData=function(t){var r=t.aggFunc,e=void 0===r?this.aggFunc:r,n=t.factTable,a=void 0===n?this.factTable:n,o=t.dimensions,i=void 0===o?this.dimensions:o,u=t.measures,s=void 0===u?this.measures:u;i!==this.dimensions||a!==this.factTable?(this.dimensions=i,this.factTable=a,this.measures=s,this.aggFunc=e,this.buildTree(),this.aggTree()):s===this.measures&&e===this.aggFunc||(this.measures=s,this.aggFunc=e,this.aggTree())},t.prototype.buildTree=function(){var t,r=new i,e=this.factTable.length;for(t=0;t<e;t++)this.insertNode(this.factTable[t],r,0);return this.tree=r,r},t.prototype.insertNode=function(t,r,e){if(e===this.dimensions.length)r.push(t);else{var n=t[this.dimensions[e]];r.children.has(n)||r.children.set(n,new i),this.insertNode(t,r.children.get(n),e+1)}},t.prototype.aggTree=function(t){var r,e;if(void 0===t&&(t=this.tree),t.children.size>0){t.rawData=[];var n=t.children.values();try{for(var a=o(n),i=a.next();!i.done;i=a.next()){var u=i.value,s=void 0,c=this.aggTree(u).rawData,f=c.length;for(s=0;s<f;s++)t.rawData.push(c[s])}}catch(h){r={error:h}}finally{try{i&&!i.done&&(e=a.return)&&e.call(a)}finally{if(r)throw r.error}}}return t.aggData(this.aggFunc,this.measures),t},t}();r.default=u},function(t,r,e){\\\"use strict\\\";var n=this&&this.__assign||function(){return(n=Object.assign||function(t){for(var r,e=1,n=arguments.length;e<n;e++)for(var a in r=arguments[e])Object.prototype.hasOwnProperty.call(r,a)&&(t[a]=r[a]);return t}).apply(this,arguments)},a=this&&this.__values||function(t){var r=\\\"function\\\"===typeof Symbol&&Symbol.iterator,e=r&&t[r],n=0;if(e)return e.call(t);if(t&&\\\"number\\\"===typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(r?\\\"Object is not iterable.\\\":\\\"Symbol.iterator is not defined.\\\")},o=this&&this.__read||function(t,r){var e=\\\"function\\\"===typeof Symbol&&t[Symbol.iterator];if(!e)return t;var n,a,o=e.call(t),i=[];try{for(;(void 0===r||r-- >0)&&!(n=o.next()).done;)i.push(n.value)}catch(u){a={error:u}}finally{try{n&&!n.done&&(e=o.return)&&e.call(o)}finally{if(a)throw a.error}}return i};Object.defineProperty(r,\\\"__esModule\\\",{value:!0}),r.tree2Table=function(t){var r=t.dimensions,e=(t.measures,t.cube),i=(e.aggFunc,[]);return function t(e,u,s){var c,f,h;if(0!==e.children.size)try{for(var l=a(e.children.entries()),v=l.next();!v.done;v=l.next()){var p=o(v.value,2),d=p[0];t(p[1],n(n({},u),((h={})[r[s]]=d,h)),s+1)}}catch(m){c={error:m}}finally{try{v&&!v.done&&(f=l.return)&&f.call(l)}finally{if(c)throw c.error}}else{var g=e._aggData;i.push(n(n({},u),g))}}(e.tree,{},0),i}},function(t,r,e){\\\"use strict\\\";e.r(r);var n={};function a(t,r){(null==r||r>t.length)&&(r=t.length);for(var e=0,n=new Array(r);e<r;e++)n[e]=t[e];return n}function o(t,r){if(t){if(\\\"string\\\"===typeof t)return a(t,r);var e=Object.prototype.toString.call(t).slice(8,-1);return\\\"Object\\\"===e&&t.constructor&&(e=t.constructor.name),\\\"Map\\\"===e||\\\"Set\\\"===e?Array.from(t):\\\"Arguments\\\"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?a(t,r):void 0}}function i(t,r){return function(t){if(Array.isArray(t))return t}(t)||function(t,r){if(\\\"undefined\\\"!==typeof Symbol&&Symbol.iterator in Object(t)){var e=[],n=!0,a=!1,o=void 0;try{for(var i,u=t[Symbol.iterator]();!(n=(i=u.next()).done)&&(e.push(i.value),!r||e.length!==r);n=!0);}catch(s){a=!0,o=s}finally{try{n||null==u.return||u.return()}finally{if(a)throw o}}return e}}(t,r)||o(t,r)||function(){throw new TypeError(\\\"Invalid attempt to destructure non-iterable instance.\\\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\\\")}()}function u(t,r){if(!(t instanceof r))throw new TypeError(\\\"Cannot call a class as a function\\\")}function s(t,r){for(var e=0;e<r.length;e++){var n=r[e];n.enumerable=n.enumerable||!1,n.configurable=!0,\\\"value\\\"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function c(t,r,e){return r&&s(t.prototype,r),e&&s(t,e),t}e.r(n),e.d(n,\\\"kruskal\\\",(function(){return F})),e.d(n,\\\"kruskalWithFullMST\\\",(function(){return O}));var f=e(0),h=e.n(f);function l(t,r,e,n,a,o,i){try{var u=t[o](i),s=u.value}catch(c){return void e(c)}u.done?r(s):Promise.resolve(s).then(n,a)}function v(t){return function(){var r=this,e=arguments;return new Promise((function(n,a){var o=t.apply(r,e);function i(t){l(o,n,a,i,u,\\\"next\\\",t)}function u(t){l(o,n,a,i,u,\\\"throw\\\",t)}i(void 0)}))}}function p(t){return function(t){if(Array.isArray(t))return a(t)}(t)||function(t){if(\\\"undefined\\\"!==typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||o(t)||function(){throw new TypeError(\\\"Invalid attempt to spread non-iterable instance.\\\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\\\")}()}function d(t,r){var e;if(\\\"undefined\\\"===typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(e=o(t))||r&&t&&\\\"number\\\"===typeof t.length){e&&(t=e);var n=0,a=function(){};return{s:a,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:a}}throw new TypeError(\\\"Invalid attempt to iterate non-iterable instance.\\\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\\\")}var i,u=!0,s=!1;return{s:function(){e=t[Symbol.iterator]()},n:function(){var t=e.next();return u=t.done,t},e:function(t){s=!0,i=t},f:function(){try{u||null==e.return||e.return()}finally{if(s)throw i}}}}var g=function(t,r,e){for(var n=new Set,a=new Set,o=new Map,u=t.length,s=0;s<u;s++){var c=t[s];n.add(c[r]),a.add(c[e]),o.has(c[r])||o.set(c[r],new Map);var f=o.get(c[r]);f.has(c[e])||f.set(c[e],0),f.set(c[e],f.get(c[e])+1)}var h=function(t,r,e){if(\\\"undefined\\\"===typeof t||\\\"undefined\\\"===typeof r||\\\"undefined\\\"===typeof e)return 0;var n,a=new Map,o=new Map,u=0,s=d(r);try{for(s.s();!(n=s.n()).done;){var c=n.value;a.set(c,0)}}catch(j){s.e(j)}finally{s.f()}var f,h=d(e);try{for(h.s();!(f=h.n()).done;){var l=f.value;o.set(l,0)}}catch(j){h.e(j)}finally{h.f()}var v,p=d(t);try{for(p.s();!(v=p.n()).done;){var g,m=i(v.value,2),y=m[0],w=d(m[1]);try{for(w.s();!(g=w.n()).done;){var b=i(g.value,2),M=b[0],S=b[1];a.set(y,a.get(y)+S),o.set(M,o.get(M)+S),u+=S}}catch(j){w.e(j)}finally{w.f()}}}catch(j){p.e(j)}finally{p.f()}var E,x=0,_=d(t);try{for(_.s();!(E=_.n()).done;){var k,D=i(E.value,2),T=D[0],z=d(D[1]);try{for(z.s();!(k=z.n()).done;){var q=i(k.value,2),P=q[0],O=q[1],F=a.get(T)*o.get(P)/u;x+=Math.pow(O-F,2)/F}}catch(j){z.e(j)}finally{z.f()}}}catch(j){_.e(j)}finally{_.f()}return x}(o,n,a);return Math.sqrt(h/(t.length*Math.min(n.size-1,a.size-1)))},m=function(t,r,e){var n=y(t.map((function(t){return t[r]})))/t.length,a=y(t.map((function(t){return t[e]})))/t.length;return y(t.map((function(t){return(t[r]-n)*(t[e]-a)})))/Math.sqrt(y(t.map((function(t){return Math.pow(t[r]-n,2)})))*y(t.map((function(t){return Math.pow(t[e]-a,2)}))))};function y(t){for(var r=0,e=0,n=t.length;e<n;e++)r+=t[e];return r}function w(t){var r=Math.min.apply(Math,p(t));return t.map((function(t){return t-r+1}))}function b(t){for(var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t.length,n=[],a=function r(e,a,o){a.length!==o?e>=t.length||(r(e+1,[].concat(p(a),[t[e]]),o),r(e+1,a,o)):n.push(p(a))},o=r;o<=e;o++)a(0,[],o);return n}function M(t){var r,e=0,n=d(t);try{for(n.s();!(r=n.n()).done;){var a=r.value;e+=a}}catch(o){n.e(o)}finally{n.f()}return t.map((function(t){return t/e}))}var S=function(t){var r,e=0,n=d(t);try{for(n.s();!(r=n.n()).done;){var a=r.value;e+=a*Math.log2(a)}}catch(o){n.e(o)}finally{n.f()}return-e},E=function(){function t(r,e,n){u(this,t),this.dataSource=r,this.X=e,this.Y=n,this.normalizedDataSource=r}return c(t,[{key:\\\"normalizeDimensions\\\",value:function(t){var r=this;return this.normalizedDataSource=[],this.valueSets=[],t.forEach((function(){r.valueSets.push(new Map)})),this.dataSource.forEach((function(e){t.forEach((function(t,n){var a=(e[t]||\\\"others\\\").toString();r.valueSets[n].has(a)||r.valueSets[n].set(a,r.valueSets[n].size)}))})),this.dataSource.forEach((function(e){var n=r.normalizeRecord(e,t);r.normalizedDataSource.push(n)})),this.normalizedDataSource}},{key:\\\"normalizeRecord\\\",value:function(t,r){var e=this,n={};return Object.keys(t).forEach((function(r){n[r]=t[r]})),r.forEach((function(r,a){var o=(t[r]||\\\"others\\\").toString();n[r]=e.valueSets[a].get(o)})),n}},{key:\\\"mean\\\",value:function(){var t=this,r=0,e=0;return 0===this.normalizedDataSource.length||(this.normalizedDataSource.forEach((function(n,a){r+=n[t.X],e+=n[t.Y]})),r/=this.normalizedDataSource.length,e/=this.normalizedDataSource.length),[r,e]}},{key:\\\"getRegressionEquation\\\",value:function(){var t=this;if(0===this.normalizedDataSource.length)return[0,0];var r,e=i(this.mean(),2),n=e[0],a=e[1],o=0,u=0;return this.normalizedDataSource.forEach((function(r){o+=(r[t.X]-n)*(r[t.Y]-a),u+=Math.pow(r[t.X]-n,2)})),[a-n*(r=o/u),r]}},{key:\\\"r_squared\\\",value:function(){var t=this,r=i(this.mean(),2)[1],e=i(this.getRegressionEquation(),2),n=e[0],a=e[1],o=0,u=0;return this.normalizedDataSource.forEach((function(e){var i=e[t.X],s=e[t.Y],c=i*a+n;o+=Math.pow(c-r,2),u+=Math.pow(s-r,2)})),o/u}},{key:\\\"cumulativeLogisticDistribution\\\",value:function(t){return 1/(1+Math.pow(Math.E,-(t-.2)/2))}},{key:\\\"pValue\\\",value:function(){var t=i(this.getRegressionEquation(),2)[1],r=this.cumulativeLogisticDistribution(Math.abs(t));return r>.5?2*(1-r):2*r}},{key:\\\"significance\\\",value:function(){return this.r_squared()*(1-this.pValue())}}]),t}(),x=e(1);x.sum,x.max,x.mean,x.min;var _=.3,k=.5;function D(t){for(var r=[],e=0;e<t.length;e++)for(var n=e+1;n<t[e].length;n++)r.push([[e,n],Math.abs(t[e][n])]);return r}function T(t,r){return t[r]===r?r:t[r]=T(t,t[r])}function z(t,r,e){var n=T(t,r),a=T(t,e);t[n]=a,T(t,r),T(t,e)}function q(t,r,e){return t[e]===e?e:(t[e]=q(t,r,t[e]),r[e]=r[t[e]],t[e])}function P(t,r,e,n){var a=q(t,r,e),o=q(t,r,n),i=r[a],u=r[o];t[a]=o,r[a]=r[o]=i+u,q(t,r,e),q(t,r,n)}function O(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:4,e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=D(t);n.sort((function(t,r){return r[1]-t[1]}));var a,o=[],i=t.map((function(t,r){return r})),u=p(i),s=!1,c=d(n);try{for(c.s();!(a=c.n()).done;){var f=a.value;T(i,f[0][0])!==T(i,f[0][1])&&(z(i,f[0][0],f[0][1]),o.push([f[0],f[1],s]));for(var h=0;h<i.length;h++)i[h]=T(i,h);var l=new Set(i);if(l.size<=r||f[1]<e?s=!0:u=p(i),1===l.size)break}}catch(v){c.e(v)}finally{c.f()}return{edgesInMST:o,groups:u}}var F=function(t){var r,e=t.matrix,n=t.measures,a=(t.method,t.groupMaxSize),o=void 0===a?4:a,i=t.limitSize,u=void 0!==i&&i,s=t.threshold,c=void 0===s?0:s;r=u?function(t,r){var e=D(t);e.sort((function(t,r){return r[1]-t[1]}));var n,a=t.map((function(t,r){return r})),o=t.map((function(){return 1})),i=d(e);try{for(i.s();!(n=i.n()).done;){var u=n.value;if(q(a,o,u[0][0])!==q(a,o,u[0][1])){if(o[u[0][0]]+o[u[0][1]]>r)continue;P(a,o,u[0][0],u[0][1])}for(var s=0;s<a.length;s++)a[s]=q(a,o,s);if(1===new Set(a).size)break}}catch(h){i.e(h)}finally{i.f()}for(var c=new Map,f=0;f<a.length;f++)c.has(a[f])||c.set(a[f],[]),c.get(a[f]).push(f);return c}(e,o):function(t,r){var e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=D(t);n.sort((function(t,r){return r[1]-t[1]}));var a,o=t.map((function(t,r){return r})),i=d(n);try{for(i.s();!(a=i.n()).done;){var u=a.value;T(o,u[0][0])!==T(o,u[0][1])&&z(o,u[0][0],u[0][1]);for(var s=0;s<o.length;s++)o[s]=T(o,s);if(new Set(o).size<=r||u[1]<e)break}}catch(h){i.e(h)}finally{i.f()}for(var c=new Map,f=0;f<o.length;f++)c.has(o[f])||c.set(o[f],[]),c.get(o[f]).push(f);return c}(e,o,c);var f,h=[],l=d(r.values());try{for(l.s();!(f=l.n()).done;){var v=f.value;h.push(v.map((function(t){return n[t]})))}}catch(p){l.e(p)}finally{l.f()}return h};function j(t,r){return(j=Object.setPrototypeOf||function(t,r){return t.__proto__=r,t})(t,r)}function L(t,r){if(\\\"function\\\"!==typeof r&&null!==r)throw new TypeError(\\\"Super expression must either be null or a function\\\");t.prototype=Object.create(r&&r.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),r&&j(t,r)}function N(t){return(N=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function I(t){return(I=\\\"function\\\"===typeof Symbol&&\\\"symbol\\\"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&\\\"function\\\"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?\\\"symbol\\\":typeof t})(t)}function A(t,r){return!r||\\\"object\\\"!==I(r)&&\\\"function\\\"!==typeof r?function(t){if(void 0===t)throw new ReferenceError(\\\"this hasn't been initialised - super() hasn't been called\\\");return t}(t):r}function R(t){var r=function(){if(\\\"undefined\\\"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if(\\\"function\\\"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var e,n=N(t);if(r){var a=N(this).constructor;e=Reflect.construct(n,arguments,a)}else e=n.apply(this,arguments);return A(this,e)}}var C=function(t){L(e,t);var r=R(e);function e(t){var n;u(this,e),n=r.call(this,t);var a=t.K;return n.K=a,n.normalize(),n}return c(e,[{key:\\\"getNeighbors\\\",value:function(t,r){var e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];e.length!==r.length&&r.forEach((function(t){e.push(1)}));for(var n=[],a=[],o=[],i=[],u=new Set(this.dimensions),s=0;s<r.length;s++)u.has(r[s])?(n.push(r[s]),o.push(e[s])):(a.push(r[s]),i.push(e[s]));var c=[];this.normalizedDataSource.forEach((function(r,e){var u=0;a.forEach((function(e,n){u+=Math.pow((r[e]-t[e])*i[n],2)})),n.forEach((function(e,n){r[e]!==t[e]&&(u+=Math.pow(o[n],2))})),c.push({dis:u,index:e})})),c.sort((function(t,r){return t.dis-r.dis}));for(var f=[],h=Math.min(this.K,c.length),l=0;l<h;l++)f.push(this.normalizedDataSource[c[l].index]);return f}},{key:\\\"getTargetValue\\\",value:function(t,r){var e=this,n=[];return t.forEach((function(t){var a=new Map;r.forEach((function(r){a.has(r[t])||a.set(r[t],0),a.set(r[t],a.get(r[t])+1)}));var o,i=0,u=0,s=d(a);try{for(s.s();!(o=s.n()).done;){var c=o.value;c[1]>i&&(i=c[1],u=c[0])}}catch(h){s.e(h)}finally{s.f()}var f=e.dimensions.indexOf(t);f>-1?n.push(e.valueParser[f][u]):n.push(u)})),n}}]),e}(function(){function t(r){u(this,t);var e=r.dataSource,n=r.dimensions,a=r.measures;this.dataSource=e,this.dimensions=n,this.measures=a}return c(t,[{key:\\\"normalize\\\",value:function(){var t=this;return this.normalizedDataSource=[],this.valueSets=[],this.valueParser=[],this.ranges=[],this.dimensions.forEach((function(r){t.valueSets.push(new Map),t.valueParser.push([])})),this.measures.forEach((function(){t.ranges.push([1/0,-1/0])})),this.dataSource.forEach((function(r){t.dimensions.forEach((function(e,n){var a=(r[e]||\\\"others\\\").toString();t.valueSets[n].has(a)||(t.valueSets[n].set(a,t.valueSets[n].size),t.valueParser[n].push(a))})),t.measures.forEach((function(e,n){var a=r[e];\\\"number\\\"===typeof a&&(t.ranges[n][0]=Math.min(t.ranges[n][0],a),t.ranges[n][1]=Math.max(t.ranges[n][1],a))}))})),this.dataSource.forEach((function(r){var e=t.normalizeRecord(r);t.normalizedDataSource.push(e)})),this.normalizedDataSource}},{key:\\\"normalizeRecord\\\",value:function(t){var r=this,e={};return this.measures.forEach((function(n,a){e[n]=(t[n]-r.ranges[a][0])/(r.ranges[a][1]-r.ranges[a][0])})),this.dimensions.forEach((function(n,a){var o=(t[n]||\\\"others\\\").toString();e[n]=r.valueSets[a].get(o)})),e}}]),t}());function V(t,r){for(var e=function(t,r){if(0===t)return[];for(var e=2147483647,n=[r],a=1;a<t;a++)n.push((1103515245*n[a-1]+12345)%e);return n.map((function(t){return t/e}))}(r,2147483647*Math.random()),n=[],a=0;a<r;a++){var o=Math.floor(e[a]*r)%r;n.push(t[o])}return n}var G=8,X={IsolationForest:function(){function t(r,e,n){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:100,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:256;u(this,t),this.dimensions=r,this.measures=e,this.dataSource=n,n.length<o?(this.treeNumber=Math.max(1,Math.ceil(o/50)),this.sampleSize=Math.max(2,Math.floor(n.length/2))):(this.treeNumber=a,this.sampleSize=o),this.limitHeight=Math.ceil(Math.log2(this.sampleSize)),this.iForest=[],this.normalizeDimensions()}return c(t,[{key:\\\"normalizeDimensions\\\",value:function(){var t=this;return this.normalizedDataSource=[],this.valueSets=[],this.ranges=[],this.dimensions.forEach((function(){t.valueSets.push(new Map)})),this.measures.forEach((function(){t.ranges.push([1/0,-1/0])})),this.dataSource.forEach((function(r){t.dimensions.forEach((function(e,n){var a=(r[e]||\\\"others\\\").toString();t.valueSets[n].has(a)||t.valueSets[n].set(a,t.valueSets[n].size)})),t.measures.forEach((function(e,n){var a=r[e];\\\"number\\\"===typeof a&&(t.ranges[n][0]=Math.min(t.ranges[n][0],a),t.ranges[n][1]=Math.max(t.ranges[n][1],a))}))})),this.dataSource.forEach((function(r){var e=t.normalizeRecord(r);t.normalizedDataSource.push(e)})),this.normalizedDataSource}},{key:\\\"normalizeRecord\\\",value:function(t){var r=this,e={};return this.measures.forEach((function(r){e[r]=t[r]})),this.dimensions.forEach((function(n,a){var o=(t[n]||\\\"others\\\").toString();e[n]=r.valueSets[a].get(o)})),e}},{key:\\\"buildIsolationTree\\\",value:function(t,r){if(r>=this.limitHeight||t.length<=1)return null;var e=Math.random(),n=this.measures[0]||this.dimensions[0],a=this.dimensions.length,o=this.measures.length,i=0;if(e>=a/(a+o)){var u=Math.floor(Math.random()*o)%o;n=this.measures[u],i=this.ranges[u][0]+(this.ranges[u][1]-this.ranges[u][0])*Math.random()}else{var s=Math.floor(Math.random()*a)%a;n=this.dimensions[s],i=Math.floor(this.valueSets[s].size*Math.random())%this.valueSets[s].size}var c,f=[],h=[],l=d(t);try{for(l.s();!(c=l.n()).done;){var v=c.value;v[n]<i?f.push(v):h.push(v)}}catch(g){l.e(g)}finally{l.f()}var p={field:n,value:i,size:t.length};return p.left=this.buildIsolationTree(f,r+1),p.right=this.buildIsolationTree(h,r+1),p}},{key:\\\"AFS\\\",value:function(t){return t>2?2*(Math.log(t-1)+.5772156649)-2*(t-1)/t:2===t?1:0}},{key:\\\"getPathLength\\\",value:function(t,r,e,n){return null===r?e+this.AFS(n):t[r.field]<r.value?this.getPathLength(t,r.left,e+1,r.size):this.getPathLength(t,r.right,e+1,r.size)}},{key:\\\"buildIsolationForest\\\",value:function(){this.iForest=[];for(var t=0;t<this.treeNumber;t++){var r=V(this.normalizedDataSource,this.sampleSize),e=this.buildIsolationTree(r,0);this.iForest.push(e)}return this.iForest}},{key:\\\"estimateOutierScore\\\",value:function(){var t=this;return this.recordScoreList=[],this.normalizedDataSource.forEach((function(r){var e,n=0;t.iForest.forEach((function(e){n+=t.getPathLength(r,e,0,t.sampleSize)})),n/=t.iForest.length,e=Math.pow(2,-n/t.AFS(t.sampleSize)),t.recordScoreList.push(e)})),this.recordScoreList}}]),t}()};function Y(t,r){for(var e=r.map((function(t){return r.map((function(t){return 0}))})),n=0;n<r.length;n++){e[n][n]=1;for(var a=n+1;a<r.length;a++)e[n][a]=e[a][n]=g(t,r[n],r[a])}return e}function K(t,r){for(var e=r.map((function(t){return r.map((function(t){return 0}))})),n=0;n<r.length;n++){e[n][n]=1;for(var a=n+1;a<r.length;a++){var o=m(t,r[n],r[a]);e[a][n]=e[n][a]=o}}return e}function U(t,r){var e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:_,a=arguments.length>3?arguments[3]:void 0,o=4,i=Y(t,r),u=n.kruskal({matrix:i,measures:r,groupMaxSize:a||Math.round(r.length/o),threshold:e});return u}function W(t,r,e){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:3,o=3,i=K(t,r),u=n.kruskal({matrix:i,measures:r,groupMaxSize:a||Math.round(r.length/o),threshold:e||k});return u}var H=e(3),B=e.n(H),$=function(t){L(e,t);var r=R(e);function e(){return u(this,e),r.apply(this,arguments)}return c(e,[{key:\\\"getTargetValuePercent\\\",value:function(t,r,e){var n=[];return t.forEach((function(t,a){var o=0;e.forEach((function(e){e[t]===r[t]&&o++})),n.push(o/e.length)})),n}},{key:\\\"getSignificance\\\",value:function(t,r){var e=this,n=0;return this.normalizedDataSource.forEach((function(a){var o=e.getNeighbors(a,t),i=e.getTargetValuePercent(r,a,o),u=0;i.forEach((function(t){u+=t})),u/=i.length,n+=u})),n/=this.normalizedDataSource.length}}]),e}(C),J=\\\"=;=\\\";function Q(t,r){var e,n=[],a=d(t);try{for(a.s();!(e=a.n()).done;){var o,i=e.value,u=d(r);try{for(u.s();!(o=u.n()).done;){var s=o.value;n.push({dimensions:i,measures:s})}}catch(c){u.e(c)}finally{u.f()}}}catch(c){a.e(c)}finally{a.f()}return n}function Z(t){var r,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:G,n=[],a=d(t);try{for(a.s();!(r=a.n()).done;){var o=r.value,i=b(o,1,e);n.push.apply(n,p(i))}}catch(u){a.e(u)}finally{a.f()}return n}var tt,rt=function(){var t=v(h.a.mark((function t(r,e,n){var a,o,i,u,s;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:a=0,o=0,i=d(n);try{for(s=function(){var t=u.value,e=r.map((function(r){return r[t]})),n=M(w(e)),i=S(n);a+=i,o+=i/Math.log2(e.length)},i.s();!(u=i.n()).done;)s()}catch(c){i.e(c)}finally{i.f()}return a/=n.length,o=1-(o/=n.length),t.abrupt(\\\"return\\\",{dimensions:e,measures:n,type:\\\"default_general\\\",score:a,impurity:a,significance:o,order:\\\"asc\\\"});case 8:case\\\"end\\\":return t.stop()}}),t)})));return function(r,e,n){return t.apply(this,arguments)}}(),et=function(){var t=v(h.a.mark((function t(r,e,n){var a,o,i,u,s,c;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:for((a=new X.IsolationForest([],n,r)).buildIsolationForest(),o=a.estimateOutierScore(),i=0,u=0,s=0;s<o.length;s++)o[s]>u&&(u=o[s],i=s);return c={},e.concat(n).forEach((function(t){c[t]=r[i][t]})),t.abrupt(\\\"return\\\",{dimensions:e,measures:n,score:u,significance:u,order:\\\"desc\\\",description:c});case 9:case\\\"end\\\":return t.stop()}}),t)})));return function(r,e,n){return t.apply(this,arguments)}}(),nt=function(){var t=v(h.a.mark((function t(r,e,n){var a,o,i,u,s,c;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(1===e.length){t.next=2;break}return t.abrupt(\\\"return\\\",null);case 2:(a=p(r)).sort((function(t,r){return t[e[0]]>r[e[0]]?1:t[e[0]]===r[e[0]]?0:t[e[0]]<r[e[0]]?-1:void 0})),o=0,i=d(n);try{for(i.s();!(u=i.n()).done;)s=u.value,(c=new E(a,e[0],s)).normalizeDimensions(e),o+=c.significance()}catch(f){i.e(f)}finally{i.f()}return o/=n.length,t.abrupt(\\\"return\\\",{dimensions:e,measures:n,score:o,significance:o,order:\\\"desc\\\"});case 9:case\\\"end\\\":return t.stop()}}),t)})));return function(r,e,n){return t.apply(this,arguments)}}(),at=function(){var t=v(h.a.mark((function t(r,e,n){var a,o;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(e.length<2)){t.next=2;break}return t.abrupt(\\\"return\\\",null);case 2:return 0,o=new $({dataSource:r,dimensions:e,measures:n,K:8}),a=o.getSignificance(n.concat(e.slice(0,-1)),e.slice(-1)),t.abrupt(\\\"return\\\",{dimensions:e,measures:n,score:a,significance:a,order:\\\"desc\\\"});case 6:case\\\"end\\\":return t.stop()}}),t)})));return function(r,e,n){return t.apply(this,arguments)}}();!function(t){t.outlier=\\\"default_outlier\\\",t.cluster=\\\"default_group\\\",t.trend=\\\"default_trend\\\"}(tt||(tt={}));var ot=function(){function t(){u(this,t),this.workers=new Map}return c(t,[{key:\\\"register\\\",value:function(t,r){if(this.workers.has(t))throw new Error(\\\"There has been a worker named: \\\".concat(t,\\\" already.\\\"));this.workers.set(t,[!0,r])}},{key:\\\"enable\\\",value:function(t,r){if(!this.workers.has(t))throw new Error('Intention Worker \\\"'.concat(t,'\\\" does not exist.'));var e=this.workers.get(t);e[0]=r,this.workers.set(t,e)}},{key:\\\"each\\\",value:function(t){var r,e=d(this.workers);try{for(e.s();!(r=e.n()).done;){var n=i(r.value,2),a=n[0],o=n[1];o[0]&&t(o[1],a)}}catch(u){e.e(u)}finally{e.f()}}}],[{key:\\\"init\\\",value:function(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{withDefaultIWorkers:!0},e=r.withDefaultIWorkers,n=void 0===e||e;for(var a in t.colletion||(t.colletion=new t,n&&(t.colletion.register(tt.outlier,et),t.colletion.register(tt.cluster,at),t.colletion.register(tt.trend,nt))),tt)t.colletion.enable(tt[a],n);return t.colletion}}]),t}();function it(t,r,e){return ut.apply(this,arguments)}function ut(){return(ut=v(h.a.mark((function t(r,e,n){var a,o,i,u;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:a=[],o=d(e),t.prev=2,u=h.a.mark((function t(){var e,o,u,s,c,f;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e=i.value,o=e.dimensions,u=e.measures,s=o.join(J),!r.has(s)){t.next=9;break}return c=r.get(s),t.next=7,rt(c,o,u);case 7:f=t.sent,n.each(function(){var t=v(h.a.mark((function t(r,e){var n;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,r(c,o,u);case 3:null!==(n=t.sent)&&(n.type=e,n.impurity=f.impurity,a.push(n)),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.error(\\\"worker failed\\\",{dimensions:o,measures:u,aggData:c},t.t0);case 10:case\\\"end\\\":return t.stop()}}),t,null,[[0,7]])})));return function(r,e){return t.apply(this,arguments)}}());case 9:case\\\"end\\\":return t.stop()}}),t)})),o.s();case 5:if((i=o.n()).done){t.next=9;break}return t.delegateYield(u(),\\\"t0\\\",7);case 7:t.next=5;break;case 9:t.next=14;break;case 11:t.prev=11,t.t1=t.catch(2),o.e(t.t1);case 14:return t.prev=14,o.f(),t.finish(14);case 17:return t.abrupt(\\\"return\\\",a);case 18:case\\\"end\\\":return t.stop()}}),t,null,[[2,11,14,17]])})))).apply(this,arguments)}function st(){return(st=v(h.a.mark((function t(r){var e,n,a,o,i,u,s,c,f,l,v,p,g,m,y,w,b,M,S,E,x,D,T,z,q,P,O;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e=r.dataSource,n=r.dimensions,a=r.measures,o=r.collection,i=r.dimension_correlation_threshold,u=void 0===i?_:i,s=r.measure_correlation_threshold,c=void 0===s?k:s,f=r.max_dimension_num_in_view,l=void 0===f?3:f,v=r.max_measure_num_in_view,p=void 0===v?3:v,g=U(e,n,u),m=Z(g,l),y=W(e,a,c),w=Z(y,p),b=Q(m,w),M=new Map,S=(new Date).getTime(),E=d(m);try{for(E.s();!(x=E.n()).done;)D=x.value,T=D.join(J),z=B()({dataSource:e,dimensions:D,measures:a,asFields:a,operator:\\\"sum\\\"}),M.set(T,z)}catch(h){E.e(h)}finally{E.f()}return q=(new Date).getTime(),console.log(\\\"cube cost\\\",q-S),M.set(\\\"*\\\",e),P=o||ot.init(),t.next=18,it(M,b,P);case 18:return O=t.sent,t.abrupt(\\\"return\\\",O);case 20:case\\\"end\\\":return t.stop()}}),t)})))).apply(this,arguments)}var ct;self.addEventListener(\\\"message\\\",(ct=async t=>{const{dataSource:r,dimensions:e,measures:n}=t.data;try{let t=await function(t){return st.apply(this,arguments)}({dataSource:r,dimensions:e,measures:n});t.sort(((t,r)=>t.impurity/t.significance-r.impurity/r.significance)),self.postMessage({success:!0,data:t})}catch(a){self.postMessage({success:!1,message:a})}},function(t){var r=(new Date).getTime();try{ct(t)}finally{var e=(new Date).getTime()-r;console.log(\\\"Task [\\\".concat(ct.name,\\\"] cost \\\").concat(e,\\\" ms.\\\"))}}),!1)}]);\\n//# sourceMappingURL=dev.worker.d3fa18fb.worker.js.map\", \"Worker\", undefined, __webpack_public_path__ + \"static/js/dev.worker.d3fa18fb.worker.js\");\n}\n","import { DataSource,  Field, FieldType, OperatorType } from './global';\n/* eslint import/no-webpack-loader-syntax:0 */\n// @ts-ignore\n// eslint-disable-next-line\nimport dashBoardGeneratorWorker from './workers/dashboard.worker';\n/* eslint import/no-webpack-loader-syntax:0 */\n// @ts-ignore\n// eslint-disable-next-line\nimport clusterWorker from './workers/cluster.worker';\n/* eslint import/no-webpack-loader-syntax:0 */\n// @ts-ignore\n// eslint-disable-next-line\nimport combineFieldsWorker from './workers/combineFields.worker';\n/* eslint import/no-webpack-loader-syntax:0 */\n// @ts-ignore\n// eslint-disable-next-line\nimport fieldsSummaryWorker from './workers/fieldsSummary.worker';\n/* eslint import/no-webpack-loader-syntax:0 */\n// @ts-ignore\n// eslint-disable-next-line\nimport groupFieldsWorker from './workers/groupFields.worker';\n/* eslint import/no-webpack-loader-syntax:0 */\n// @ts-ignore\n// eslint-disable-next-line\nimport InsightViewWorker from './workers/dev.worker';\nimport { InsightSpace } from 'visual-insights/build/esm/insights/dev';\n\nlet server = '//lobay.moe:8443';\n\nif (process.env.NODE_ENV !== 'production') {\n  console.log('using dev server');\n  server = '//localhost:8000';\n}\n\ninterface SuccessResult<T> {\n  success: true;\n  data: T;\n}\ninterface FailResult<T> {\n  success: false;\n  message: string;\n}\n\ntype Result<T> = SuccessResult<T> | FailResult<T>;\n\nfunction workerService<T, R> (worker: Worker, data: R): Promise<Result<T>> {\n  return new Promise<Result<T>>((resolve, reject) => {\n    worker.postMessage(data);\n    worker.onmessage = (e: MessageEvent) => {\n      resolve(e.data)\n    }\n    worker.onerror = (e: ErrorEvent) => {\n      reject({\n        success: false,\n        message: e.error\n      })\n    }\n  })\n}\n\nexport interface View {\n  groups: string[][];\n  detail: [string[], any, number[][]];\n  score: number;\n}\n\n/**\n * statistic description for a field\n */\nexport interface FieldSummary {\n  fieldName: string;\n  entropy: number;\n  maxEntropy: number;\n  distribution: Array<{ memberName: string; count: number }>\n  type: FieldType\n}\nexport async function getFieldsSummaryService (dataSource: DataSource, fields: string[] | Field[], useServer?: boolean): Promise<FieldSummary[]> {\n  let fieldSummaryList: FieldSummary[] = [];\n  if (useServer) {\n    try {\n      const res = await fetch(server + '/api/service/fieldsSummary', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({\n          dataSource,\n          fields\n        })\n      })\n      const result: Result<FieldSummary[]> = await res.json();\n      if (result.success === true) {\n        fieldSummaryList = result.data;\n      } else {\n        throw new Error('[fields summary failed]' + result.message)\n      }\n    } catch (error) {\n      console.error(error)\n    }\n  } else {\n    const worker = new fieldsSummaryWorker();\n    const result = await workerService<FieldSummary[], any>(worker, { dataSource, fields });\n    if (result.success === true) {\n      fieldSummaryList = result.data;\n    } else {\n      throw new Error('[fields summary failed]' + result.message)\n    }\n    worker.terminate()\n  }\n  return fieldSummaryList\n}\n\ninterface GroupFieldsResponse {\n  groupedData: DataSource;\n  newFields: Field[];\n  fields: Field[];\n}\nexport async function getGroupFieldsService (dataSource: DataSource, fields: Field[], useServer?: boolean): Promise<GroupFieldsResponse> {\n  let ans: GroupFieldsResponse = {\n    groupedData: [],\n    newFields: [],\n    fields: []\n  };\n  if (useServer) {\n    try {\n      const res = await fetch(server + '/api/service/groupFields', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({\n          dataSource,\n          fields\n        })\n      })\n      const result: Result<GroupFieldsResponse> = await res.json();\n      if (result.success === true) {\n        ans = result.data;\n      } else {\n        throw new Error('[group fields failed]' + result.message)\n      }\n    } catch (error) {\n      console.error(error)\n    }\n  } else {\n    const worker = new groupFieldsWorker();\n    const result = await workerService<GroupFieldsResponse, any>(worker, { dataSource, fields });\n    if (result.success === true) {\n      ans = result.data;\n    } else {\n      throw new Error('[group fields failed]' + result.message)\n    }\n    worker.terminate();\n  }\n  return ans;\n}\n\nexport interface Subspace {\n  score: number;\n  dimensions: string[];\n  measures: Array<{name: string; value: number}>;\n  correlationMatrix: number[][];\n}\nexport async function combineFieldsService (dataSource: DataSource, dimensions: string[], measures: string[], operator: OperatorType, useServer?: boolean): Promise<Subspace[]> {\n  let subspaceList: Subspace[] = [];\n  if (useServer) {\n    try {\n      const res = await fetch(server + '/api/service/combineFields', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({\n          dataSource,\n          dimensions,\n          measures,\n          operator\n        })\n      })\n      const result: Result<Subspace[]> = await res.json();\n      if (result.success === true) {\n        subspaceList = result.data;\n      } else {\n        throw new Error('[combine fields failed]' + result.message)\n      }\n    } catch (error) {\n      console.error(error)\n    }\n  } else {\n    const worker = new combineFieldsWorker();\n    const result = await workerService<Subspace[], any>(worker, { dataSource, dimensions, measures, operator });\n    if (result.success === true) {\n      subspaceList = result.data;\n    } else {\n      throw new Error('[combine fields failed]' + result.message)\n    }\n    worker.terminate()\n  }\n  return subspaceList\n}\n\nexport interface ViewCombinedSpace {\n  dimensions: string[];\n  measures: Array<{name: string; value: number}>;\n  matrix: number[][];\n}\n\nexport interface ViewSpace {\n  index: number;\n  dimensions: string[];\n  measures: string[];\n  score: number;\n}\n\nexport async function clusterMeasures (maxGroupNumber: number, combinedSpaces: ViewCombinedSpace[], useServer?: boolean): Promise<ViewSpace[]> {\n  let viewSpaces: ViewSpace[] = [];\n  if (useServer) {\n    try {\n      const res = await fetch(server + '/api/service/clusterMeasures', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({\n          maxGroupNumber,\n          spaces: combinedSpaces\n        })\n      });\n      const result: Result<ViewSpace[]> = await res.json();\n      if (result.success === true) {\n        viewSpaces = result.data.map((v, i) => {\n          return {\n            ...v,\n            index: i\n          }\n        });\n      } else {\n        throw new Error('[cluster measures]' + result.message)\n      }\n    } catch (error) {\n      console.error(error)\n    }\n  } else {\n    const worker = new clusterWorker();\n    const result = await workerService<ViewSpace[], any>(worker, { maxGroupNumber, spaces: combinedSpaces });\n    if (result.success === true) {\n      viewSpaces = result.data.map((v, i) => {\n        return {\n          ...v,\n          index: i\n        }\n      });\n    } else {\n      throw new Error('[cluster measures]' + result.message)\n    }\n    worker.terminate();\n  }\n  return viewSpaces;\n}\n\ninterface ViewInDashBoard {\n  type: string;\n  dimensions: string[];\n  measures: string[];\n}\n\nexport type DashBoard = ViewInDashBoard[];\n\nexport async function generateDashBoard (dataSource: DataSource, dimensions: string[], measures: string[], subspaces: Subspace[], useServer?: boolean): Promise<DashBoard[]> {\n  let dashBoardList: DashBoard[] = [];\n  if (useServer) {\n    try {\n      const res =  await fetch(server + '/api/service/generateDashBoard', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({\n          dataSource,\n          dimensions,\n          measures,\n          subspaces\n        })\n      });\n      const result = await res.json();\n      if (result.success) {\n        dashBoardList = result.data;\n      } else {\n        throw new Error('[generateDashBoard]' + result.message);\n      }\n    } catch (error) {\n      console.error(error)\n    }\n  } else {\n    const worker = new dashBoardGeneratorWorker();\n    const result = await workerService<DashBoard[], any>(worker, {\n        dataSource,\n        dimensions,\n        measures,\n        subspaces\n      });\n    if (result.success) {\n      dashBoardList = result.data;\n    } else {\n      throw new Error('[generateDashBoard]' + result.message);\n    }\n    worker.terminate()\n  }\n  \n  return dashBoardList;\n}\n\nexport async function getInsightViewSpace (dataSource: DataSource, dimensions: string[], measures: string[]): Promise<InsightSpace[]> {\n  let ansSpace: InsightSpace[] = [];\n  try {\n    const worker = new InsightViewWorker();\n    const result = await workerService<InsightSpace[], any>(worker, {\n      dataSource,\n      dimensions,\n      measures\n    });\n    if (result.success) {\n      ansSpace = result.data;\n    } else {\n      throw new Error('[getInsightViewSpace]' + result.message);\n    }\n    worker.terminate();\n  } catch (error) {\n    console.error(error);\n  }\n  return ansSpace;\n}","import { DataSource, BIField, Field, OperatorType } from \"./global\";\nimport {\n  getFieldsSummaryService,\n  FieldSummary,\n  getGroupFieldsService,\n  combineFieldsService,\n  generateDashBoard,\n  ViewSpace,\n  Subspace,\n  clusterMeasures\n} from \"./service\";\nimport { GlobalState, StateUpdater } from './state';\n\n\n\ntype Action<T> = (select: () => GlobalState, updateState: (updater:StateUpdater<GlobalState>) => void, params: T) => any;\n\n\nconst univariateSummary: Action<{dataSource: DataSource; fields: BIField[]}> = async (select, updateState, params) => {\n  const { dataSource, fields } = params;\n  const state = select();\n  const dimensions = fields\n    .filter(field => field.type === \"dimension\")\n    .map(field => field.name);\n  const measures = fields\n    .filter(field => field.type === \"measure\")\n    .map(field => field.name);\n  // updateState(draft => { draft.loading.univariateSummary = true })\n  try {\n    /**\n     * get summary of the orignal dataset(fields without grouped)\n     */\n    const originSummary = await getFieldsSummaryService(\n      dataSource,\n      fields.map(f => f.name),\n      state.useServer\n    );\n    // todo only group dimension.\n    let fieldWithTypeList: Field[] = originSummary\n      ? originSummary\n          .filter(f => dimensions.includes(f.fieldName))\n          .map(f => {\n            return {\n              name: f.fieldName,\n              type: f.type\n            };\n          })\n      : [];\n    /**\n     * bug:\n     * should not group measures!!!\n     */\n    const groupedResult = await getGroupFieldsService(\n      dataSource,\n      fieldWithTypeList,\n      state.useServer\n    );\n    const { groupedData, newFields } = groupedResult\n      ? groupedResult\n      : { groupedData: dataSource, newFields: fieldWithTypeList };\n    /**\n     * `newBIFields` shares the same length (size) with fields.\n     * It repalces some of the fields with high entropy with a grouped new field.\n     * newBIFields does not contain field before grouped.\n     */\n    const newBIFields: BIField[] = fields.map(field => {\n      let groupedField = newFields.find(\n        f => f.name === field.name + \"(group)\"\n      );\n      return {\n        name: groupedField ? groupedField.name : field.name,\n        type: field.type\n      };\n    });\n    const newDimensions: string[] = newBIFields\n      .filter(f => f.type === \"dimension\")\n      .map(f => f.name);\n\n    /**\n     * groupedSummary only contains newFields generated during `groupFieldsService`.\n     */\n    const groupedSummary = await getFieldsSummaryService(\n      groupedData,\n      newFields,\n      state.useServer\n    );\n    \n    updateState(draft => {\n      draft.cookedDataSource = groupedData;\n      draft.summary = {\n        origin: originSummary || [],\n        grouped: groupedSummary || []\n      }\n      draft.loading.univariateSummary = false;\n    });\n    // setFields(newBIFields);\n    // tmp solutions\n    let summary = (groupedSummary || []).concat(originSummary || []);\n    return {\n      groupedData,\n      summary,\n      newDimensions,\n      measures\n    }\n    // await SubspaceSeach(groupedData, summary, newDimensions, measures, \"sum\");\n  } catch (error) {\n    console.error(error)\n    updateState(draft => {\n      draft.loading.univariateSummary = false;\n    });\n  }\n}\n\n\n\ninterface SubspaceSeachParams {\n  groupedData: DataSource;\n  summary: FieldSummary[];\n  dimensions: string[];\n  measures: string[];\n  operator: OperatorType\n}\nconst subspaceSearch: Action<SubspaceSeachParams> = async (select, updateState, params) => {\n  const { groupedData: dataSource, summary, dimensions, measures, operator } = params;\n  const state = select();\n  updateState(draft => {\n    draft.loading.subspaceSearching = true;\n  });\n  let orderedDimensions: Array<{ name: string; entropy: number }> = [];\n  orderedDimensions = dimensions.map(d => {\n    let target = summary.find(g => g.fieldName === d);\n    return {\n      name: d,\n      entropy: target ? target.entropy : Infinity\n    };\n  });\n\n  orderedDimensions.sort((a, b) => a.entropy - b.entropy);\n  updateState(draft => {\n    draft.cookedDimensions = orderedDimensions.map(d => d.name);\n    draft.cookedMeasures = measures;\n  });\n  const selectedDimensions = orderedDimensions\n    .map(d => d.name)\n    .slice(\n      0,\n      Math.round(orderedDimensions.length * state.topK.dimensionSize)\n    );\n  try {\n    const subspaceList = await combineFieldsService(\n      dataSource,\n      selectedDimensions,\n      measures,\n      operator,\n      state.useServer\n    );\n    if (subspaceList) {\n      updateState(draft => {\n        draft.subspaceList = subspaceList;\n      });\n    }\n    updateState(draft => {\n      draft.loading.subspaceSearching = false;\n    });\n  } catch (error) {\n    updateState(draft => {\n      draft.loading.subspaceSearching = false;\n    });\n  }\n}\n\ninterface GetViewSpacesProps {\n  subspaceList: Subspace[];\n  maxGroupNumber: number;\n  useServer: boolean;\n}\nconst getViewSpaces: Action<GetViewSpacesProps> = async (select, updateState, params) => {\n  const { subspaceList, maxGroupNumber, useServer } = params;\n  let viewSpaces: ViewSpace[] = [];\n  try {\n    viewSpaces = await clusterMeasures(\n      maxGroupNumber,\n      subspaceList.map(space => {\n        return {\n          dimensions: space.dimensions,\n          measures: space.measures,\n          matrix: space.correlationMatrix\n        };\n      }),\n      useServer\n    )\n    updateState(draft => {\n      draft.viewSpaces = viewSpaces\n    })\n  } catch (error) {\n    console.log(error)\n  }\n}\n\nconst extractInsights: Action<{dataSource: DataSource; fields: BIField[]}> = async (state, updateState, params) => {\n  const { dataSource, fields } = params;\n  updateState(draft => {\n    draft.loading.gallery = true\n  })\n  try {\n    const univariateResult = await univariateSummary(state, updateState, {\n      dataSource, fields\n    });\n      if (univariateResult) {\n        const {\n          groupedData,\n          summary,\n          newDimensions,\n          measures\n        } = univariateResult;\n        await subspaceSearch(state, updateState, {\n          groupedData, summary, dimensions: newDimensions, measures, operator: \"sum\"\n        });\n      }\n  } catch (error) {\n  } finally {\n    updateState(draft => {\n      draft.loading.gallery = false\n      draft.loading.gallery = false\n    })\n  }\n}\n\nconst getDashBoard: Action<{dataSource: DataSource, dimensions: string[], measures: string[]}> = async (select, updateState, params) => {\n  const state = select();\n  const { dataSource, dimensions, measures } = params;\n  updateState(draft => {\n    draft.loading.dashBoard = true\n  })\n  try {\n    const dashBoardList = await generateDashBoard(dataSource, dimensions, measures, state.subspaceList, state.useServer)\n    updateState(draft => {\n      draft.dashBoardList = dashBoardList;\n    })\n  } catch (error) {\n    console.error(error)\n  } finally {\n    updateState(draft => {\n      draft.loading.dashBoard = false\n    })\n  }\n}\nconst actions = {\n  univariateSummary,\n  subspaceSearch,\n  extractInsights,\n  getDashBoard,\n  getViewSpaces\n}\nexport type Actions =  typeof actions\n\ntype valueof<T> = T[keyof T]\n\ntype Foo = Parameters<typeof subspaceSearch> // ReturnType\nexport type Test = valueof<{  [key in keyof Actions]: {\n  name: key,\n  params: Parameters<Actions[key]>[2]\n}}>\n\nexport default actions;\n","export const SUPPORT_LANG = [\n    {\n        name: 'English',\n        value: 'en-US'\n    },\n    {\n        name: '',\n        value: 'zh-CN'\n    }\n]","import produce, { Draft, setAutoFreeze } from 'immer';\nimport React, { useState, useMemo, createContext, useContext, useCallback, useRef } from 'react';\nimport { DataSource, BIField, Field } from './global';\nimport { Subspace, FieldSummary, ViewSpace, DashBoard } from './service';\nimport actions, { Test } from './actions';\nimport { SUPPORT_LANG } from './locales';\n\nsetAutoFreeze(false)\n\nexport interface GlobalState {\n  /**\n   * language settings.\n   */\n  lang: string;\n  /**\n   * useless but cool.\n   */\n  beCool: boolean;\n  /**\n   * `currentPage` is the current page number of visualization in explore board.\n   */\n  currentPage: number;\n  /**\n   * use server to complete computing task, if not, use web worker.\n   */\n  useServer: boolean;\n  /**\n   * raw data is fetched and parsed data or uploaded data without any other changes.\n   * computed value `dataSource` will be calculated \n   */\n  rawData: DataSource;\n  /**\n   * fields contains fields with `dimension` or `measure` type.\n   * currently, this kind of type is not computed property unlike 'quantitative', 'nominal'...\n   * This is defined by user's purpose or domain knowledge.\n   */\n  fields: BIField[];\n  /**\n   * dataSource been cleaned and grouped which is readly for exploration.\n   */\n  cookedDataSource: DataSource;\n  cookedDimensions: string[];\n  cookedMeasures: string[];\n  /**\n   * subspaceList is ordered list by it score.\n   */\n  // subspaceList: Subspace[]\n  /**\n   * loading status for some service\n   * todo: \n   * manage the loading status in pages intead of globally.\n   */\n  loading: {\n    univariateSummary: boolean;\n    subspaceSearching: boolean;\n    gallery: boolean;\n    dashBoard: boolean;\n  };\n  \n  topK: {\n    /**\n     * top k percent subspace it will fetch.\n     */\n    subspacePercentSize: number;\n    dimensionSize: number;\n  }\n  maxGroupNumber: number;\n  subspaceList: Subspace[];\n  summary: {\n    origin: FieldSummary[];\n    grouped: FieldSummary[];\n  };\n  viewSpaces: ViewSpace[];\n  dashBoardList: DashBoard[];\n}\n\ninterface Getters {\n  /**\n   * `dataSource` is computed data based on fields' property(dimension or measure).\n   * sometimes, uploaded data contains contains some measure field but they are parsed into string value, which is raw data.\n   * dataSource transform these fields into what they should be for future computation.\n   * This is usually happened when a csv file is uploaded.\n   */\n  dimScores: [string, number, number, Field][]\n}\nexport type StateUpdater<S> = (draftState: Draft<S>) => void\n\n// function createStore<S>(initState: S) {\n//   const [state, setState] = useState<S>(initState)\n\n//   return function useGlobalState(): [S, (stateUpdater: StateUpdater<S>) => void] {\n//     const updateState = (stateUpdater: StateUpdater<S>) => {\n//       const nextState = produce<S>(state, draftState => stateUpdater(draftState))\n//       setState(nextState)\n//     }\n//     return [state, updateState]\n//   }\n// }\n\nconst initState: GlobalState = {\n  lang: SUPPORT_LANG[0].value,\n  beCool: false,\n  currentPage: 0,\n  useServer: false,\n  fields: [],\n  rawData: [],\n  cookedDataSource: [],\n  cookedDimensions: [],\n  cookedMeasures: [],\n  loading: {\n    univariateSummary: false,\n    subspaceSearching: false,\n    gallery: false,\n    dashBoard: false,\n  },\n  topK: {\n    subspacePercentSize: 0.3,\n    dimensionSize: 0.72\n  },\n  maxGroupNumber: 4,\n  subspaceList: [],\n  summary: {\n    origin: [],\n    grouped: []\n  },\n  viewSpaces: [],\n  dashBoardList: []\n};\ntype Dispatch<T> = (actionName: string, params: T) => void;\ntype valueof<T> = T[keyof T]\nconst GloalStateContext = createContext<[GlobalState, (updater:StateUpdater<GlobalState>) => void, <P extends Test>(actionName: P['name'], params: P['params']) => void, Getters]>(null!)\nfunction useGetters(state: GlobalState) {\n  const dimScores = useMemo<[string, number, number, Field][]>(() => {\n    return [...state.summary.origin, ...state.summary.grouped].map(field => {\n      return [\n        field.fieldName,\n        field.entropy,\n        field.maxEntropy,\n        { name: field.fieldName, type: field.type }\n      ];\n    });\n  }, [state.summary])\n\n  const getters: Getters = {\n    dimScores\n  }\n\n  return getters;\n}\nexport function GlobalStateProvider({ children }: { children: React.ReactNode }) {\n  const [state, setState] = useState<GlobalState>(initState);\n  const stateHolder = useRef<GlobalState>(initState);\n\n  const getters = useGetters(state);\n  const updateState = useCallback((stateUpdater: StateUpdater<GlobalState>) => {\n    setState(state => {\n      const nextState = produce<GlobalState>(state, draftState => stateUpdater(draftState))\n      stateHolder.current = nextState;\n      return nextState;\n    })\n  }, [setState])\n  const dispatch: <P extends Test>(actionName: P['name'], params: P['params']) => void = useCallback((actionName, params) => {\n    if (typeof actions[actionName] === 'function') {\n      const select = function (): GlobalState {\n        return stateHolder.current\n      }\n      // todo: fix the any type\n      \n      actions[actionName](select, updateState, params as any);\n      // actions['subspaceSearch'](state, updateState, params)\n    }\n  }, [updateState])\n\n\n\n  return (\n    <GloalStateContext.Provider value={[state, updateState, dispatch, getters]}>\n      {children}\n    </GloalStateContext.Provider>\n  )\n}\nexport function useGlobalState() {\n  return useContext(GloalStateContext)\n}","import { Record, DataSource } from '../global';\nimport Papa from 'papaparse';\n\nexport function csvLoader (file: File) {\n  return new Promise<DataSource>((resolve, reject) => {\n    Papa.parse(file, {\n      complete (results, file) {\n        let data: string[][] = results.data;\n        let fields: string[] = data[0];\n        let rawData = data.slice(1).map(row => {\n          let record: Record = {};\n          fields.forEach((field, index) => {\n            record[field] = row[index]\n          })\n          return record\n        })\n        resolve(rawData)\n      },\n      error (error, file) {\n        reject(error)\n      }\n    })\n  })\n}\n\nexport function jsonLoader (file: File): Promise<DataSource> {\n  return new Promise((resolve, reject) => {\n    let reader = new FileReader()\n    reader.readAsText(file)\n    reader.onload = (ev) => {\n      if (ev.target) {\n        try {\n          const rawData: DataSource = JSON.parse(ev.target.result as string);\n          resolve(rawData);\n        } catch (error) {\n          reject(error)\n        }\n      } else {\n        reject(ev)\n      }\n    }\n    reader.onerror = reject\n  })\n}","export function transNumber(num: any): number | null {\n  if (isNaN(num)) {\n    return null\n  }\n  return Number(num)\n}","import { useState, useCallback } from 'react';\nimport produce, { Draft } from 'immer';\n/**\n * @param S type of the composed state\n */\nexport type StateUpdater<S> = (draftState: Draft<S>) => void\n/**\n * \n * @param initState\n * useComposeState helps you manage several state together, provided with immutable state change api\n * \n * example:\n * ```js\n * const [state, setState] = useComposeState({foo: 12, bar: { foo: 20}})\n * setState(draft => {\n *  draft.bar.foo = 100;\n * })\n * ```\n */\nexport default function useComposeState<S>(initState: S): [S, (stateUpdater: StateUpdater<S>) => void] {\n  const [state, setState] = useState<S>(initState)\n  const updateState = useCallback((stateUpdater: StateUpdater<S>) => {\n    setState(state => {\n      const nextState = produce<S>(state, draftState => stateUpdater(draftState))\n      return nextState\n    })\n  }, [setState])\n  return [state, updateState]\n}","export default __webpack_public_path__ + \"static/media/rath-glasses.a2df4be3.png\";","import React, { useState, useEffect } from 'react';\nimport { PrimaryButton, Stack, Checkbox, Panel, PanelType, ComboBox, Label } from 'office-ui-fabric-react';\nimport { Aggregator } from '../global';\nconst checkboxStyles = () => {\n  return {\n    root: {\n      marginTop: '10px'\n    }\n  };\n}\n\n// todo: import aggregators list from cube-core\nconst aggregationList: Array<{ key: Aggregator; text: string }> = [\n  { key: 'sum', text: 'Sum' },\n  { key: 'count', text: 'Count' },\n  { key: 'mean', text: 'Mean' }\n]\nexport interface PreferencePanelConfig {\n  aggregator: Aggregator;\n  defaultAggregated: boolean;\n  defaultStack: boolean\n}\nexport interface PreferencePanelProps {\n  show: boolean;\n  onUpdateConfig: (props: PreferencePanelConfig) => void;\n  onClose: () => void;\n  config: PreferencePanelConfig\n}\n\nconst PreferencePanel: React.FC<PreferencePanelProps> = (props) => {\n  const {\n    show = false,\n    onUpdateConfig,\n    onClose,\n    config\n  } = props;\n  \n  const [aggregator, setAggregator] = useState<Aggregator>('sum');\n  const [defaultAggregated, setDefaultAggregated] = useState(true);\n  const [defaultStack, setDefaultStack] = useState(true);\n  \n  useEffect(() => {\n    const { aggregator, defaultAggregated, defaultStack } = config;\n    setAggregator(aggregator);\n    setDefaultAggregated(defaultAggregated);\n    setDefaultStack(defaultStack);\n  }, [config, show])\n  \n  const onRenderFooterContent = () => <div>\n    <PrimaryButton onClick={() => { onUpdateConfig({ aggregator, defaultAggregated, defaultStack }) }}>\n      Save\n    </PrimaryButton>\n  </div>\n  \n  return <Panel\n    isOpen={show}\n    type={PanelType.smallFixedFar}\n    onDismiss={onClose}\n    headerText=\"Preference\"\n    closeButtonAriaLabel=\"Close\"\n    onRenderFooterContent={onRenderFooterContent}\n  >\n    <Label>Preference</Label>\n    <Stack verticalFill tokens={{ childrenGap: 50, padding: 6}}>\n      <ComboBox\n        selectedKey={aggregator}\n        label=\"Aggregator\"\n        allowFreeform={true}\n        autoComplete=\"on\"\n        options={aggregationList}\n        onChange={(e, option) => {option && setAggregator(option.key as Aggregator)}}\n      />\n      <Checkbox styles={checkboxStyles} label=\"measurement aggregation\" checked={defaultAggregated} onChange={(e, isChecked) => {setDefaultAggregated(isChecked || false)}} />\n      <Checkbox styles={checkboxStyles} label=\"measurement stack\" checked={defaultStack} onChange={(e, isChecked) => {setDefaultStack(isChecked || false)}} />\n    </Stack>\n  </Panel>\n}\n\nexport default PreferencePanel;","import { FieldType } from \"visual-insights/build/esm/commonTypes\";\nimport { DataField } from \"./index\";\ninterface FieldTypeDictonary {\n    [key: string]: DataField\n}\nexport function inferFieldSemanticTypeWithDict(field: string, fieldTypeDict: FieldTypeDictonary): FieldType {\n  return fieldTypeDict[field] ? fieldTypeDict[field].semanticType : \"nominal\";\n}\n\nexport function inferFieldTypeWithDict(field: string, fieldTypeDict: FieldTypeDictonary): DataField[\"type\"] {\n  return fieldTypeDict[field] ? fieldTypeDict[field].type : \"dimension\";\n}\n","import { Specification, FieldType } from \"visual-insights/build/esm/commonTypes\";\nimport { geomTypeMap, DataField } from './index';\nimport { inferFieldSemanticTypeWithDict, inferFieldTypeWithDict } from \"./utils\";\n\nexport function featureVis(query: Specification, fields: DataField[]) {\n  console.log({ query, fields })\n  // bug: sometimes there are fields in query but not in fields\n  let fieldTypeDict: {[key: string]: DataField} = {};\n  for (let field of fields) {\n    fieldTypeDict[field.name] = field\n  }\n\n  const getFieldSemanticType = (field: string) => inferFieldSemanticTypeWithDict(field, fieldTypeDict);\n  const getFieldType = (field: string) => inferFieldTypeWithDict(field, fieldTypeDict);\n  \n  function shouldFieldAggregate(\n    field: string,\n    geomType: string\n  ): boolean {\n    if (geomType === \"point\") {\n      return false;\n    }\n    const fieldType = getFieldSemanticType(field);\n    if (geomType === 'rect') {\n      return fieldType !== 'quantitative'\n    }\n    if (fieldType === \"quantitative\" && getFieldType(field) === 'measure') {\n      return true;\n    }\n    return false;\n  }\n\n  let markType =\n        query.geomType![0] && geomTypeMap[query.geomType![0]]\n          ? geomTypeMap[query.geomType![0]]\n          : query.geomType![0];\n      const xType = getFieldSemanticType(query.position![0]);\n      const yType = getFieldSemanticType(query.position![1]);\n      const colorType = getFieldSemanticType(query.color![0]);\n      const xAgg = shouldFieldAggregate(query.position![0], markType);\n      const yAgg = shouldFieldAggregate(query.position![1], markType);\n\n      let adjustColorField = query.color![0];\n      if (markType === 'rect') {\n        if (query.color![0] && colorType !== 'quantitative') {\n          markType = 'point';\n        } else if (query.opacity![0] && query.size![0]) {\n          adjustColorField = query.size![0] || query.opacity![0];\n        }\n      }\n      return {\n        data: { name: \"dataSource\" },\n        autosize: {\n          type: \"pad\"\n        },\n        mark: markType,\n        selection: {\n          sl: {\n            type: markType === \"bar\" ? \"single\" : \"interval\",\n            encodings: markType === \"bar\" ? [\"x\"] : undefined\n          }\n        },\n        encoding: {\n          x: query.position![0] && {\n            field: query.position![0],\n            type: getFieldSemanticType(query.position![0]),\n            bin: markType === 'rect' && xType === 'quantitative' && { maxbins: 20 },\n            aggregate: markType !== 'rect' && xAgg && 'sum'\n          },\n          y: query.position![1] && {\n            field: query.position![1],\n            type: getFieldSemanticType(query.position![1]),\n            bin: markType === 'rect' && yType === 'quantitative' && { maxbins: 20 },\n            aggregate: markType !== 'rect' && yAgg && 'sum',\n          },\n          size: query.size![0] && {\n            field: query.size![0],\n            type: getFieldSemanticType(query.size![0])\n          },\n          column: query.facets![0] && {\n            field: query.facets![0],\n            type: getFieldSemanticType(query.facets![0])\n          },\n          row: query.facets![1] && {\n            field: query.facets![1],\n            type: getFieldSemanticType(query.facets![1])\n          },\n          opacity: query.opacity![0] && {\n            field: query.opacity![0],\n            type: getFieldSemanticType(query.opacity![0])\n          },\n          shape: query.shape![0] && {\n            field: query.shape![0],\n            type: getFieldSemanticType(query.shape![0])\n          },\n          color: (adjustColorField || markType === 'rect') && {\n            field: adjustColorField,\n            aggregate: markType === 'rect' && getFieldSemanticType(adjustColorField) === 'quantitative' && (adjustColorField ? 'sum' : 'count'),\n            type: adjustColorField && getFieldSemanticType(adjustColorField)\n          }\n        }\n      };\n\n}","import { Specification, FieldType } from 'visual-insights/build/esm/commonTypes'\nimport { geomTypeMap, DataField } from './index';\nimport { inferFieldSemanticTypeWithDict, inferFieldTypeWithDict } from './utils';\n\nexport function targetVis(query: Specification, fields: DataField[]) {\n  let fieldTypeDict: {[key: string]: DataField} = {};\n  for (let field of fields) {\n    fieldTypeDict[field.name] = field\n  }\n\n  const getFieldSemanticType = (field: string) => inferFieldSemanticTypeWithDict(field, fieldTypeDict);\n  const getFieldType = (field: string) => inferFieldTypeWithDict(field, fieldTypeDict);\n  \n  function shouldFieldAggregate(\n    field: string,\n    geomType: string\n  ): boolean {\n    if (geomType === \"point\") {\n      return false;\n    }\n    const fieldType = getFieldSemanticType(field);\n    if (geomType === 'rect') {\n      return fieldType !== 'quantitative'\n    }\n    if (fieldType === \"quantitative\" && getFieldType(field) === 'measure') {\n      return true;\n    }\n    return false;\n  }\n\n  let markType =\n        query.geomType![0] && geomTypeMap[query.geomType![0]]\n          ? geomTypeMap[query.geomType![0]]\n          : query.geomType![0];\n      const xType = getFieldSemanticType(query.position![0]);\n      const yType = getFieldSemanticType(query.position![1]);\n      const colorType = getFieldSemanticType(query.color![0]);\n      const xAgg = shouldFieldAggregate(query.position![0], markType);\n      const yAgg = shouldFieldAggregate(query.position![1], markType);\n      let repeat: string[] = [query.position![1]];\n      if (query.highFacets) {\n        repeat = repeat.concat(query.highFacets!.filter(f => getFieldSemanticType(f) === 'quantitative'))\n      }\n      let adjustColorField = query.color![0];\n      if (markType === 'rect') {\n        if (query.color![0] && colorType !== 'quantitative') {\n          markType = 'point';\n        } else if (query.opacity![0] && query.size![0]) {\n          adjustColorField = query.size![0] || query.opacity![0];\n        }\n      }\n      return {\n        config: {\n          repeat: { columns: 5 }\n        },\n        data: { name: \"dataSource\" },\n        autosize: {\n          type: \"pad\"\n        },\n        repeat,\n        spec: {\n          mark: markType,\n          selection: {\n            sl: {\n              type: markType === \"bar\" ? \"single\" : \"interval\",\n              encodings: markType === \"bar\" ? [\"x\"] : undefined\n            }\n          },\n          encoding: {\n            x: query.position![0] && {\n              field: query.position![0],\n              type: getFieldSemanticType(query.position![0]),\n              bin: markType === 'rect' && xType === 'quantitative' && { maxbins: 20 },\n              aggregate: markType !== 'rect' && xAgg && 'sum'\n            },\n            y: repeat[0] && {\n              field: { repeat: 'repeat' },\n              type: getFieldSemanticType(repeat[0]),\n              bin: markType === 'rect' && yType === 'quantitative' && { maxbins: 20 },\n              aggregate: markType !== 'rect' && yAgg && 'sum',\n              // scale: mustDefineScale && !yAgg ? { domain: filedDomains[repeat[0]] } : undefined\n            },\n            size: query.size![0] && {\n              field: query.size![0],\n              type: getFieldSemanticType(query.size![0])\n            },\n            opacity: query.opacity![0] && {\n              field: query.opacity![0],\n              type: getFieldSemanticType(query.opacity![0])\n            },\n            shape: query.shape![0] && {\n              field: query.shape![0],\n              type: getFieldSemanticType(query.shape![0])\n            },\n            color: (adjustColorField || markType === 'rect') && {\n              field: adjustColorField,\n              aggregate: markType === 'rect' && getFieldSemanticType(adjustColorField) === 'quantitative' && (adjustColorField ? 'sum' : 'count'),\n              type: adjustColorField && getFieldSemanticType(adjustColorField)\n            }\n          }\n        }\n      };\n\n}","import { Specification } from \"visual-insights/build/esm/commonTypes\";\nimport { DataSource, Field, FieldType } from \"../global\";\nexport const geomTypeMap: { [key: string]: any } = {\n  interval: \"bar\",\n  line: \"line\",\n  point: \"point\",\n  // density: 'rect'\n  density: \"point\"\n};\n\nexport function baseVis(\n  query: Specification,\n  dataSource: DataSource,\n  dimensions: string[],\n  measures: string[],\n  aggregatedMeasures: Array<{op: string; field: string; as: string}>,\n  fieldFeatures: Field[],\n  defaultAggregated?: boolean,\n  defaultStack?: boolean,\n  \n) {\n  const {\n    position = [],\n    color = [],\n    size = [],\n    facets = [],\n    opacity = [],\n    geomType = [],\n    page = []\n  } = query;\n\n  function adjustField(fieldName: string): string {\n    if (defaultAggregated && measures.includes(fieldName)) {\n      let aggField = aggregatedMeasures.find(mea => {\n        return mea.field === fieldName;\n      });\n      return aggField ? aggField.as : fieldName;\n    }\n    return fieldName;\n  }\n  \n  function getFieldType(field: string): FieldType {\n    let targetField = fieldFeatures.find(f => f.name === field);\n    return targetField ? targetField.type : \"nominal\";\n  }\n\n  let chartWidth = 600; //container.current ? container.current.offsetWidth * 0.8 : 600;\n  const fieldMap: any = {\n    x: position[0],\n    y: position[1],\n    color: color[0],\n    size: size[0],\n    opacity: opacity[0],\n    row: facets[0],\n    column: facets[1]\n  };\n  let spec: any = {\n    width: chartWidth,\n    data: {\n      values: dataSource\n    }\n  };\n  let basicSpec: any = {\n    width: chartWidth,\n    mark: {\n      type:\n        geomType[0] && geomTypeMap[geomType[0]]\n          ? geomTypeMap[geomType[0]]\n          : geomType[0],\n      tooltip: true\n    },\n    encoding: {}\n  };\n  for (let channel in fieldMap) {\n    if (fieldMap[channel]) {\n      basicSpec.encoding[channel] = {\n        field: adjustField(fieldMap[channel]),\n        type: getFieldType(fieldMap[channel])\n      };\n      if (\n        [\"x\", \"y\"].includes(channel) &&\n        getFieldType(fieldMap[channel]) === \"quantitative\" &&\n        !defaultStack\n      ) {\n        basicSpec.encoding[channel].stack = null;\n      }\n    }\n  }\n  if (!defaultStack && opacity.length === 0) {\n    basicSpec.encoding.opacity = { value: 0.7 };\n  }\n  if (page.length === 0) {\n    spec = {\n      ...spec,\n      ...basicSpec\n    };\n  } else if (page.length > 0) {\n    basicSpec.transform = [\n      { filter: { selection: \"brush\" } },\n      defaultAggregated\n        ? {\n            aggregate: aggregatedMeasures,\n            groupby: dimensions.filter(dim => dim !== page[0])\n          }\n        : null\n    ].filter(Boolean);\n    let sliderSpec = {\n      width: chartWidth,\n      mark: \"tick\",\n      selection: { brush: { encodings: [\"x\"], type: \"interval\" } },\n      encoding: {\n        x: { field: page[0], type: getFieldType(page[0]) }\n      }\n    };\n    spec.vconcat = [basicSpec, sliderSpec];\n  }\n  return spec;\n}\n","import { FieldType } from 'visual-insights/build/esm/commonTypes'\nimport { featureVis } from './featureVis'\nimport { targetVis } from './targetVis';\nimport { baseVis } from './baseVis';\n\nexport const geomTypeMap: {[key: string]: any} = {\n  interval: 'bar',\n  line: 'line',\n  point: 'point',\n  density: 'rect'\n}\n\nexport interface DataField {\n  name: string;\n  semanticType: FieldType;\n  type: 'dimension' | 'measure';\n}\n\nexport { featureVis, targetVis, baseVis }","import React, { useEffect, useRef, useMemo } from 'react';\nimport aggregate from 'cube-core';\nimport embed from 'vega-embed';\nimport { DataSource, Field } from '../global'\nimport { baseVis } from '../queries/index';\nexport const geomTypeMap: {[key: string]: any} = {\n  interval: 'bar',\n  line: 'line',\n  point: 'point',\n  // density: 'rect'\n  density: 'point'\n}\nexport interface Specification {\n  position?: string[];\n  color?: string[];\n  opacity?: string[];\n  size?: string[];\n  shape?: string[];\n  geomType?: string[];\n  facets?: string[];\n  page?: string[];\n  filter?: string[]\n}\ninterface BaseChartProps {\n  defaultAggregated: boolean;\n  defaultStack: boolean;\n  aggregator: 'sum' | 'mean' | 'count';\n  dataSource: DataSource;\n  dimensions: string[];\n  measures: string[];\n  fieldFeatures: Field[];\n  schema: Specification;\n}\n\nconst BaseChart: React.FC<BaseChartProps> = (props) => {\n  const {\n    defaultAggregated,\n    defaultStack,\n    aggregator,\n    dataSource = [],\n    dimensions = [],\n    measures = [],\n    schema = {},\n    fieldFeatures = []\n  } = props;\n\n  const container = useRef<HTMLDivElement>(null);\n  const aggregatedMeasures = useMemo(() => {\n    return measures.map(mea => {\n      return {\n        op: aggregator,\n        field: mea,\n        as: `${mea}_${aggregator}`\n      }\n    })\n  }, [measures, aggregator])\n\n  let table = useMemo(() => {\n    if (!defaultAggregated) {\n      return dataSource\n    }\n    return aggregate({ dataSource, dimensions, measures, operator: aggregator, asFields: aggregatedMeasures.map(mea => mea.as)})\n  }, [defaultAggregated, dataSource, dimensions, measures, aggregator, aggregatedMeasures])\n\n  useEffect(() => {\n    if (container.current !== null) {\n      if (schema.position && schema.position.length > 0 && schema.geomType && schema.geomType.length > 0) {\n        let spec = baseVis(schema, table, dimensions, measures, aggregatedMeasures, fieldFeatures, defaultAggregated, defaultStack);\n        embed(container.current, spec);\n      }\n    }\n  }, [schema, table, dimensions, measures, aggregatedMeasures, fieldFeatures, defaultAggregated, defaultStack])\n  return <div ref={container}></div>\n}\n\nexport default BaseChart;","import React, { useMemo, useState } from 'react';\nimport ReactMarkdown from 'react-markdown';\nimport { Subspace } from '../../service';\nimport { DefaultButton, TeachingBubble, DirectionalHint } from 'office-ui-fabric-react';\n\nimport './index.css';\nimport { Field } from '../../global';\nimport { Specification } from '../../visBuilder/vegaBase';\n\ninterface StoryTellerProps {\n  lang?: 'zh' | 'en';\n  dimScores: Array<[string, number, number, Field]>;\n  space: Subspace;\n  spaceList: Subspace[];\n  dimensions: string[];\n  measures: string[];\n  schema: Specification\n}\n\nconst StoryTeller: React.FC<StoryTellerProps> = (props) => {\n  const { space, dimensions = [], measures = [], dimScores = [], spaceList = [], schema } = props;\n  const [isTeachingBubbleVisible, setIsTeachingBubbleVisible] = useState(false);\n\n  const sortedFieldsScores = useMemo<Array<[string, number, number, Field]>>(() => {\n    return [...dimScores].sort((a, b) => a[1] - b[1]);\n  }, [dimScores])\n  const mostInfluencedDimension = useMemo<string | undefined>(() => {\n    if (typeof space === 'undefined') return;\n    for (let sp of spaceList) {\n      if (sp.dimensions.some(dim => {\n        return space.dimensions.includes(dim)\n      })) {\n        return sp.dimensions.find(dim => {\n          return space.dimensions.includes(dim)\n        })\n      }\n    }\n  }, [space, spaceList])\n  const bestMeasure = useMemo<string | undefined>(() => {\n    if (typeof space === 'undefined') return;\n    const measuresInView = space.measures.filter(mea => measures.includes(mea.name));\n    let min = Infinity;\n    let minPos = 0;\n    for (let i = 0; i < measuresInView.length; i++) {\n      if (measuresInView[i].value < min) {\n        min = measuresInView[i].value;\n        minPos = i;\n      }\n    }\n    return measuresInView[minPos].name;\n  }, [measures, space])\n\n  const countDiffField = useMemo<string | undefined>(() => {\n    let ans = sortedFieldsScores.find(dim => dimensions.includes(dim[0]));\n    return ans ? ans[0] : undefined;\n  }, [sortedFieldsScores, dimensions])\n  const result = `\n  ${ schema && schema.position ? `Current chart mainly focus on the relationship between ***${schema.position[0]}*** and ***${schema.position[1]}***` : ''}\n  ${ dimensions.length > 1 ? `+ DataSource is grouped by ***${dimensions.join(', ')}***, measures(indicators) will propose strong difference of distribution between each other.` : '' }\n  ${ measures.length > 1 ? `+ ***${measures.join(', ')}***are strongly related to each other` : '' }\n  ${ countDiffField ? `+ The distribution of member countings of ***${countDiffField}*** seems to contain more orders and patterns.` : '' }\n  ${ mostInfluencedDimension ? `+ ***${mostInfluencedDimension}*** has great influence on aggregated measure values.` : '' }\n  ${ bestMeasure ? `+ ***${bestMeasure}*** is more likely to have patterns according to its distribution.` : '' }\n  \\`\\`\\\n  `\n  return (\n    <div>\n      <DefaultButton id=\"vis-summary\" text=\"Summary\" onClick={() => { setIsTeachingBubbleVisible(true) }} />\n      {isTeachingBubbleVisible ? (\n          <div>\n            <TeachingBubble\n              calloutProps={{ directionalHint: DirectionalHint.bottomCenter }}\n              isWide={true}\n              hasCloseIcon={true}\n              closeButtonAriaLabel=\"Close\"\n              target={'#vis-summary'}\n              onDismiss={() => { setIsTeachingBubbleVisible(false) }}\n              headline=\"Chart Description\"\n            >\n              <ReactMarkdown source={result} />\n            </TeachingBubble>\n          </div>\n        ) : null}\n    </div>\n  )\n}\n\nexport default StoryTeller","import React, { useMemo } from 'react';\nimport ReactMarkdown from 'react-markdown';\nimport { Subspace } from '../../service';\n\nimport './index.css';\nimport { Field } from '../../global';\nimport { Specification } from '../../visBuilder/vegaBase';\n\ninterface VisDescriptionProps {\n  lang?: 'zh' | 'en';\n  dimScores: Array<[string, number, number, Field]>;\n  space: Subspace;\n  spaceList: Subspace[];\n  dimensions: string[];\n  measures: string[];\n  schema: Specification\n}\n\nconst VisDescription: React.FC<VisDescriptionProps> = (props) => {\n  const { space, dimensions = [], measures = [], dimScores = [], spaceList = [], schema } = props;\n\n  const sortedFieldsScores = useMemo<Array<[string, number, number, Field]>>(() => {\n    return [...dimScores].sort((a, b) => a[1] - b[1]);\n  }, [dimScores])\n  const mostInfluencedDimension = useMemo<string | undefined>(() => {\n    if (typeof space === 'undefined') return;\n    for (let sp of spaceList) {\n      if (sp.dimensions.some(dim => {\n        return space.dimensions.includes(dim)\n      })) {\n        return sp.dimensions.find(dim => {\n          return space.dimensions.includes(dim)\n        })\n      }\n    }\n  }, [space, spaceList])\n  const bestMeasure = useMemo<string | undefined>(() => {\n    if (typeof space === 'undefined') return;\n    const measuresInView = space.measures.filter(mea => measures.includes(mea.name));\n    let min = Infinity;\n    let minPos = 0;\n    for (let i = 0; i < measuresInView.length; i++) {\n      if (measuresInView[i].value < min) {\n        min = measuresInView[i].value;\n        minPos = i;\n      }\n    }\n    return measuresInView[minPos].name;\n  }, [measures, space])\n\n  const countDiffField = useMemo<string | undefined>(() => {\n    let ans = sortedFieldsScores.find(dim => dimensions.includes(dim[0]));\n    return ans ? ans[0] : undefined;\n  }, [sortedFieldsScores, dimensions])\n  const result = `\n  ${ schema && schema.position ? `Current chart mainly focus on the relationship between ***${schema.position[0]}*** and ***${schema.position[1]}***` : ''}\n  ${ dimensions.length > 1 ? `+ DataSource is grouped by ***${dimensions.join(', ')}***, measures(indicators) will propose strong difference of distribution between each other.` : '' }\n  ${ measures.length > 1 ? `+ ***${measures.join(', ')}***are strongly related to each other` : '' }\n  ${ countDiffField ? `+ The distribution of member countings of ***${countDiffField}*** seems to contain more orders and patterns.` : '' }\n  ${ mostInfluencedDimension ? `+ ***${mostInfluencedDimension}*** has great influence on aggregated measure values.` : '' }\n  ${ bestMeasure ? `+ ***${bestMeasure}*** is more likely to have patterns according to its distribution.` : '' }\n  \\`\\`\\\n  `\n  return (\n    <ReactMarkdown source={result} />\n  )\n}\n\nexport default VisDescription","import { useMemo } from 'react';\nimport { ViewSpace } from '../../../service';\nimport { Field, DataSource } from '../../../global';\nimport { specification } from 'visual-insights';\nimport { PreferencePanelConfig } from '../../../components/preference';\nconst similarityThrehold = 0.2;\nconst topKRelatedSpace = 5;\n\nfunction measuresRelatedScore (measures1: string[], measures2: string[]) {\n  let meaSet = new Set([...measures1, ...measures2])\n  let meaSet1 = new Set(measures1)\n  let meaSet2 = new Set(measures2)\n  let meaVec1: number[] = [];\n  let meaVec2: number[] = [];\n  for (let mea of meaSet) {\n    meaVec1.push(Number(meaSet1.has(mea)))\n    meaVec2.push(Number(meaSet2.has(mea)))\n  }\n  let score = 0;\n  for (let i = 0; i < meaVec1.length; i++) {\n    score += meaVec1[i] * meaVec2[i];\n  }\n  score /= (Math.sqrt(measures1.length) * Math.sqrt(measures2.length))\n  // console.log(measures1, measures2, score)\n  return score;\n}\ninterface RelatedViewSpace extends ViewSpace {\n  relatedScore: number;\n}\nexport interface DigDimensionProps {\n  /**\n   * we suppose that viewSpaces here is a ranked space list\n   */\n  viewSpaces: ViewSpace[];\n  interestedViewSpace: ViewSpace;\n  fieldScores: Array<[string, number, number, Field]>;\n  dataSource: DataSource;\n  visualConfig: PreferencePanelConfig\n}\n\nfunction useDigDimension(props: DigDimensionProps) {\n  const { viewSpaces, interestedViewSpace, fieldScores, dataSource } = props;\n  const relatedSpaces = useMemo<ViewSpace[]>(() => {\n    let ans: ViewSpace[] = []\n    for (let space of viewSpaces) {\n      if (space.dimensions.length > interestedViewSpace.dimensions.length && space.dimensions.length - interestedViewSpace.dimensions.length <= 2) {\n        let isSubset = interestedViewSpace.dimensions.every(subDim => {\n          return space.dimensions.find(dim => subDim === dim)\n        })\n        if (isSubset) {\n          ans.push(space)\n        }\n      }\n    }\n    return ans;\n  }, [interestedViewSpace, viewSpaces])\n  const rankedRelatedSpaces = useMemo(() => {\n    let ans: RelatedViewSpace[] = [];\n    for (let space of relatedSpaces) {\n      let measureSimilarity = measuresRelatedScore(interestedViewSpace.measures, space.measures);\n      if (measureSimilarity > similarityThrehold) {\n        // console.log({ measureSimilarity })\n        ans.push({\n          ...space,\n          relatedScore: space.score / Math.sqrt(measureSimilarity)\n        })\n      }\n    }\n    return ans.sort((a, b) => a.relatedScore - b.relatedScore);\n  }, [relatedSpaces, interestedViewSpace.measures]);\n\n  const viewList = useMemo(() => {\n    const ans = rankedRelatedSpaces.slice(0, topKRelatedSpace).map(space => {\n      let spaceFieldScores = fieldScores.filter(field => {\n        return space.dimensions.includes(field[0]) || space.measures.includes(field[0])\n      })\n      return {\n        ...space,\n        schema: specification(spaceFieldScores, dataSource, space.dimensions, space.measures).schema\n      };\n    })\n    return ans;\n  }, [rankedRelatedSpaces, fieldScores, dataSource])\n\n  return viewList\n}\n\nexport default useDigDimension;\n","import React from \"react\";\nimport VisDescription from \"../../../plugins/visSummary/description\";\nimport useDigDimension, { DigDimensionProps } from \"./digDimension\";\nimport BaseChart from \"../../../visBuilder/vegaBase\";\nimport { Subspace } from \"../../../service\";\nimport { IconButton, Stack } from \"office-ui-fabric-react\";\n\nfunction isDimensionEqual(dimensions1: string[], dimensions2: string[]) {\n  if (dimensions1.length !== dimensions2.length) {\n    return false;\n  }\n  return dimensions1.every(dim1 => {\n    return dimensions2.includes(dim1);\n  });\n}\ninterface AssociationProps {\n  digDimensionProps: DigDimensionProps;\n  subspaceList: Subspace[];\n  onSelectView: (index: number) => void\n}\nconst Association: React.FC<AssociationProps> = props => {\n  const { digDimensionProps, subspaceList, onSelectView } = props;\n  const { dataSource, visualConfig, fieldScores } = digDimensionProps;\n  const relatedCharts = useDigDimension(digDimensionProps);\n  const fieldFeatures = fieldScores.map(f => f[3]);\n  return (\n    <div>\n      <div className=\"ms-Grid\">\n        {relatedCharts.map((view, i) => {\n          let currentSpace = subspaceList.find(space => {\n            return isDimensionEqual(space.dimensions, view.dimensions);\n          });\n          return (\n            <div key={`associate-row-${i}`}\n              className=\"ms-Grid-row\"\n              style={{\n                border: \"solid 1px #bfbfbf\",\n                margin: \"1em\",\n                padding: \"1em\"\n              }}\n            >\n              <div\n                className=\"ms-Grid-col ms-sm6 ms-md8 ms-lg9\"\n                style={{ overflow: 'auto' }}\n              >\n                <BaseChart\n                  aggregator={visualConfig.aggregator}\n                  defaultAggregated={view.schema.geomType && view.schema.geomType.includes(\"point\") ? false : true}\n                  defaultStack={visualConfig.defaultStack}\n                  dimensions={view.dimensions}\n                  measures={view.measures}\n                  dataSource={dataSource}\n                  schema={view.schema}\n                  fieldFeatures={fieldFeatures}\n                />\n              </div>\n              <div\n                className=\"ms-Grid-col ms-sm6 ms-md4 ms-lg3\"\n                style={{ fontSize: 14, color: \"#8a8886\", overflow: \"auto\" }}\n              >\n                <div>\n                  \n                  <Stack tokens={{ childrenGap: 8 }} horizontal>\n                    <IconButton iconProps={{ iconName: 'Lightbulb' }} title=\"Interested\" onClick={() => {\n                      onSelectView(view.index)\n                    }} />\n                  </Stack>\n                </div>\n                {currentSpace && (\n                  <VisDescription\n                    dimensions={view.dimensions}\n                    measures={view.measures}\n                    dimScores={fieldScores}\n                    space={currentSpace}\n                    spaceList={subspaceList}\n                    schema={view.schema}\n                  />\n                )}\n              </div>\n            </div>\n          );\n        })}\n      </div>\n    </div>\n  );\n};\n\nexport default Association;\n","import React, { useState, useEffect, useMemo } from 'react';\nimport { SearchBox } from 'office-ui-fabric-react';\nimport { useGlobalState } from '../../../state';\nimport Fuse, { FuseOptions } from 'fuse.js';\nimport { specification } from 'visual-insights';\nimport { ViewSpace } from '../../../service';\nimport BaseChart from \"../../../visBuilder/vegaBase\";\nimport styled from 'styled-components';\n\nconst VisCard = styled.div`\n  padding: 1rem;\n  overflow-x: auto;\n  margin: 1rem;\n`\n\nconst PageLinkButton = styled.a`\n  margin-right: 1rem;\n  cursor: pointer;\n  color: rgb(16, 110, 190);\n`\n\nconst PAGE_SIZE = 4;\nconst PAGE_OFFSET = 2;\n\nfunction usePageController (size: number) {\n  const [currentPage, setCurrentPage] = useState(0);\n\n  useEffect(() => {\n    setCurrentPage(0)\n  }, [size])\n  const maxPageNumber = Math.ceil(size / PAGE_SIZE);\n  const gotoPage = (num: number) => {\n    let fixPageNum = (num + maxPageNumber) % maxPageNumber;\n    setCurrentPage(fixPageNum)\n  }\n\n  const lastPage = () => {\n    setCurrentPage(p => (p + maxPageNumber - 1) % maxPageNumber)\n  }\n  const nextPage = () => {\n    setCurrentPage(p => (p + maxPageNumber + 1) % maxPageNumber)\n  }\n  const minVisPage = Math.max(currentPage - PAGE_OFFSET, 0);\n  const maxVisPage = Math.min(currentPage + PAGE_OFFSET, maxPageNumber);\n  const itemRange = useMemo(() => {\n    return [currentPage * PAGE_SIZE, Math.min((currentPage + 1) * PAGE_SIZE, size)]\n  }, [size, currentPage])\n  const visPageRange = [...new Array(maxVisPage - minVisPage + 1)].map((n, i) => minVisPage + i)\n  return {\n    currentPage,\n    visPageRange,\n    itemRange,\n    gotoPage,\n    lastPage,\n    nextPage\n  }\n}\n\nconst SearchPage: React.FC = props => {\n  const [state, , dispatch, getters] = useGlobalState();\n  const [targetViewSpaces, setTargetViewSpaces] = useState<ViewSpace[]>([]);\n  const { subspaceList, viewSpaces, maxGroupNumber, useServer } = state;\n  const { dimScores } = getters;\n\n  useEffect(() => {\n    dispatch('getViewSpaces', {\n      subspaceList,\n      maxGroupNumber,\n      useServer\n    })\n  }, [subspaceList, maxGroupNumber, useServer, dispatch])\n\n  const fuse = useMemo(() => {\n    const options: FuseOptions<ViewSpace> = {\n      keys: [\n        'dimensions',\n        'measures'\n      ]\n    }\n    return new Fuse(viewSpaces, options)\n  }, [viewSpaces])\n  const searchHandler = (newValue: string) => {\n    const result: any[] = fuse.search(newValue)\n    setTargetViewSpaces(result);\n  }\n\n  const {  currentPage, visPageRange, itemRange, gotoPage, lastPage, nextPage } = usePageController(targetViewSpaces.length);\n\n  const specList = useMemo(() => {\n    return targetViewSpaces.slice(itemRange[0], itemRange[1]).map(space => {\n      const { dimensions, measures } = space;\n      const fieldScores = dimScores.filter(field => {\n        return dimensions.includes(field[0]) || measures.includes(field[0]);\n      });\n      let { schema } = specification(\n        fieldScores,\n        state.cookedDataSource,\n        dimensions,\n        measures\n      );\n      return {\n        schema,\n        fieldFeatures: fieldScores.map(f => f[3]),\n        aggData: state.cookedDataSource,\n        dimensions,\n        measures\n      }\n    })\n  }, [state.cookedDataSource, targetViewSpaces, itemRange, dimScores])\n  \n  return (\n    <div>\n      <SearchBox\n        placeholder=\"Search\"\n        onSearch={searchHandler}\n        underlined={true}\n      />\n      <p className=\"state-description\">{targetViewSpaces.length} results are found. current page is {currentPage + 1}</p>\n      <div>\n        <PageLinkButton onClick={lastPage}>Last Page</PageLinkButton>\n        {\n          targetViewSpaces.length > 0 && visPageRange.map(n => <PageLinkButton key={`page-btn-${n}`} onClick={() => { gotoPage(n) }}>{ n + 1 }</PageLinkButton>)\n        }\n        <PageLinkButton onClick={nextPage}>Next Page</PageLinkButton>\n      </div>\n      <div>\n        {specList.map((spec, index) => (\n          <VisCard key={`result-${index}`}>\n            <BaseChart\n              aggregator={\"sum\"}\n              defaultAggregated={true}\n              defaultStack={true}\n              dimensions={spec.dimensions}\n              measures={spec.measures}\n              dataSource={spec.aggData}\n              schema={spec.schema}\n              fieldFeatures={spec.fieldFeatures}\n            />\n          </VisCard>\n        ))}\n      </div>\n    </div>\n  );\n}\n\nexport default SearchPage\n","import React, { useEffect, useState, useMemo } from \"react\";\nimport intl from 'react-intl-universal';\nimport {\n  DefaultButton,\n  IconButton,\n  Stack,\n  ProgressIndicator,\n  SpinButton,\n  Pivot,\n  PivotItem\n} from \"office-ui-fabric-react\";\nimport { Position } from \"office-ui-fabric-react/lib/utilities/positioning\";\nimport PreferencePanel, {\n  PreferencePanelConfig\n} from \"../../components/preference\";\nimport { useComposeState } from \"../../utils/index\";\nimport BaseChart, { Specification } from \"../../visBuilder/vegaBase\";\nimport { DataSource, Field } from \"../../global\";\nimport { specification } from \"visual-insights\";\nimport VisSummary from \"../../plugins/visSummary/index\";\nimport { useGlobalState } from \"../../state\";\nimport Association from \"./association/index\";\nimport {\n  Subspace,\n  clusterMeasures,\n  ViewSpace,\n  FieldSummary\n} from \"../../service\";\nimport SearchBoard from \"./search/index\";\n\nconst pivotKeyList = [\n  'rankList',\n  'search'\n];\n\ninterface PageStatus {\n  show: {\n    insightBoard: boolean;\n    configPanel: boolean;\n    fieldConfig: boolean;\n    dataConfig: boolean;\n  };\n}\ninterface DataView {\n  schema: Specification;\n  aggData: DataSource;\n  fieldFeatures: Field[];\n  dimensions: string[];\n  measures: string[];\n}\n\ninterface GalleryProps {\n  subspaceList: Subspace[];\n  /**\n   * dataSource here should be cookedData.\n   */\n  dataSource: DataSource;\n  summary: {\n    origin: FieldSummary[];\n    grouped: FieldSummary[];\n  };\n}\n\nconst Gallery: React.FC<GalleryProps> = props => {\n  const { dataSource, summary, subspaceList } = props;\n  const [state, updateState] = useGlobalState()\n  const pivotList = useMemo(() => {\n    return pivotKeyList.map((page, index) => {\n      return { title: intl.get(`explore.${page}`), itemKey: 'pivot-' + index }\n    })\n  }, [state.lang])\n\n  const [currentPage, setCurrentPage] = useState(0);\n  const [pivotIndex, setPivotIndex] = useState(pivotList[0].itemKey);\n  const [pageStatus, setPageStatus] = useComposeState<PageStatus>({\n    show: {\n      insightBoard: false,\n      fieldConfig: false,\n      configPanel: false,\n      dataConfig: false\n    }\n  });\n  const [showAssociation, setShowAssociation] = useState(false);\n  const [visualConfig, setVisualConfig] = useState<PreferencePanelConfig>({\n    aggregator: \"sum\",\n    defaultAggregated: true,\n    defaultStack: true\n  });\n  const [viewSpaces, setViewSpaces] = useState<ViewSpace[]>([]);\n\n  const [dataView, setDataView] = useState<DataView>({\n    schema: {\n      position: [],\n      color: [],\n      opacity: [],\n      geomType: []\n    },\n    fieldFeatures: [],\n    aggData: [],\n    dimensions: [],\n    measures: []\n  });\n\n  const gotoPage = (pageNo: number) => {\n    setCurrentPage(pageNo);\n  };\n\n  useEffect(() => {\n    updateState(draft => {\n      draft.loading.gallery = true;\n    });\n    // todo:\n    // should group number be the same for different subspaces?\n    clusterMeasures(\n      state.maxGroupNumber,\n      subspaceList.map(space => {\n        return {\n          dimensions: space.dimensions,\n          measures: space.measures,\n          matrix: space.correlationMatrix\n        };\n      }),\n      state.useServer\n    ).then(viewSpaces => {\n      setViewSpaces(viewSpaces);\n      updateState(draft => {\n        draft.loading.gallery = false;\n      });\n    });\n  }, [subspaceList, dataSource, state.maxGroupNumber, state.useServer, updateState]);\n\n  const dimScores = useMemo<[string, number, number, Field][]>(() => {\n    return [...summary.origin, ...summary.grouped].map(field => {\n      return [\n        field.fieldName,\n        field.entropy,\n        field.maxEntropy,\n        { name: field.fieldName, type: field.type }\n      ];\n    });\n  }, [summary.origin, summary.grouped]);\n\n  useEffect(() => {\n    const viewState = viewSpaces[currentPage];\n    if (viewState) {\n      const { dimensions, measures } = viewState;\n      try {\n        // todo: find the strict confition instead of using try catch\n        const fieldScores = dimScores.filter(field => {\n          return dimensions.includes(field[0]) || measures.includes(field[0]);\n        });\n        const { schema } = specification(\n          fieldScores,\n          dataSource,\n          dimensions,\n          measures\n        );\n        setDataView({\n          schema,\n          fieldFeatures: fieldScores.map(f => f[3]),\n          aggData: dataSource,\n          dimensions,\n          measures\n        });\n        // ugly code\n        // todo:\n        // implement this in specification\n        // + check geomType\n        // + check geom number and aggregated geom number\n        if (\n          schema.geomType &&\n          (schema.geomType.includes(\"point\") ||\n            schema.geomType.includes(\"density\"))\n        ) {\n          setVisualConfig(config => {\n            return {\n              ...config,\n              defaultAggregated: false\n            };\n          });\n        } else {\n          setVisualConfig(config => {\n            return {\n              ...config,\n              defaultAggregated: true\n            };\n          });\n        }\n      } catch (error) {\n        console.log(error);\n      }\n    }\n  }, [viewSpaces, currentPage, dataSource, dimScores]);\n  const currentSpace = useMemo<Subspace>(() => {\n    return subspaceList.find(subspace => {\n      return subspace.dimensions.join(\",\") === dataView.dimensions.join(\",\");\n    })!;\n  }, [subspaceList, dataView]);\n  useEffect(() => {\n    setShowAssociation(false);\n  }, [currentPage]);\n  return (\n    <div className=\"content-container\">\n      <PreferencePanel\n        show={pageStatus.show.configPanel}\n        config={visualConfig}\n        onUpdateConfig={config => {\n          setVisualConfig(config);\n          setPageStatus(draft => {\n            draft.show.configPanel = false;\n          });\n        }}\n        onClose={() => {\n          setPageStatus(draft => {\n            draft.show.configPanel = false;\n          });\n        }}\n      />\n\n      <div className=\"card\" style={{ paddingTop: '0.2rem' }}>\n        <Pivot\n          selectedKey={pivotIndex}\n          onLinkClick={item => {\n            item && setPivotIndex(item.props.itemKey!)\n          }}\n        >\n          {\n            pivotList.map(pivot => (\n              <PivotItem headerText={pivot.title} key={pivot.itemKey} itemKey={pivot.itemKey} />\n            ))\n          }\n        </Pivot>\n        {(state.loading.gallery ||\n          state.loading.subspaceSearching ||\n          state.loading.univariateSummary) && (\n          <ProgressIndicator description=\"calculating\" />\n        )}\n        {pivotIndex === pivotList[0].itemKey && (\n          <div>\n            <h2 style={{ marginBottom: 0 }}>\n              {intl.get('explore.title')}\n              <IconButton\n                iconProps={{ iconName: \"Settings\" }}\n                title={intl.get('explore.preference')}\n                ariaLabel={intl.get('explore.preference')}\n                onClick={() => {\n                  setPageStatus(draft => {\n                    draft.show.configPanel = true;\n                  });\n                }}\n              />\n              <IconButton\n                iconProps={{ iconName: \"Lightbulb\" }}\n                title={intl.get('explore.digIn')}\n                ariaLabel={intl.get('explore.digIn')}\n                onClick={() => {\n                  setShowAssociation(true);\n                }}\n              />\n            </h2>\n            <p className=\"state-description\">{intl.get('explore.desc')}</p>\n            <p className=\"state-description\">{intl.get('explore.tip')}</p>\n            <div className=\"ms-Grid\" dir=\"ltr\">\n              <div className=\"ms-Grid-row\">\n                <div\n                  className=\"ms-Grid-col ms-sm6 ms-md8 ms-lg3\"\n                  style={{ overflow: \"auto\" }}\n                >\n                  <div style={{ marginBottom: \"1rem\" }}>\n                    <SpinButton\n                      label={intl.get('expore.currentPage')}\n                      value={(currentPage + 1).toString()}\n                      min={0}\n                      max={viewSpaces.length}\n                      step={1}\n                      iconProps={{ iconName: \"Search\" }}\n                      labelPosition={Position.end}\n                      // tslint:disable:jsx-no-lambda\n                      onValidate={(value: string) => {\n                        gotoPage((Number(value) - 1) % viewSpaces.length);\n                      }}\n                      onIncrement={() => {\n                        gotoPage((currentPage + 1) % viewSpaces.length);\n                      }}\n                      onDecrement={() => {\n                        gotoPage(\n                          (currentPage - 1 + viewSpaces.length) %\n                            viewSpaces.length\n                        );\n                      }}\n                      incrementButtonAriaLabel={\"Increase value by 1\"}\n                      decrementButtonAriaLabel={\"Decrease value by 1\"}\n                    />\n                  </div>\n                  <p className=\"state-description\">\n                    Page No. {currentPage + 1} of {viewSpaces.length}\n                  </p>\n                  <Stack horizontal tokens={{ childrenGap: 20 }}>\n                    <DefaultButton\n                      text={intl.get('explore.last')}\n                      onClick={() => {\n                        gotoPage(\n                          (currentPage - 1 + viewSpaces.length) %\n                            viewSpaces.length\n                        );\n                      }}\n                      allowDisabledFocus\n                    />\n                    <DefaultButton\n                      text={intl.get('explore.next')}\n                      onClick={() => {\n                        gotoPage((currentPage + 1) % viewSpaces.length);\n                      }}\n                      allowDisabledFocus\n                    />\n                  </Stack>\n                  <h3>Specification</h3>\n                  <pre>{JSON.stringify(dataView.schema, null, 2)}</pre>\n                  <VisSummary\n                    dimensions={dataView.dimensions}\n                    measures={dataView.measures}\n                    dimScores={dimScores}\n                    space={currentSpace}\n                    spaceList={subspaceList}\n                    schema={dataView.schema}\n                  />\n                </div>\n                <div\n                  className=\"ms-Grid-col ms-sm6 ms-md4 ms-lg9\"\n                  style={{ overflow: \"auto\" }}\n                >\n                  <BaseChart\n                    aggregator={visualConfig.aggregator}\n                    defaultAggregated={visualConfig.defaultAggregated}\n                    defaultStack={visualConfig.defaultStack}\n                    dimensions={dataView.dimensions}\n                    measures={dataView.measures}\n                    dataSource={dataView.aggData}\n                    schema={dataView.schema}\n                    fieldFeatures={dataView.fieldFeatures}\n                  />\n                </div>\n              </div>\n            </div>\n          </div>\n        )}\n        {pivotIndex === pivotList[1].itemKey && <SearchBoard />}\n      </div>\n\n      {pivotIndex === pivotList[0].itemKey && showAssociation && (\n        <div className=\"card\">\n          <h2> {intl.get('explore.related.title')} </h2>\n          <Association\n            onSelectView={index => {\n              let pos = viewSpaces.findIndex(v => v.index === index);\n              if (pos > -1) {\n                gotoPage(pos);\n              }\n            }}\n            subspaceList={subspaceList}\n            digDimensionProps={{\n              visualConfig,\n              dataSource,\n              viewSpaces,\n              fieldScores: dimScores,\n              interestedViewSpace: viewSpaces[currentPage]\n            }}\n          />\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default Gallery;\n","import React, { useRef, useEffect } from 'react';\nimport embed from 'vega-embed';\nimport { FieldType, DataSource } from '../../global';\nexport interface DistributionChartProps {\n  fieldType: FieldType;\n  x: string;\n  y: string;\n  dataSource: DataSource\n}\n\nconst DistributionChart: React.FC<DistributionChartProps> = (props) => {\n  const chart = useRef<HTMLDivElement>(null);\n  const { x, y, dataSource, fieldType } = props;\n    useEffect(() => {\n      if (chart.current) {\n        let values: typeof dataSource = [];\n        let hasIndex = false;\n        if (fieldType === 'ordinal' && dataSource.some(member => {\n          return /(\\[|\\()-?([0-9.]+|Infinity),\\s*([0-9.]+|Infinity)(\\]|\\))/.test(member.memberName)\n        })) {\n          values = dataSource.map(member => {\n            hasIndex = true;\n            let result = /(\\[|\\()(?<left>-?([0-9.]+|Infinity)),\\s*([0-9.]+|Infinity)(\\]|\\))/.exec(member.memberName);\n            \n            return {\n              ...member,\n              index: result === null ? member.name : Number(result.groups!.left)\n            }\n          })\n        } else {\n          values = dataSource\n        }\n        let sortBy: string | undefined | any = undefined;\n        if (fieldType === 'nominal') {\n          sortBy = '-y'\n        } else if (fieldType === 'ordinal' && hasIndex) {\n          sortBy = { field: 'index' }\n        }\n        embed(chart.current, {\n          background: '#fff',\n          data: {\n            values\n          },\n          height: 120,\n          width: 200,\n          mark: ['quantitative', 'temporal'].includes(fieldType) ? 'line' : 'bar',\n          encoding: {\n            x: {\n              field: x,\n              axis: dataSource.length > 16 ? null : undefined,\n              type: fieldType, sort: sortBy\n            },\n            y: { field: y, type: 'quantitative', aggregate: 'sum' }\n          }\n        }, {\n          actions: false\n        })\n      }\n    }, [x, y, dataSource, fieldType])\n  return <div ref={chart}></div>\n}\n\nexport default DistributionChart;","import React, { useMemo } from 'react';\nimport intl from 'react-intl-universal';\nimport { DetailsList, SelectionMode, IColumn, Icon, HoverCard, IExpandingCardProps } from 'office-ui-fabric-react';\nimport chroma from 'chroma-js';\nimport { FieldSummary } from '../../service';\nimport DistributionChart from './distributionChart';\nimport { FieldType, Record } from '../../global';\n\nimport './fieldAnalysis.css';\n\n// todo: distribution info\n\ninterface FieldAnalsisProps {\n  originSummary: FieldSummary[];\n  groupedSummary: FieldSummary[];\n}\n\nconst baseColumns: IColumn[] = [\n  {\n    key: 'fieldName',\n    name: 'fieldName',\n    fieldName: 'fieldName',\n    minWidth: 70,\n    maxWidth: 150,\n  },\n  {\n    key: 'type',\n    name: 'type',\n    fieldName: 'type',\n    minWidth: 50,\n  },\n  {\n    key: 'entropy',\n    name: 'entropy',\n    fieldName: 'entropy',\n    minWidth: 120,\n  },\n  {\n    key: 'maxEntropy',\n    name: 'maxEntropy',\n    fieldName: 'maxEntropy',\n    minWidth: 120,\n  },\n]\n\nfunction getColumns (): IColumn[] {\n  return baseColumns.map(col => {\n    return {\n      ...col,\n      name: intl.get(`noteBook.univariate.columns.${col.key}`)\n    }\n  })\n}\n\nfunction getIconNameByFieldType (type: string): string {\n  switch (type) {\n    case 'nominal':\n      return 'TextField';\n    case 'quantitative':\n      return 'NumberField';\n    case 'ordinal':\n      return 'Breadcrumb';\n    case 'temporal':\n      return 'EventDate';\n    default:\n      return ''\n  }\n}\n\nfunction getValueColor (value: number, range: [number, number]): [number, number, number] {\n  return chroma.scale('YlGnBu').domain([range[1], range[0]])(value).rgb();\n}\n\n/**\n * \n * @param color rgb array\n * algorithm provided by https://stackoverflow.com/questions/1855884/determine-font-color-based-on-background-color\n */\nfunction contrastColor(color: [number, number, number]): [number, number, number] {\n  let luminance = (0.299 * color[0] + 0.587 * color[1] + 0.114 * color[2]) / 255;\n  return luminance > 0.5 ? [0, 0, 0] : [255, 255, 255]\n}\nconst FieldAnalsis: React.FC<FieldAnalsisProps> = (props) => {\n\n  const { originSummary, groupedSummary } = props;\n\n  const columns = getColumns();\n\n  const entropyRange = useMemo<[number, number]>(() => {\n    const originEntropy = originSummary.map(s => s.maxEntropy);\n    return [0, Math.max(...originEntropy)];\n  }, [originSummary])\n\n  const onRenderCompactCard = (item: Record) => {\n    return (\n      <div className=\"field-hover-card\">\n        <h2>{item.fieldName}</h2>\n        <div>Field entropy is { Number(item.entropy).toFixed(2) }</div>\n        <div className=\"chart-vertical-margin-container\" >\n          <DistributionChart x=\"memberName\" y=\"count\" fieldType={item.type as FieldType} dataSource={item.distribution} />\n        </div>\n        \n      </div>\n    )\n  }\n  const onRenderExpandedCard = (item: Record) => {\n    const name = item.fieldName;\n    const target = groupedSummary.find(s => s.fieldName === name + '(group)')\n    return (\n      <div className=\"field-hover-card\">\n        {\n          target ? <div>\n            <h3>{target.fieldName}</h3>\n            <div>Field entropy is { Number(target.entropy).toFixed(2) }</div>\n            <div className=\"chart-vertical-margin-container\">\n              <DistributionChart x=\"memberName\" y=\"count\" fieldType={target.type as FieldType} dataSource={target.distribution} />\n            </div>\n          </div> : <div>This field is not grouped.</div>\n        }\n      </div>\n    )\n  }\n\n\n\n  const renderItemColumn = (item: Record, index?: number, column?: IColumn) => {\n    if (column !== undefined) {\n      const name = item.fieldName;\n      const target = groupedSummary.find(s => s.fieldName === name + '(group)')\n      const expandingCardProps: IExpandingCardProps = {\n        onRenderCompactCard,\n        onRenderExpandedCard,\n        renderData: item,\n        compactCardHeight: 320,\n        expandedCardHeight: target ? 320 : 40\n      }\n      const fieldContent = item[column.fieldName!];\n      let bgColor: [number, number, number] = [255, 255, 255];\n      switch (column.key) {\n        case 'type':\n          return <div>\n            <Icon iconName={getIconNameByFieldType(fieldContent)} /> {fieldContent}\n          </div>\n        case 'entropy':\n        case 'maxEntropy':\n          bgColor = getValueColor(item[column.key], entropyRange);\n          let bgColorStr = `rgb(${bgColor.join(',')})`\n          let fontColorStr = `rgb(${contrastColor(bgColor).join(',')})`\n          return (\n            <HoverCard expandedCardOpenDelay={800} expandingCardProps={expandingCardProps} instantOpenOnClick={true}>\n              <div style={{ boxShadow: `${bgColorStr} 0px 0px 0px 10px`, backgroundColor: bgColorStr, color: fontColorStr }}>{fieldContent}</div>\n            </HoverCard>\n          )\n        default:\n          return <HoverCard expandedCardOpenDelay={800} expandingCardProps={expandingCardProps} instantOpenOnClick={true}>\n          <div>{fieldContent}</div>\n        </HoverCard>\n      }\n    }\n  }\n\n  // const onRenderRow: IRenderFunction<any> = (props) => {\n  //   const customStyles: Partial<IDetailsRowStyles> = {};\n  //   customStyles.root = { backgroundColor: getValueColor(props.item['entropy'], entropyRange), color: '#fff' }\n  //   return <DetailsRow {...props} styles={customStyles} />;\n  // };\n\n  return <DetailsList compact={true} columns={columns} items={originSummary} selectionMode={SelectionMode.none} onRenderItemColumn={renderItemColumn} />\n}\n\nexport default FieldAnalsis;","import React, { useRef, useMemo, useEffect, useState } from 'react';\nimport { Subspace } from '../../service';\nimport embed from 'vega-embed';\nimport { DataSource } from '../../global';\n\nfunction encodeArr (arr: any[]): string {\n  return arr.join(',')\n}\ninterface SubspacesProps {\n  subspaceList: Subspace[];\n  onSpaceChange: (dimensions: string[], measures: string[], matrix: number[][]) => void\n}\nconst Subspaces: React.FC<SubspacesProps> = (props) => {\n  const { subspaceList, onSpaceChange } = props;\n  const [curIndex, setCurIndex] = useState(0);\n  const spaceChart = useRef<HTMLDivElement>(null)\n  const relationChart = useRef<HTMLDivElement>(null)\n  // const subspaces = useMemo<IndexSubspace[]>(() => {\n  //   return subspaceList.map((space, index) => {\n  //     return {\n  //       ...space,\n  //       index\n  //     }\n  //   })\n  // }, [subspaceList]);\n  useEffect(() => {\n    let index = subspaceList.length - 1;\n    if (index > -1) {\n      let targetSpace = subspaceList[index];\n      onSpaceChange(targetSpace.dimensions, targetSpace.measures.map(m => m.name), targetSpace.correlationMatrix);\n      setCurIndex(index);\n    }\n  }, [subspaceList, onSpaceChange])\n\n  const values = useMemo<DataSource>(() => {\n    let ans = [];\n    // todos:\n    // the fold operation here is a tmp solution. it is designed when I don't there is a api in vega to handle event listener.\n    // the fold operation here can caused a wasted of time and space.\n    // I suggested to divied it into two charts and connect the logic throgh a state manager outside the charts.\n    for (let i = 0; i < subspaceList.length; i++) {\n      let space = subspaceList[i];\n      let dimensions = encodeArr(space.dimensions)\n      for (let { name, value } of space.measures) {\n        let record: any = {\n          test: i,\n          score: space.score,\n          dimensions,\n          measureName: name,\n          measureValue: value,\n        };\n        ans.push(record)\n      }\n    }\n    return ans\n  }, [subspaceList])\n  useEffect(() => {\n    if (spaceChart.current && subspaceList.length > 0) {\n      embed(spaceChart.current, {\n        data: {\n          values\n        },\n        vconcat: [\n          {\n            mark: 'rect',\n            selection: {\n              dim: {\n                type: 'single',\n                on: 'click',\n                encodings: ['y']\n              }\n            },\n            encoding: {\n              x: { field: 'measureName', type: 'nominal' },\n              y: {\n                field: 'dimensions',\n                type: 'ordinal',\n                sort: { field: 'score' }\n              },\n              color: { field: 'measureValue', type: 'quantitative', aggregate: 'mean', scale: { reverse: true } },\n              opacity: {\n                condition: {selection: 'dim', value: 1},\n                value: 0.72\n              },\n            }\n          }\n        ]\n      }).then(res => {\n        res.view.addEventListener('click', function (e, item) {\n          if (item) {\n            /**\n             * record is the data record(defiend in `values`) the event contains.\n             */\n            let record = item.datum;\n            let index = subspaceList.findIndex(space => encodeArr(space.dimensions) === record.dimensions)\n\n            if (index > -1) {\n              let targetSpace = subspaceList[index];\n              onSpaceChange(targetSpace.dimensions, targetSpace.measures.map(m => m.name), targetSpace.correlationMatrix);\n              setCurIndex(index);\n            }\n          }\n        })\n      })\n    }\n    // eslint-disable-next-line\n  }, [subspaceList, values])\n  useEffect(() => {\n    let space = subspaceList[curIndex];\n    if (relationChart.current && subspaceList.length > 0 && space) {\n      let matrix: DataSource = [];\n      \n      for (let i = 0; i < space.correlationMatrix.length; i++) {\n          for (let j = 0; j < space.correlationMatrix[i].length; j++) {\n            matrix.push({\n              x: space.measures[i].name,\n              y: space.measures[j].name,\n              correlation: space.correlationMatrix[i][j]\n            })\n          }\n        }\n      embed(relationChart.current, {\n        data: {\n          values: matrix\n        },\n        mark: 'rect',\n        encoding: {\n          x: { field: 'x', type: 'nominal' },\n          y: { field: 'y', type: 'nominal' },\n          color: { field: 'correlation', type: 'quantitative', aggregate: 'mean' , scale: { scheme: 'redyellowgreen', domain: [-1, 1] } }\n        }\n      })\n    }\n    \n  }, [subspaceList, curIndex])\n  return <div>\n    <div ref={spaceChart}></div>\n    <div ref={relationChart}></div>\n  </div>\n}\n\nexport default Subspaces;","import React, { useEffect, useMemo, useRef } from 'react';\nimport { Cluster } from 'visual-insights';\nimport { useGlobalState } from '../../state';\nimport embed from 'vega-embed';\n// cluster should be used for small graph because the number of measure is limited. \n// Browser may be more likely crashed by other algorithm or data structure or memory used in the whole analysis pipline.\n/**\n * adjMatrix and measures share a common index system;\n */\ninterface ClusterBoardProps {\n  adjMatrix: number[][];\n  measures: string[];\n  onFocusGroup: (measuresInView: string[]) => void;\n}\n\ninterface VegaEdge {\n  source: number | string;\n  target: number | string;\n  value: number;\n  inCutEdge: boolean;\n}\ninterface VegaNode {\n  name: string;\n  index: number;\n  value: number;\n  group: number;\n}\ninterface TreeData { \n  nodes: VegaNode[];\n  edges: VegaEdge[]\n}\nconst ClusterBoard: React.FC<ClusterBoardProps> = (props) => {\n  const { adjMatrix, measures, onFocusGroup } = props;\n  const [state, ] = useGlobalState();\n  const chart = useRef<HTMLDivElement>(null);\n  // const groups = useMemo<string[][]>(() => {\n  //   return clusterMeasures({\n  //     matrix: adjMatrix,\n  //     measures,\n  //   })\n  // }, [adjMatrix, measures]);\n  const clusterResult = useMemo(() => {\n    /**\n     * todo: \n     * maxGroupNumber = the measures length / max visual channel for measure.\n     */\n    let { edgesInMST, groups } = Cluster.kruskalWithFullMST(adjMatrix, state.maxGroupNumber);\n    return { edgesInMST, groups }\n  }, [adjMatrix, state.maxGroupNumber])\n  const treeData = useMemo<TreeData>(() => {\n    let { edgesInMST, groups } = clusterResult;\n    const edges: VegaEdge[] = edgesInMST.map(edge => {\n      return {\n        source: edge[0][0],\n        target: edge[0][1],\n        value: 1 / edge[1],\n        inCutEdge: edge[2]\n      }\n    });\n    const nodes: VegaNode[] = [];\n    for (let i = 0; i < groups.length; i++) {\n      nodes.push({\n        name: measures[i],\n        index: i,\n        value: 1,\n        group: groups[i]\n      })\n    }\n    return {\n      nodes,\n      edges\n    }\n  }, [measures, clusterResult])\n  useEffect(() => {\n    if (chart.current && measures.length > 0) {\n      embed(chart.current, {\n        \"$schema\": \"https://vega.github.io/schema/vega/v5.json\",\n        \"width\": 700,\n        \"height\": 500,\n        \"padding\": 0,\n        \"autosize\": \"none\",\n      \n        \"signals\": [\n          { \"name\": \"cx\", \"update\": \"width / 2\" },\n          { \"name\": \"cy\", \"update\": \"height / 2\" },\n          {\n            \"description\": \"State variable for active node fix status.\",\n            \"name\": \"fix\", \"value\": false,\n            \"on\": [\n              {\n                \"events\": \"text:mouseout[!event.buttons], window:mouseup\",\n                \"update\": \"false\"\n              },\n              {\n                \"events\": \"text:mouseover\",\n                \"update\": \"fix || true\"\n              },\n              {\n                \"events\": \"[text:mousedown, window:mouseup] > window:mousemove!\",\n                \"update\": \"xy()\",\n                \"force\": true\n              }\n            ]\n          },\n          {\n            \"description\": \"Graph node most recently interacted with.\",\n            \"name\": \"node\", \"value\": null,\n            \"on\": [\n              {\n                \"events\": \"text:mouseover\",\n                \"update\": \"fix === true ? item() : node\"\n              }\n            ]\n          },\n          {\n            \"description\": \"Flag to restart Force simulation upon data changes.\",\n            \"name\": \"restart\", \"value\": false,\n            \"on\": [\n              {\"events\": {\"signal\": \"fix\"}, \"update\": \"fix && fix.length\"}\n            ]\n          }\n        ],\n      \n        \"data\": [\n          {\n            \"name\": \"node-data\",\n            values: treeData.nodes,\n          },\n          {\n            \"name\": \"link-data\",\n            values: treeData.edges\n          }\n        ],\n      \n        \"scales\": [\n          {\n            \"name\": \"color\",\n            \"type\": \"ordinal\",\n            \"domain\": {\"data\": \"node-data\", \"field\": \"group\"},\n            \"range\": {\"scheme\": \"tableau20\"}\n          },\n          {\n            \"name\": \"colorEdge\",\n            \"type\": \"quantize\",\n            \"domain\": {\"data\": \"link-data\", \"field\": \"value\"},\n            \"range\": {\"scheme\": \"viridis\"}\n          }\n        ],\n      \n        \"marks\": [\n          {\n            \"name\": \"nodes\",\n            \"type\": \"text\",\n            \"zindex\": 1,\n      \n            \"from\": {\"data\": \"node-data\"},\n            \"on\": [\n              {\n                \"trigger\": \"fix\",\n                \"modify\": \"node\",\n                \"values\": \"fix === true ? {fx: node.x, fy: node.y} : {fx: fix[0], fy: fix[1]}\"\n              },\n              {\n                \"trigger\": \"!fix\",\n                \"modify\": \"node\", \"values\": \"{fx: null, fy: null}\"\n              }\n            ],\n      \n            \"encode\": {\n              \"enter\": {\n                \"fill\": {\"scale\": \"color\", \"field\": \"group\"},\n                \"text\": {\"field\": \"name\"},\n                \"fontSize\": {\"value\": 14},\n                \"fontWeight\": {\"value\": 600}\n              },\n              \"update\": {\n                \"cursor\": {\"value\": \"pointer\"}\n              }\n            },\n      \n            \"transform\": [\n              {\n                \"type\": \"force\",\n                \"iterations\": 300,\n                \"restart\": {\"signal\": \"restart\"},\n                \"signal\": \"force\",\n                \"forces\": [\n                  {\"force\": \"center\", \"x\": {\"signal\": \"cx\"}, \"y\": {\"signal\": \"cy\"}},\n                  {\"force\": \"collide\" },\n                  {\"force\": \"nbody\" },\n                  {\"force\": \"link\", \"links\": \"link-data\" }\n                ]\n              }\n            ]\n          },\n          {\n            \"type\": \"path\",\n            \"from\": {\"data\": \"link-data\"},\n            \"interactive\": false,\n            \"encode\": {\n              \"update\": {\n                \"stroke\": {\n                  \"scale\": \"colorEdge\",\n                  \"field\": \"value\"\n                },\n                \"strokeWidth\": {\"value\": 0.8},\n                \"opacity\": {\"value\": 0.5}\n              },\n            },\n            \"transform\": [\n              {\n                \"type\": \"linkpath\",\n                \"require\": {\"signal\": \"force\"},\n                \"shape\": \"line\",\n                \"sourceX\": \"datum.source.x\", \"sourceY\": \"datum.source.y\",\n                \"targetX\": \"datum.target.x\", \"targetY\": \"datum.target.y\"\n              }\n            ]\n          }\n        ]\n      }).then(res => {\n        res.view.addEventListener('click', function (e, item) {\n          if (item) {\n            let record = item.datum;\n            let group = record.group;\n            let measuresInView = measures.filter((mea, index) => {\n              return clusterResult.groups[index] === group\n            });\n            onFocusGroup(measuresInView);\n          }\n        })\n      })\n    }\n  }, [treeData, measures, clusterResult.groups, onFocusGroup])\n  return <div ref={chart}>\n  </div>\n}\n\nexport default ClusterBoard;","import React, { useMemo, useState, useEffect, useCallback } from 'react';\nimport intl from 'react-intl-universal';\nimport { DataSource, Field } from '../../global';\nimport FieldAnalysisBoard from './fieldAnalysis';\nimport Subspaces from './subspaces';\nimport { FieldSummary, Subspace, combineFieldsService } from '../../service';\nimport ClusterBoard from './cluster';\nimport { specification } from 'visual-insights';\nimport { ProgressIndicator, Toggle, Slider } from 'office-ui-fabric-react';\nimport { useGlobalState } from '../../state';\nimport VegaBase from '../../visBuilder/vegaBase';\nimport './index.css';\nconst maxMeasureInView = 4;\ninterface NoteBookProps {\n  dataSource: DataSource;\n  // dimScores: [string, number, number, Field][],\n  summary: {\n    origin: FieldSummary[];\n    grouped: FieldSummary[]\n  };\n  subspaceList: Subspace[]\n}\ninterface ClusterState {\n  measures: string[];\n  dimensions: string[];\n  matrix: number[][];\n}\nconst NoteBook: React.FC<NoteBookProps> = (props) => {\n  const { summary, subspaceList, dataSource } = props;\n  const [state, updateState] = useGlobalState();\n  const [isAggregated, setIsAggregated] = useState(true);\n  \n  const [clusterState, setClusterState] = useState<ClusterState>({\n    measures: [],\n    dimensions: [],\n    matrix: []\n  })\n\n  const [measuresInView, setMeasuresInView] = useState<string[]>([]);\n\n\n  // todo:\n  // should be updated after designing new specification api\n  const dimScores = useMemo<[string, number, number, Field][]>(() => {\n    return [...summary.origin, ...summary.grouped].map(field => {\n      return [field.fieldName, field.entropy, field.maxEntropy, { name: field.fieldName, type: field.type }]\n    });\n  }, [summary.origin, summary.grouped])\n\n  const spec = useMemo(() => {\n    const { dimensions } = clusterState;\n    // todo\n    // this condition is not strict enough. dimScores should share same elements with dimensions and measures.\n    // maybe use try catch in future\n    try {\n      /**\n       * fieldScores is the scores info for the dims and meas in current view.\n       * dimensions should get the grouped new field.\n       * measures shall never use the grouped field.\n       */\n      const fieldScores = dimScores.filter(field => {\n        return dimensions.includes(field[0]) || measuresInView.includes(field[0])\n      })\n      const { schema } = specification(fieldScores, dataSource, dimensions, measuresInView)\n      return schema;\n    } catch (error) {\n      console.log(error)\n      return {\n        position: []\n      }\n    }\n\n  }, [dimScores, clusterState, dataSource, measuresInView])\n\n  const usedSubspaceList = useMemo<Subspace[]>(() => {\n    return subspaceList.slice(0, Math.round(subspaceList.length * state.topK.subspacePercentSize))\n  }, [subspaceList, state.topK.subspacePercentSize]);\n  useEffect(() => {\n    updateState(draft => {\n      draft.maxGroupNumber = Math.round(state.cookedMeasures.length / maxMeasureInView)\n    })\n  }, [state.cookedMeasures, updateState])\n\n  const onSpaceChange = useCallback((dimensions, measures, matrix) => {\n    setClusterState({\n      dimensions,\n      measures,\n      matrix\n    });\n  }, [setClusterState])\n\n  const onFocusGroup = useCallback(measInView => {\n    setMeasuresInView(measInView);\n  }, [])\n  return (\n    <div>\n      <h3 className=\"notebook header\">{intl.get('noteBook.univariate.title')}</h3>\n      <p className=\"state-description\">{intl.get('noteBook.univariate.desc')}</p>\n      {state.loading.univariateSummary && <ProgressIndicator description=\"analyzing\" />}\n      <div className=\"notebook content container\">\n        <FieldAnalysisBoard originSummary={summary.origin} groupedSummary={summary.grouped} />\n      </div>\n\n      <h3 className=\"notebook header\">{intl.get('noteBook.subspace.title')}</h3>\n      <p className=\"state-description\">{intl.get('noteBook.subspace.desc')}</p>\n      {state.loading.subspaceSearching && <ProgressIndicator description=\"analyzing\" />}\n      {!state.loading.univariateSummary && (\n        <Slider\n          disabled={state.loading.subspaceSearching}\n          value={state.topK.dimensionSize * 100}\n          label={intl.get('noteBook.subspace.topKDimension')}\n          max={100}\n          valueFormat={(value: number) => `${value}%`}\n          showValue={true}\n          onChange={(value: number) => {\n            updateState((draft) => {\n              draft.topK.dimensionSize = value / 100\n              draft.loading.subspaceSearching = true\n            })\n            const selectedDimensions = state.cookedDimensions.slice(\n              0,\n              Math.round((state.cookedDimensions.length * value) / 100)\n            )\n            combineFieldsService(dataSource, selectedDimensions, state.cookedMeasures, 'sum', state.useServer).then(\n              (subspaces) => {\n                if (subspaces) {\n                  updateState((draft) => {\n                    draft.subspaceList = subspaces\n                    draft.loading.subspaceSearching = false\n                  })\n                }\n              }\n            )\n          }}\n        />\n      )}\n      {!state.loading.univariateSummary && (\n        <Slider\n          disabled={state.loading.subspaceSearching}\n          value={state.topK.subspacePercentSize * 100}\n          label={intl.get('noteBook.subspace.topKSubspace')}\n          max={100}\n          valueFormat={(value: number) => `${value}%`}\n          showValue={true}\n          onChange={(value: number) => {\n            updateState((draft) => {\n              draft.topK.subspacePercentSize = value / 100\n            })\n          }}\n        />\n      )}\n      <div className=\"notebook content center container\">\n        <Subspaces subspaceList={usedSubspaceList} onSpaceChange={onSpaceChange} />\n      </div>\n\n      <h3 className=\"notebook header\">{intl.get('noteBook.clustering.title')}</h3>\n      <p className=\"state-description\">{intl.get('noteBook.clustering.desc')}</p>\n      <Slider\n        label={intl.get('noteBook.clustering.maxGroupNum')}\n        min={1}\n        max={state.cookedMeasures.length || 4}\n        step={1}\n        // defaultValue={clusterState.measures.length / 4}\n        value={state.maxGroupNumber}\n        showValue={true}\n        onChange={(value: number) => {\n          updateState((draft) => {\n            draft.maxGroupNumber = value\n          })\n        }}\n      />\n      <div className=\"notebook content center container\">\n        <ClusterBoard adjMatrix={clusterState.matrix} measures={clusterState.measures} onFocusGroup={onFocusGroup} />\n      </div>\n\n      <h3 className=\"notebook header\">{intl.get('noteBook.vis.title')}</h3>\n      <p className=\"state-description\">{intl.get('noteBook.vis.desc')}</p>\n      <Toggle\n        checked={isAggregated}\n        label={intl.get('noteBook.vis.aggMea')}\n        defaultChecked\n        onText=\"On\"\n        offText=\"Off\"\n        onChange={(e, checked: boolean | undefined) => {\n          setIsAggregated(!!checked)\n        }}\n      />\n      <div className=\"notebook content center container\">\n        <VegaBase\n          defaultAggregated={isAggregated}\n          defaultStack={true}\n          aggregator={'sum'}\n          schema={spec}\n          fieldFeatures={dimScores.map((dim) => dim[3])}\n          dataSource={dataSource}\n          dimensions={clusterState.dimensions}\n          measures={measuresInView}\n        />\n      </div>\n    </div>\n  )\n}\n\nexport default NoteBook;","import React from \"react\";\nimport styled from \"styled-components\";\n\nexport const FieldListContainer: React.FC<{ name: string }> = (props) => {\n  return (\n    <FieldListSegment>\n      <div className=\"fl-header\">\n        <h4>{props.name}</h4>\n      </div>\n      <div className=\"fl-container\">{props.children}</div>\n    </FieldListSegment>\n  );\n};\n\nexport const FieldsContainer = styled.div`\n  display: flex;\n  padding: 0.2em;\n  min-height: 2.4em;\n  display: flex;\n    flex-wrap: wrap;\n    >div{\n      margin: 1px;\n    }\n`;\n\nexport const FieldListSegment = styled.div`\n  display: flex;\n  border: 1px solid #dfe3e8;\n  margin: 0.2em;\n  div.fl-header {\n    /* flex-basis: 100px; */\n    width: 100px;\n    border-right: 1px solid #dfe3e8;\n    background-color: #f5f5f5;\n    flex-shrink: 0;\n    h4 {\n      margin: 0.6em;\n      font-weight: 400;\n    }\n  }\n  div.fl-container {\n    flex-grow: 10;\n    /* display: flex;\n    flex-wrap: wrap; */\n    /* overflow-x: auto;\n    overflow-y: hidden; */\n  }\n`;\n\nexport const FieldLabel = styled.div<{ highlight?: boolean; type?: 'D' | 'M' }>`\n  padding: 0.2em 0.4em;\n  margin: 0.2em;\n  border-radius: 0.2em;\n  background-color: ${props => (props.type === 'D' ? '#2185d0' : '#21ba45')};\n  color: #fff;\n  ${(props) =>\n    props.highlight ? \"box-shadow: 0px 0px 5px 1px #21ba45\" : null};\n  position: relative;\n`;\n","import styled from 'styled-components';\n\nexport const Container = styled.div`\n  border: 1px solid #d9d9d9;\n  padding: 1em;\n  margin: 1em;\n  background-color: #fff;\n`;","import React, { useState, useEffect, useCallback } from \"react\";\nimport {\n  DragDropContext,\n  Droppable,\n  Draggable,\n  DropResult,\n  ResponderProvided,\n  DraggableLocation,\n} from \"react-beautiful-dnd\";\nimport styled from \"styled-components\";\nimport produce from \"immer\";\nimport { FieldListContainer, FieldsContainer } from \"./components\";\nimport { move, reorder } from \"./utils\";\nimport { Field } from \"../interfaces\";\nimport { Container } from '../components/container'\nimport { Pill, DropdownSelect } from '@tableau/tableau-ui';\n\nconst RootContainer = styled.div`\n  font-size: 12px;\n`;\n\nconst aggregatorList = [\n  {\n    value: \"sum\",\n    label: \"\",\n  },\n  {\n    value: \"mean\",\n    label: \"\",\n  },\n  {\n    value: \"count\",\n    label: \"\",\n  },\n];\n\nexport interface DraggableFieldState {\n  fields: Field[];\n  rows: Field[];\n  columns: Field[];\n  color: Field[];\n  opacity: Field[];\n  size: Field[];\n}\n\n// const draggableStateKeys = Object.keys(initDraggableState) as Array<\n//   keyof DraggableFieldState\n// >;\n\nconst draggableStateKeys: Array<{\n  id: keyof DraggableFieldState;\n  name: string;\n  mode: number\n}> = [\n  { id: 'fields', name: '', mode: 0 },\n  { id: 'columns', name: '', mode: 0 },\n  { id: 'rows', name: '', mode: 0 },\n  { id: 'color', name: '', mode: 1 },\n  { id: 'opacity', name: '', mode: 1 },\n  { id: 'size', name: '', mode: 1 },\n];\n\n\ninterface DraggableFieldsProps {\n  fields: Field[];\n  onStateChange?: (state: DraggableFieldState) => void;\n}\n\nconst DraggableFields: React.FC<DraggableFieldsProps> = (props) => {\n  const { fields = [], onStateChange } = props;\n  const [state, setState] = useState<DraggableFieldState>({\n    fields: [],\n    rows: [],\n    columns: [],\n    color: [],\n    opacity: [],\n    size: []\n  });\n  useEffect(() => {\n    setState({\n      fields,\n      rows: [],\n      columns: [],\n      color: [],\n      opacity: [],\n      size: [],\n    });\n  }, [fields]);\n  useEffect(() => {\n    if (onStateChange) {\n      onStateChange(state);\n    }\n  }, [state, onStateChange]);\n  const onDragEnd = useCallback(\n    (result: DropResult, provided: ResponderProvided) => {\n      if (!result.destination) {\n        return;\n      }\n      const destination = result.destination as DraggableLocation;\n      if (destination.droppableId === result.source.droppableId) {\n        if (destination.index === result.source.index) return;\n        setState((state) => {\n          let listKey = destination\n            .droppableId as keyof DraggableFieldState;\n          let newList = reorder(\n            state[listKey],\n            result.source.index,\n            destination.index\n          );\n          return {\n            ...state,\n            [listKey]: newList,\n          };\n        });\n      } else {\n        setState((state) => {\n          let sourceKey = result.source\n            .droppableId as keyof DraggableFieldState;\n          let targetKey = destination\n            .droppableId as keyof DraggableFieldState;\n          let { originList, targetList } = move(\n            state[sourceKey],\n            result.source.index,\n            state[targetKey],\n            destination.index\n          );\n          return {\n            ...state,\n            [sourceKey]: originList,\n            [targetKey]: targetList,\n          };\n        });\n      }\n    },\n    [setState]\n  );\n  return (\n    <RootContainer>\n      <DragDropContext onDragEnd={onDragEnd}>\n        {draggableStateKeys\n          .filter((d) => d.mode === 0)\n          .map((dkey) => (\n            <FieldListContainer name={dkey.name} key={dkey.id}>\n              <Droppable droppableId={dkey.id} direction=\"horizontal\">\n                {(provided, snapshot) => (\n                  <FieldsContainer\n                    {...provided.droppableProps}\n                    ref={provided.innerRef}\n                  >\n                    {state[dkey.id].map((f, index) => (\n                      <Draggable key={f.id} draggableId={f.id} index={index}>\n                        {(provided, snapshot) => {\n                          return (\n                            <Pill\n                              ref={provided.innerRef}\n                              // type={f.type}\n                              kind={f.type === 'D' ? 'discrete' : 'continuous'}\n                              {...provided.draggableProps}\n                              {...provided.dragHandleProps}\n                            >\n                              {f.name}&nbsp;\n                              {f.type === 'M' && (\n                                <DropdownSelect\n                                  kind=\"text\"\n                                  style={{ float: 'right' }}\n                                  value={f.aggName || ''}\n                                  onChange={(e) => {\n                                    setState((state) => {\n                                      const nextState = produce<\n                                        DraggableFieldState\n                                      >(state, (draft) => {\n                                        draft[dkey.id][index].aggName = e.target.value;\n                                      });\n                                      return nextState;\n                                    });\n                                  }}\n                                >\n                                  {\n                                    aggregatorList.map(op => <option value={op.value} key={op.value}>{op.label}</option>)\n                                  }\n                                </DropdownSelect>\n                              )}\n                            </Pill>\n                          );\n                        }}\n                      </Draggable>\n                    ))}\n                  </FieldsContainer>\n                )}\n              </Droppable>\n            </FieldListContainer>\n          ))}\n        <div style={{ position: 'relative' }}>\n          <Container style={{ position: 'absolute', width: 300, right: 0, top: 0 }}>\n            {draggableStateKeys\n              .filter((d) => d.mode === 1)\n              .map((dkey) => (\n                <FieldListContainer name={dkey.name} key={dkey.id}>\n                  <Droppable droppableId={dkey.id} direction=\"horizontal\">\n                    {(provided, snapshot) => (\n                      <FieldsContainer\n                        {...provided.droppableProps}\n                        ref={provided.innerRef}\n                      >\n                        {state[dkey.id].map((f, index) => (\n                          <Draggable\n                            key={f.id}\n                            draggableId={f.id}\n                            index={index}\n                          >\n                            {(provided, snapshot) => {\n                              return (\n                                <Pill\n                                  ref={provided.innerRef}\n                                  // type={f.type}\n                                  kind={f.type === 'D' ? 'discrete' : 'continuous'}\n                                  {...provided.draggableProps}\n                                  {...provided.dragHandleProps}\n                                >\n                                  {f.name}&nbsp;\n                                  {f.type === 'M' && (\n                                    <DropdownSelect\n                                      kind=\"text\"\n                                      style={{ float: 'right' }}\n                                      value={f.aggName || ''}\n                                      onChange={(e) => {\n                                        setState((state) => {\n                                          const nextState = produce<\n                                            DraggableFieldState\n                                          >(state, (draft) => {\n                                            draft[dkey.id][index].aggName =\n                                              e.target.value;\n                                          });\n                                          return nextState;\n                                        });\n                                      }}\n                                    >\n                                      {aggregatorList.map((op) => (\n                                        <option value={op.value} key={op.value}>\n                                          {op.label}\n                                        </option>\n                                      ))}\n                                    </DropdownSelect>\n                                  )}\n                                </Pill>\n                              );\n                            }}\n                          </Draggable>\n                        ))}\n                      </FieldsContainer>\n                    )}\n                  </Droppable>\n                </FieldListContainer>\n              ))}\n          </Container>\n        </div>\n      </DragDropContext>\n    </RootContainer>\n  );\n};\n\nexport default DraggableFields;\n","export function reorder(\n  list: any[],\n  originalIndex: number,\n  targetIndex: number\n): any[] {\n  const nextList = [...list];\n  nextList.splice(originalIndex, 1);\n  nextList.splice(targetIndex, 0, list[originalIndex]);\n  return nextList;\n}\n\nexport interface movedLists {\n  originList: any[];\n  targetList: any[];\n}\n\nexport function move(\n  originalList: any[],\n  originIndex: number,\n  targetList: any[],\n  targetIndex: number\n): movedLists {\n  let newOriginalList = [...originalList];\n  let [removed] = newOriginalList.splice(originIndex, 1);\n  let newTargetList = [...targetList];\n  newTargetList.splice(targetIndex, 0, removed);\n  return {\n    originList: newOriginalList,\n    targetList: newTargetList,\n  };\n}","import React, { useEffect, useRef } from 'react';\nimport { Field, Record } from '../interfaces';\nimport embed from 'vega-embed';\nimport { Subject } from 'rxjs'\nimport * as op from 'rxjs/operators';\nimport { ScenegraphEvent } from 'vega';\nconst SELECTION_NAME = 'geom';\ninterface ReactVegaProps {\n  rows: Field[];\n  columns: Field[];\n  dataSource: Record[];\n  defaultAggregate?: boolean;\n  geomType: string;\n  color?: Field;\n  opacity?: Field;\n  size?: Field;\n  onGeomClick?: (values: any, e: any) => void\n}\nconst NULL_FIELD: Field = {\n  id: '',\n  name: '',\n  aggName: 'sum',\n  type: 'D'\n}\nconst click$ = new Subject<ScenegraphEvent>();\nconst selection$ = new Subject<any>();\nconst geomClick$ = selection$.pipe(\n  op.withLatestFrom(click$),\n  op.filter(([values, _]) => {\n    if (Object.keys(values).length > 0) {\n      return true\n    }\n    return false\n  })\n);\nfunction getFieldType (field: Field): 'quantitative' | 'nominal' | 'ordinal' | 'temporal' {\n  if (field.type === 'M') return 'quantitative';\n  return 'nominal';\n}\nconst ReactVega: React.FC<ReactVegaProps> = props => {\n  const {\n    dataSource = [],\n    rows = [],\n    columns = [],\n    defaultAggregate = true,\n    geomType,\n    color,\n    opacity,\n    size,\n    onGeomClick\n  } = props;\n  const container = useRef<HTMLDivElement>(null);\n  useEffect(() => {\n    const clickSub = geomClick$.subscribe(([values, e]) => {\n      if (onGeomClick) {\n        onGeomClick(values, e);\n      }\n    })\n    return () => {\n      clickSub.unsubscribe();\n    }\n  }, []);\n  useEffect(() => {\n    if (container.current) {\n      const yField = rows.length > 0 ? rows[rows.length - 1] : NULL_FIELD;\n      const xField = columns.length > 0 ? columns[columns.length - 1] : NULL_FIELD;\n      const rowField = rows.length > 1 ? rows[rows.length - 2] : NULL_FIELD;\n      const columnField = columns.length > 1 ? columns[columns.length - 2] : NULL_FIELD;\n      const dimensions = [...rows, ...columns, color, opacity, size].filter(f => Boolean(f)).map(f => (f as Field).id)\n      embed(container.current, {\n        data: {\n          values: dataSource,\n        },\n        mark: geomType as any,\n        selection: {\n          [SELECTION_NAME]: {\n            type: 'single',\n            fields: dimensions\n          }\n        },\n        encoding: {\n          x: {\n            field: xField.id,\n            type: getFieldType(xField),\n            aggregate:\n              xField.type === 'M' &&\n              defaultAggregate &&\n              (xField.aggName as any),\n          },\n          y: {\n            field: yField.id,\n            type: getFieldType(yField),\n            aggregate:\n              yField.type === 'M' &&\n              defaultAggregate &&\n              (yField.aggName as any),\n          },\n          row: rowField !== NULL_FIELD ? {\n            field: rowField.id,\n            type: getFieldType(rowField),\n          } : undefined,\n          column: columnField !== NULL_FIELD ? {\n            field: columnField.id,\n            type: getFieldType(columnField),\n          } : undefined,\n          color: color && {\n            field: color.id,\n            type: getFieldType(color)\n          },\n          opacity: opacity && {\n            field: opacity.id,\n            type: getFieldType(opacity)\n          },\n          size: size && {\n            field: size.id,\n            type: getFieldType(size)\n          }\n        },\n      }, { mode: 'vega-lite', actions: false }).then(res => {\n        res.view.addEventListener('click', (e) => {\n          click$.next(e);\n        })\n        res.view.addSignalListener(SELECTION_NAME, (name: any, values: any) => {\n          selection$.next(values);\n        });\n      });\n    }\n  }, [dataSource, rows, columns, defaultAggregate, geomType, color, opacity, size]);\n  return <div ref={container}></div>\n}\n\nexport default ReactVega;\n","export const GEMO_TYPES = [\n  {\n    value: 'bar',\n    label: '',\n  },\n  {\n    value: 'line',\n    label: '',\n  },\n  {\n    value: 'point',\n    label: '',\n  },\n  {\n    value: 'tick',\n    label: '',\n  },\n];","import styled from 'styled-components';\n\nexport const LiteForm = styled.div`\n  display: flex;\n  align-items: center;\n  .item{\n    margin: 0em 1em;\n    display: flex;\n    align-items: center;\n    >label {\n      margin-right: 4px;\n      line-height: 20px;\n      font-size: 12px;\n    }\n  }\n`;","import React from 'react';\nimport styled from 'styled-components';\nconst MenuContainer = styled.div`\n  width: 100px;\n  background-color: #fff;\n  border: 1px solid #f0f0f0;\n  position: absolute;\n  z-index: 99;\n  cursor: pointer;\n  box-shadow: 0px 0px 8px 1px rgba(0, 0, 0, 0.09);\n  border-radius: 2px;\n  padding: 4px;\n`;\ninterface ClickMenuProps {\n  x: number;\n  y: number;\n}\n\nconst ClickMenu: React.FC<ClickMenuProps> = props => {\n  const { x, y, children } = props\n  return <MenuContainer style={{ left: x + 'px', top: y + 'px' }}>\n    {\n      children\n    }\n  </MenuContainer>\n}\n\nexport default ClickMenu;\n","import { Specification } from 'visual-insights/build/esm/commonTypes';\nimport { Record, SemanticType } from '../interfaces';\nimport { deepcopy } from 'visual-insights/build/esm/utils';\nimport { IPredicate } from '../utils';\nexport type IReasonType = 'selection_dim_distribution' | 'selection_mea_distribution' | 'children_major_factor' | 'children_outlier';\nexport const geomTypeMap: { [key: string]: any } = {\n    interval: 'bar',\n    line: 'line',\n    point: 'point',\n    // density: 'rect'\n    density: 'point',\n};\nexport function baseVis(\n    query: Specification,\n    dataSource: Record[],\n    dimensions: string[],\n    measures: string[],\n    predicates: IPredicate[] | null,\n    aggregatedMeasures: Array<{ op: string; field: string; as: string }>,\n    fieldFeatures: Array<{ name: string; type: SemanticType }>,\n    type: IReasonType,\n    defaultAggregated?: boolean,\n    defaultStack?: boolean\n) {\n    const {\n        position = [],\n        color = [],\n        size = [],\n        facets = [],\n        opacity = [],\n        geomType = [],\n        page = [],\n    } = query;\n\n    function adjustField(fieldName: string): string {\n        if (defaultAggregated && measures.includes(fieldName)) {\n            let aggField = aggregatedMeasures.find((mea) => {\n                return mea.field === fieldName;\n            });\n            return aggField ? aggField.as : fieldName;\n        }\n        return fieldName;\n    }\n\n    function getFieldType(field: string): SemanticType {\n        let targetField = fieldFeatures.find((f) => f.name === field);\n        return targetField ? targetField.type : 'nominal';\n    }\n\n    // let chartWidth = 500; //container.current ? container.current.offsetWidth * 0.8 : 600;\n    const fieldMap: any = {\n        x: position[0],\n        y: position[1],\n        color: color[0],\n        size: size[0],\n        opacity: opacity[0],\n        row: facets[0],\n        column: facets[1],\n    };\n    let spec: any = {\n        // width: chartWidth,\n        data: {\n            values: dataSource,\n        },\n        transform: [],\n    };\n    let basicSpec: any = {\n        // width: chartWidth,\n        transform: [],\n        mark: {\n            type: geomType[0] && geomTypeMap[geomType[0]] ? geomTypeMap[geomType[0]] : geomType[0],\n            tooltip: true,\n        },\n        encoding: {},\n    };\n    const dimInView: string[] = [];\n    Object.values(query).forEach(fields => {\n        fields.forEach((f: any) => {\n            if (dimensions.includes(f)) dimInView.push(f);\n        })\n    })\n    if (defaultAggregated && aggregatedMeasures.length > 0) {\n        basicSpec.transform.push({\n            aggregate: [],\n            groupby: dimInView,\n        });\n    }\n    const aggMap: Map<string, string> = new Map();\n    for (let channel in fieldMap) {\n        if (fieldMap[channel]) {\n            if (getFieldType(fieldMap[channel]) === 'quantitative' && defaultAggregated) {\n                const targetField = aggregatedMeasures.find((f) => f.field === fieldMap[channel]);\n                if (targetField) {\n                    aggMap.set(targetField.field, `${targetField.op}_of_${targetField.field}`);\n                    basicSpec.transform[0].aggregate.push({\n                        op: targetField.op === 'count' ? 'sum' : targetField.op,\n                        field: targetField.field,\n                        as: `${targetField.op}_of_${targetField.field}`,\n                    });\n                }\n                // const targetField = aggregatedMeasures.find((f) => f.field === fieldMap[channel]);\n                // basicSpec.encoding[channel].aggregate = targetField ? targetField.op : 'sum';\n                // basicSpec.encoding[channel].aggregate =\n                //     basicSpec.encoding[channel].aggregate === 'count'\n                //         ? 'sum'\n                //         : basicSpec.encoding[channel].aggregate;\n            }\n            const adjField = adjustField(fieldMap[channel]);\n            basicSpec.encoding[channel] = {\n                field: aggMap.has(adjField) ? aggMap.get(adjField) : adjField,\n                type: getFieldType(fieldMap[channel]),\n            };\n            if (\n                ['x', 'y'].includes(channel) &&\n                getFieldType(fieldMap[channel]) === 'quantitative' &&\n                !defaultStack\n            ) {\n                basicSpec.encoding[channel].stack = null;\n            }\n        }\n    }\n    if (!defaultStack && opacity.length === 0) {\n        basicSpec.encoding.opacity = { value: 0.7 };\n    }\n    // TMD\n    if (predicates === null) {\n        return {\n            ...spec,\n            ...basicSpec,\n        };\n    }\n    const basicSpecFilter = deepcopy(basicSpec);\n    basicSpec.mark.opacity = 0.9;\n    basicSpec.mark.color = '#8c8c8c';\n    // basicSpecFilter.mark.color = '#f5222d';\n    basicSpecFilter.mark.opacity = 0.8;\n    basicSpecFilter.mark.size = 10;\n    if (typeof basicSpecFilter.transform === 'undefined') {\n        basicSpecFilter.transform = [];\n    }\n    basicSpecFilter.transform = [\n        ...predicates.map((pre) => {\n            const filter: any = {\n                filter: {\n                    field: pre.key,\n                },\n            };\n            if (pre.type === 'continuous') {\n                filter.filter.range = pre.range;\n            } else {\n                filter.filter.oneOf = [...pre.range.values()];\n            }\n            return filter;\n        }),\n        ...basicSpecFilter.transform,\n    ];\n    if (type !== 'selection_mea_distribution' && color.length + size.length + opacity.length + page.length > 0) {\n        spec = {\n            ...spec,\n            vconcat: [basicSpec, basicSpecFilter],\n        };\n    } else {\n        if (basicSpecFilter.encoding.color) {\n            basicSpecFilter.encoding.color = { value: 'grey' };\n        }\n        spec = {\n            ...spec,\n            layer: [basicSpec, basicSpecFilter],\n        };\n    }\n    return spec;\n}\n","\nimport worker from \"!!../../../../../../node_modules/worker-loader/dist/runtime/inline.js\";\n\nexport default function Worker_fn() {\n  return worker(\"!function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){\\\"undefined\\\"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:\\\"Module\\\"}),Object.defineProperty(e,\\\"__esModule\\\",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&\\\"object\\\"===typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,\\\"default\\\",{enumerable:!0,value:e}),2&t&&\\\"string\\\"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,\\\"a\\\",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p=\\\"./\\\",n(n.s=10)}([function(e,t,n){e.exports=n(9)},function(e,t,n){\\\"use strict\\\";this&&this.__assign;Object.defineProperty(t,\\\"__esModule\\\",{value:!0});var r=n(5),i=n(8),a=n(3),o={sum:a.sum_unsafe,mean:a.mean,count:a.count};function u(e){var t=e.type,n=e.aggFunc,i=void 0===n?a.count:n,o=e.factTable,u=void 0===o?[]:o,s=e.dimensions,c=void 0===s?[]:s,f=e.measures,h=void 0===f?[]:f;switch(t){case\\\"period\\\":return new r.periodCube({aggFunc:i,factTable:u,dimensions:c,measures:h});case\\\"moment\\\":default:return new r.momentCube({aggFunc:i,factTable:u,dimensions:c,measures:h})}}t.createCube=u,t.default=function(e){var t=e.dimensions,n=e.measures,r=e.asFields,s=e.operator,c=e.dataSource,f=u({type:\\\"moment\\\",aggFunc:o[s]||a.count,dimensions:t,measures:n,factTable:c}),h=i.tree2Table({dimensions:t,measures:n,cube:f});return h.forEach((function(e){r.forEach((function(t,r){e[t]=e[n[r]]}))})),h},function(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}(n(3))},function(e,t,n){!function(e){\\\"use strict\\\";function t(e){if(0===e.length)return 0;for(var t,n=e[0],r=0,i=1;i<e.length;i++)t=n+e[i],Math.abs(n)>=Math.abs(e[i])?r+=n-t+e[i]:r+=e[i]-t+n,n=t;return n+r}function n(e){if(0===e.length)throw new Error(\\\"mean requires at least one data point\\\");return t(e)/e.length}function r(e,t){var r,i,a=n(e),o=0;if(2===t)for(i=0;i<e.length;i++)o+=(r=e[i]-a)*r;else for(i=0;i<e.length;i++)o+=Math.pow(e[i]-a,t);return o}function i(e){if(0===e.length)throw new Error(\\\"variance requires at least one data point\\\");return r(e,2)/e.length}function a(e){if(1===e.length)return 0;var t=i(e);return Math.sqrt(t)}function o(e){if(0===e.length)throw new Error(\\\"mode requires at least one data point\\\");if(1===e.length)return e[0];for(var t=e[0],n=NaN,r=0,i=1,a=1;a<e.length+1;a++)e[a]!==t?(i>r&&(r=i,n=t),i=1,t=e[a]):i++;return n}function u(e){return e.slice().sort((function(e,t){return e-t}))}function s(e){if(0===e.length)throw new Error(\\\"min requires at least one data point\\\");for(var t=e[0],n=1;n<e.length;n++)e[n]<t&&(t=e[n]);return t}function c(e){if(0===e.length)throw new Error(\\\"max requires at least one data point\\\");for(var t=e[0],n=1;n<e.length;n++)e[n]>t&&(t=e[n]);return t}function f(e){for(var t=0,n=0;n<e.length;n++)t+=e[n];return t}function h(e,t){var n=e.length*t;if(0===e.length)throw new Error(\\\"quantile requires at least one data point.\\\");if(t<0||t>1)throw new Error(\\\"quantiles must be between 0 and 1\\\");return 1===t?e[e.length-1]:0===t?e[0]:n%1!=0?e[Math.ceil(n)-1]:e.length%2==0?(e[n-1]+e[n])/2:e[n]}function l(e,t,n,r){for(n=n||0,r=r||e.length-1;r>n;){if(r-n>600){var i=r-n+1,a=t-n+1,o=Math.log(i),u=.5*Math.exp(2*o/3),s=.5*Math.sqrt(o*u*(i-u)/i);a-i/2<0&&(s*=-1),l(e,t,Math.max(n,Math.floor(t-a*u/i+s)),Math.min(r,Math.floor(t+(i-a)*u/i+s)))}var c=e[t],f=n,h=r;for(v(e,n,t),e[r]>c&&v(e,n,r);f<h;){for(v(e,f,h),f++,h--;e[f]<c;)f++;for(;e[h]>c;)h--}e[n]===c?v(e,n,h):v(e,++h,r),h<=t&&(n=h+1),t<=h&&(r=h-1)}}function v(e,t,n){var r=e[t];e[t]=e[n],e[n]=r}function d(e,t){var n=e.slice();if(Array.isArray(t)){!function(e,t){for(var n=[0],r=0;r<t.length;r++)n.push(g(e.length,t[r]));n.push(e.length-1),n.sort(m);for(var i=[0,n.length-1];i.length;){var a=Math.ceil(i.pop()),o=Math.floor(i.pop());if(!(a-o<=1)){var u=Math.floor((o+a)/2);p(e,n[u],Math.floor(n[o]),Math.ceil(n[a])),i.push(o,u,u,a)}}}(n,t);for(var r=[],i=0;i<t.length;i++)r[i]=h(n,t[i]);return r}return p(n,g(n.length,t),0,n.length-1),h(n,t)}function p(e,t,n,r){t%1==0?l(e,t,n,r):(l(e,t=Math.floor(t),n,r),l(e,t+1,t+1,r))}function m(e,t){return e-t}function g(e,t){var n=e*t;return 1===t?e-1:0===t?0:n%1!=0?Math.ceil(n)-1:e%2==0?n-.5:n}function y(e,t){if(t<e[0])return 0;if(t>e[e.length-1])return 1;var n=function(e,t){for(var n=0,r=0,i=e.length;r<i;)t<=e[n=r+i>>>1]?i=n:r=-~n;return r}(e,t);if(e[n]!==t)return n/e.length;n++;var r=function(e,t){for(var n=0,r=0,i=e.length;r<i;)t>=e[n=r+i>>>1]?r=-~n:i=n;return r}(e,t);if(r===n)return n/e.length;var i=r-n+1;return i*(r+n)/2/i/e.length}function b(e){var t=d(e,.75),n=d(e,.25);if(\\\"number\\\"==typeof t&&\\\"number\\\"==typeof n)return t-n}function w(e){return+d(e,.5)}function M(e){for(var t=w(e),n=[],r=0;r<e.length;r++)n.push(Math.abs(e[r]-t));return w(n)}function S(e,t){t=t||Math.random;for(var n,r,i=e.length;i>0;)r=Math.floor(t()*i--),n=e[i],e[i]=e[r],e[r]=n;return e}function E(e,t){return S(e.slice(),t)}function k(e,t,n){return E(e,n).slice(0,t)}function x(e,t){for(var n=[],r=0;r<e;r++){for(var i=[],a=0;a<t;a++)i.push(0);n.push(i)}return n}function _(e){for(var t,n=0,r=0;r<e.length;r++)0!==r&&e[r]===t||(t=e[r],n++);return n}function D(e,t,n,r){var i;if(e>0){var a=(n[t]-n[e-1])/(t-e+1);i=r[t]-r[e-1]-(t-e+1)*a*a}else i=r[t]-n[t]*n[t]/(t+1);return i<0?0:i}function O(e,t,n,r,i,a,o){if(!(e>t)){var u=Math.floor((e+t)/2);r[n][u]=r[n-1][u-1],i[n][u]=u;var s=n;e>n&&(s=Math.max(s,i[n][e-1]||0)),s=Math.max(s,i[n-1][u]||0);var c,f,h,l=u-1;t<r[0].length-1&&(l=Math.min(l,i[n][t+1]||0));for(var v=l;v>=s&&!((c=D(v,u,a,o))+r[n-1][s-1]>=r[n][u]);--v)(f=D(s,u,a,o)+r[n-1][s-1])<r[n][u]&&(r[n][u]=f,i[n][u]=s),s++,(h=c+r[n-1][v-1])<r[n][u]&&(r[n][u]=h,i[n][u]=v);O(e,u-1,n,r,i,a,o),O(u+1,t,n,r,i,a,o)}}function T(e,t){if(e.length!==t.length)throw new Error(\\\"sampleCovariance requires samples with equal lengths\\\");if(e.length<2)throw new Error(\\\"sampleCovariance requires at least two data points in each sample\\\");for(var r=n(e),i=n(t),a=0,o=0;o<e.length;o++)a+=(e[o]-r)*(t[o]-i);return a/(e.length-1)}function N(e){if(e.length<2)throw new Error(\\\"sampleVariance requires at least two data points\\\");return r(e,2)/(e.length-1)}function z(e){var t=N(e);return Math.sqrt(t)}function I(e,t,n,r){return(e*t+n*r)/(t+r)}function j(e){if(0===e.length)throw new Error(\\\"meanSimple requires at least one data point\\\");return f(e)/e.length}function C(e){if(0===e.length)throw new Error(\\\"rootMeanSquare requires at least one data point\\\");for(var t=0,n=0;n<e.length;n++)t+=Math.pow(e[n],2);return Math.sqrt(t/e.length)}var F=function(){this.totalCount=0,this.data={}};F.prototype.train=function(e,t){for(var n in this.data[t]||(this.data[t]={}),e){var r=e[n];void 0===this.data[t][n]&&(this.data[t][n]={}),void 0===this.data[t][n][r]&&(this.data[t][n][r]=0),this.data[t][n][r]++}this.totalCount++},F.prototype.score=function(e){var t,n={};for(var r in e){var i=e[r];for(t in this.data)n[t]={},this.data[t][r]?n[t][r+\\\"_\\\"+i]=(this.data[t][r][i]||0)/this.totalCount:n[t][r+\\\"_\\\"+i]=0}var a={};for(t in n)for(var o in a[t]=0,n[t])a[t]+=n[t][o];return a};var P=function(){this.weights=[],this.bias=0};P.prototype.predict=function(e){if(e.length!==this.weights.length)return null;for(var t=0,n=0;n<this.weights.length;n++)t+=this.weights[n]*e[n];return(t+=this.bias)>0?1:0},P.prototype.train=function(e,t){if(0!==t&&1!==t)return null;e.length!==this.weights.length&&(this.weights=e,this.bias=1);var n=this.predict(e);if(\\\"number\\\"==typeof n&&n!==t){for(var r=t-n,i=0;i<this.weights.length;i++)this.weights[i]+=r*e[i];this.bias+=r}return this};var q=1e-4;function L(e){if(e<0)throw new Error(\\\"factorial requires a non-negative value\\\");if(Math.floor(e)!==e)throw new Error(\\\"factorial requires an integer input\\\");for(var t=1,n=2;n<=e;n++)t*=n;return t}var G=[.9999999999999971,57.15623566586292,-59.59796035547549,14.136097974741746,-.4919138160976202,3399464998481189e-20,4652362892704858e-20,-9837447530487956e-20,.0001580887032249125,-.00021026444172410488,.00021743961811521265,-.0001643181065367639,8441822398385275e-20,-26190838401581408e-21,36899182659531625e-22],A=Math.log(Math.sqrt(2*Math.PI)),R={1:{.995:0,.99:0,.975:0,.95:0,.9:.02,.5:.45,.1:2.71,.05:3.84,.025:5.02,.01:6.63,.005:7.88},2:{.995:.01,.99:.02,.975:.05,.95:.1,.9:.21,.5:1.39,.1:4.61,.05:5.99,.025:7.38,.01:9.21,.005:10.6},3:{.995:.07,.99:.11,.975:.22,.95:.35,.9:.58,.5:2.37,.1:6.25,.05:7.81,.025:9.35,.01:11.34,.005:12.84},4:{.995:.21,.99:.3,.975:.48,.95:.71,.9:1.06,.5:3.36,.1:7.78,.05:9.49,.025:11.14,.01:13.28,.005:14.86},5:{.995:.41,.99:.55,.975:.83,.95:1.15,.9:1.61,.5:4.35,.1:9.24,.05:11.07,.025:12.83,.01:15.09,.005:16.75},6:{.995:.68,.99:.87,.975:1.24,.95:1.64,.9:2.2,.5:5.35,.1:10.65,.05:12.59,.025:14.45,.01:16.81,.005:18.55},7:{.995:.99,.99:1.25,.975:1.69,.95:2.17,.9:2.83,.5:6.35,.1:12.02,.05:14.07,.025:16.01,.01:18.48,.005:20.28},8:{.995:1.34,.99:1.65,.975:2.18,.95:2.73,.9:3.49,.5:7.34,.1:13.36,.05:15.51,.025:17.53,.01:20.09,.005:21.96},9:{.995:1.73,.99:2.09,.975:2.7,.95:3.33,.9:4.17,.5:8.34,.1:14.68,.05:16.92,.025:19.02,.01:21.67,.005:23.59},10:{.995:2.16,.99:2.56,.975:3.25,.95:3.94,.9:4.87,.5:9.34,.1:15.99,.05:18.31,.025:20.48,.01:23.21,.005:25.19},11:{.995:2.6,.99:3.05,.975:3.82,.95:4.57,.9:5.58,.5:10.34,.1:17.28,.05:19.68,.025:21.92,.01:24.72,.005:26.76},12:{.995:3.07,.99:3.57,.975:4.4,.95:5.23,.9:6.3,.5:11.34,.1:18.55,.05:21.03,.025:23.34,.01:26.22,.005:28.3},13:{.995:3.57,.99:4.11,.975:5.01,.95:5.89,.9:7.04,.5:12.34,.1:19.81,.05:22.36,.025:24.74,.01:27.69,.005:29.82},14:{.995:4.07,.99:4.66,.975:5.63,.95:6.57,.9:7.79,.5:13.34,.1:21.06,.05:23.68,.025:26.12,.01:29.14,.005:31.32},15:{.995:4.6,.99:5.23,.975:6.27,.95:7.26,.9:8.55,.5:14.34,.1:22.31,.05:25,.025:27.49,.01:30.58,.005:32.8},16:{.995:5.14,.99:5.81,.975:6.91,.95:7.96,.9:9.31,.5:15.34,.1:23.54,.05:26.3,.025:28.85,.01:32,.005:34.27},17:{.995:5.7,.99:6.41,.975:7.56,.95:8.67,.9:10.09,.5:16.34,.1:24.77,.05:27.59,.025:30.19,.01:33.41,.005:35.72},18:{.995:6.26,.99:7.01,.975:8.23,.95:9.39,.9:10.87,.5:17.34,.1:25.99,.05:28.87,.025:31.53,.01:34.81,.005:37.16},19:{.995:6.84,.99:7.63,.975:8.91,.95:10.12,.9:11.65,.5:18.34,.1:27.2,.05:30.14,.025:32.85,.01:36.19,.005:38.58},20:{.995:7.43,.99:8.26,.975:9.59,.95:10.85,.9:12.44,.5:19.34,.1:28.41,.05:31.41,.025:34.17,.01:37.57,.005:40},21:{.995:8.03,.99:8.9,.975:10.28,.95:11.59,.9:13.24,.5:20.34,.1:29.62,.05:32.67,.025:35.48,.01:38.93,.005:41.4},22:{.995:8.64,.99:9.54,.975:10.98,.95:12.34,.9:14.04,.5:21.34,.1:30.81,.05:33.92,.025:36.78,.01:40.29,.005:42.8},23:{.995:9.26,.99:10.2,.975:11.69,.95:13.09,.9:14.85,.5:22.34,.1:32.01,.05:35.17,.025:38.08,.01:41.64,.005:44.18},24:{.995:9.89,.99:10.86,.975:12.4,.95:13.85,.9:15.66,.5:23.34,.1:33.2,.05:36.42,.025:39.36,.01:42.98,.005:45.56},25:{.995:10.52,.99:11.52,.975:13.12,.95:14.61,.9:16.47,.5:24.34,.1:34.28,.05:37.65,.025:40.65,.01:44.31,.005:46.93},26:{.995:11.16,.99:12.2,.975:13.84,.95:15.38,.9:17.29,.5:25.34,.1:35.56,.05:38.89,.025:41.92,.01:45.64,.005:48.29},27:{.995:11.81,.99:12.88,.975:14.57,.95:16.15,.9:18.11,.5:26.34,.1:36.74,.05:40.11,.025:43.19,.01:46.96,.005:49.65},28:{.995:12.46,.99:13.57,.975:15.31,.95:16.93,.9:18.94,.5:27.34,.1:37.92,.05:41.34,.025:44.46,.01:48.28,.005:50.99},29:{.995:13.12,.99:14.26,.975:16.05,.95:17.71,.9:19.77,.5:28.34,.1:39.09,.05:42.56,.025:45.72,.01:49.59,.005:52.34},30:{.995:13.79,.99:14.95,.975:16.79,.95:18.49,.9:20.6,.5:29.34,.1:40.26,.05:43.77,.025:46.98,.01:50.89,.005:53.67},40:{.995:20.71,.99:22.16,.975:24.43,.95:26.51,.9:29.05,.5:39.34,.1:51.81,.05:55.76,.025:59.34,.01:63.69,.005:66.77},50:{.995:27.99,.99:29.71,.975:32.36,.95:34.76,.9:37.69,.5:49.33,.1:63.17,.05:67.5,.025:71.42,.01:76.15,.005:79.49},60:{.995:35.53,.99:37.48,.975:40.48,.95:43.19,.9:46.46,.5:59.33,.1:74.4,.05:79.08,.025:83.3,.01:88.38,.005:91.95},70:{.995:43.28,.99:45.44,.975:48.76,.95:51.74,.9:55.33,.5:69.33,.1:85.53,.05:90.53,.025:95.02,.01:100.42,.005:104.22},80:{.995:51.17,.99:53.54,.975:57.15,.95:60.39,.9:64.28,.5:79.33,.1:96.58,.05:101.88,.025:106.63,.01:112.33,.005:116.32},90:{.995:59.2,.99:61.75,.975:65.65,.95:69.13,.9:73.29,.5:89.33,.1:107.57,.05:113.14,.025:118.14,.01:124.12,.005:128.3},100:{.995:67.33,.99:70.06,.975:74.22,.95:77.93,.9:82.36,.5:99.33,.1:118.5,.05:124.34,.025:129.56,.01:135.81,.005:140.17}},V=Math.sqrt(2*Math.PI),K={gaussian:function(e){return Math.exp(-.5*e*e)/V}},H={nrd:function(e){var t=z(e),n=b(e);return\\\"number\\\"==typeof n&&(t=Math.min(t,n/1.34)),1.06*t*Math.pow(e.length,-.2)}};function U(e,t,n){var r,i;if(void 0===t)r=K.gaussian;else if(\\\"string\\\"==typeof t){if(!K[t])throw new Error('Unknown kernel \\\"'+t+'\\\"');r=K[t]}else r=t;if(void 0===n)i=H.nrd(e);else if(\\\"string\\\"==typeof n){if(!H[n])throw new Error('Unknown bandwidth method \\\"'+n+'\\\"');i=H[n](e)}else i=n;return function(t){var n=0,a=0;for(n=0;n<e.length;n++)a+=r((t-e[n])/i);return a/i/e.length}}var W=Math.sqrt(2*Math.PI);function X(e){for(var t=e,n=e,r=1;r<15;r++)t+=n*=e*e/(2*r+1);return Math.round(1e4*(.5+t/W*Math.exp(-e*e/2)))/1e4}for(var B=[],Y=0;Y<=3.09;Y+=.01)B.push(X(Y));function $(e){var t=1/(1+.5*Math.abs(e)),n=t*Math.exp(-e*e+((((((((.17087277*t-.82215223)*t+1.48851587)*t-1.13520398)*t+.27886807)*t-.18628806)*t+.09678418)*t+.37409196)*t+1.00002368)*t-1.26551223);return e>=0?1-n:n-1}function J(e){var t=8*(Math.PI-3)/(3*Math.PI*(4-Math.PI)),n=Math.sqrt(Math.sqrt(Math.pow(2/(Math.PI*t)+Math.log(1-e*e)/2,2)-Math.log(1-e*e)/t)-(2/(Math.PI*t)+Math.log(1-e*e)/2));return e>=0?n:-n}function Q(e){if(\\\"number\\\"==typeof e)return e<0?-1:0===e?0:1;throw new TypeError(\\\"not a number\\\")}function Z(e,t){for(var n=0,r=0;r<e.length;r++){var i=e[r]-t[r];n+=i*i}return Math.sqrt(n)}function ee(e,t){return e.map((function(e){for(var n=Number.MAX_VALUE,r=-1,i=0;i<t.length;i++){var a=Z(e,t[i]);a<n&&(n=a,r=i)}return r}))}function te(e,t,n){for(var r=e[0].length,i=x(n,r),a=Array(n).fill(0),o=e.length,u=0;u<o;u++){for(var s=e[u],c=t[u],f=i[c],h=0;h<r;h++)f[h]+=s[h];a[c]+=1}for(var l=0;l<n;l++){if(0===a[l])throw new Error(\\\"Centroid \\\"+l+\\\" has no friends\\\");for(var v=i[l],d=0;d<r;d++)v[d]/=a[l]}return i}function ne(e,t){for(var n=0,r=0;r<e.length;r++)n+=Z(e[r],t[r]);return n}function re(e,t){if(e.length!==t.length)throw new Error(\\\"must have exactly as many labels as points\\\");for(var n=function(e){for(var t=1+c(e),n=Array(t),r=0;r<e.length;r++){var i=e[r];void 0===n[i]&&(n[i]=[]),n[i].push(r)}return n}(t),r=function(e){for(var t=e.length,n=x(t,t),r=0;r<t;r++)for(var i=0;i<r;i++)n[r][i]=Z(e[r],e[i]),n[i][r]=n[r][i];return n}(e),i=[],a=0;a<e.length;a++){var o=0;if(n[t[a]].length>1){var u=ae(a,n[t[a]],r),s=ie(a,t,n,r);o=(s-u)/Math.max(u,s)}i.push(o)}return i}function ie(e,t,n,r){for(var i=t[e],a=Number.MAX_VALUE,o=0;o<n.length;o++)if(o!==i){var u=ae(e,n[o],r);u<a&&(a=u)}return a}function ae(e,t,n){for(var r=0,i=0;i<t.length;i++)r+=n[e][t[i]];return r/t.length}function oe(e,t){return 0===e&&0===t?0:Math.abs((e-t)/t)}e.BayesianClassifier=F,e.PerceptronModel=P,e.addToMean=function(e,t,n){return e+(n-e)/(t+1)},e.approxEqual=function(e,t,n){return void 0===n&&(n=q),oe(e,t)<=n},e.average=n,e.averageSimple=j,e.bayesian=F,e.bernoulliDistribution=function(e){if(e<0||e>1)throw new Error(\\\"bernoulliDistribution requires probability to be between 0 and 1 inclusive\\\");return[1-e,e]},e.binomialDistribution=function(e,t){if(!(t<0||t>1||e<=0||e%1!=0)){var n=0,r=0,i=[],a=1;do{i[n]=a*Math.pow(t,n)*Math.pow(1-t,e-n),r+=i[n],a=a*(e-++n+1)/n}while(r<.9999);return i}},e.bisect=function(e,t,n,r,i){if(\\\"function\\\"!=typeof e)throw new TypeError(\\\"func must be a function\\\");for(var a=0;a<r;a++){var o=(t+n)/2;if(0===e(o)||Math.abs((n-t)/2)<i)return o;Q(e(o))===Q(e(t))?t=o:n=o}throw new Error(\\\"maximum number of iterations exceeded\\\")},e.chiSquaredDistributionTable=R,e.chiSquaredGoodnessOfFit=function(e,t,r){for(var i=0,a=t(n(e)),o=[],u=[],s=0;s<e.length;s++)void 0===o[e[s]]&&(o[e[s]]=0),o[e[s]]++;for(var c=0;c<o.length;c++)void 0===o[c]&&(o[c]=0);for(var f in a)f in o&&(u[+f]=a[f]*e.length);for(var h=u.length-1;h>=0;h--)u[h]<3&&(u[h-1]+=u[h],u.pop(),o[h-1]+=o[h],o.pop());for(var l=0;l<o.length;l++)i+=Math.pow(o[l]-u[l],2)/u[l];var v=o.length-1-1;return R[v][r]<i},e.chunk=function(e,t){var n=[];if(t<1)throw new Error(\\\"chunk size must be a positive number\\\");if(Math.floor(t)!==t)throw new Error(\\\"chunk size must be an integer\\\");for(var r=0;r<e.length;r+=t)n.push(e.slice(r,r+t));return n},e.ckmeans=function(e,t){if(t>e.length)throw new Error(\\\"cannot generate more classes than there are data values\\\");var n=u(e);if(1===_(n))return[n];var r=x(t,n.length),i=x(t,n.length);!function(e,t,n){for(var r=t[0].length,i=e[Math.floor(r/2)],a=[],o=[],u=0,s=void 0;u<r;++u)s=e[u]-i,0===u?(a.push(s),o.push(s*s)):(a.push(a[u-1]+s),o.push(o[u-1]+s*s)),t[0][u]=D(0,u,a,o),n[0][u]=0;for(var c=1;c<t.length;++c)O(c<t.length-1?c:r-1,r-1,c,t,n,a,o)}(n,r,i);for(var a=[],o=i[0].length-1,s=i.length-1;s>=0;s--){var c=i[s][o];a[s]=n.slice(c,o+1),s>0&&(o=c-1)}return a},e.combinations=function e(t,n){var r,i,a,o,u=[];for(r=0;r<t.length;r++)if(1===n)u.push([t[r]]);else for(a=e(t.slice(r+1,t.length),n-1),i=0;i<a.length;i++)(o=a[i]).unshift(t[r]),u.push(o);return u},e.combinationsReplacement=function e(t,n){for(var r=[],i=0;i<t.length;i++)if(1===n)r.push([t[i]]);else for(var a=e(t.slice(i,t.length),n-1),o=0;o<a.length;o++)r.push([t[i]].concat(a[o]));return r},e.combineMeans=I,e.combineVariances=function(e,t,n,r,i,a){var o=I(t,n,i,a);return(n*(e+Math.pow(t-o,2))+a*(r+Math.pow(i-o,2)))/(n+a)},e.cumulativeStdNormalProbability=function(e){var t=Math.abs(e),n=Math.min(Math.round(100*t),B.length-1);return e>=0?B[n]:+(1-B[n]).toFixed(4)},e.epsilon=q,e.equalIntervalBreaks=function(e,t){if(e.length<2)return e;for(var n=s(e),r=c(e),i=[n],a=(r-n)/t,o=1;o<t;o++)i.push(i[0]+a*o);return i.push(r),i},e.erf=$,e.errorFunction=$,e.extent=function(e){if(0===e.length)throw new Error(\\\"extent requires at least one data point\\\");for(var t=e[0],n=e[0],r=1;r<e.length;r++)e[r]>n&&(n=e[r]),e[r]<t&&(t=e[r]);return[t,n]},e.extentSorted=function(e){return[e[0],e[e.length-1]]},e.factorial=L,e.gamma=function e(t){if(Number.isInteger(t))return t<=0?NaN:L(t-1);if(--t<0)return Math.PI/(Math.sin(Math.PI*-t)*e(-t));var n=t+1/4;return Math.pow(t/Math.E,t)*Math.sqrt(2*Math.PI*(t+1/6))*(1+1/144/Math.pow(n,2)-1/12960/Math.pow(n,3)-257/207360/Math.pow(n,4)-52/2612736/Math.pow(n,5)+5741173/9405849600/Math.pow(n,6)+37529/18811699200/Math.pow(n,7))},e.gammaln=function(e){if(e<=0)return 1/0;e--;for(var t=G[0],n=1;n<15;n++)t+=G[n]/(e+n);var r=5.2421875+e;return A+Math.log(t)-r+(e+.5)*Math.log(r)},e.geometricMean=function(e){if(0===e.length)throw new Error(\\\"geometricMean requires at least one data point\\\");for(var t=1,n=0;n<e.length;n++){if(e[n]<=0)throw new Error(\\\"geometricMean requires only positive numbers as input\\\");t*=e[n]}return Math.pow(t,1/e.length)},e.harmonicMean=function(e){if(0===e.length)throw new Error(\\\"harmonicMean requires at least one data point\\\");for(var t=0,n=0;n<e.length;n++){if(e[n]<=0)throw new Error(\\\"harmonicMean requires only positive numbers as input\\\");t+=1/e[n]}return e.length/t},e.interquartileRange=b,e.inverseErrorFunction=J,e.iqr=b,e.kMeansCluster=function(e,t,n){void 0===n&&(n=Math.random);for(var r=null,i=k(e,t,n),a=null,o=Number.MAX_VALUE;0!==o;)r=i,o=ne(i=te(e,a=ee(e,i),t),r);return{labels:a,centroids:i}},e.kde=U,e.kernelDensityEstimation=U,e.linearRegression=function(e){var t,n,r=e.length;if(1===r)t=0,n=e[0][1];else{for(var i,a,o,u=0,s=0,c=0,f=0,h=0;h<r;h++)u+=a=(i=e[h])[0],s+=o=i[1],c+=a*a,f+=a*o;n=s/r-(t=(r*f-u*s)/(r*c-u*u))*u/r}return{m:t,b:n}},e.linearRegressionLine=function(e){return function(t){return e.b+e.m*t}},e.mad=M,e.max=c,e.maxSorted=function(e){return e[e.length-1]},e.mean=n,e.meanSimple=j,e.median=w,e.medianAbsoluteDeviation=M,e.medianSorted=function(e){return h(e,.5)},e.min=s,e.minSorted=function(e){return e[0]},e.mode=function(e){return o(u(e))},e.modeFast=function(e){for(var t,n=new Map,r=0,i=0;i<e.length;i++){var a=n.get(e[i]);void 0===a?a=1:a++,a>r&&(t=e[i],r=a),n.set(e[i],a)}if(0===r)throw new Error(\\\"mode requires at last one data point\\\");return t},e.modeSorted=o,e.numericSort=u,e.perceptron=P,e.permutationTest=function(e,t,r,i,a){if(void 0===i&&(i=1e4),void 0===r&&(r=\\\"two_side\\\"),\\\"two_side\\\"!==r&&\\\"greater\\\"!==r&&\\\"less\\\"!==r)throw new Error(\\\"`alternative` must be either 'two_side', 'greater', or 'less'\\\");for(var o=n(e)-n(t),u=new Array(i),s=e.concat(t),c=Math.floor(s.length/2),f=0;f<i;f++){S(s,a);var h=s.slice(0,c),l=s.slice(c,s.length),v=n(h)-n(l);u[f]=v}var d=0;if(\\\"two_side\\\"===r)for(var p=0;p<=i;p++)Math.abs(u[p])>=Math.abs(o)&&(d+=1);else if(\\\"greater\\\"===r)for(var m=0;m<=i;m++)u[m]>=o&&(d+=1);else for(var g=0;g<=i;g++)u[g]<=o&&(d+=1);return d/i},e.permutationsHeap=function(e){for(var t=new Array(e.length),n=[e.slice()],r=0;r<e.length;r++)t[r]=0;for(var i=0;i<e.length;)if(t[i]<i){var a=0;i%2!=0&&(a=t[i]);var o=e[a];e[a]=e[i],e[i]=o,n.push(e.slice()),t[i]++,i=0}else t[i]=0,i++;return n},e.poissonDistribution=function(e){if(!(e<=0)){var t=0,n=0,r=[],i=1;do{r[t]=Math.exp(-e)*Math.pow(e,t)/i,n+=r[t],i*=++t}while(n<.9999);return r}},e.probit=function(e){return 0===e?e=q:e>=1&&(e=.9999),Math.sqrt(2)*J(2*e-1)},e.product=function(e){for(var t=1,n=0;n<e.length;n++)t*=e[n];return t},e.quantile=d,e.quantileRank=function(e,t){return y(u(e),t)},e.quantileRankSorted=y,e.quantileSorted=h,e.quickselect=l,e.rSquared=function(e,t){if(e.length<2)return 1;for(var n=0,r=0;r<e.length;r++)n+=e[r][1];for(var i=n/e.length,a=0,o=0;o<e.length;o++)a+=Math.pow(i-e[o][1],2);for(var u=0,s=0;s<e.length;s++)u+=Math.pow(e[s][1]-t(e[s][0]),2);return 1-u/a},e.relativeError=oe,e.rms=C,e.rootMeanSquare=C,e.sample=k,e.sampleCorrelation=function(e,t){return T(e,t)/z(e)/z(t)},e.sampleCovariance=T,e.sampleKurtosis=function(e){var t=e.length;if(t<4)throw new Error(\\\"sampleKurtosis requires at least four data points\\\");for(var r,i=n(e),a=0,o=0,u=0;u<t;u++)a+=(r=e[u]-i)*r,o+=r*r*r*r;return(t-1)/((t-2)*(t-3))*(t*(t+1)*o/(a*a)-3*(t-1))},e.sampleSkewness=function(e){if(e.length<3)throw new Error(\\\"sampleSkewness requires at least three data points\\\");for(var t,r=n(e),i=0,a=0,o=0;o<e.length;o++)i+=(t=e[o]-r)*t,a+=t*t*t;var u=e.length-1,s=Math.sqrt(i/u),c=e.length;return c*a/((c-1)*(c-2)*Math.pow(s,3))},e.sampleStandardDeviation=z,e.sampleVariance=N,e.sampleWithReplacement=function(e,t,n){if(0===e.length)return[];n=n||Math.random;for(var r=e.length,i=[],a=0;a<t;a++){var o=Math.floor(n()*r);i.push(e[o])}return i},e.shuffle=E,e.shuffleInPlace=S,e.sign=Q,e.silhouette=re,e.silhouetteMetric=function(e,t){return c(re(e,t))},e.standardDeviation=a,e.standardNormalTable=B,e.subtractFromMean=function(e,t,n){return(e*t-n)/(t-1)},e.sum=t,e.sumNthPowerDeviations=r,e.sumSimple=f,e.tTest=function(e,t){return(n(e)-t)/(a(e)/Math.sqrt(e.length))},e.tTestTwoSample=function(e,t,r){var i=e.length,a=t.length;if(!i||!a)return null;r||(r=0);var o=n(e),u=n(t),s=N(e),c=N(t);if(\\\"number\\\"==typeof o&&\\\"number\\\"==typeof u&&\\\"number\\\"==typeof s&&\\\"number\\\"==typeof c){var f=((i-1)*s+(a-1)*c)/(i+a-2);return(o-u-r)/Math.sqrt(f*(1/i+1/a))}},e.uniqueCountSorted=_,e.variance=i,e.zScore=function(e,t,n){return(e-t)/n},Object.defineProperty(e,\\\"__esModule\\\",{value:!0})}(t)},function(e,t,n){\\\"use strict\\\";Object.defineProperty(t,\\\"__esModule\\\",{value:!0}),t.sum_unsafe=function(e,t){var n={};t.forEach((function(e){n[e]=0}));for(var r=function(r,i){t.forEach((function(t){n[t]+=e[r][t]}))},i=0,a=e.length;i<a;i++)r(i);return n},t.sum=function(e,t){var n={};t.forEach((function(e){n[e]=0}));for(var r=function(r,i){t.forEach((function(t){n[t]+=Number(e[r][t])||0}))},i=0,a=e.length;i<a;i++)r(i);return n},t.count=function(e,t){var n={};t.forEach((function(e){n[e]=0}));for(var r=0,i=e.length;r<i;r++)t.forEach((function(e){n[e]++}));return n},t.mean=function(e,t){var n={};t.forEach((function(e){n[e]=0}));for(var r=function(r,i){t.forEach((function(t){n[t]+=Number(e[r][t])||0}))},i=0,a=e.length;i<a;i++)r(i);return t.forEach((function(t){n[t]/=e.length})),n}},function(e,t){},function(e,t,n){\\\"use strict\\\";Object.defineProperty(t,\\\"__esModule\\\",{value:!0});var r=n(6);t.periodCube=r.default;var i=n(7);t.momentCube=i.default},function(e,t,n){\\\"use strict\\\";var r=this&&this.__read||function(e,t){var n=\\\"function\\\"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,a=n.call(e),o=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)o.push(r.value)}catch(u){i={error:u}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(i)throw i.error}}return o},i=this&&this.__spread||function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(r(arguments[t]));return e},a=this&&this.__values||function(e){var t=\\\"function\\\"===typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&\\\"number\\\"===typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?\\\"Object is not iterable.\\\":\\\"Symbol.iterator is not defined.\\\")};Object.defineProperty(t,\\\"__esModule\\\",{value:!0});var o=function(){function e(e){this.children=new Map,this._rawData=[],this.aggFunc=e,this.cache=!1}return e.prototype.push=function(){for(var e,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];(e=this._rawData).push.apply(e,i(t))},e.prototype.aggData=function(e){return void 0===e&&(e=[]),this.cache||(this._aggData=this.aggFunc(this.rawData,e),this.cache=!0),this._aggData},e.prototype.clearCache=function(){this.cache=!1},Object.defineProperty(e.prototype,\\\"rawData\\\",{get:function(){var e,t;if(!this.cache){if(0!==this.children.size){var n=this.children.values(),r=[];try{for(var i=a(n),o=i.next();!o.done;o=i.next()){var u=o.value,s=void 0,c=u.rawData,f=c.length;for(s=0;s<f;s++)r.push(c[s])}}catch(h){e={error:h}}finally{try{o&&!o.done&&(t=i.return)&&t.call(i)}finally{if(e)throw e.error}}this._rawData=r}this.cache=!0}return this._rawData},enumerable:!0,configurable:!0}),e.prototype.getNode=function(e){return function t(n,i){var o,u;if(i===e.length)return n;var s=n.children.entries();try{for(var c=a(s),f=c.next();!f.done;f=c.next()){var h=r(f.value,2),l=h[0],v=h[1];if(l===e[i])return t(v,i+1)}}catch(d){o={error:d}}finally{try{f&&!f.done&&(u=c.return)&&u.call(c)}finally{if(o)throw o.error}}return null}(this,0)},e}(),u=function(){function e(e){this.aggFunc=e.aggFunc,this.factTable=e.factTable,this.dimensions=e.dimensions,this.measures=e.measures}return e.prototype.get=function(e){var t=this,n=t.tree,i=(t.aggFunc,t.measures);return function t(n,o){var u,s;if(o===e.length)return n.aggData(i);var c=n.children.entries();try{for(var f=a(c),h=f.next();!h.done;h=f.next()){var l=r(h.value,2),v=l[0],d=l[1];if(v===e[o])return t(d,o+1)}}catch(p){u={error:p}}finally{try{h&&!h.done&&(s=f.return)&&s.call(f)}finally{if(u)throw u.error}}return!1}(n,0)},e.prototype.getNode=function(e){return this.tree.getNode(e)},e.prototype.buildTree=function(){var e,t=new o(this.aggFunc),n=this.factTable.length;for(e=0;e<n;e++)this.insertNode(this.factTable[e],t,0);return this.tree=t,t},e.prototype.insertNode=function(e,t,n){if(t.push(e),t.cache=!1,n<this.dimensions.length){var r=e[this.dimensions[n]];t.children.has(r)||t.children.set(r,new o(this.aggFunc)),this.insertNode(e,t.children.get(r),n+1)}},e.prototype.aggTree=function(e){var t,n;void 0===e&&(e=this.tree);var r=e.children.values();try{for(var i=a(r),o=i.next();!o.done;o=i.next()){var u=o.value;this.aggTree(u)}}catch(s){t={error:s}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}return e.aggData(this.measures),e},e.prototype.aggNode=function(e){var t,n;void 0===e&&(e=this.tree);var r=e.children.values();try{for(var i=a(r),o=i.next();!o.done;o=i.next()){var u=o.value;this.aggTree(u)}}catch(s){t={error:s}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}return e.aggData(this.measures),e},e}();t.default=u},function(e,t,n){\\\"use strict\\\";var r=this&&this.__read||function(e,t){var n=\\\"function\\\"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,a=n.call(e),o=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)o.push(r.value)}catch(u){i={error:u}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(i)throw i.error}}return o},i=this&&this.__spread||function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(r(arguments[t]));return e},a=this&&this.__values||function(e){var t=\\\"function\\\"===typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&\\\"number\\\"===typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?\\\"Object is not iterable.\\\":\\\"Symbol.iterator is not defined.\\\")};Object.defineProperty(t,\\\"__esModule\\\",{value:!0});var o=function(){function e(){this.children=new Map,this.rawData=[]}return e.prototype.push=function(){for(var e,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];(e=this.rawData).push.apply(e,i(t))},e.prototype.aggData=function(e,t){return void 0===t&&(t=[]),this._aggData=e(this.rawData,t),this._aggData},e.prototype.getNode=function(e){return function t(n,i){var o,u;if(i===e.length)return n;var s=n.children.entries();try{for(var c=a(s),f=c.next();!f.done;f=c.next()){var h=r(f.value,2),l=h[0],v=h[1];if(l===e[i])return t(v,i+1)}}catch(d){o={error:d}}finally{try{f&&!f.done&&(u=c.return)&&u.call(c)}finally{if(o)throw o.error}}return null}(this,0)},e}();t.Node=o;var u=function(){function e(e){this.aggFunc=e.aggFunc,this.factTable=e.factTable,this.dimensions=e.dimensions,this.measures=e.measures,this.buildTree(),this.aggTree()}return e.prototype.get=function(e){var t=this,n=t.tree,i=t.aggFunc,o=t.measures;return function t(n,u){var s,c;if(u===e.length)return n.aggData(i,o);var f=n.children.entries();try{for(var h=a(f),l=h.next();!l.done;l=h.next()){var v=r(l.value,2),d=v[0],p=v[1];if(d===e[u])return t(p,u+1)}}catch(m){s={error:m}}finally{try{l&&!l.done&&(c=h.return)&&c.call(h)}finally{if(s)throw s.error}}return!1}(n,0)},e.prototype.getNode=function(e){return this.tree.getNode(e)},e.prototype.setData=function(e){var t=e.aggFunc,n=void 0===t?this.aggFunc:t,r=e.factTable,i=void 0===r?this.factTable:r,a=e.dimensions,o=void 0===a?this.dimensions:a,u=e.measures,s=void 0===u?this.measures:u;o!==this.dimensions||i!==this.factTable?(this.dimensions=o,this.factTable=i,this.measures=s,this.aggFunc=n,this.buildTree(),this.aggTree()):s===this.measures&&n===this.aggFunc||(this.measures=s,this.aggFunc=n,this.aggTree())},e.prototype.buildTree=function(){var e,t=new o,n=this.factTable.length;for(e=0;e<n;e++)this.insertNode(this.factTable[e],t,0);return this.tree=t,t},e.prototype.insertNode=function(e,t,n){if(n===this.dimensions.length)t.push(e);else{var r=e[this.dimensions[n]];t.children.has(r)||t.children.set(r,new o),this.insertNode(e,t.children.get(r),n+1)}},e.prototype.aggTree=function(e){var t,n;if(void 0===e&&(e=this.tree),e.children.size>0){e.rawData=[];var r=e.children.values();try{for(var i=a(r),o=i.next();!o.done;o=i.next()){var u=o.value,s=void 0,c=this.aggTree(u).rawData,f=c.length;for(s=0;s<f;s++)e.rawData.push(c[s])}}catch(h){t={error:h}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}}return e.aggData(this.aggFunc,this.measures),e},e}();t.default=u},function(e,t,n){\\\"use strict\\\";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},i=this&&this.__values||function(e){var t=\\\"function\\\"===typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&\\\"number\\\"===typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?\\\"Object is not iterable.\\\":\\\"Symbol.iterator is not defined.\\\")},a=this&&this.__read||function(e,t){var n=\\\"function\\\"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,a=n.call(e),o=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)o.push(r.value)}catch(u){i={error:u}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(i)throw i.error}}return o};Object.defineProperty(t,\\\"__esModule\\\",{value:!0}),t.tree2Table=function(e){var t=e.dimensions,n=(e.measures,e.cube),o=(n.aggFunc,[]);return function e(n,u,s){var c,f,h;if(0!==n.children.size)try{for(var l=i(n.children.entries()),v=l.next();!v.done;v=l.next()){var d=a(v.value,2),p=d[0];e(d[1],r(r({},u),((h={})[t[s]]=p,h)),s+1)}}catch(g){c={error:g}}finally{try{v&&!v.done&&(f=l.return)&&f.call(l)}finally{if(c)throw c.error}}else{var m=n._aggData;o.push(r(r({},u),m))}}(n.tree,{},0),o}},function(e,t,n){var r=function(e){\\\"use strict\\\";var t,n=Object.prototype,r=n.hasOwnProperty,i=\\\"function\\\"===typeof Symbol?Symbol:{},a=i.iterator||\\\"@@iterator\\\",o=i.asyncIterator||\\\"@@asyncIterator\\\",u=i.toStringTag||\\\"@@toStringTag\\\";function s(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},\\\"\\\")}catch(z){s=function(e,t,n){return e[t]=n}}function c(e,t,n,r){var i=t&&t.prototype instanceof m?t:m,a=Object.create(i.prototype),o=new O(r||[]);return a._invoke=function(e,t,n){var r=h;return function(i,a){if(r===v)throw new Error(\\\"Generator is already running\\\");if(r===d){if(\\\"throw\\\"===i)throw a;return N()}for(n.method=i,n.arg=a;;){var o=n.delegate;if(o){var u=x(o,n);if(u){if(u===p)continue;return u}}if(\\\"next\\\"===n.method)n.sent=n._sent=n.arg;else if(\\\"throw\\\"===n.method){if(r===h)throw r=d,n.arg;n.dispatchException(n.arg)}else\\\"return\\\"===n.method&&n.abrupt(\\\"return\\\",n.arg);r=v;var s=f(e,t,n);if(\\\"normal\\\"===s.type){if(r=n.done?d:l,s.arg===p)continue;return{value:s.arg,done:n.done}}\\\"throw\\\"===s.type&&(r=d,n.method=\\\"throw\\\",n.arg=s.arg)}}}(e,n,o),a}function f(e,t,n){try{return{type:\\\"normal\\\",arg:e.call(t,n)}}catch(z){return{type:\\\"throw\\\",arg:z}}}e.wrap=c;var h=\\\"suspendedStart\\\",l=\\\"suspendedYield\\\",v=\\\"executing\\\",d=\\\"completed\\\",p={};function m(){}function g(){}function y(){}var b={};b[a]=function(){return this};var w=Object.getPrototypeOf,M=w&&w(w(T([])));M&&M!==n&&r.call(M,a)&&(b=M);var S=y.prototype=m.prototype=Object.create(b);function E(e){[\\\"next\\\",\\\"throw\\\",\\\"return\\\"].forEach((function(t){s(e,t,(function(e){return this._invoke(t,e)}))}))}function k(e,t){function n(i,a,o,u){var s=f(e[i],e,a);if(\\\"throw\\\"!==s.type){var c=s.arg,h=c.value;return h&&\\\"object\\\"===typeof h&&r.call(h,\\\"__await\\\")?t.resolve(h.__await).then((function(e){n(\\\"next\\\",e,o,u)}),(function(e){n(\\\"throw\\\",e,o,u)})):t.resolve(h).then((function(e){c.value=e,o(c)}),(function(e){return n(\\\"throw\\\",e,o,u)}))}u(s.arg)}var i;this._invoke=function(e,r){function a(){return new t((function(t,i){n(e,r,t,i)}))}return i=i?i.then(a,a):a()}}function x(e,n){var r=e.iterator[n.method];if(r===t){if(n.delegate=null,\\\"throw\\\"===n.method){if(e.iterator.return&&(n.method=\\\"return\\\",n.arg=t,x(e,n),\\\"throw\\\"===n.method))return p;n.method=\\\"throw\\\",n.arg=new TypeError(\\\"The iterator does not provide a 'throw' method\\\")}return p}var i=f(r,e.iterator,n.arg);if(\\\"throw\\\"===i.type)return n.method=\\\"throw\\\",n.arg=i.arg,n.delegate=null,p;var a=i.arg;return a?a.done?(n[e.resultName]=a.value,n.next=e.nextLoc,\\\"return\\\"!==n.method&&(n.method=\\\"next\\\",n.arg=t),n.delegate=null,p):a:(n.method=\\\"throw\\\",n.arg=new TypeError(\\\"iterator result is not an object\\\"),n.delegate=null,p)}function _(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function D(e){var t=e.completion||{};t.type=\\\"normal\\\",delete t.arg,e.completion=t}function O(e){this.tryEntries=[{tryLoc:\\\"root\\\"}],e.forEach(_,this),this.reset(!0)}function T(e){if(e){var n=e[a];if(n)return n.call(e);if(\\\"function\\\"===typeof e.next)return e;if(!isNaN(e.length)){var i=-1,o=function n(){for(;++i<e.length;)if(r.call(e,i))return n.value=e[i],n.done=!1,n;return n.value=t,n.done=!0,n};return o.next=o}}return{next:N}}function N(){return{value:t,done:!0}}return g.prototype=S.constructor=y,y.constructor=g,g.displayName=s(y,u,\\\"GeneratorFunction\\\"),e.isGeneratorFunction=function(e){var t=\\\"function\\\"===typeof e&&e.constructor;return!!t&&(t===g||\\\"GeneratorFunction\\\"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,y):(e.__proto__=y,s(e,u,\\\"GeneratorFunction\\\")),e.prototype=Object.create(S),e},e.awrap=function(e){return{__await:e}},E(k.prototype),k.prototype[o]=function(){return this},e.AsyncIterator=k,e.async=function(t,n,r,i,a){void 0===a&&(a=Promise);var o=new k(c(t,n,r,i),a);return e.isGeneratorFunction(n)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},E(S),s(S,u,\\\"Generator\\\"),S[a]=function(){return this},S.toString=function(){return\\\"[object Generator]\\\"},e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},e.values=T,O.prototype={constructor:O,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method=\\\"next\\\",this.arg=t,this.tryEntries.forEach(D),!e)for(var n in this)\\\"t\\\"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if(\\\"throw\\\"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function i(r,i){return u.type=\\\"throw\\\",u.arg=e,n.next=r,i&&(n.method=\\\"next\\\",n.arg=t),!!i}for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a],u=o.completion;if(\\\"root\\\"===o.tryLoc)return i(\\\"end\\\");if(o.tryLoc<=this.prev){var s=r.call(o,\\\"catchLoc\\\"),c=r.call(o,\\\"finallyLoc\\\");if(s&&c){if(this.prev<o.catchLoc)return i(o.catchLoc,!0);if(this.prev<o.finallyLoc)return i(o.finallyLoc)}else if(s){if(this.prev<o.catchLoc)return i(o.catchLoc,!0)}else{if(!c)throw new Error(\\\"try statement without catch or finally\\\");if(this.prev<o.finallyLoc)return i(o.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,\\\"finallyLoc\\\")&&this.prev<i.finallyLoc){var a=i;break}}a&&(\\\"break\\\"===e||\\\"continue\\\"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var o=a?a.completion:{};return o.type=e,o.arg=t,a?(this.method=\\\"next\\\",this.next=a.finallyLoc,p):this.complete(o)},complete:function(e,t){if(\\\"throw\\\"===e.type)throw e.arg;return\\\"break\\\"===e.type||\\\"continue\\\"===e.type?this.next=e.arg:\\\"return\\\"===e.type?(this.rval=this.arg=e.arg,this.method=\\\"return\\\",this.next=\\\"end\\\"):\\\"normal\\\"===e.type&&t&&(this.next=t),p},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),D(n),p}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if(\\\"throw\\\"===r.type){var i=r.arg;D(n)}return i}}throw new Error(\\\"illegal catch attempt\\\")},delegateYield:function(e,n,r){return this.delegate={iterator:T(e),resultName:n,nextLoc:r},\\\"next\\\"===this.method&&(this.arg=t),p}},e}(e.exports);try{regeneratorRuntime=r}catch(i){Function(\\\"r\\\",\\\"regeneratorRuntime = r\\\")(r)}},function(e,t,n){\\\"use strict\\\";n.r(t);var r={};n.r(r),n.d(r,\\\"kruskal\\\",(function(){return R})),n.d(r,\\\"kruskalWithFullMST\\\",(function(){return A}));var i={};n.r(i),n.d(i,\\\"getDimCorrelationMatrix\\\",(function(){return Q})),n.d(i,\\\"getMeaCorrelationMatrix\\\",(function(){return Z})),n.d(i,\\\"getDimClusterGroups\\\",(function(){return ee})),n.d(i,\\\"getDimSetsBasedOnClusterGroups\\\",(function(){return te})),n.d(i,\\\"getMeaSetsBasedOnClusterGroups\\\",(function(){return ne})),n.d(i,\\\"subspaceSearching\\\",(function(){return re})),n.d(i,\\\"getRelatedVertices\\\",(function(){return ie}));var a={};n.r(a),n.d(a,\\\"insightExtraction\\\",(function(){return ce})),n.d(a,\\\"subspaceSearching\\\",(function(){return se})),n.d(a,\\\"getVisSpaces\\\",(function(){return _e})),n.d(a,\\\"IntentionWorkerCollection\\\",(function(){return Ee})),n.d(a,\\\"DefaultIWorker\\\",(function(){return ye})),n.d(a,\\\"getIntentionSpaces\\\",(function(){return ke})),n.d(a,\\\"Subspace\\\",(function(){return i})),n.d(a,\\\"VIEngine\\\",(function(){return He}));n(4);function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function u(e,t){if(e){if(\\\"string\\\"===typeof e)return o(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return\\\"Object\\\"===n&&e.constructor&&(n=e.constructor.name),\\\"Map\\\"===n||\\\"Set\\\"===n?Array.from(e):\\\"Arguments\\\"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?o(e,t):void 0}}function s(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(\\\"undefined\\\"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,i=!1,a=void 0;try{for(var o,u=e[Symbol.iterator]();!(r=(o=u.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(s){i=!0,a=s}finally{try{r||null==u.return||u.return()}finally{if(i)throw a}}return n}}(e,t)||u(e,t)||function(){throw new TypeError(\\\"Invalid attempt to destructure non-iterable instance.\\\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\\\")}()}function c(e,t){var n;if(\\\"undefined\\\"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=u(e))||t&&e&&\\\"number\\\"===typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError(\\\"Invalid attempt to iterate non-iterable instance.\\\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\\\")}var a,o=!0,s=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,a=e},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw a}}}}function f(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function h(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?h(Object(n),!0).forEach((function(t){f(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):h(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function v(e,t){var n={},r={},i={};t.forEach((function(e){n[e]=-1/0,r[e]=1/0,i[e]=0})),e.forEach((function(e){t.forEach((function(t){n[t]=Math.max(e[t],n[t]),r[t]=Math.min(e[t],r[t])}))}));var a=[];return e.forEach((function(e){var n=l({},e);t.forEach((function(e){i[e]+=Math.abs(n[e])})),a.push(n)})),a.forEach((function(e){t.forEach((function(t){e[t]/=i[t]}))})),{normalizedData:a,maxMeasures:n,minMeasures:r,totalMeasures:i}}function d(e,t,n,r){var i,a=v(e,r),o=a.normalizedData,u=(a.maxMeasures,a.minMeasures,a.totalMeasures),f=1/0,h=\\\"\\\",l=c(t);try{for(l.s();!(i=l.n()).done;){var d,p=s(i.value,2),m=p[0],g=p[1],y=0,b=c(o);try{var w=function(){var e=d.value,t=g.find((function(t){return n.every((function(n){return e[n]===t[n]}))}));t?r.forEach((function(n){var r=\\\"number\\\"!==typeof t[n]||isNaN(t[n])?0:t[n];r/=u[n],y+=Math.abs(e[n]-r)})):r.forEach((function(t){y+=Math.abs(e[t])}))};for(b.s();!(d=b.n()).done;)w()}catch(M){b.e(M)}finally{b.f()}y<f&&(f=y,h=m)}}catch(M){l.e(M)}finally{l.f()}return{majorKey:h,majorSum:f/=2*r.length}}function p(e,t,n,r){var i,a=v(e,r),o=a.normalizedData,u=(a.maxMeasures,a.minMeasures,a.totalMeasures,-1/0),f=\\\"\\\",h=c(t);try{for(h.s();!(i=h.n()).done;){var l,d=s(i.value,2),p=d[0],m=v(d[1],r).normalizedData,g=0,y=c(o);try{var b=function(){var e=l.value,t=m.find((function(t){return n.every((function(n){return e[n]===t[n]}))}));t?r.forEach((function(n){var r=\\\"number\\\"!==typeof t[n]||isNaN(t[n])?0:t[n];g+=Math.abs(e[n]-r)})):r.forEach((function(t){g+=Math.abs(e[t])}))};for(y.s();!(l=y.n()).done;)b()}catch(w){y.e(w)}finally{y.f()}g>u&&(u=g,f=p)}}catch(w){h.e(w)}finally{h.f()}return{outlierKey:f,outlierSum:u/=2*r.length}}function m(e,t){return e.filter((function(e){return t.every((function(t){return\\\"continuous\\\"===t.type?e[t.key]>=t.range[0]&&e[t.key]<=t.range[1]:t.range.has(e[t.key])}))}))}function g(e){return function(e){if(Array.isArray(e))return o(e)}(e)||function(e){if(\\\"undefined\\\"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||u(e)||function(){throw new TypeError(\\\"Invalid attempt to spread non-iterable instance.\\\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\\\")}()}function y(e,t){if(!(e instanceof t))throw new TypeError(\\\"Cannot call a class as a function\\\")}function b(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,\\\"value\\\"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function w(e,t,n){return t&&b(e.prototype,t),n&&b(e,n),e}var M=function(e,t,n){for(var r=new Set,i=new Set,a=new Map,o=e.length,u=0;u<o;u++){var f=e[u];r.add(f[t]),i.add(f[n]),a.has(f[t])||a.set(f[t],new Map);var h=a.get(f[t]);h.has(f[n])||h.set(f[n],0),h.set(f[n],h.get(f[n])+1)}var l=function(e,t,n){if(\\\"undefined\\\"===typeof e||\\\"undefined\\\"===typeof t||\\\"undefined\\\"===typeof n)return 0;var r,i=new Map,a=new Map,o=0,u=c(t);try{for(u.s();!(r=u.n()).done;){var f=r.value;i.set(f,0)}}catch(C){u.e(C)}finally{u.f()}var h,l=c(n);try{for(l.s();!(h=l.n()).done;){var v=h.value;a.set(v,0)}}catch(C){l.e(C)}finally{l.f()}var d,p=c(e);try{for(p.s();!(d=p.n()).done;){var m,g=s(d.value,2),y=g[0],b=c(g[1]);try{for(b.s();!(m=b.n()).done;){var w=s(m.value,2),M=w[0],S=w[1];i.set(y,i.get(y)+S),a.set(M,a.get(M)+S),o+=S}}catch(C){b.e(C)}finally{b.f()}}}catch(C){p.e(C)}finally{p.f()}var E,k=0,x=c(e);try{for(x.s();!(E=x.n()).done;){var _,D=s(E.value,2),O=D[0],T=c(D[1]);try{for(T.s();!(_=T.n()).done;){var N=s(_.value,2),z=N[0],I=N[1],j=i.get(O)*a.get(z)/o;k+=Math.pow(I-j,2)/j}}catch(C){T.e(C)}finally{T.f()}}}catch(C){x.e(C)}finally{x.f()}return k}(a,r,i);return Math.sqrt(l/(e.length*Math.min(r.size-1,i.size-1)))},S=function(e,t,n){var r=E(e.map((function(e){return e[t]})))/e.length,i=E(e.map((function(e){return e[n]})))/e.length;return E(e.map((function(e){return(e[t]-r)*(e[n]-i)})))/Math.sqrt(E(e.map((function(e){return Math.pow(e[t]-r,2)})))*E(e.map((function(e){return Math.pow(e[n]-i,2)}))))};function E(e){for(var t=0,n=0,r=e.length;n<r;n++)t+=e[n];return t}function k(e){var t=Math.min.apply(Math,g(e));return e.map((function(e){return e-t+1}))}function x(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e.length,r=[],i=function t(n,i,a){i.length!==a?n>=e.length||(t(n+1,[].concat(g(i),[e[n]]),a),t(n+1,i,a)):r.push(g(i))},a=t;a<=n;a++)i(0,[],a);return r}function _(e){var t,n=0,r=c(e);try{for(r.s();!(t=r.n()).done;){var i=t.value;n+=i}}catch(a){r.e(a)}finally{r.f()}return e.map((function(e){return e/n}))}var D=function(e){var t,n=0,r=c(e);try{for(r.s();!(t=r.n()).done;){var i=t.value;n+=i*Math.log2(i)}}catch(a){r.e(a)}finally{r.f()}return-n},O=function(){function e(t,n,r){y(this,e),this.dataSource=t,this.X=n,this.Y=r,this.normalizedDataSource=t}return w(e,[{key:\\\"normalizeDimensions\\\",value:function(e){var t=this;return this.normalizedDataSource=[],this.valueSets=[],e.forEach((function(){t.valueSets.push(new Map)})),this.dataSource.forEach((function(n){e.forEach((function(e,r){var i=(n[e]||\\\"others\\\").toString();t.valueSets[r].has(i)||t.valueSets[r].set(i,t.valueSets[r].size)}))})),this.dataSource.forEach((function(n){var r=t.normalizeRecord(n,e);t.normalizedDataSource.push(r)})),this.normalizedDataSource}},{key:\\\"normalizeRecord\\\",value:function(e,t){var n=this,r={};return Object.keys(e).forEach((function(t){r[t]=e[t]})),t.forEach((function(t,i){var a=(e[t]||\\\"others\\\").toString();r[t]=n.valueSets[i].get(a)})),r}},{key:\\\"mean\\\",value:function(){var e=this,t=0,n=0;return 0===this.normalizedDataSource.length||(this.normalizedDataSource.forEach((function(r,i){t+=r[e.X],n+=r[e.Y]})),t/=this.normalizedDataSource.length,n/=this.normalizedDataSource.length),[t,n]}},{key:\\\"getRegressionEquation\\\",value:function(){var e=this;if(0===this.normalizedDataSource.length)return[0,0];var t,n=s(this.mean(),2),r=n[0],i=n[1],a=0,o=0;return this.normalizedDataSource.forEach((function(t){a+=(t[e.X]-r)*(t[e.Y]-i),o+=Math.pow(t[e.X]-r,2)})),[i-r*(t=a/o),t]}},{key:\\\"r_squared\\\",value:function(){var e=this,t=s(this.mean(),2)[1],n=s(this.getRegressionEquation(),2),r=n[0],i=n[1],a=0,o=0;return this.normalizedDataSource.forEach((function(n){var u=n[e.X],s=n[e.Y],c=u*i+r;a+=Math.pow(c-t,2),o+=Math.pow(s-t,2)})),a/o}},{key:\\\"cumulativeLogisticDistribution\\\",value:function(e){return 1/(1+Math.pow(Math.E,-(e-.2)/2))}},{key:\\\"pValue\\\",value:function(){var e=s(this.getRegressionEquation(),2)[1],t=this.cumulativeLogisticDistribution(Math.abs(e));return t>.5?2*(1-t):2*t}},{key:\\\"significance\\\",value:function(){return this.r_squared()*(1-this.pValue())}}]),e}(),T=n(2),N=\\\"_join_\\\",z={sum:T.sum,max:T.max,mean:T.mean,min:T.min,count:function(e){return e.length}};function I(e){return z[e]||T.sum}var j=.3,C=.5;function F(e){for(var t=[],n=0;n<e.length;n++)for(var r=n+1;r<e[n].length;r++)t.push([[n,r],Math.abs(e[n][r])]);return t}function P(e,t){return e[t]===t?t:e[t]=P(e,e[t])}function q(e,t,n){var r=P(e,t),i=P(e,n);e[r]=i,P(e,t),P(e,n)}function L(e,t,n){return e[n]===n?n:(e[n]=L(e,t,e[n]),t[n]=t[e[n]],e[n])}function G(e,t,n,r){var i=L(e,t,n),a=L(e,t,r),o=t[i],u=t[a];e[i]=a,t[i]=t[a]=o+u,L(e,t,n),L(e,t,r)}function A(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:4,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=F(e);r.sort((function(e,t){return t[1]-e[1]}));var i,a=[],o=e.map((function(e,t){return t})),u=g(o),s=!1,f=c(r);try{for(f.s();!(i=f.n()).done;){var h=i.value;P(o,h[0][0])!==P(o,h[0][1])&&(q(o,h[0][0],h[0][1]),a.push([h[0],h[1],s]));for(var l=0;l<o.length;l++)o[l]=P(o,l);var v=new Set(o);if(v.size<=t||h[1]<n?s=!0:u=g(o),1===v.size)break}}catch(d){f.e(d)}finally{f.f()}return{edgesInMST:a,groups:u}}var R=function(e){var t,n=e.matrix,r=e.measures,i=(e.method,e.groupMaxSize),a=void 0===i?4:i,o=e.limitSize,u=void 0!==o&&o,s=e.threshold,f=void 0===s?0:s;t=u?function(e,t){var n=F(e);n.sort((function(e,t){return t[1]-e[1]}));var r,i=e.map((function(e,t){return t})),a=e.map((function(){return 1})),o=c(n);try{for(o.s();!(r=o.n()).done;){var u=r.value;if(L(i,a,u[0][0])!==L(i,a,u[0][1])){if(a[u[0][0]]+a[u[0][1]]>t)continue;G(i,a,u[0][0],u[0][1])}for(var s=0;s<i.length;s++)i[s]=L(i,a,s);if(1===new Set(i).size)break}}catch(l){o.e(l)}finally{o.f()}for(var f=new Map,h=0;h<i.length;h++)f.has(i[h])||f.set(i[h],[]),f.get(i[h]).push(h);return f}(n,a):function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=F(e);r.sort((function(e,t){return t[1]-e[1]}));var i,a=e.map((function(e,t){return t})),o=c(r);try{for(o.s();!(i=o.n()).done;){var u=i.value;P(a,u[0][0])!==P(a,u[0][1])&&q(a,u[0][0],u[0][1]);for(var s=0;s<a.length;s++)a[s]=P(a,s);if(new Set(a).size<=t||u[1]<n)break}}catch(l){o.e(l)}finally{o.f()}for(var f=new Map,h=0;h<a.length;h++)f.has(a[h])||f.set(a[h],[]),f.get(a[h]).push(h);return f}(n,a,f);var h,l=[],v=c(t.values());try{for(v.s();!(h=v.n()).done;){var d=h.value;l.push(d.map((function(e){return r[e]})))}}catch(p){v.e(p)}finally{v.f()}return l};function V(e,t){return(V=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function K(e,t){if(\\\"function\\\"!==typeof t&&null!==t)throw new TypeError(\\\"Super expression must either be null or a function\\\");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&V(e,t)}function H(e){return(H=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function U(e){return(U=\\\"function\\\"===typeof Symbol&&\\\"symbol\\\"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&\\\"function\\\"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?\\\"symbol\\\":typeof e})(e)}function W(e,t){return!t||\\\"object\\\"!==U(t)&&\\\"function\\\"!==typeof t?function(e){if(void 0===e)throw new ReferenceError(\\\"this hasn't been initialised - super() hasn't been called\\\");return e}(e):t}function X(e){var t=function(){if(\\\"undefined\\\"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if(\\\"function\\\"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=H(e);if(t){var i=H(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return W(this,n)}}var B=function(e){K(n,e);var t=X(n);function n(e){var r;y(this,n),r=t.call(this,e);var i=e.K;return r.K=i,r.normalize(),r}return w(n,[{key:\\\"getNeighbors\\\",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];n.length!==t.length&&t.forEach((function(e){n.push(1)}));for(var r=[],i=[],a=[],o=[],u=new Set(this.dimensions),s=0;s<t.length;s++)u.has(t[s])?(r.push(t[s]),a.push(n[s])):(i.push(t[s]),o.push(n[s]));var c=[];this.normalizedDataSource.forEach((function(t,n){var u=0;i.forEach((function(n,r){u+=Math.pow((t[n]-e[n])*o[r],2)})),r.forEach((function(n,r){t[n]!==e[n]&&(u+=Math.pow(a[r],2))})),c.push({dis:u,index:n})})),c.sort((function(e,t){return e.dis-t.dis}));for(var f=[],h=Math.min(this.K,c.length),l=0;l<h;l++)f.push(this.normalizedDataSource[c[l].index]);return f}},{key:\\\"getTargetValue\\\",value:function(e,t){var n=this,r=[];return e.forEach((function(e){var i=new Map;t.forEach((function(t){i.has(t[e])||i.set(t[e],0),i.set(t[e],i.get(t[e])+1)}));var a,o=0,u=0,s=c(i);try{for(s.s();!(a=s.n()).done;){var f=a.value;f[1]>o&&(o=f[1],u=f[0])}}catch(l){s.e(l)}finally{s.f()}var h=n.dimensions.indexOf(e);h>-1?r.push(n.valueParser[h][u]):r.push(u)})),r}}]),n}(function(){function e(t){y(this,e);var n=t.dataSource,r=t.dimensions,i=t.measures;this.dataSource=n,this.dimensions=r,this.measures=i}return w(e,[{key:\\\"normalize\\\",value:function(){var e=this;return this.normalizedDataSource=[],this.valueSets=[],this.valueParser=[],this.ranges=[],this.dimensions.forEach((function(t){e.valueSets.push(new Map),e.valueParser.push([])})),this.measures.forEach((function(){e.ranges.push([1/0,-1/0])})),this.dataSource.forEach((function(t){e.dimensions.forEach((function(n,r){var i=(t[n]||\\\"others\\\").toString();e.valueSets[r].has(i)||(e.valueSets[r].set(i,e.valueSets[r].size),e.valueParser[r].push(i))})),e.measures.forEach((function(n,r){var i=t[n];\\\"number\\\"===typeof i&&(e.ranges[r][0]=Math.min(e.ranges[r][0],i),e.ranges[r][1]=Math.max(e.ranges[r][1],i))}))})),this.dataSource.forEach((function(t){var n=e.normalizeRecord(t);e.normalizedDataSource.push(n)})),this.normalizedDataSource}},{key:\\\"normalizeRecord\\\",value:function(e){var t=this,n={};return this.measures.forEach((function(r,i){n[r]=(e[r]-t.ranges[i][0])/(t.ranges[i][1]-t.ranges[i][0])})),this.dimensions.forEach((function(r,i){var a=(e[r]||\\\"others\\\").toString();n[r]=t.valueSets[i].get(a)})),n}}]),e}());function Y(e,t){for(var n=function(e,t){if(0===e)return[];for(var n=2147483647,r=[t],i=1;i<e;i++)r.push((1103515245*r[i-1]+12345)%n);return r.map((function(e){return e/n}))}(t,2147483647*Math.random()),r=[],i=0;i<t;i++){var a=Math.floor(n[i]*t)%t;r.push(e[a])}return r}var $=8,J={IsolationForest:function(){function e(t,n,r){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:100,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:256;y(this,e),this.dimensions=t,this.measures=n,this.dataSource=r,r.length<a?(this.treeNumber=Math.max(1,Math.ceil(a/50)),this.sampleSize=Math.max(2,Math.floor(r.length/2))):(this.treeNumber=i,this.sampleSize=a),this.limitHeight=Math.ceil(Math.log2(this.sampleSize)),this.iForest=[],this.normalizeDimensions()}return w(e,[{key:\\\"normalizeDimensions\\\",value:function(){var e=this;return this.normalizedDataSource=[],this.valueSets=[],this.ranges=[],this.dimensions.forEach((function(){e.valueSets.push(new Map)})),this.measures.forEach((function(){e.ranges.push([1/0,-1/0])})),this.dataSource.forEach((function(t){e.dimensions.forEach((function(n,r){var i=(t[n]||\\\"others\\\").toString();e.valueSets[r].has(i)||e.valueSets[r].set(i,e.valueSets[r].size)})),e.measures.forEach((function(n,r){var i=t[n];\\\"number\\\"===typeof i&&(e.ranges[r][0]=Math.min(e.ranges[r][0],i),e.ranges[r][1]=Math.max(e.ranges[r][1],i))}))})),this.dataSource.forEach((function(t){var n=e.normalizeRecord(t);e.normalizedDataSource.push(n)})),this.normalizedDataSource}},{key:\\\"normalizeRecord\\\",value:function(e){var t=this,n={};return this.measures.forEach((function(t){n[t]=e[t]})),this.dimensions.forEach((function(r,i){var a=(e[r]||\\\"others\\\").toString();n[r]=t.valueSets[i].get(a)})),n}},{key:\\\"buildIsolationTree\\\",value:function(e,t){if(t>=this.limitHeight||e.length<=1)return null;var n=Math.random(),r=this.measures[0]||this.dimensions[0],i=this.dimensions.length,a=this.measures.length,o=0;if(n>=i/(i+a)){var u=Math.floor(Math.random()*a)%a;r=this.measures[u],o=this.ranges[u][0]+(this.ranges[u][1]-this.ranges[u][0])*Math.random()}else{var s=Math.floor(Math.random()*i)%i;r=this.dimensions[s],o=Math.floor(this.valueSets[s].size*Math.random())%this.valueSets[s].size}var f,h=[],l=[],v=c(e);try{for(v.s();!(f=v.n()).done;){var d=f.value;d[r]<o?h.push(d):l.push(d)}}catch(m){v.e(m)}finally{v.f()}var p={field:r,value:o,size:e.length};return p.left=this.buildIsolationTree(h,t+1),p.right=this.buildIsolationTree(l,t+1),p}},{key:\\\"AFS\\\",value:function(e){return e>2?2*(Math.log(e-1)+.5772156649)-2*(e-1)/e:2===e?1:0}},{key:\\\"getPathLength\\\",value:function(e,t,n,r){return null===t?n+this.AFS(r):e[t.field]<t.value?this.getPathLength(e,t.left,n+1,t.size):this.getPathLength(e,t.right,n+1,t.size)}},{key:\\\"buildIsolationForest\\\",value:function(){this.iForest=[];for(var e=0;e<this.treeNumber;e++){var t=Y(this.normalizedDataSource,this.sampleSize),n=this.buildIsolationTree(t,0);this.iForest.push(n)}return this.iForest}},{key:\\\"estimateOutierScore\\\",value:function(){var e=this;return this.recordScoreList=[],this.normalizedDataSource.forEach((function(t){var n,r=0;e.iForest.forEach((function(n){r+=e.getPathLength(t,n,0,e.sampleSize)})),r/=e.iForest.length,n=Math.pow(2,-r/e.AFS(e.sampleSize)),e.recordScoreList.push(n)})),this.recordScoreList}}]),e}()};function Q(e,t){for(var n=t.map((function(e){return t.map((function(e){return 0}))})),r=0;r<t.length;r++){n[r][r]=1;for(var i=r+1;i<t.length;i++)n[r][i]=n[i][r]=M(e,t[r],t[i])}return n}function Z(e,t){for(var n=t.map((function(e){return t.map((function(e){return 0}))})),r=0;r<t.length;r++){n[r][r]=1;for(var i=r+1;i<t.length;i++){var a=S(e,t[r],t[i]);n[i][r]=n[r][i]=a}}return n}function ee(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:j,i=arguments.length>3?arguments[3]:void 0,a=4,o=Q(e,t),u=r.kruskal({matrix:o,measures:t,groupMaxSize:i||Math.round(t.length/a),threshold:n});return u}function te(e,t,n,r){var i,a=[],o=c(ee(e,t,n));try{for(o.s();!(i=o.n()).done;){var u=x(i.value,1,r||$);a.push.apply(a,g(u))}}catch(s){o.e(s)}finally{o.f()}return a}function ne(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:3,a=3,o=Z(e,t),u=r.kruskal({matrix:o,measures:t,groupMaxSize:i||Math.round(t.length/a),threshold:n||C});return u}function re(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return n?te(e,t):x(t)}function ie(e,t,n,r){for(var i=t.map((function(e){return n.includes(e)})),a=[],o=[],u=0;u<e.length;u++)if(i[u])for(var s=0;s<e[u].length;s++)i[s]||a.push([e[u][s],[u,s]]);a.sort((function(e,t){return t[0]-e[0]}));for(var c=0;c<a.length;c++){var f=a[c][1][1];i[f]||(i[f]=!0,o.push({field:t[f],corValue:a[c][0]}))}return o.slice(0,r||o.length)}var ae=n(1),oe=n.n(ae);function ue(e,t){var n,i=[],a=function(e,t){for(var n=t.map((function(e){return t.map((function(e){return 0}))})),r=0;r<t.length;r++){n[r][r]=1;for(var i=r+1;i<t.length;i++)n[r][i]=n[i][r]=M(e,t[r],t[i])}return n}(e,t),o=c(r.kruskal({matrix:a,measures:t,groupMaxSize:Math.round(t.length/4),threshold:j}));try{for(o.s();!(n=o.n()).done;){var u=x(n.value,1,$);i.push.apply(i,g(u))}}catch(s){o.e(s)}finally{o.f()}return i}function se(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return n?ue(e,t):x(t)}function ce(e,t,n){var r,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:\\\"sum\\\",a=[],o=se(e,t,!0),u=c(o);try{for(u.s();!(r=u.n()).done;){var s,f=r.value,h={},l=oe()({dataSource:e,dimensions:f,measures:n,asFields:n,operator:i||\\\"sum\\\"}),v=c(n);try{var d=function(){var e=s.value,t=_(k(l.map((function(t){return t[e]})))),n=D(t);h[e]=n};for(v.s();!(s=v.n()).done;)d()}catch(b){v.e(b)}finally{v.f()}for(var p=n.map((function(e){return n.map((function(e){return 0}))})),m=0;m<n.length;m++){p[m][m]=1;for(var g=m+1;g<n.length;g++){var y=S(l,n[m],n[g]);p[g][m]=p[m][g]=y}}a.push([f,h,p])}}catch(b){u.e(b)}finally{u.f()}return a}var fe=n(0),he=n.n(fe);function le(e,t,n,r,i,a,o){try{var u=e[a](o),s=u.value}catch(c){return void n(c)}u.done?t(s):Promise.resolve(s).then(r,i)}function ve(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var a=e.apply(t,n);function o(e){le(a,r,i,o,u,\\\"next\\\",e)}function u(e){le(a,r,i,o,u,\\\"throw\\\",e)}o(void 0)}))}}var de=function(e){K(n,e);var t=X(n);function n(){return y(this,n),t.apply(this,arguments)}return w(n,[{key:\\\"getTargetValuePercent\\\",value:function(e,t,n){var r=[];return e.forEach((function(e,i){var a=0;n.forEach((function(n){n[e]===t[e]&&a++})),r.push(a/n.length)})),r}},{key:\\\"getSignificance\\\",value:function(e,t){var n=this,r=0;return this.normalizedDataSource.forEach((function(i){var a=n.getNeighbors(i,e),o=n.getTargetValuePercent(t,i,a),u=0;o.forEach((function(e){u+=e})),u/=o.length,r+=u})),r/=this.normalizedDataSource.length}}]),n}(B),pe=\\\"=;=\\\";function me(e,t){var n,r=[],i=c(e);try{for(i.s();!(n=i.n()).done;){var a,o=n.value,u=c(t);try{for(u.s();!(a=u.n()).done;){var s=a.value;r.push({dimensions:o,measures:s})}}catch(f){u.e(f)}finally{u.f()}}}catch(f){i.e(f)}finally{i.f()}return r}function ge(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:$,r=[],i=c(e);try{for(i.s();!(t=i.n()).done;){var a=t.value,o=x(a,1,n);r.push.apply(r,g(o))}}catch(u){i.e(u)}finally{i.f()}return r}var ye,be=function(){var e=ve(he.a.mark((function e(t,n,r){var i,a,o,u,s;return he.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i=0,a=0,o=c(r);try{for(s=function(){var e=u.value,n=t.map((function(t){return t[e]})),r=_(k(n)),o=D(r);i+=o,a+=o/Math.log2(n.length)},o.s();!(u=o.n()).done;)s()}catch(f){o.e(f)}finally{o.f()}return i/=r.length,a=1-(a/=r.length),e.abrupt(\\\"return\\\",{dimensions:n,measures:r,type:\\\"default_general\\\",score:i,impurity:i,significance:a,order:\\\"asc\\\"});case 8:case\\\"end\\\":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),we=function(){var e=ve(he.a.mark((function e(t,n,r){var i,a,o,u,s,c;return he.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for((i=new J.IsolationForest([],r,t)).buildIsolationForest(),a=i.estimateOutierScore(),o=0,u=0,s=0;s<a.length;s++)a[s]>u&&(u=a[s],o=s);return c={},n.concat(r).forEach((function(e){c[e]=t[o][e]})),e.abrupt(\\\"return\\\",{dimensions:n,measures:r,score:u,significance:u,order:\\\"desc\\\",description:c});case 9:case\\\"end\\\":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),Me=function(){var e=ve(he.a.mark((function e(t,n,r){var i,a,o,u,s,f;return he.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(1===n.length){e.next=2;break}return e.abrupt(\\\"return\\\",null);case 2:(i=g(t)).sort((function(e,t){return e[n[0]]>t[n[0]]?1:e[n[0]]===t[n[0]]?0:e[n[0]]<t[n[0]]?-1:void 0})),a=0,o=c(r);try{for(o.s();!(u=o.n()).done;)s=u.value,(f=new O(i,n[0],s)).normalizeDimensions(n),a+=f.significance()}catch(h){o.e(h)}finally{o.f()}return a/=r.length,e.abrupt(\\\"return\\\",{dimensions:n,measures:r,score:a,significance:a,order:\\\"desc\\\"});case 9:case\\\"end\\\":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),Se=function(){var e=ve(he.a.mark((function e(t,n,r){var i,a;return he.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(n.length<2)){e.next=2;break}return e.abrupt(\\\"return\\\",null);case 2:return 0,a=new de({dataSource:t,dimensions:n,measures:r,K:8}),i=a.getSignificance(r.concat(n.slice(0,-1)),n.slice(-1)),e.abrupt(\\\"return\\\",{dimensions:n,measures:r,score:i,significance:i,order:\\\"desc\\\"});case 6:case\\\"end\\\":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}();!function(e){e.outlier=\\\"default_outlier\\\",e.cluster=\\\"default_group\\\",e.trend=\\\"default_trend\\\"}(ye||(ye={}));var Ee=function(){function e(){y(this,e),this.workers=new Map}return w(e,[{key:\\\"register\\\",value:function(e,t){if(this.workers.has(e))throw new Error(\\\"There has been a worker named: \\\".concat(e,\\\" already.\\\"));this.workers.set(e,[!0,t])}},{key:\\\"enable\\\",value:function(e,t){if(!this.workers.has(e))throw new Error('Intention Worker \\\"'.concat(e,'\\\" does not exist.'));var n=this.workers.get(e);n[0]=t,this.workers.set(e,n)}},{key:\\\"each\\\",value:function(e){var t,n=c(this.workers);try{for(n.s();!(t=n.n()).done;){var r=s(t.value,2),i=r[0],a=r[1];a[0]&&e(a[1],i)}}catch(o){n.e(o)}finally{n.f()}}}],[{key:\\\"init\\\",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{withDefaultIWorkers:!0},n=t.withDefaultIWorkers,r=void 0===n||n;for(var i in e.colletion||(e.colletion=new e,r&&(e.colletion.register(ye.outlier,we),e.colletion.register(ye.cluster,Se),e.colletion.register(ye.trend,Me))),ye)e.colletion.enable(ye[i],r);return e.colletion}}]),e}();function ke(e,t,n){return xe.apply(this,arguments)}function xe(){return(xe=ve(he.a.mark((function e(t,n,r){var i,a,o,u;return he.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i=[],a=c(n),e.prev=2,u=he.a.mark((function e(){var n,a,u,s,c,f;return he.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=o.value,a=n.dimensions,u=n.measures,s=a.join(pe),!t.has(s)){e.next=9;break}return c=t.get(s),e.next=7,be(c,a,u);case 7:f=e.sent,r.each(function(){var e=ve(he.a.mark((function e(t,n){var r;return he.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t(c,a,u);case 3:null!==(r=e.sent)&&(r.type=n,r.impurity=f.impurity,i.push(r)),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.error(\\\"worker failed\\\",{dimensions:a,measures:u,aggData:c},e.t0);case 10:case\\\"end\\\":return e.stop()}}),e,null,[[0,7]])})));return function(t,n){return e.apply(this,arguments)}}());case 9:case\\\"end\\\":return e.stop()}}),e)})),a.s();case 5:if((o=a.n()).done){e.next=9;break}return e.delegateYield(u(),\\\"t0\\\",7);case 7:e.next=5;break;case 9:e.next=14;break;case 11:e.prev=11,e.t1=e.catch(2),a.e(e.t1);case 14:return e.prev=14,a.f(),e.finish(14);case 17:return e.abrupt(\\\"return\\\",i);case 18:case\\\"end\\\":return e.stop()}}),e,null,[[2,11,14,17]])})))).apply(this,arguments)}function _e(e){return De.apply(this,arguments)}function De(){return(De=ve(he.a.mark((function e(t){var n,r,i,a,o,u,s,f,h,l,v,d,p,m,g,y,b,w,M,S,E,k,x,_,D,O,T;return he.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=t.dataSource,r=t.dimensions,i=t.measures,a=t.collection,o=t.dimension_correlation_threshold,u=void 0===o?j:o,s=t.measure_correlation_threshold,f=void 0===s?C:s,h=t.max_dimension_num_in_view,l=void 0===h?3:h,v=t.max_measure_num_in_view,d=void 0===v?3:v,p=ee(n,r,u),m=ge(p,l),g=ne(n,i,f),y=ge(g,d),b=me(m,y),w=new Map,M=(new Date).getTime(),S=c(m);try{for(S.s();!(E=S.n()).done;)k=E.value,x=k.join(pe),_=oe()({dataSource:n,dimensions:k,measures:i,asFields:i,operator:\\\"sum\\\"}),w.set(x,_)}catch(N){S.e(N)}finally{S.f()}return D=(new Date).getTime(),console.log(\\\"cube cost\\\",D-M),w.set(\\\"*\\\",n),O=a||Ee.init(),e.next=18,ke(w,b,O);case 18:return T=e.sent,e.abrupt(\\\"return\\\",T);case 20:case\\\"end\\\":return e.stop()}}),e)})))).apply(this,arguments)}function Oe(e,t){return function(e,t){return e.every((function(e){return Number(e[t])>=1800&&Number(e[t])<=2200||!isNaN(Date.parse(e[t]))&&\\\"string\\\"===typeof e[t]&&/^[0-9]{0,4}[-/][0-9]{0,2}([-/][0-9]{0,2}$)?/.test(e[t])||\\\"undefined\\\"===typeof e[t]||null===e[t]}))}(e,t)?\\\"temporal\\\":function(e,t){return e.every((function(e){return\\\"number\\\"===typeof e[t]||\\\"undefined\\\"===typeof e[t]||null===e[t]}))}(e,t)?\\\"quantitative\\\":(function(e,t){e.every((function(e){return\\\"string\\\"===typeof e[t]||\\\"undefined\\\"===typeof e[t]||null===e[t]}))}(e,t),\\\"nominal\\\")}var Te={boolean:function(e){return\\\"true\\\"===e||\\\"false\\\"===e||!0===e||!1===e},integer:function(e){return Te.number(e)&&(e=+e)===~~e},number:function(e){return!isNaN(+e)},date:function(e){return!isNaN(Date.parse(e))}};function Ne(e,t){var n,r=[],i=new Map,a=c(e);try{var o=function(){var e=n.value,a=new Map;t.forEach((function(t){a.has(t[e])||a.set(t[e],0),a.set(t[e],a.get(t[e])+1)}));var o=function(e){var t,n,r=[\\\"boolean\\\",\\\"integer\\\",\\\"number\\\",\\\"date\\\"],i=c(e);try{for(i.s();!(t=i.n()).done;){for(var a=t.value,o=0;o<r.length;++o)null==(n=a)||n!==n||Te[r[o]](a)||(r.splice(o,1),o-=1);if(0===r.length)return\\\"string\\\"}}catch(u){i.e(u)}finally{i.f()}return r[0]}(g(a.keys())),u=Oe(t,e),s=\\\"dimension\\\";\\\"integer\\\"!==o&&\\\"number\\\"!==o||(s=\\\"measure\\\");var f={key:e,analyticType:s,semanticType:u,dataType:o,domain:a};r.push(f),i.set(f.key,f)};for(a.s();!(n=a.n()).done;)o()}catch(u){a.e(u)}finally{a.f()}return{fields:r,dictonary:i}}var ze,Ie=function(){function e(t,n,r){y(this,e),this.DIMENSION_CORRELATION_THRESHOLD=j,this.MEASURE_CORRELATION_THRESHOLD=C,this.dimensions=n,this.measures=r,this.computeDGraph(t),this.computeMGraph(t)}return w(e,[{key:\\\"computeGraph\\\",value:function(e,t,n){for(var r=t.map((function(e){return t.map((function(){return 0}))})),i=0;i<t.length;i++){r[i][i]=1;for(var a=i+1;a<t.length;a++)r[i][a]=r[a][i]=n(e,t[i],t[a])}return r}},{key:\\\"computeDGraph\\\",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:M;return this.DG=this.computeGraph(e,this.dimensions,t),this.DG}},{key:\\\"computeMGraph\\\",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:S;return this.MG=this.computeGraph(e,this.measures,t),this.MG}},{key:\\\"clusterDGraph\\\",value:function(e,t){var n=this.dimensions,r=this.DIMENSION_CORRELATION_THRESHOLD;return this.DClusters=ee(e,n,t||r),this.DClusters}},{key:\\\"clusterMGraph\\\",value:function(e,t){var n=this.measures,r=this.MEASURE_CORRELATION_THRESHOLD;return this.MClusters=ne(e,n,t||r),this.MClusters}}]),e}(),je=[\\\"max\\\",\\\"min\\\",\\\"sum\\\",\\\"mean\\\",\\\"count\\\"],Ce=function(){function e(t){y(this,e);var n=t.dimensions,r=t.measures,i=t.ops,a=void 0===i?je:i;this.dimensions=n,this.measures=r,this.ops=a,this.state=[]}return w(e,[{key:\\\"setData\\\",value:function(e){return this.state=function(e){var t,n=e.dataSource,r=e.dimensions,i=e.measures,a=e.ops,o=new Map,u=c(n);try{var f=function(){var e=t.value,n=r.map((function(t){return e[t]})).join(N);o.has(n)||o.set(n,[]),o.get(n).push(e)};for(u.s();!(t=u.n()).done;)f()}catch(p){u.e(p)}finally{u.f()}var h,l=[],v=c(o);try{var d=function(){var e=s(h.value,2),t=e[0],n=e[1],o={};i.forEach((function(e,t){o[e]={},a.forEach((function(t){var r=I(t);o[e][t]=r(n.map((function(t){return t[e]})))}))}));var u=t.split(N);r.forEach((function(e,t){o[e]=u[t]})),l.push(o)};for(v.s();!(h=v.n()).done;)d()}catch(p){v.e(p)}finally{v.f()}return l}({dimensions:this.dimensions,measures:this.measures,ops:this.ops,dataSource:e}),this.state}},{key:\\\"computeFromCuboid\\\",value:function(e){var t=this.ops,n=this.measures,r=this.dimensions;return this.state=function(e){var t,n=e.dataSource,r=e.dimensions,i=e.measures,a=e.ops,o=new Map,u=c(n);try{var f=function(){var e=t.value,n=r.map((function(t){return e[t]})).join(N);o.has(n)||o.set(n,[]),o.get(n).push(e)};for(u.s();!(t=u.n()).done;)f()}catch(p){u.e(p)}finally{u.f()}var h,l=[],v=c(o);try{var d=function(){var e=s(h.value,2),t=e[0],n=e[1],o={};i.forEach((function(e,t){o[e]={},a.filter((function(e){return![\\\"sum\\\",\\\"count\\\",\\\"mean\\\"].includes(e)})).forEach((function(t){var r=I(t);o[e][t]=r(n.map((function(n){return n[e][t]})))})),o[e].sum=I(\\\"sum\\\")(n.map((function(t){return t[e].sum}))),o[e].count=I(\\\"sum\\\")(n.map((function(t){return t[e].count}))),o[e].mean=o[e].sum/o[e].count}));var u=t.split(N);r.forEach((function(e,t){o[e]=u[t]})),l.push(o)};for(v.s();!(h=v.n()).done;)d()}catch(p){v.e(p)}finally{v.f()}return l}({dimensions:r,measures:n,ops:t,dataSource:e.getRawState()}),this.state}},{key:\\\"getState\\\",value:function(e,t){var n,r=[],i=this.state,a=this.dimensions,o=c(i);try{for(o.s();!(n=o.n()).done;){var u,s=n.value,f={},h=c(a);try{for(h.s();!(u=h.n()).done;){var l=u.value;f[l]=s[l]}}catch(m){h.e(m)}finally{h.f()}for(var v=0;v<e.length;v++){var d=e[v],p=t[v];f[d]=s[d][p]}r.push(f)}}catch(m){o.e(m)}finally{o.f()}return r}},{key:\\\"getRawState\\\",value:function(){return this.state}},{key:\\\"size\\\",get:function(){return this.state.length}}]),e}(),Fe=\\\"_join_\\\",Pe=[\\\"max\\\",\\\"min\\\",\\\"sum\\\",\\\"mean\\\",\\\"count\\\"],qe=function(){function e(t){var n=this;y(this,e);var r=t.dimensions,i=t.measures,a=t.dataSource,o=t.ops,u=void 0===o?Pe:o;this.dimensions=r,this.measures=i,this.dataSource=a,this.ops=u,this.dimOrder=new Map,r.forEach((function(e,t){n.dimOrder.set(e,t)})),this.cuboids=new Map}return w(e,[{key:\\\"sortDimension\\\",value:function(e){var t=this,n=g(e);return n.sort((function(e,n){return t.dimOrder.get(e)-t.dimOrder.get(n)})),n}},{key:\\\"getCuboid\\\",value:function(e){var t=this.sortDimension(e),n=t.join(Fe);if(this.cuboids.has(n))return this.cuboids.get(n);var r,i=new Set(e),a=[],o=[],u=c(this.dimensions);try{for(u.s();!(r=u.n()).done;){var s=r.value;if(!i.has(s)){var f=this.sortDimension([].concat(g(t),[s])).join(Fe);this.cuboids.has(f)?a.push(f):o.push(f)}}}catch(w){u.e(w)}finally{u.f()}var h=1/0,l=this.dimensions.join(Fe);if(a.length>0){var v,d=c(a);try{for(d.s();!(v=d.n()).done;){var p=v.value,m=this.cuboids.get(p);m.size<h&&(h=m.size,l=p)}}catch(w){d.e(w)}finally{d.f()}}else o.length>0&&(l=o[0]);var y=this.getCuboid(l.split(Fe)),b=new Ce({dimensions:e,measures:this.measures,ops:this.ops});return b.computeFromCuboid(y),this.cuboids.set(n,b),b}},{key:\\\"buildBaseCuboid\\\",value:function(){var e=new Ce({dimensions:this.dimensions,measures:this.measures,ops:this.ops});return e.setData(this.dataSource),this.cuboids.set(this.dimensions.join(Fe),e),e}},{key:\\\"baseCuboid\\\",get:function(){var e=this.dimensions.join(Fe);return this.cuboids.has(e)?this.cuboids.get(e):this.buildBaseCuboid()}}]),e}(),Le=function(){var e=ve(he.a.mark((function e(t,n,r){var i,a,o,u,s,c;return he.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for((i=new J.IsolationForest([],r,t)).buildIsolationForest(),a=i.estimateOutierScore(),o=0,u=0,s=0;s<a.length;s++)a[s]>u&&(u=a[s],o=s);return c={},n.concat(r).forEach((function(e){c[e]=t[o][e]})),e.abrupt(\\\"return\\\",{dimensions:n,measures:r,significance:u,description:c});case 9:case\\\"end\\\":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),Ge=function(){var e=ve(he.a.mark((function e(t,n,r){var i,a,o,u,s,f;return he.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(1===n.length){e.next=2;break}return e.abrupt(\\\"return\\\",null);case 2:(i=g(t)).sort((function(e,t){return e[n[0]]>t[n[0]]?1:e[n[0]]===t[n[0]]?0:-1})),a=0,o=c(r);try{for(o.s();!(u=o.n()).done;)s=u.value,(f=new O(i,n[0],s)).normalizeDimensions(n),a+=f.significance()}catch(h){o.e(h)}finally{o.f()}return a/=r.length,e.abrupt(\\\"return\\\",{dimensions:n,measures:r,significance:a});case 9:case\\\"end\\\":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}();!function(e){e.outlier=\\\"default_outlier\\\",e.trend=\\\"default_trend\\\"}(ze||(ze={}));var Ae=function(){function e(){y(this,e),this.workers=new Map}return w(e,[{key:\\\"register\\\",value:function(e,t){if(this.workers.has(e))throw new Error(\\\"There has been a worker named: \\\".concat(e,\\\" already.\\\"));this.workers.set(e,[!0,t])}},{key:\\\"enable\\\",value:function(e,t){if(!this.workers.has(e))throw new Error('Intention Worker \\\"'.concat(e,'\\\" does not exist.'));var n=this.workers.get(e);n[0]=t,this.workers.set(e,n)}},{key:\\\"each\\\",value:function(e){var t,n=c(this.workers);try{for(n.s();!(t=n.n()).done;){var r=s(t.value,2),i=r[0],a=r[1];a[0]&&e(a[1],i)}}catch(o){n.e(o)}finally{n.f()}}}],[{key:\\\"init\\\",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{withDefaultIWorkers:!0},n=t.withDefaultIWorkers,r=void 0===n||n;return e.colletion||(e.colletion=new e,r&&(e.colletion.register(ze.outlier,Le),e.colletion.register(ze.trend,Ge))),Object.values(ze).forEach((function(t){e.colletion.enable(t,r)})),e.colletion}}]),e}(),Re={interval:[0,10],line:[11,1/0],area:[11,1/0],point:[0,1e3],path:[0,100],density:[1001,1/0]};function Ve(e,t){for(var n=t.length-1;n>=0;n--)if(t[n].semanticType===e&&!t[n].choosen)return t[n];return!1}function Ke(e,t){var n=function(e){for(var t={},n={position:2,color:1,size:1,shape:1,opacity:1,facets:2,page:1,filter:1,highFacets:1e3},r=e.map((function(e){return l(l({},e),{},{choosen:!1})})),i=[[\\\"quantitative\\\",[\\\"position\\\",\\\"size\\\",\\\"color\\\",\\\"highFacets\\\",\\\"opacity\\\",\\\"page\\\",\\\"filter\\\"]],[\\\"temporal\\\",[\\\"position\\\",\\\"page\\\",\\\"filter\\\"]],[\\\"ordinal\\\",[\\\"position\\\",\\\"color\\\",\\\"opacity\\\",\\\"facets\\\",\\\"size\\\",\\\"page\\\",\\\"filter\\\",\\\"highFacets\\\"]],[\\\"nominal\\\",[\\\"position\\\",\\\"color\\\",\\\"facets\\\",\\\"shape\\\",\\\"page\\\",\\\"filter\\\",\\\"hightFacets\\\"]]],a=r.length,o=0;o<i.length&&a>0;o++)for(var u=i[o][0],s=i[o][1],c=0;c<s.length&&a>0;c++)for(var f=s[c],h=void 0;n[f]>0&&(h=Ve(u,r));)\\\"undefined\\\"===typeof t[f]&&(t[f]=[]),t[f].push(h.key),n[f]--,a--,h.choosen=!0;return t}(e.sort((function(e,t){return e.impurity-t.impurity}))),r=new Set(e.filter((function(e){return\\\"dimension\\\"===e.analyticType})).map((function(e){return e.key}))),i=new Set(e.filter((function(e){return\\\"measure\\\"===e.analyticType})).map((function(e){return e.key})));if(n.position&&2===n.position.length)if(r.has(n.position[0])&&i.has(n.position[1])||r.has(n.position[1])&&i.has(n.position[0])){var a=r.has(n.position[0])?0:1,o=n.position[a],u=n.position[(a+1)%2];n.position=[o,u];var s=e.find((function(e){return e.key===o})),c=s?s.domain.size:0;n.geomType=[\\\"interval\\\",\\\"line\\\",\\\"area\\\"].filter((function(e){return c>=Re[e][0]&&c<=Re[e][1]})),\\\"nominal\\\"===s.semanticType&&(n.geomType=[\\\"interval\\\"])}else n.geomType=[\\\"point\\\",\\\"density\\\"].filter((function(e){return t.length>=Re[e][0]&&t.length<=Re[e][1]}));return{schema:n,dataView:t}}var He=function(){function e(){y(this,e),this.DIMENSION_NUM_IN_VIEW={MAX:3,MIN:1},this.MEASURE_NUM_IN_VIEW={MAX:3,MIN:1},this.cube=null,this.aggregators=[\\\"max\\\",\\\"min\\\",\\\"sum\\\",\\\"mean\\\",\\\"count\\\"],this.workerCollection=Ae.init()}return w(e,[{key:\\\"setDataSource\\\",value:function(e){return this.dataSource=e,this}},{key:\\\"setDimensions\\\",value:function(e){return this._dimensions=e,this._fields.forEach((function(t){\\\"dimension\\\"!==t.analyticType&&e.includes(t.key)&&(t.analyticType=\\\"dimension\\\")})),this}},{key:\\\"setMeasures\\\",value:function(e){return this._measures=e,this._fields.forEach((function(t){\\\"measure\\\"!==t.analyticType&&e.includes(t.key)&&(t.analyticType=\\\"measure\\\")})),this}},{key:\\\"setFieldKeys\\\",value:function(e){return this._fieldKeys=e,this}},{key:\\\"buildfieldsSummary\\\",value:function(){var e=this,t=Ne(this._fieldKeys,this.dataSource),n=t.fields,r=t.dictonary;return this.dimensions&&this.measures&&n.forEach((function(t){e.dimensions.includes(t.key)?t.analyticType=\\\"dimension\\\":t.analyticType=\\\"measure\\\"})),this.fields=n,this.fieldDictonary=r,this}},{key:\\\"buildGraph\\\",value:function(){return this.dataGraph=new Ie(this.dataSource,this.dimensions,this.measures),this}},{key:\\\"buildCube\\\",value:function(){var e=this.measures,t=this.dataSource,n=this.dataGraph,r=this.dimensions,i=this.aggregators,a=new qe({dimensions:r,measures:e,dataSource:t,ops:i});return a.buildBaseCuboid(),n.DClusters.forEach((function(e){a.getCuboid(e)})),this.cube=a,this}},{key:\\\"clusterFields\\\",value:function(){return this.dataGraph.clusterDGraph(this.dataSource),this.dataGraph.clusterMGraph(this.dataSource),this}},{key:\\\"buildSubspaces\\\",value:function(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.DIMENSION_NUM_IN_VIEW,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.MEASURE_NUM_IN_VIEW,i=this.dataGraph.DClusters,a=this.dataGraph.MClusters,o=e.getCombinationFromClusterGroups(a,r),u=[],s=c(i);try{for(s.s();!(t=s.n()).done;){var f,h=t.value,l=x(h,n.MIN,n.MAX),v=c(l);try{for(v.s();!(f=v.n()).done;){var d,p=f.value,m=c(o);try{for(m.s();!(d=m.n()).done;){var g=d.value;u.push({dimensions:p,measures:g})}}catch(y){m.e(y)}finally{m.f()}}}catch(y){v.e(y)}finally{v.f()}}}catch(y){s.e(y)}finally{s.f()}return this.subSpaces=u,this}},{key:\\\"insightExtraction\\\",value:function(){var t=ve(he.a.mark((function t(){var n,r,i,a,o,u,s=this,f=arguments;return he.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=f.length>0&&void 0!==f[0]?f[0]:this.subSpaces,r=this,i=[],a=c(n),t.prev=4,u=he.a.mark((function t(){var n,a,u,c,f,h,l,v;return he.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=o.value,a=n.dimensions,u=n.measures,c=r.cube,f=c.getCuboid(a),h=f.getState(u,u.map((function(){return\\\"sum\\\"}))),l=e.getSpaceImpurity(h,a,u),v=[],s.workerCollection.each((function(e,t){var n=function(){var e=ve(he.a.mark((function e(t,n){var o;return he.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t(h,a,u,r.fieldDictonary,r);case 3:null!==(o=e.sent)&&(o.type=n,o.impurity=l,i.push(o)),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.error(\\\"worker failed\\\",{dimensions:a,measures:u,aggData:h},e.t0);case 10:case\\\"end\\\":return e.stop()}}),e,null,[[0,7]])})));return function(t,n){return e.apply(this,arguments)}}();v.push(n(e,t))})),t.next=10,Promise.all(v);case 10:case\\\"end\\\":return t.stop()}}),t)})),a.s();case 7:if((o=a.n()).done){t.next=11;break}return t.delegateYield(u(),\\\"t0\\\",9);case 9:t.next=7;break;case 11:t.next=16;break;case 13:t.prev=13,t.t1=t.catch(4),a.e(t.t1);case 16:return t.prev=16,a.f(),t.finish(16);case 19:return r.insightSpaces=i,t.abrupt(\\\"return\\\",i);case 21:case\\\"end\\\":return t.stop()}}),t,this,[[4,13,16,19]])})));return function(){return t.apply(this,arguments)}}()},{key:\\\"setInsightScores\\\",value:function(){return this.insightSpaces.forEach((function(e){e.score=e.impurity/e.significance})),this}},{key:\\\"getFieldInfoInVis\\\",value:function(e){var t=[],n=this.cube,r=this.fieldDictonary,i=e.dimensions,a=e.measures;i.forEach((function(e){var i=n.getCuboid([e]).getState(a,a.map((function(){return\\\"sum\\\"}))),o=0;a.forEach((function(e){var t=_(k(i.map((function(t){return t[e]})))),n=D(t);o+=n})),t.push(l(l({},r.get(e)),{},{impurity:o}))}));var o=n.getCuboid(i).getState(a,a.map((function(){return\\\"sum\\\"})));return a.forEach((function(e){var n=_(k(o.map((function(t){return t[e]})))),i=D(n);t.push(l(l({},r.get(e)),{},{impurity:i}))})),t}},{key:\\\"specification\\\",value:function(e){var t=e.dimensions,n=e.measures;return Ke(this.getFieldInfoInVis(e),this.cube.getCuboid(t).getState(n,n.map((function(){return\\\"sum\\\"}))))}},{key:\\\"fields\\\",get:function(){return this._fields},set:function(e){this._fields=e,this._dimensions=e.filter((function(e){return\\\"dimension\\\"===e.analyticType})).map((function(e){return e.key})),this._measures=e.filter((function(e){return\\\"measure\\\"===e.analyticType})).map((function(e){return e.key}))}},{key:\\\"dimensions\\\",get:function(){return this._dimensions}},{key:\\\"measures\\\",get:function(){return this._measures}}],[{key:\\\"getCombinationFromClusterGroups\\\",value:function(e,t){var n,r=[],i=c(e);try{for(i.s();!(n=i.n()).done;){var a=x(n.value,t.MIN,t.MAX);r.push.apply(r,g(a))}}catch(o){i.e(o)}finally{i.f()}return r}},{key:\\\"getSpaceImpurity\\\",value:function(e,t,n){var r,i=0,a=c(n);try{var o=function(){var t=r.value,n=_(k(e.map((function(e){return e[t]})))),a=D(n);i+=a};for(a.s();!(r=a.n()).done;)o()}catch(u){a.e(u)}finally{a.f()}return i/=n.length}}]),e}();function Ue(e,t,n,r){var i={},a={};n.forEach((function(e){i[e]=0,a[e]=0})),t.forEach((function(e){n.forEach((function(t){i[t]+=Math.abs(e[t])}))})),e.forEach((function(e){n.forEach((function(t){a[t]+=Math.abs(e[t])}))}));var o=[];t.forEach((function(e){var t=l({},e);n.forEach((function(e){t[e]/=i[e]})),o.push(t)}));var u=[];return e.forEach((function(e){var t=l({},e);n.forEach((function(e){t[e]/=r?i[e]:a[e]})),u.push(t)})),{normalizedData:u,normalizedParentData:o}}function We(e,t,n,r){var i,a=0,o=t.map((function(){return!1})),u=c(e);try{var s=function(){var e=i.value,u=t.findIndex((function(t,r){return!o[r]&&n.every((function(n){return t[n]===e[n]}))}));if(u>-1){o[u]=!0;var s,f=t[u],h=c(r);try{for(h.s();!(s=h.n()).done;){var l=s.value;a=Math.max(a,Math.max(f[l],e[l])/Math.min(f[l],e[l])),console.log(\\\"score\\\",a)}}catch(m){h.e(m)}finally{h.f()}}else{var v,d=c(r);try{for(d.s();!(v=d.n()).done;){var p=v.value;a=Math.max(a,e[p])}}catch(m){d.e(m)}finally{d.f()}}};for(u.s();!(i=u.n()).done;)s()}catch(d){u.e(d)}finally{u.f()}for(var f=0;f<t.length;f++)if(!o[f]){o[f]=!0;var h,l=c(r);try{for(l.s();!(h=l.n()).done;){var v=h.value;a=Math.max(a,t[f][v])}}catch(d){l.e(d)}finally{l.f()}}return a}function Xe(e,t){var n=new Map;t.forEach((function(e){n.set(e,0)})),e.forEach((function(e){t.forEach((function(t){n.set(t,n.get(t)+Math.abs(e[t]))}))}));var r=[];return e.forEach((function(e){var i=l({},e);t.forEach((function(e){i[e]/=n.get(e)})),r.push(i)})),r}function Be(e,t,n,r){var i,a=0,o=c(e);try{for(o.s();!(i=o.n()).done;){var u=i.value;0!==u[n]&&0!==u[r]&&(a+=Math.max(u[n],u[r])/Math.min(u[n],u[r]))}}catch(s){o.e(s)}finally{o.f()}return a}var Ye=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];y(this,e),this.dataSource=void 0,this.dimensions=void 0,this.measures=void 0,this.engine=void 0,this.defaultAggs=[\\\"min\\\",\\\"max\\\",\\\"sum\\\",\\\"count\\\",\\\"mean\\\"],this.engine=new a.VIEngine,this.dataSource=t,this.dimensions=[],this.measures=[];var n=[];t.length>0&&(n=Object.keys(t[0])),this.engine.setDataSource(t).setFieldKeys(n).buildfieldsSummary()}return w(e,[{key:\\\"setDimensions\\\",value:function(e){return this.dimensions=e,this.engine.setDimensions(e),this}},{key:\\\"setMeasures\\\",value:function(e){return this.measures=e,this.engine.setMeasures(e),this}},{key:\\\"preAnalysis\\\",value:function(){return console.log(\\\"start\\\"),this.engine.buildGraph(),this.engine.dataGraph.DIMENSION_CORRELATION_THRESHOLD=.6,this.engine.dataGraph.MEASURE_CORRELATION_THRESHOLD=.8,console.log(\\\"graph finish\\\"),this.engine.clusterFields(),console.log(\\\"cluster finish\\\"),this.engine.buildSubspaces({MAX:2,MIN:1},{MAX:2,MIN:1}),console.log(\\\"subspaces finsh. start build-cube\\\"),this.engine.buildCube(),console.log(\\\"cube finish\\\"),this}},{key:\\\"explain\\\",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.3;this.explainConditionalValue(e,t,n);var i=0===t.length||0===e.length;console.log({selectAll:i});var a=i?[]:this.explainBySelection(e,t,n,10),o=i?[]:this.explainByCorMeasures(e,t,n,10),u=this.explainByChildren([],t,n,10),s=[];return a.forEach((function(r){s.push({dimensions:t,extendDs:r.dimensions,measures:n,extendMs:[],score:r.score,type:\\\"selection_dim_distribution\\\",description:r,predicates:e})})),o.forEach((function(r){s.push({dimensions:t,extendDs:[],extendMs:r.measures,measures:n,score:r.score,type:\\\"selection_mea_distribution\\\",description:r,predicates:e})})),u.majorList.forEach((function(r){s.push({dimensions:t,extendDs:r.dimensions,measures:n,extendMs:[],score:r.score,type:\\\"children_major_factor\\\",description:r,predicates:e})})),u.outlierList.forEach((function(r){s.push({dimensions:t,extendDs:r.dimensions,measures:n,extendMs:[],score:r.score,type:\\\"children_outlier\\\",description:r,predicates:e})})),s.filter((function(e){return e.score>=r}))}},{key:\\\"explainConditionalValue\\\",value:function(e,t,n){var r,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:5,a=this.getGeneralizeKNN(\\\"dimension\\\",t,i,0),o=c(a);try{for(o.s();!(r=o.n()).done;){var u=r.value,s=this.explainValue(e,[].concat(g(t),[u]),n);console.log(u,n,s)}}catch(f){o.e(f)}finally{o.f()}}},{key:\\\"explainValue\\\",value:function(e,t,n){var r,i=n.map((function(e){return e.key})),a=n.map((function(e){return e.op})),o=this.engine.cube.getCuboid(t).getState(i,a),u=m(o,e),s=[],f=c(i);try{var h=function(){var e=r.value,t=o.map((function(t){return t[e]}));t.sort((function(e,t){return e-t}));var n=u.map((function(t){return t[e]})),i=t[Math.floor(.15*t.length)],a=t[Math.min(Math.ceil(.85*t.length),t.length-1)];n.some((function(e){return e>=a}))?s.push(1):n.some((function(e){return e<=i}))?s.push(-1):s.push(0)};for(f.s();!(r=f.n()).done;)h()}catch(l){f.e(l)}finally{f.f()}return s}},{key:\\\"explainByChildren\\\",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:3,i=this.engine.cube.getCuboid(t),a=n.map((function(e){return e.key})),o=n.map((function(e){return e.op})),u=m(i.getState(a,o),e),s=this.getGeneralizeKNN(\\\"dimension\\\",t,r,0);console.log(\\\"knn\\\",s);var f,h=[],l=[],v=c(s);try{for(v.s();!(f=v.n()).done;){var y,b=f.value,w=this.engine.cube.getCuboid([].concat(g(t),[b])),M=m(w.getState(a,o),e),S=new Map,E=c(M);try{for(E.s();!(y=E.n()).done;){var k,x=y.value;S.has(x[b])||S.set(x[b],[]),null===(k=S.get(x[b]))||void 0===k||k.push(x)}}catch(I){E.e(I)}finally{E.f()}var _=d(u,S,t,a),D=_.majorKey,O=_.majorSum;h.push({key:D,score:O,dimensions:[b],measures:n});var T=p(u,S,t,a),N=T.outlierKey,z=T.outlierSum;l.push({key:N,score:z,dimensions:[b],measures:n})}}catch(I){v.e(I)}finally{v.f()}return h.sort((function(e,t){return e.score-t.score})),l.sort((function(e,t){return t.score-e.score})),{majorList:h,outlierList:l}}},{key:\\\"explainBySelection\\\",value:function(e,t,n){var r,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:3,a=n.map((function(e){return e.key})),o=n.map((function(e){return e.op})),u=this.getGeneralizeKNN(\\\"dimension\\\",t,i,0),s=[],f=c(u);try{for(f.s();!(r=f.n()).done;){var h=r.value,l=this.engine.cube.getCuboid([h]),v=this.engine.cube.getCuboid([].concat(g(t),[h])),d=l.getState(a,o),p=m(v.getState(a,o),e),y=Ue(p,d,a,!1),b=We(y.normalizedData,y.normalizedParentData,[h],a);s.push({dimensions:[h],measures:n,score:b})}}catch(w){f.e(w)}finally{f.f()}return s.sort((function(e,t){return t.score-e.score})),s}},{key:\\\"explainByCorMeasures\\\",value:function(e,t,n){var r,i=this,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:3,o=n.map((function(e){return e.key})),u=n.map((function(e){return e.op})),s=this.getGeneralizeKNN(\\\"measure\\\",o,a),h=[].concat(g(o),g(s)),v=[],d=this.engine.cube.getCuboid(t),p=c(this.defaultAggs);try{var m=function(){var a,o=r.value,p=s.map((function(){return o})),m=Xe(d.getState(h,[].concat(g(u),g(p))),h),y=c(h);try{var b=function(){var r=a.value,u=n.find((function(e){return e.key===r}));if(u&&u.op===o)return\\\"continue\\\";for(var s=i.explainValue(e,t,[{key:r,op:o}]),h=[],p=0;p<s.length;p++)0!==s[p]&&h.push({key:r,op:o,score:s[p]});if(0===h.length)return\\\"continue\\\";if(u){var g,y=Xe(d.getState([r],[o]),[r]),b=m.map((function(e,t){return l(l({},e),{},f({},\\\"__\\\".concat(r),y[t][r]))})),w=0,M=1,S=c(n);try{for(S.s();!(g=S.n()).done;){var E=Be(b,0,g.value.key,\\\"__\\\".concat(r))/2;w=Math.max(w,E),M=Math.min(M,E)}}catch(N){S.e(N)}finally{S.f()}v.push({dimensions:t,score:Math.max(1-M,w),measures:[{key:r,op:o}],max:w,min:M,intMeasures:h})}else{var k,x=0,_=1,D=c(n);try{for(D.s();!(k=D.n()).done;){var O=k.value,T=Be(m,0,O.key,r)/2;x=Math.max(x,T),_=Math.min(_,T)}}catch(N){D.e(N)}finally{D.f()}v.push({dimensions:t,score:Math.max(1-_,x),measures:[{key:r,op:o}],max:x,min:_,intMeasures:h})}};for(y.s();!(a=y.n()).done;)b()}catch(w){y.e(w)}finally{y.f()}};for(p.s();!(r=p.n()).done;)m()}catch(y){p.e(y)}finally{p.f()}return v.sort((function(e,t){return t.score-e.score})),v}},{key:\\\"getGeneralizeKNN\\\",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:3,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;return 0===t.length?this.getCenterFields(e,n):this.getKNN(e,t,n,r)}},{key:\\\"getKNN\\\",value:function(e,t){var n,r=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:3,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,o=\\\"dimension\\\"===e?this.engine.dataGraph.DG:this.engine.dataGraph.MG,u=\\\"dimension\\\"===e?this.engine.dataGraph.dimensions:this.engine.dataGraph.measures,s=t.map((function(e){return u.indexOf(e)})),f=[],h=c(s);try{for(h.s();!(n=h.n()).done;)for(var l=n.value,v=0;v<o[l].length;v++)s.includes(v)||function(){var e=Math.abs(o[l][v]),t=u[v],n=r.engine.fields.find((function(e){return e.key===t}));e>=a&&f.push({dis:e,index:v,imp:(null===n||void 0===n?void 0:n.domain.size)||1/0})}()}catch(d){h.e(d)}finally{h.f()}return f.sort((function(e,t){return t.dis/t.imp-e.dis/e.imp})),f.slice(0,i).map((function(e){return u[e.index]}))}},{key:\\\"getCenterFields\\\",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5,n=\\\"dimension\\\"===e?this.engine.dataGraph.DG:this.engine.dataGraph.MG,r=\\\"dimension\\\"===e?this.engine.dataGraph.dimensions:this.engine.dataGraph.measures,i=n.map((function(e,t){return{field:r[t],score:e.reduce((function(e,t){return e+Math.abs(t)}),0)}}));return i.sort((function(e,t){return t.score-e.score})),i.map((function(e){return e.field})).slice(0,t)}},{key:\\\"getVisSpec\\\",value:function(e){var t=this.engine;return e.map((function(e){var n,r=e.measures.map((function(e){return e.key})),i=e.extendMs.map((function(e){return e.key}));n=\\\"children_major_factor\\\"===e.type||\\\"children_outlier\\\"===e.type?{dimensions:[].concat(g(e.extendDs),g(e.dimensions)),measures:i.length>0?i:r,significance:e.score,score:e.score,description:e.description}:{dimensions:e.extendDs.length>0?e.extendDs:e.dimensions,measures:i.length>0?i:r,significance:e.score,score:e.score,description:e.description};var a=[].concat(g(e.measures),g(e.extendMs));return{schema:t.specification(n).schema,dataView:t.cube.getCuboid([].concat(g(e.dimensions),g(e.extendDs))).getState(a.map((function(e){return e.key})),a.map((function(e){return e.op})))}}))}}]),e}();const $e={de:null};function Je(e){const{filters:t={},currentSpace:n}=e,r=function(e,t,n){var r=[];return t.forEach((function(t){r.push({type:\\\"discrete\\\",range:new Set(e[t]),key:t})})),r}(t,n.dimensions),i=$e.de,a=i.explain(r,n.dimensions,n.measures),o=i.getVisSpec(a),u=i.explainValue(r,n.dimensions,n.measures),s=[];for(let c=0;c<u.length;c++)0!==u[c]&&s.push({...n.measures[c],score:u[c]});return{explainations:a,visSpaces:o,valueExp:s,fieldsWithSemanticType:i.engine.fields.map((e=>({key:e.key,type:e.semanticType})))}}self.addEventListener(\\\"message\\\",(function(e){const{type:t,data:n}=e.data;console.log(t,n);let r=!1;try{switch(t){case\\\"getExplaination\\\":r=Je(n);break;case\\\"preAnalysis\\\":r=function(e){const{dimensions:t,measures:n,dataSource:r}=e,i=new Ye(r);return i.setDimensions(t).setMeasures(n).preAnalysis(),$e.de=i,!0}(n);break;default:throw new Error(`type ${t} is not supported.`)}self.postMessage(r)}catch(i){console.log(i),self.postMessage(!1)}}),!1)}]);\\n//# sourceMappingURL=explainer.worker.4818409b.worker.js.map\", \"Worker\", undefined, __webpack_public_path__ + \"static/js/explainer.worker.4818409b.worker.js\");\n}\n","import { Record, Filters, SemanticType, IMeasure } from './interfaces';\nimport { Insight } from 'visual-insights';\n/* eslint import/no-webpack-loader-syntax:0 */\n// @ts-ignore\n// eslint-disable-next-line\nimport InsightSpaceWorker from './workers/InsightService.worker';\n/* eslint import/no-webpack-loader-syntax:0 */\n// @ts-ignore\n// eslint-disable-next-line\nimport ExplainerWorker from './workers/explainer.worker';\nimport { View, Specification } from 'visual-insights/build/esm/commonTypes';\nimport { IExplaination, IMeasureWithStat } from './insights';\n\ninterface WorkerState {\n    worker: Worker | null;\n}\n\nconst workerState: WorkerState = {\n    worker: null\n}\n\nfunction workerService<T, R>(worker: Worker, data: R): Promise<T> {\n    return new Promise<T>((resolve, reject) => {\n        worker.postMessage(data);\n        worker.onmessage = (e: MessageEvent) => {\n            resolve(e.data);\n        };\n        worker.onerror = (e: ErrorEvent) => {\n            reject({\n                success: false,\n                message: e,\n            });\n        };\n    });\n}\n\ninterface ExplainParams {\n    dimensions: string[];\n    measures: string[];\n    dataSource: Record[];\n    filters?: Filters;\n    currentSpace: {\n        dimensions: string[];\n        measures: IMeasure[];\n    };\n}\nexport interface IVisSpace {\n    dataView: Record[];\n    schema: Specification;\n}\ninterface ExplainReturns {\n    explainations: IExplaination[];\n    valueExp: IMeasureWithStat[];\n    visSpaces: IVisSpace[];\n    fieldsWithSemanticType: Array<{ key: string; type: SemanticType }>;\n}\nexport async function getExplaination(props: ExplainParams) {\n    const worker = workerState.worker;\n    if (worker === null) throw new Error('init worker first.')\n    let result: ExplainReturns = {\n        explainations: [],\n        valueExp: [],\n        visSpaces: [],\n        fieldsWithSemanticType: [],\n    };\n    try {\n        result = await workerService<ExplainReturns, { type: string; data: ExplainParams }>(\n            worker,\n            {\n                type: 'getExplaination',\n                data: props\n            }\n        );\n        return result;\n    } catch (error) {\n        console.error(error);\n    }\n    return result;\n}\n\ninterface PreAnalysisParams {\n    dimensions: string[];\n    measures: string[];\n    dataSource: Record[];\n}\nexport async function preAnalysis(props: PreAnalysisParams) {\n    if (workerState.worker !== null) {\n        workerState.worker.terminate();\n    }\n    try {\n        workerState.worker = new ExplainerWorker() as Worker;\n        await workerService<boolean, { type: string; data: PreAnalysisParams}>(workerState.worker, { type: 'preAnalysis', data: props });\n    } catch (error) {\n        console.error(error)\n    }\n}\n\nexport function destroyWorker() {\n    if (workerState.worker) {\n        workerState.worker.terminate();\n        workerState.worker = null;\n    }\n}\n","import React from 'react';\nimport styled from 'styled-components';\n\nconst RGBContainer = styled.div`\n    .option {\n        padding: 1em;\n        margin: 4px;\n        border: 1px solid #f0f0f0;\n        background-color: #f0f0f0;\n        cursor: pointer;\n    }\n    .choosen.option {\n        background-color: #fff;\n    }\n`;\n\nexport interface RGBOption {\n    label: string;\n    value: any;\n}\n\ninterface RadioGroupButtonsProps {\n    options: RGBOption[];\n    onChange?: (value: any, index: number) => void;\n    choosenIndex: number;\n}\n\nconst RadioGroupButtons: React.FC<RadioGroupButtonsProps> = (props) => {\n    const { options, onChange, choosenIndex } = props;\n    return (\n        <RGBContainer>\n            {options.map((op, i) => (\n                <div\n                    key={i}\n                    className={`${choosenIndex === i ? 'choosen' : ''} option`}\n                    onClick={() => {\n                        if (onChange) {\n                            onChange(op.value, i);\n                        }\n                    }}\n                >\n                    {op.label}\n                </div>\n            ))}\n        </RGBContainer>\n    );\n};\n\nexport default RadioGroupButtons;\n","import React, { useEffect, useState, useMemo, useRef } from 'react';\nimport { Record, Field, Filters, IMeasure } from '../interfaces';\nimport { Insight, Utils, UnivariateSummary } from 'visual-insights';\nimport { baseVis, IReasonType } from './std2vegaSpec';\nimport embed from 'vega-embed';\nimport { getExplaination, IVisSpace } from '../services';\nimport { Spinner } from '@tableau/tableau-ui';\nimport RadioGroupButtons from './radioGroupButtons';\nimport { IExplaination, IMeasureWithStat } from '../insights';\nimport { mergeMeasures } from './utils';\nimport ReactJson from 'react-json-view';\n\nconst collection  = Insight.IntentionWorkerCollection.init();\n\nconst ReasonTypeNames: { [key: string]: string} = {\n  'selection_dim_distribution': '+',\n  'selection_mea_distribution': '+',\n  'children_major_factor': '',\n  'children_outlier': ''\n}\ncollection.enable(Insight.DefaultIWorker.cluster, false);\ninterface SubSpace {\n  dimensions: string[];\n  measures: IMeasure[];\n}\n\ninterface InsightBoardProps {\n  dataSource: Record[];\n  fields: Field[];\n  filters?: Filters;\n  viewDs: Field[];\n  viewMs: Field[];\n}\nconst InsightBoard: React.FC<InsightBoardProps> = props => {\n  const { dataSource, fields, viewDs, viewMs, filters } = props;\n  const [recSpaces, setRecSpaces] = useState<IExplaination[]>([]);\n  const [visSpaces, setVisSpaces] = useState<IVisSpace[]>([]);\n  const [visIndex, setVisIndex] = useState<number>(0);\n  const [loading, setLoading] = useState<boolean>(false);\n  const [valueExp, setValueExp] = useState<IMeasureWithStat[]>([]);\n  const container = useRef<HTMLDivElement>(null);\n\n  const dimsWithTypes = useMemo(() => {\n    const dimensions = fields\n      .filter((f) => f.type === 'D')\n      .map((f) => f.id)\n      .filter((f) => !Utils.isFieldUnique(dataSource, f));\n    return UnivariateSummary.getAllFieldTypes(dataSource, dimensions);\n  }, [fields, dataSource])\n\n  const measWithTypes = useMemo(() => {\n    const measures = fields.filter((f) => f.type === 'M').map((f) => f.id);\n    return measures.map((m) => ({\n      name: m,\n      type: 'quantitative',\n    }));\n  }, [fields]);\n\n  useEffect(() => {\n    if (dimsWithTypes.length > 0 && measWithTypes.length > 0 && dataSource.length > 0) {\n      const measures = fields.filter((f) => f.type === 'M').map((f) => f.id);\n      const dimensions = dimsWithTypes.map(d => d.name);\n      const currentSpace: SubSpace = {\n          dimensions: viewDs.map((f) => f.id),\n          measures: viewMs.map((f) => ({\n            key: f.id,\n            op: f.aggName as any\n          })),\n      };\n      setLoading(true);\n      getExplaination({\n        dimensions,\n        measures,\n        dataSource,\n        currentSpace,\n        filters\n      }).then(({ visSpaces, explainations, valueExp }) => {\n        setRecSpaces(explainations);\n        setVisSpaces(visSpaces);\n        setValueExp(valueExp);\n        setLoading(false);\n      })\n    }\n  }, [fields, viewDs, viewMs, measWithTypes, filters, dimsWithTypes, measWithTypes, dataSource])\n\n  const fieldsWithType = useMemo(() => {\n    return [...dimsWithTypes, ...measWithTypes];\n  }, [dimsWithTypes, measWithTypes])\n\n  useEffect(() => {\n    const RecSpace = recSpaces[visIndex];\n    const visSpec = visSpaces[visIndex];\n    if (container.current && RecSpace && visSpec) {\n      const usePredicates: boolean =\n          RecSpace.type === 'selection_dim_distribution' ||\n          RecSpace.type === 'selection_mea_distribution';\n      const mergedMeasures = mergeMeasures(RecSpace.measures, RecSpace.extendMs);\n      const _vegaSpec = baseVis(\n          visSpec.schema,\n          visSpec.schema.geomType && visSpec.schema.geomType[0] === 'point'\n              ? dataSource\n              : visSpec.dataView,\n          // result.aggData,\n          [...RecSpace.dimensions, ...RecSpace.extendDs],\n          [...RecSpace.measures, ...RecSpace.extendMs].map(m => m.key),\n          usePredicates ? RecSpace.predicates : null,\n          mergedMeasures.map((m) => ({\n              op: m.op,\n              field: m.key,\n              as: m.key,\n          })),\n          fieldsWithType as any,\n          RecSpace.type as IReasonType,\n          true,\n          true\n      );\n      if (container.current) {\n        console.log(_vegaSpec)\n        embed(container.current, _vegaSpec);\n      }\n    }\n  }, [visIndex, recSpaces, visSpaces, fieldsWithType, dataSource])\n\n  const FilterDesc = useMemo<string>(() => {\n    if (filters) {\n      const dimValues = Object.keys(filters)\n      .filter(k => filters[k].length > 0)\n        .map((k) => {\n          return `${k}=${filters[k]}`;\n        });\n      return `${dimValues.join(', ')}`; \n    }\n    return ''\n  }, [filters])\n\n  const valueDesc = useMemo<string>(() => {\n    const meaStatus = valueExp.map(\n        (mea) => `${mea.key}(${mea.op})${mea.score === 1 ? '' : ''}`\n    );\n    return meaStatus.join(', ');\n  }, [valueExp])\n\n  return (\n      <div style={{ maxHeight: '720px', minHeight: '200px', overflowY: 'auto', maxWidth: '880px' }}>\n          <p>\n              {FilterDesc}, {valueDesc}\n          </p>\n          {loading && (\n              <div aria-busy style={{ display: 'inline-block' }}>\n                  <Spinner />\n              </div>\n          )}\n          <div style={{ display: 'flex' }}>\n              <div style={{ flexBasis: '200px', flexShrink: 0 }}>\n                  <RadioGroupButtons\n                      choosenIndex={visIndex}\n                      options={recSpaces.map((s, i) => ({\n                          value: s.type || '' + i,\n                          label: `${s.type ? ReasonTypeNames[s.type] : ''}: ${Math.round(\n                              s.score * 100\n                          )}%`,\n                      }))}\n                      onChange={(v, i) => {\n                          setVisIndex(i);\n                      }}\n                  />\n              </div>\n              <div>\n                  <div ref={container}></div>\n                  {recSpaces[visIndex] && (\n                      <div>\n                          {recSpaces[visIndex].dimensions.join(', ')}<br />\n                          {recSpaces[visIndex].measures.map((m) => m.key).join(', ')}<br />\n                          \n                          {recSpaces[visIndex].type\n                              ? ReasonTypeNames[recSpaces[visIndex].type!]\n                              : ''}{' '}\n                          {Math.round(recSpaces[visIndex].score * 100)}%\n                          <br />\n                          {recSpaces[visIndex].description &&\n                              recSpaces[visIndex].description.intMeasures &&\n                              FilterDesc +\n                                  recSpaces[visIndex].description.intMeasures\n                                      .map(\n                                          (mea: any) =>\n                                              `${mea.key}(${mea.op})}${\n                                                  mea.score === 1 ? '' : ''\n                                              }`\n                                      )\n                                      .join(', ')}\n                          <br />\n                          <ReactJson src={recSpaces[visIndex].description} />\n                      </div>\n                  )}\n              </div>\n          </div>\n      </div>\n  );\n}\n\nexport default InsightBoard;\n","import { IMeasure } from \"../interfaces\";\n/**\n * measureskeymeasures2op1op\n * @param measures1 \n * @param measures2 \n */\nexport function mergeMeasures(measures1: IMeasure[], measures2: IMeasure[]): IMeasure[] {\n    const measureKeys: Set<string> = new Set();\n    const merged: IMeasure[] = [];\n    for (let mea of measures1) {\n        measureKeys.add(mea.key);\n        merged.push(mea);\n    }\n    for (let mea of measures2) {\n        // measureKeys.add(mea.k)\n        if (measureKeys.has(mea.key)) {\n            const targetIndex = merged.findIndex(f => f.key === mea.key);\n            if (targetIndex > -1) {\n                merged[targetIndex] = mea;\n            }\n        } else {\n            measureKeys.add(mea.key);\n            merged.push(mea)\n        }\n    }\n    return merged;\n}","import React from 'react';\nimport styled from 'styled-components';\nimport { IconButton } from 'office-ui-fabric-react';\nconst Container = styled.div`\n  width: 880px;\n  max-height: 800px;\n  overflow: auto;\n  > div.header {\n    background-color: #f0f0f0;\n    display: flex;\n    padding: 8px;\n    align-items: center;\n  }\n  > div.container {\n    padding: 1em;\n  }\n  position: fixed;\n  left: 50%;\n  top: 50%;\n  transform: translate(-50%, -50%);\n  background-color: #fff;\n  box-shadow: 0px 0px 12px 3px rgba(0, 0, 0, 0.19);\n  border-radius: 4px;\n  z-index: 999;\n`;\ninterface ModalProps {\n  onClose?: () => void\n  title?: string;\n}\nconst Modal: React.FC<ModalProps> = props => {\n  const { onClose, title } = props;\n  return (\n    <Container>\n      <div className=\"header\">\n        {title}\n        <IconButton\n          iconProps={{ iconName: 'Cancel' }}\n          title=\"Upload\"\n          ariaLabel=\"upload data\"\n          onClick={onClose}\n        />\n      </div>\n      <div className=\"container\">{props.children}</div>\n    </Container>\n  )\n}\n\nexport default Modal;\n","import React from 'react';\nimport { Record, IField } from '../interfaces';\nimport styled from 'styled-components';\nimport { DropdownSelect } from '@tableau/tableau-ui';\nimport produce from 'immer';\n\ninterface TableProps {\n    fields: IField[];\n    dataSource: Record[];\n    size?: number;\n    onFieldsUpdate: (fields: IField[]) => void\n}\nconst Container = styled.div`\n    overflow-x: auto;\n    table {\n        box-sizing: content-box;\n        font-family: Lato, 'Helvetica Neue', Arial, Helvetica, sans-serif;\n        border-collapse: collapse;\n        font-size: 12px;\n        thead {\n            th {\n                text-align: left;\n                border: 1px solid #f5f5f5;\n                padding: 8px;\n                margin: 2px;\n            }\n            th.number {\n                border-top: 3px solid #5cdbd3;\n            }\n            th.text {\n                border-top: 3px solid #69c0ff;\n            }\n        }\n        tbody {\n            td {\n                border: 1px solid #f5f5f5;\n                padding: 0px 8px;\n            }\n            td.number {\n                text-align: right;\n            }\n            td.text {\n                text-align: left;\n            }\n        }\n    }\n`;\nconst TYPE_LIST = [\n    {\n        value: 'dimension',\n        label: ''\n    },\n    {\n        value: 'measure',\n        label: ''\n    }\n];\nfunction getCellType(field: IField): 'number' | 'text' {\n    return field.type === 'number' || field.type === 'integer' ? 'number' : 'text';\n}\nfunction getHeaderType(field: IField): 'number' | 'text' {\n    return field.analyticType === 'dimension'? 'text' : 'number';\n}\nconst Table: React.FC<TableProps> = props => {\n    const { fields, dataSource, size = 10, onFieldsUpdate } = props;\n    return (\n        <Container>\n            <table>\n                <thead>\n                    <tr>\n                        {fields.map((field, fIndex) => (\n                            <th key={field.key} className={getHeaderType(field)}>\n                                <b>{field.key}</b>({field.type})\n                                <div>\n                                    <DropdownSelect kind=\"line\" value={field.analyticType} onChange={(e) => {\n                                        const nextFields = produce(fields, draft => {\n                                            draft[fIndex].analyticType = e.target.value as any;\n                                        })\n                                        onFieldsUpdate(nextFields);\n                                    }}>\n                                        {\n                                            TYPE_LIST.map(type => <option key={type.value} value={type.value}>{type.label}</option>)\n                                        }\n                                    </DropdownSelect>\n                                </div>\n\n                            </th>\n                        ))}\n                    </tr>\n                </thead>\n                <tbody>\n                    {dataSource.slice(0, size).map((record, index) => (\n                        <tr key={index}>\n                            {fields.map((field) => (\n                                <td\n                                    key={field.key + index}\n                                    className={getCellType(field)}\n                                >\n                                    {record[field.key]}\n                                </td>\n                            ))}\n                        </tr>\n                    ))}\n                </tbody>\n            </table>\n        </Container>\n    );\n}\n\nexport default Table;\n","import React, { useContext, useState, useCallback } from 'react';\nimport { DataSet } from '../interfaces';\nimport produce, { setAutoFreeze } from 'immer';\nsetAutoFreeze(false);\ninterface IGlobalState {\n    dataBase: DataSet[];\n    currentDBIndex: number;\n}\n\nexport function getInitGState(): IGlobalState {\n    return {\n        dataBase: [\n            // getStudentsData(),\n            // getTitanicData()\n        ],\n        currentDBIndex: 0,\n    };\n}\ntype IUpdater<T> = (draft: T) => void;\nconst initState = getInitGState();\nexport const GlobalContext = React.createContext<[IGlobalState, (updater: IUpdater<IGlobalState>) => void]>(null!);\n\nexport function useLocalState() {\n    return useContext(GlobalContext);\n}\n\nexport const GlobalContextWrapper: React.FC = props => {\n    const [gs, setGS] = useState<IGlobalState>(initState);\n    const updateGlobalState = useCallback((updater: IUpdater<IGlobalState>) => {\n        const nextState = produce<IGlobalState>(gs, updater);\n        setGS(nextState);\n    }, [gs])\n    return <GlobalContext.Provider value={[gs, updateGlobalState]}>\n        {\n            props.children\n        }\n    </GlobalContext.Provider>\n}","import React, { useRef, useState, useCallback } from 'react';\nimport { Button, TextField } from '@tableau/tableau-ui';\nimport { FileReader } from '@kanaries/web-data-loader';\nimport { Record, IField } from '../interfaces';\nimport { Insight } from 'visual-insights';\nimport Table from './table';\nimport styled from 'styled-components';\nimport { useLocalState } from '../store';\n\nconst Container = styled.div`\n    overflow-x: auto;\n    table {\n        box-sizing: content-box;\n        font-family: Lato, 'Helvetica Neue', Arial, Helvetica, sans-serif;\n        border-collapse: collapse;\n        thead {\n            td {\n                text-align: left;\n            }\n        }\n        tbody {\n            td.number {\n                text-align: right;\n            }\n            td.text {\n                text-align: left;\n            }\n        }\n    }\n`;\nfunction transData(dataSource: Record[]): {\n    dataSource: Record[];\n    fields: IField[]\n} {\n    if (dataSource.length === 0) return {\n        dataSource: [],\n        fields: []\n    };\n    let ans: Record[] = [];\n    const keys = Object.keys(dataSource[0]);\n    const vie = new Insight.VIEngine();\n    vie.setDataSource(dataSource)\n        .setFieldKeys(keys)\n        .buildfieldsSummary();\n    const fields = vie.fields;\n    // console.log(fields)\n    for (let record of dataSource) {\n        const newRecord: Record = {};\n        for (let field of fields) {\n            if (field.dataType === 'number' || field.dataType === 'integer') {\n                newRecord[field.key] = Number(record[field.key])\n            } else {\n                newRecord[field.key] = record[field.key]\n            }\n        }\n        ans.push(newRecord);\n    }\n    return {\n        dataSource: ans,\n        fields: fields.map(f => ({\n            key: f.key,\n            type: f.dataType,\n            analyticType: f.analyticType\n        }))\n    }\n}\ninterface DSPanelProps {\n    dbIndex: number;\n    onSubmit?: () => void\n}\nconst DataSourcePanel: React.FC<DSPanelProps> = props => {\n    const { dbIndex, onSubmit } = props;\n    const fileRef = useRef<HTMLInputElement>(null);\n    const [dataSource, setDataSource] = useState<Record[]>([]);\n    const [fields, setFields] = useState<IField[]>([]);\n    const [GS, updateGS] = useLocalState();\n    const [dsName, setDSName] = useState<string>('')\n\n    const onFieldsChange = useCallback((fields: IField[]) => {\n        setFields(fields);\n    }, [])\n    const onSubmitData = useCallback(() => {\n        updateGS(draft => {\n            draft.dataBase[dbIndex] = {\n                id: 'test' + dbIndex,\n                name: dsName,\n                fields,\n                dataSource\n            }\n        })\n        if (onSubmit) {\n            onSubmit();\n        }\n    }, [dbIndex, fields, dataSource, dsName])\n    return (\n        <Container>\n            <input\n                style={{ display: 'none' }}\n                type=\"file\"\n                ref={fileRef}\n                onChange={(e) => {\n                    const files = e.target.files;\n                    if (files !== null) {\n                        const file = files[0];\n                        FileReader.csvReader({\n                            file,\n                            config: { type: 'reservoirSampling', size: Infinity },\n                            onLoading: () => {}\n                        }).then((data) => {\n                            // console.log(data)\n                            const result = transData(data as Record[]);\n                            console.log(result);\n                            // TODO: need fix web-data-loader issue #2\n                            setDataSource(result.dataSource.slice(0, -1));\n                            setFields(result.fields);\n                        });\n                    }\n                }}\n            />\n            <div style={{ margin: '1em 0em' }}>\n                <Button\n                    style={{ marginRight: 12 }}\n                    onClick={() => {\n                        if (fileRef.current) {\n                            fileRef.current.click();\n                        }\n                    }}\n                >\n                    \n                </Button>\n                <Button kind=\"primary\" disabled={dataSource.length === 0} onClick={() => {\n                    onSubmitData();\n                }}></Button>\n            </div>\n            <div style={{ margin: '1em 0em' }}>\n                <TextField label=\"\" value={dsName} onChange={(e) => {\n                    setDSName(e.target.value)\n                }} />\n            </div>\n            <Table dataSource={dataSource} fields={fields} onFieldsUpdate={onFieldsChange} />\n        </Container>\n    );\n}\n\nexport default DataSourcePanel;\n","import React, { useState, useEffect, useMemo, useCallback } from 'react';\nimport DraggableFields, { DraggableFieldState } from './Fields';\nimport { Record, Filters, Field, IField } from './interfaces';\nimport ReactVega from './vis/react-vega';\nimport { GEMO_TYPES } from './config';\nimport { LiteForm } from './components/liteForm';\nimport { Container } from './components/container';\nimport ClickMenu from './components/clickMenu';\nimport InsightBoard from './InsightBoard';\nimport { Button, DropdownSelect, Checkbox } from '@tableau/tableau-ui';\nimport { ProgressIndicator } from 'office-ui-fabric-react'\nimport Modal from './components/modal';\nimport DataSourcePanel from './dataSource/index';\nimport { useLocalState } from './store';\nimport { preAnalysis, destroyWorker } from './services'\n\n\nconst INIT_DF_STATE: DraggableFieldState = {\n  fields: [],\n  rows: [],\n  columns: [],\n  color: [],\n  opacity: [],\n  size: [],\n};\n\nexport interface EditorProps {\n  dataSource: Record[];\n  dimensions: string[];\n  measures: string[];\n}\n\nconst App: React.FC<EditorProps> = props => {\n  const { dataSource, dimensions, measures } = props;\n  const [GS, updateGS] = useLocalState();\n  const [fields, setFields] = useState<Field[]>([]);\n  const [fstate, setFstate] = useState<DraggableFieldState>(INIT_DF_STATE);\n  const [geomType, setGeomType] = useState<string>(GEMO_TYPES[0].value);\n  const [aggregated, setAggregated] = useState<boolean>(true);\n  const [position, setPosition] = useState<[number, number]>([0, 0]);\n  const [showMenu, setShowMenu] = useState<boolean>(false);\n  const [showInsight, setShowInsight] = useState<boolean>(false);\n  const [filters, setFilters] = useState<Filters>({});\n  const [showDSPanel, setShowDSPanel] = useState<boolean>(false);\n  const [insightReady, setInsightReady] = useState<boolean>(false);\n  // const [ds, setDS] = useState<Dataset>({ dimensions: [], measures: [], dataSource: []});\n  const [newDBIndex, setNewDBIndex] = useState<number>(0);\n  // useEffect(() => {\n  //   const target = DS_LIST.find(d => d.value === dsKey);\n  //   if (target) {\n  //     setDS(target.service())\n  //   }\n  // }, [dsKey])\n  useEffect(() => {\n    const fields: IField[] = [];\n    dimensions.forEach(f => {\n      fields.push({\n        key: f,\n        type: 'D',\n        analyticType: 'dimension'\n      })\n    });\n    measures.forEach(f => {\n      fields.push({\n        key: f,\n        type: 'D',\n        analyticType: 'measure'\n      })\n    });\n    updateGS(state => {\n      state.dataBase = [\n        {\n          id: 'default',\n          name: 'context dataset',\n          dataSource: dataSource,\n          fields\n        }\n      ]\n    })\n  }, [dataSource, dimensions, measures])\n  useEffect(() => {\n    const fs: Field[] = [];\n    const ds = GS.dataBase[GS.currentDBIndex];\n    if (ds) {\n      ds.fields.forEach((f) => {\n        fs.push({\n          id: f.key,\n          name: f.key,\n          type: f.analyticType === 'dimension' ? 'D' : 'M',\n          aggName: f.analyticType === 'measure' ? 'sum' : undefined,\n        })\n      })\n      setFields(fs)\n    }\n  }, [GS.currentDBIndex, GS.dataBase]);\n\n  const viewDimensions = useMemo<Field[]>(() => {\n    return [\n      ...fstate.rows,\n      ...fstate.columns,\n      ...fstate.color,\n      ...fstate.opacity,\n      ...fstate.size\n    ].filter(f => f.type === 'D');\n  }, [fstate])\n  const viewMeasures = useMemo<Field[]>(() => {\n    return [\n      ...fstate.rows,\n      ...fstate.columns,\n      ...fstate.color,\n      ...fstate.opacity,\n      ...fstate.size,\n    ].filter((f) => f.type === 'M');\n  }, [fstate]);\n\n  useEffect(() => {\n    const ds = GS.dataBase[GS.currentDBIndex];\n    if (ds) {\n      setInsightReady(false)\n      preAnalysis({\n        dataSource: ds.dataSource,\n        dimensions: ds.fields.filter(f => f.analyticType === 'dimension').map(f => f.key),\n        measures: ds.fields.filter(f => f.analyticType === 'measure').map(f => f.key)\n      }).then(() => {\n        setInsightReady(true);\n      })\n    }\n    return () => {\n      destroyWorker();\n    }\n  }, [GS.currentDBIndex, GS.dataBase]);\n\n  const createDB = useCallback(() => {\n    updateGS(draft => {\n      const newLastIndex = draft.dataBase.length;\n      draft.dataBase.push({\n        id: 'ds_' + newLastIndex,\n        name: '' + newLastIndex,\n        dataSource: [],\n        fields: []\n      })\n      setNewDBIndex(newLastIndex);\n    })\n  }, []);\n\n  return (\n    <div className=\"App\">\n      <Container>\n        {!insightReady && <ProgressIndicator description=\"analyzing\" />}\n        <label style={{ fontSize: '12px', marginRight: '4px' }}></label>\n        <DropdownSelect\n          value={GS.dataBase[GS.currentDBIndex] ? GS.dataBase[GS.currentDBIndex].id : 'empty'}\n          onChange={(e) => {\n            // setDSKey(e.target.value);\n            updateGS((draft) => {\n              const index = draft.dataBase.findIndex((ds) => ds.id === e.target.value)\n              draft.currentDBIndex = index\n            })\n          }}\n        >\n          {GS.dataBase.map((ds) => (\n            <option value={ds.id} key={ds.id}>\n              {ds.name}\n            </option>\n          ))}\n        </DropdownSelect>\n        <Button\n          style={{ marginLeft: '8px' }}\n          onClick={() => {\n            createDB()\n            setShowDSPanel(true)\n          }}\n        >\n          \n        </Button>\n        {showDSPanel && (\n          <Modal\n            title=\"\"\n            onClose={() => {\n              setShowDSPanel(false)\n            }}\n          >\n            <DataSourcePanel\n              dbIndex={newDBIndex}\n              onSubmit={() => {\n                setShowDSPanel(false)\n              }}\n            />\n          </Modal>\n        )}\n        {insightReady && <span style={{ margin: '1em' }}>iready</span>}\n      </Container>\n      <Container>\n        <DraggableFields\n          onStateChange={(state) => {\n            setFstate(state)\n          }}\n          fields={fields}\n        />\n      </Container>\n      <Container>\n        <LiteForm style={{ display: 'flex', flexWrap: 'wrap', alignItems: 'center' }}>\n          <div className=\"item\">\n            <Checkbox\n              checked={aggregated}\n              onChange={(e) => {\n                setAggregated(e.target.checked)\n              }}\n            >\n              \n            </Checkbox>\n          </div>\n          <div className=\"item\">\n            <label></label>\n            <DropdownSelect\n              onChange={(e) => {\n                setGeomType(e.target.value)\n              }}\n            >\n              {GEMO_TYPES.map((g) => (\n                <option key={g.value} value={g.value}>\n                  {g.label}\n                </option>\n              ))}\n            </DropdownSelect>\n          </div>\n        </LiteForm>\n      </Container>\n      {GS.dataBase[GS.currentDBIndex] && (\n        <Container>\n          {showInsight && (\n            <Modal\n              onClose={() => {\n                setShowInsight(false)\n              }}\n            >\n              <InsightBoard\n                dataSource={GS.dataBase[GS.currentDBIndex].dataSource}\n                fields={fields}\n                viewDs={viewDimensions}\n                viewMs={viewMeasures}\n                filters={filters}\n              />\n            </Modal>\n          )}\n          {showMenu && (\n            <ClickMenu x={position[0]} y={position[1]}>\n              <div\n                onClick={() => {\n                  setShowMenu(false)\n                  setShowInsight(true)\n                }}\n              >\n                \n              </div>\n            </ClickMenu>\n          )}\n\n          <ReactVega\n            geomType={geomType}\n            defaultAggregate={aggregated}\n            dataSource={GS.dataBase[GS.currentDBIndex].dataSource}\n            rows={fstate.rows}\n            columns={fstate.columns}\n            color={fstate.color[0]}\n            opacity={fstate.opacity[0]}\n            size={fstate.size[0]}\n            onGeomClick={(values, e) => {\n              setFilters(values)\n              setPosition([e.pageX, e.pageY])\n              setShowMenu(true)\n            }}\n          />\n        </Container>\n      )}\n    </div>\n  )\n}\n\nexport default App;\n","import React from 'react';\nimport App, { EditorProps } from './App';\nimport { GlobalContextWrapper } from './store/index';\n\nconst Editor: React.FC<EditorProps> = props => {\n    return <GlobalContextWrapper>\n      <App {...props} />\n    </GlobalContextWrapper>\n}\n\nexport default Editor;\n","import React from 'react';\nimport { DetailsList, SelectionMode } from 'office-ui-fabric-react';\nimport { DataSource, BIField } from '../global';\nexport interface DataTableProps {\n  dataSource: DataSource,\n  fields: BIField[]\n}\nconst DataTable: React.FC<DataTableProps> = (props) => {\n  const { dataSource = [], fields = [] } = props;\n  let columns = fields.map(field => {\n    return {\n      key: field.name,\n      name: field.name,\n      fieldName: field.name,\n      minWidth: 70,\n      maxHeight: 90\n    }\n  });\n\n  return <div style={{maxHeight: 400, overflow: 'auto'}}>\n    <DetailsList items={dataSource} columns={columns} selectionMode={SelectionMode.none} />\n  </div>\n}\n\nexport default DataTable;","import React, { useState, useEffect } from 'react';\nimport { PrimaryButton, Panel, PanelType, Toggle } from 'office-ui-fabric-react';\nimport intl from 'react-intl-universal';\nimport { BIField, BIFieldType } from '../global';\n\ninterface FieldPanelProps {\n  show: boolean;\n  onClose: () => void;\n  onUpdateConfig: (fields: BIField[]) => void;\n  fields: BIField[];\n}\nconst FieldPanel: React.FC<FieldPanelProps> = (props) => {\n  const {\n    show = false,\n    // fields = [],\n    onUpdateConfig,\n    onClose\n  } = props;\n  const [fields, setFields] = useState<BIField[]>([])\n  useEffect(() => {\n    setFields(props.fields)\n  }, [props.fields])\n  \n  function updateFieldType(field: BIField, type: BIFieldType) {\n    setFields(fields => {\n      return fields.map(f => {\n        if (field.name === f.name) {\n          return {\n            name: field.name,\n            type\n          }\n        } else {\n          return f\n        }\n      })\n    })\n  }\n\n  const onRenderFooterContent = () => <div>\n    <PrimaryButton onClick={() => { onUpdateConfig(fields); onClose(); }}>\n      {intl.get('meta.save')}\n    </PrimaryButton>\n  </div>\n  \n  return (\n    <Panel\n      isOpen={show}\n      type={PanelType.smallFixedFar}\n      onDismiss={onClose}\n      headerText={intl.get('meta.title')}\n      closeButtonAriaLabel=\"Close\"\n      onRenderFooterContent={onRenderFooterContent}\n    >\n      <div>\n        {fields.map((field) => (\n          <Toggle\n            key={field.name}\n            checked={field.type === 'dimension'}\n            label={field.name}\n            onText={intl.get('meta.dimension')}\n            offText={intl.get('meta.measure')}\n            onChange={(e, checked) => {\n              updateFieldType(field, checked ? 'dimension' : 'measure')\n            }}\n          />\n        ))}\n      </div>\n    </Panel>\n  )\n}\n\nexport default FieldPanel;\n","import { Cleaner } from 'visual-insights';\nimport { DataSource } from '../../global';\n\nconst { dropNull, simpleClean, useMode } = Cleaner;\n\n// todo\n// cleanMethodList has redundency.\n// clean method type, cleanData(switch), cleanMethodList should be maintained in one structure.\nexport type CleanMethod = 'dropNull' | 'useMode' | 'simpleClean';\nexport function cleanData (dataSource: DataSource, dimensions: string[], measures: string[], method: CleanMethod): DataSource {\n  // hint: dropNull works really bad when we test titanic dataset.\n  // useMode fails when there are more null values than normal values;\n  switch (method) {\n    case 'dropNull':\n      return dropNull(dataSource, dimensions, measures);\n    case 'useMode':\n      // todo: bad props design\n      // eslint-disable-next-line react-hooks/rules-of-hooks\n      return useMode(dataSource, dimensions.concat(measures));  \n    case 'simpleClean':\n    default:\n      return simpleClean(dataSource, dimensions, measures);\n  }\n}\n\nexport const cleanMethodList: Array<{ key: CleanMethod; text: string }> = [\n  { key: 'dropNull', text: 'drop null records' },\n  { key: 'useMode', text: 'replace null with mode' },\n  { key: 'simpleClean', text: 'simple cleaning' }\n]\n","import { useMemo } from 'react';\nimport { BIField, DataSource, Record } from '../../global';\nimport { Transform } from '../../utils/index'\nimport {  cleanData,  CleanMethod } from './clean';\nimport { deepcopy } from '../../utils/index';\n\n\nexport function useDataSource (rawData: DataSource, fields: BIField[], cleanMethod: CleanMethod): [DataSource, DataSource] {\n  const dimensions = useMemo<string[]>(() => {\n    return fields.filter(field => field.type === 'dimension').map(field => field.name)\n  }, [fields])\n\n  const measures = useMemo<string[]>(() => {\n    return fields.filter(field => field.type === 'measure').map(field => field.name)\n  }, [fields])\n\n  const dataSource = useMemo<DataSource>(() => {\n    return rawData.map(row => {\n      let record: Record = {}\n      fields.forEach(field => {\n        record[field.name] = field.type === 'dimension' ? row[field.name] : Transform.transNumber(row[field.name])\n      })\n      return record\n    })\n  }, [rawData, fields])\n\n  const preparedData = useMemo<DataSource>(() => {\n    return cleanData(deepcopy(dataSource), dimensions, measures, cleanMethod);\n  }, [dimensions, measures, dataSource, cleanMethod])\n\n  return [dataSource, preparedData]\n}","// todo replace the deepcopy with a safe and faster one.\nexport default function deepcopy(dataSource: any) {\n  return JSON.parse(JSON.stringify(dataSource))\n}","import { RATH_INDEX_COLUMN_KEY } from \"../../constants\";\nimport { BIField, Record } from \"../../global\";\nimport { FileLoader, isASCII } from \"../../utils\";\nimport { Cleaner, Sampling } from 'visual-insights';\nimport { FileReader } from '@kanaries/web-data-loader'\n\nexport enum SampleKey {\n  none = 'none',\n  reservoir = 'reservoir',\n}\n\nexport const SampleOptions = [\n  {\n    key: SampleKey.none,\n    text: 'none'\n  },\n  {\n    key: SampleKey.reservoir,\n    text: 'reservoir'\n  }\n];\n\n/**\n * index key\n * @param data \n */\nexport function setIndexKey(data: Record[]): Record[] {\n    data.forEach((record, i) => {\n        record[RATH_INDEX_COLUMN_KEY] = i;\n    })\n    return data;\n}\n\nexport function fixUnicodeFields(fields: BIField[], dataSource: Record[]): {\n    fields: BIField[],\n    dataSource: Record[]\n} {\n    const newFields: BIField[] = fields.map((f, i) => {\n        const nF = { ...f };\n        if (!isASCII(nF.name)) {\n            nF.name = `${f.name}-cid-${i}`\n        }\n        return nF\n    })\n    const newDataSource: Record[] = dataSource.map(row => {\n        const newRow: Record = {};\n        for (let i = 0; i < newFields.length; i++) {\n            newRow[newFields[i].name] = row[fields[i].name] \n        }\n        return newRow\n    })\n    return {\n        fields: newFields,\n        dataSource: newDataSource\n    }\n}\n\nconst onDataLoading = (value: number) => {\n    console.log('data loading', Math.round(value * 100) + '%')\n}\n\nexport async function loadDataFile(file: File, sampleMethod: SampleKey, sampleSize: number = 500) {\n\n    /**\n     * tmpFields is fields cat by specific rules, the results is not correct sometimes, waitting for human's input\n     */\n    let tmpFields: BIField[] = []\n    let rawData: Record[] = []\n\n    if (file.type === 'text/csv' || file.type === 'application/vnd.ms-excel') {\n        rawData = await FileLoader.csvLoader(file)\n        if (sampleMethod === SampleKey.reservoir) {\n            rawData = (await FileReader.csvReader({\n              file,\n              config: {\n                type: 'reservoirSampling',\n                size: sampleSize,\n              },\n              onLoading: onDataLoading\n            })) as Record[]\n        } else {\n            rawData = (await FileReader.csvReader({\n              file,\n              onLoading: onDataLoading\n            })) as Record[]\n        }\n    } else if (file.type === 'application/json') {\n        rawData = await FileLoader.jsonLoader(file)\n        if (sampleMethod === SampleKey.reservoir) {\n            rawData = Sampling.reservoirSampling(rawData, sampleSize)\n        }\n    } else {\n        throw new Error(`unsupported file type=${file.type} `)\n    }\n    rawData = Cleaner.dropNullColumn(rawData, Object.keys(rawData[0])).dataSource\n    rawData = setIndexKey(rawData);\n    let keys = Object.keys(rawData[0])\n    tmpFields = keys.map((fieldName, index) => {\n        if (fieldName === RATH_INDEX_COLUMN_KEY) return {\n            name: fieldName,\n            type: 'dimension'\n        }\n        return {\n            name: fieldName,\n            type: rawData.every((row) => {\n                    return !isNaN(row[fieldName]) || row[fieldName] === undefined\n                })\n                ? 'measure'\n                : 'dimension',\n        }\n    })\n    const fixedDataSet = fixUnicodeFields(tmpFields, rawData);\n    return fixedDataSet;\n}","export const RATH_INDEX_COLUMN_KEY = '__rath_index_col_key__';","import * as FileLoader from './fileParser';\nimport * as Transform from './transform';\nimport useComposeState from './useComposeState';\nimport deepcopy from './deepcopy';\n\nexport function isASCII(str: string) {\n  return /^[\\x00-\\x7F]*$/.test(str)\n}\n\n\nexport {\n  FileLoader,\n  useComposeState,\n  deepcopy,\n  Transform\n}","import React, { useState, useRef, useMemo } from \"react\";\nimport intl from 'react-intl-universal'\nimport { useGlobalState } from \"../../state\";\nimport { useComposeState } from '../../utils/index';\nimport { ComboBox, PrimaryButton, IconButton, Callout, Stack, CommandBar, ChoiceGroup, IChoiceGroupOption, Label, SpinButton } from 'office-ui-fabric-react';\nimport DataTable from '../../components/table';\nimport FieldPanel from '../../components/fieldConfig';\nimport {  cleanMethodList, CleanMethod } from './clean';\nimport { useDataSource } from './useDataSource';\nimport { useId } from '@uifabric/react-hooks';\nimport { loadDataFile, SampleKey, SampleOptions } from \"./utils\";\n\ninterface PageStatus {\n  show: {\n    insightBoard: boolean;\n    configPanel: boolean;\n    fieldConfig: boolean;\n    dataConfig: boolean;\n  }\n}\n\ninterface DataSourceBoardProps {\n  onExtractInsights: () => void;\n}\n\nconst DataSourceLoggerURL =\n  'https://1423108296428281.cn-hangzhou.fc.aliyuncs.com/2016-08-15/proxy/Rath/dataSourceLogger/';\n\n\nconst DataSourceBoard: React.FC<DataSourceBoardProps> = (props) => {\n  const [state,updateState, dispatch] = useGlobalState();\n  const [pageStatus, setPageStatus] = useComposeState<PageStatus>({\n    show: {\n      insightBoard: false,\n      fieldConfig: false,\n      configPanel: false,\n      dataConfig: false\n    }\n  })\n  const [cleanMethod, setCleanMethod] = useState<CleanMethod>('dropNull');\n  const [sampleMethod, setSampleMethod] = useState<SampleKey>(SampleKey.none)\n  const [sampleSize, setSampleSize] = useState<number>(500);\n\n  const dataSetting = useRef<HTMLDivElement>(null);\n  const fileEle = useRef<HTMLInputElement>(null);\n\n  const [dataSource, preparedData] = useDataSource(state.rawData, state.fields, cleanMethod);\n\n  const labelId = useId('labelElement');\n\n  async function fileUploadHanlder () {\n    if (fileEle.current !== null && fileEle.current.files !== null) {\n      const file = fileEle.current.files[0];\n      const { fields, dataSource } = await loadDataFile(file, sampleMethod, sampleSize)\n      fetch(DataSourceLoggerURL, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({\n          fields,\n          dataSource: dataSource.slice(0, 10)\n        })\n      }).then(res => res.json())\n        .then(res => { console.log(res) })\n      updateState(draft => {\n        draft.fields = fields;\n        draft.rawData = dataSource;\n      })\n      setPageStatus(draft => {\n        draft.show.dataConfig = false;\n      });\n    }\n  }\n  // const analysisHandler = startAnalysis(preparedData, state.fields);\n\n  const commandBarList = [\n    {\n      key: 'upload',\n      name: intl.get('dataSource.upload.upload'),\n      iconProps: { iconName: 'Upload' },\n      onClick: () => {\n        if (fileEle.current) {\n          fileEle.current.click();\n        }\n      }\n    }\n  ]\n\n  const cleanMethodListLang = useMemo<typeof cleanMethodList>(() => {\n    return cleanMethodList.map(m => {\n      return {\n        key: m.key,\n        text: intl.get(`dataSource.methods.${m.key}`)\n      }\n    })\n  }, [state.lang])\n\n  return (\n    <div className=\"content-container\">\n      <FieldPanel\n        fields={state.fields}\n        show={pageStatus.show.fieldConfig}\n        onUpdateConfig={(fields) => {\n          updateState((draft) => {\n            draft.fields = fields\n          })\n        }}\n        onClose={() => {\n          setPageStatus((draft) => {\n            draft.show.fieldConfig = false\n          })\n        }}\n      />\n      <div className=\"card\">\n        <Stack horizontal>\n          <PrimaryButton\n            disabled={dataSource.length === 0}\n            iconProps={{ iconName: 'Financial' }}\n            text={intl.get('dataSource.extractInsight')}\n            onClick={() => {\n              dispatch('extractInsights', {\n                dataSource: preparedData,\n                fields: state.fields,\n              })\n              props.onExtractInsights()\n            }}\n          />\n          <div ref={dataSetting}>\n            <IconButton\n              iconProps={{ iconName: 'ExcelDocument' }}\n              title=\"Upload\"\n              ariaLabel=\"upload data\"\n              onClick={() => {\n                setPageStatus((draft) => {\n                  draft.show.dataConfig = true\n                })\n              }}\n            />\n            <Callout\n              style={{ maxWidth: 300 }}\n              className=\"vi-callout-callout\"\n              role=\"alertdialog\"\n              gapSpace={0}\n              target={dataSetting.current}\n              onDismiss={() => {\n                setPageStatus((draft) => {\n                  draft.show.dataConfig = false\n                })\n              }}\n              setInitialFocus={true}\n              hidden={!pageStatus.show.dataConfig}\n            >\n              <div className=\"vi-callout-header\">\n                <p className=\"vi-callout-title\">{intl.get('dataSource.upload.title')}</p>\n              </div>\n              <div className=\"vi-callout-inner\">\n                <div className=\"vi-callout-content\">\n                  <p className=\"vi-callout-subTex\">{intl.get('dataSource.upload.fileTypes')}</p>\n                </div>\n                <div>\n                  <Label id={labelId} required={true}>\n                    {intl.get('dataSource.upload.sampling')}\n                  </Label>\n                  <ChoiceGroup\n                    defaultSelectedKey=\"B\"\n                    options={SampleOptions}\n                    selectedKey={sampleMethod}\n                    onChange={(ev: any, option: IChoiceGroupOption | undefined) => {\n                      if (option) {\n                        setSampleMethod(option.key as SampleKey)\n                      }\n                    }}\n                    ariaLabelledBy={labelId}\n                  />\n                  {/* {sampleMethod !== SampleKey.none && (\n                    <Slider\n                      label={intl.get('dataSource.upload.percentSize')}\n                      min={0}\n                      max={1}\n                      step={0.001}\n                      value={sampleSize}\n                      showValue={true}\n                      valueFormat={(value: number) => `${(value * 100).toFixed(1)}%`}\n                      onChange={(val: number) => {\n                        setSampleSize(val)\n                      }}\n                    />\n                  )} */}\n                  {sampleMethod === SampleKey.reservoir && (\n                    <SpinButton\n                      label={intl.get('dataSource.upload.percentSize')}\n                      min={0}\n                      step={1}\n                      value={sampleSize.toString()}\n                      onValidate={(value) => {\n                        setSampleSize(Number(value));\n                      }}\n                      onIncrement={() => {\n                        setSampleSize(v => v + 1)\n                      }}\n                      onDecrement={() => {\n                        setSampleSize(v => Math.max(v - 1, 0))\n                      }}\n                    />\n                  )}\n                </div>\n                <div className=\"vi-callout-actions\">\n                  <input\n                    type=\"file\"\n                    ref={fileEle}\n                    multiple\n                    accept=\"*\"\n                    style={{ display: 'none' }}\n                    onChange={fileUploadHanlder}\n                  />\n                  <CommandBar overflowButtonProps={{ name: 'More' }} items={commandBarList} />\n                </div>\n              </div>\n            </Callout>\n          </div>\n          <IconButton\n            iconProps={{ iconName: 'Settings' }}\n            title=\"Field Setting\"\n            ariaLabel=\"field setting\"\n            onClick={() => {\n              setPageStatus((draft) => {\n                draft.show.fieldConfig = true\n              })\n            }}\n          />\n        </Stack>\n        <div style={{ margin: '20px 0px' }}>\n          <ComboBox\n            styles={{ root: { maxWidth: '180px' } }}\n            selectedKey={cleanMethod}\n            label={intl.get('dataSource.cleanMethod')}\n            allowFreeform={true}\n            autoComplete=\"on\"\n            options={cleanMethodListLang}\n            onChange={(e, option) => {\n              option && setCleanMethod(option.key as CleanMethod)\n            }}\n          />\n        </div>\n        <p style={{ fontSize: 12, fontWeight: 400, color: '#595959' }}>{intl.get('dataSource.tip')}</p>\n        <i style={{ fontSize: 12, fontWeight: 300, color: '#595959' }}>\n          {intl.get('dataSource.recordCount', { count: preparedData.length })}\n        </i>\n        <DataTable fields={state.fields} dataSource={preparedData} />\n      </div>\n    </div>\n  )\n};\n\nexport default DataSourceBoard;\n","import React, { useMemo } from \"react\";\nimport styled from \"styled-components\";\nimport { DataSource } from \"../../global\";\nimport datalib from \"datalib\";\n\nfunction numberWithCommas(x: number): string {\n  let parts = x.toString().split(\".\");\n  parts[0] = parts[0].replace(/\\B(?=(\\d{3})+(?!\\d))/g, \",\");\n  return parts.join(\".\");\n}\n\nconst Card = styled.div`\n  display: inline-block;\n  padding: 1rem;\n  border: 1px solid #f5f5f5;\n  margin: 1rem;\n  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'PingFang SC', 'Hiragino Sans GB',\n  'Microsoft YaHei', 'Helvetica Neue', Helvetica, Arial, sans-serif, 'Apple Color Emoji',\n  'Segoe UI Emoji', 'Segoe UI Symbol';\n  .indicator-card.header {\n    color: #8c8c8c;\n    margin-top: 0px;\n    margin-bottom: 0px;\n    font-size: 20px;\n    line-height: 28px;\n    font-weight: 400;\n  }\n  .indicator-card.content {\n    color: #0078d4;\n    font-size: 56px;\n    line-height: 64px;\n    font-weight: 400;\n    margin: 0px;\n  }\n`;\ninterface IndicatorProps {\n  dataSource: DataSource;\n  measures: string[];\n  operator?: 'sum' | 'mean' | 'max' | 'min';\n}\nconst IndicatorCard: React.FC<IndicatorProps> = props => {\n  const { dataSource = [], measures = [], operator = 'sum' } = props;\n  const value = useMemo(() => {\n    if (measures.length === 0 || dataSource.length === 0) {\n      return '-'\n    }\n    let ans = 0;\n    try {\n      ans = datalib[operator](dataSource.map(d => d[measures[0]]));\n    } catch (error) {\n      console.log('operator does not exist or not in vega/datalib.')\n    }\n    if (Math.abs(ans - Math.round(ans)) > 0.00001) {\n      ans = Number(ans.toFixed(2));\n    }\n    return numberWithCommas(ans);\n  }, [dataSource, measures, operator]);\n\n  return (\n    <Card>\n      <h4 className=\"indicator-card header\">{measures[0]} {operator && `(${operator})`}</h4>\n      <h1 className=\"indicator-card content\">{ value }</h1>\n    </Card>\n  );\n};\n\nexport default IndicatorCard;\n","import React, { useRef, useEffect, useState } from 'react';\nimport embed, { vega, Result } from 'vega-embed';\nimport { Spec } from 'vega';\n// import { Result } from 'vega-embed';\n\ninterface ReactVegaProps {\n  dataSource: any[];\n  spec: Spec;\n  signalHandler?: {\n    [key: string]: (name: any, value: any) => void\n  }\n}\nconst ReactVega: React.FC<ReactVegaProps> = props => {\n  const { spec, dataSource, signalHandler = {} } = props\n  const container = useRef<HTMLDivElement>(null);\n  const [view, setView] = useState<Result['view']>()\n  useEffect(() => {\n    if (container.current) {\n      embed(container.current, spec).then(res => {\n        setView(res.view);\n      })\n    }\n  }, [spec])\n  useEffect(() => {\n    if (view && signalHandler) {\n      for (let key in signalHandler) {\n        view.addSignalListener('sl', signalHandler[key]);\n      }\n    }\n    return () => {\n      if (view && signalHandler) {\n        for (let key in signalHandler) {\n          view.removeSignalListener('sl', signalHandler[key]);\n        }\n      }\n    }\n  }, [view, signalHandler])\n  useEffect(() => {\n    view && view.change('dataSource', vega.changeset().remove(() => true).insert(dataSource))\n    view && view.resize();\n    view && view.runAsync();\n  }, [view, dataSource])\n  return <div ref={container} />\n}\n\nexport default ReactVega;\n","import React, { useMemo, useEffect, useState } from \"react\";\nimport { DashBoard } from \"../../service\";\nimport { DataSource, Field } from \"../../global\";\nimport { specification } from \"visual-insights\";\nimport { useComposeState } from \"../../utils/index\";\nimport { IconButton } from \"office-ui-fabric-react\";\nimport IndicatorCard from \"./indicatorCard\";\nimport ReactVega from '../../components/react-vega';\nimport { DataField, featureVis, targetVis } from '../../queries/index';\n\nconst IndicatorCardType = \"indicator\" as const;\n\ninterface CombinedChartProps {\n  dashBoard: DashBoard;\n  dataSource: DataSource;\n  dimScores: [string, number, number, Field][];\n}\n\ninterface GlobalFilters {\n  [key: string]: any[];\n}\n\nconst CombinedChart: React.FC<CombinedChartProps> = props => {\n  const { dashBoard = [], dataSource = [], dimScores = [] } = props;\n  const [globalFilters, setGlobalFilters] = useComposeState<GlobalFilters>({});\n  const [chartStateList, setChartStateList] = useState<boolean[]>([]);\n  useEffect(() => {\n    setChartStateList(dashBoard.map(() => false));\n  }, [dashBoard]);\n\n  const chartSpecList = useMemo(() => {\n    if (!dashBoard || !dataSource || !dimScores) {\n      return [];\n    }\n    return dashBoard.map(board => {\n      const { dimensions, measures, type } = board;\n      const fieldScores = dimScores.filter(field => {\n        return dimensions.includes(field[0]) || measures.includes(field[0]);\n      });\n      let { schema } = specification(\n        fieldScores,\n        dataSource,\n        dimensions,\n        measures\n      );\n      schema.position = schema.position || [];\n      schema.color = schema.color || [];\n      schema.opacity = schema.opacity || [];\n      schema.size = schema.size || [];\n      schema.shape = schema.shape || [];\n      schema.geomType = schema.geomType || [];\n      schema.highFacets = schema.highFacets || [];\n      schema.facets = schema.facets || [];\n      return {\n        dimensions,\n        measures,\n        type,\n        schema\n      };\n    });\n  }, [dashBoard, dataSource, dimScores]);\n\n  const fieldFeatures = useMemo(() => {\n    return dimScores.map(dim => dim[3])\n  }, [dimScores]);\n\n  const specList = useMemo<any[]>(() => {\n    return chartSpecList.map((spec, index) => {\n      const { dimensions, measures, schema, type } = spec;\n      let dataFields: DataField[] = [];\n      for (let dim of dimensions) {\n        let targetField = fieldFeatures.find(f => f.name === dim);\n\n        dataFields.push({\n          name: dim,\n          semanticType: (targetField ? targetField.type : 'nominal'),\n          type: 'dimension'\n        })\n      }\n      for (let mea of measures) {\n        let targetField = fieldFeatures.find(f => f.name === mea);\n\n        dataFields.push({\n          name: mea,\n          semanticType: (targetField ? targetField.type : 'nominal'),\n          type: 'measure'\n        })\n      }\n    \n      if (type === \"target\" && measures.length === 1) {\n        return {\n          specIndex: index,\n          type: IndicatorCardType,\n          measures: measures,\n          operator: \"sum\"\n        };\n      }\n      let vegaSpec: any = {}\n      if (type === 'target') {\n        vegaSpec = targetVis(schema, dataFields)\n      }\n\n      if (type === 'feature') {\n        vegaSpec = featureVis(schema, dataFields)\n      }\n      vegaSpec.specIndex = index\n      return vegaSpec\n    }) as any;\n  }, [chartSpecList, fieldFeatures]);\n\n  const signalHandler = useMemo(() => {\n    return dashBoard.map((d, index) => {\n      return {\n        sl: (name: any, values: any) => {\n          if (chartStateList[index]) {\n            setGlobalFilters(draft => {\n              if (Object.keys(values).length === 0) {\n                for (let key in draft) {\n                  // delete draft[key]\n                  draft[key] = [];\n                }\n              } else {\n                for (let key in values) {\n                  draft[key] = values[key];\n                }\n              }\n            });\n          }\n        }\n      };\n    });\n  }, [dashBoard, chartStateList, setGlobalFilters]);\n\n  const vsourceList = useMemo<Array<DataSource>>(() => {\n    let ans = [];\n    const filters = Object.keys(globalFilters).map(fieldName => {\n      return {\n        fieldName: fieldName,\n        filter: globalFilters[fieldName],\n        // protentional risk\n        isRange:\n          globalFilters[fieldName].length === 2 &&\n          typeof globalFilters[fieldName][0] === \"number\" &&\n          typeof globalFilters[fieldName][1] === \"number\" &&\n          globalFilters[fieldName][0] < globalFilters[fieldName][1]\n      };\n    });\n    const ds = dataSource.filter(record => {\n      return filters.every(f => {\n        if (f.filter.length === 0) {\n          return true;\n        }\n        if (f.isRange) {\n          return (\n            record[f.fieldName] >= f.filter[0] &&\n            record[f.fieldName] <= f.filter[1]\n          );\n        } else {\n          return f.filter.includes(record[f.fieldName]);\n        }\n      });\n    });\n    for (let i = 0; i < dashBoard.length; i++) {\n      if (chartStateList[i]) {\n        ans.push(dataSource);\n        continue;\n      }\n      ans.push(ds);\n    }\n    return ans;\n  }, [\n    dashBoard,\n    globalFilters,\n    dataSource,\n    chartStateList\n  ]);\n  return (\n    <div>\n      <div>\n      {specList.filter(spec => spec.type === IndicatorCardType).map((spec, index) =>\n          <IndicatorCard\n            key={`ds-ind-chart-${index}`}\n            dataSource={vsourceList[spec.specIndex]}\n            measures={spec.measures}\n          />\n      )}\n      </div>\n      <div>\n      {specList.filter(spec => spec.type !== IndicatorCardType).map((spec, index) =>\n          <div\n            key={`ds-chart-${index}`}\n            style={{\n              display: 'inline-block',\n              padding: \"4px\",\n              margin: \"2px\",\n              height: \"380px\",\n              overflowY: \"auto\"\n            }}\n          >\n            <div\n              style={{ float: \"left\", minWidth: \"300px\", minHeight: \"300px\" }}\n            >\n              {/* <div ref={node => { rendererRef(node, spec.specIndex) }}></div> */}\n              <ReactVega\n                dataSource={vsourceList[spec.specIndex]}\n                spec={spec}\n                signalHandler={\n                  chartStateList[spec.specIndex] && (signalHandler[spec.specIndex] as any)\n                }\n              />\n            </div>\n            <div style={{ float: \"left\" }}>\n              <IconButton\n                title=\"use as filter\"\n                ariaLabel=\"use as filter\"\n                iconProps={{\n                  iconName: chartStateList[spec.specIndex] ? \"FilterSolid\" : \"Filter\"\n                }}\n                onClick={() => {\n                  setChartStateList(list => {\n                    let nextList = [...list];\n                    nextList[spec.specIndex] = !nextList[spec.specIndex];\n                    if (!nextList[spec.specIndex]) {\n                      setGlobalFilters(draft => {\n                        for (let key in draft) {\n                          draft[key] = [];\n                        }\n                      });\n                    }\n                    return nextList;\n                  });\n                }}\n              />\n            </div>\n          </div>\n      )}\n      </div>\n    </div>\n  );\n};\n\nexport default CombinedChart;\n","import React, { useState } from \"react\";\nimport intl from 'react-intl-universal';\nimport { PrimaryButton, DefaultButton, Stack, Separator, ProgressIndicator } from \"office-ui-fabric-react\";\nimport { useGlobalState } from \"../../state\";\nimport CombinedChart from \"./combinedChart\";\n\nconst DashBoardPage: React.FC = props => {\n  const [state, , dispatch, getters] = useGlobalState();\n  const [dashBoardIndex, setDashBoardIndex] = useState(0);\n  const {\n    subspaceList,\n    cookedDataSource,\n    cookedDimensions,\n    cookedMeasures,\n    dashBoardList\n  } = state;\n  const { dimScores } = getters;\n  return (\n    <div className=\"content-container\">\n      <div className=\"card\">\n        <PrimaryButton\n          text={intl.get('dashBoard.generateButton')}\n          disabled={subspaceList.length === 0}\n          iconProps={{ iconName: 'AreaChart' }}\n          onClick={() => {\n            dispatch('getDashBoard', {\n              dataSource: cookedDataSource,\n              dimensions: cookedDimensions,\n              measures: cookedMeasures,\n            })\n          }}\n        />\n        {state.loading.dashBoard && <ProgressIndicator description=\"generating dashboard\" />}\n        <Separator>\n          {intl.get('dashBoard.pageNo', { current: dashBoardIndex + 1, total: dashBoardList.length })}\n        </Separator>\n        <Stack horizontal tokens={{ childrenGap: 20 }}>\n          <DefaultButton\n            text={intl.get('dashBoard.last')}\n            onClick={() => {\n              setDashBoardIndex((index) => (index + dashBoardList.length - 1) % dashBoardList.length)\n            }}\n            allowDisabledFocus\n          />\n          <DefaultButton\n            text={intl.get('dashBoard.next')}\n            onClick={() => {\n              setDashBoardIndex((index) => (index + 1) % dashBoardList.length)\n            }}\n            allowDisabledFocus\n          />\n        </Stack>\n          <p className=\"state-description\">{intl.get('dashBoard.desc')}</p>\n        <div\n          style={{\n            overflowX: 'auto',\n            margin: '1rem',\n            border: '1px solid #e8e8e8',\n          }}\n        >\n          {dashBoardList[dashBoardIndex] && dashBoardList[dashBoardIndex].length > 0 && (\n            <CombinedChart\n              dataSource={cookedDataSource}\n              dashBoard={dashBoardList[dashBoardIndex]}\n              dimScores={dimScores}\n            />\n          )}\n        </div>\n      </div>\n    </div>\n  )\n};\n\nexport default DashBoardPage;\n","import React, { useMemo } from 'react';\nimport { DataSource } from '../global';\nimport ReactVega from './react-vega';\n\ninterface SimpleTickProps {\n  x: string;\n  y: string;\n  threshold: number;\n  dataSource: DataSource\n}\nconst SimpleTick: React.FC<SimpleTickProps> = props => {\n  const { x, y, threshold, dataSource = [] } = props;\n  const spec = useMemo<any>(() => {\n    return {\n      width: 180,\n      height: 200,\n      data: {\n        name: 'dataSource'\n      },\n      transform: [\n        { calculate: threshold.toString(), as: 'threshold' }\n      ],\n      layer: [\n        {\n          mark: 'point',\n          encoding: {\n            x: {\n              field: x,\n              type: 'nominal'\n            },\n            y: {\n              field: y,\n              type: 'quantitative',\n              scale: {\n                domain: [0, 1]\n              }\n            }\n          }\n        },\n        {\n          mark: 'rule',\n          encoding: {\n            y: {\n              field: 'threshold',\n              type: 'quantitative'\n            },\n            color: {\n              value: 'red'\n            }\n          }\n        }\n      ]\n    }\n  }, [x, y, threshold])\n  return <div>\n    <ReactVega spec={spec} dataSource={dataSource} />\n  </div>;\n}\n\nexport default SimpleTick;","import React, { useRef, useEffect, useMemo } from 'react';\nimport embed from 'vega-embed';\nimport { scheme } from 'vega';\nimport { DefaultIWorker } from \"visual-insights/build/esm/insights/dev\";\n\nscheme('threshold', ['#1890ff', '#ffccc7']);\n\ninterface RadarChartProps {\n  keyField: string;\n  valueField: string;\n  dataSource: any[];\n  threshold: number;\n}\ninterface DataRecord {\n  key: string;\n  value: number;\n  category: 0 | 1;\n}\nconst RadarChart: React.FC<RadarChartProps> = props => {\n  const { keyField, valueField, dataSource = [], threshold } = props;\n  const container = useRef<HTMLDivElement>(null);\n  const viewData = useMemo(() => {\n    let data: DataRecord[] = dataSource.map(record => {\n      return {\n        key: record[keyField],\n        value: Math.round(record[valueField] * 1000) / 1000,\n        category: 0\n      }\n    });\n    Object.values(DefaultIWorker).forEach(type => {\n      if (!data.find(d => d.key === type)) {\n        data.push({\n          key: type,\n          value: 0,\n          category: 0\n        })\n      }\n    })\n    let ruleData: DataRecord[] = data.map(record => {\n      return {\n        key: record.key,\n        value: threshold,\n        category: 1\n      }\n    })\n    return data.concat(ruleData);\n  }, [keyField, valueField, dataSource, threshold])\n  useEffect(() => {\n    if (container.current) {\n      embed(container.current, {\n        width: 280,\n        height: 280,\n        padding: 50,\n        autosize: { type: \"none\", contains: \"padding\" },\n\n        signals: [{ name: \"radius\", update: \"width / 2\" }],\n\n        data: [\n          {\n            name: \"table\",\n            values: viewData\n          },\n          {\n            name: \"keys\",\n            source: \"table\",\n            transform: [\n              {\n                type: \"aggregate\",\n                groupby: [\"key\"]\n              }\n            ]\n          }\n        ],\n\n        scales: [\n          {\n            name: \"angular\",\n            type: \"point\",\n            range: { signal: \"[-PI, PI]\" },\n            padding: 0.5,\n            domain: { data: \"table\", field: \"key\" }\n          },\n          {\n            name: \"radial\",\n            type: \"linear\",\n            range: { signal: \"[0, radius]\" },\n            zero: true,\n            nice: false,\n            domain: [0, 1],\n            domainMin: 0\n          },\n          {\n            name: \"color\",\n            type: \"ordinal\",\n            domain: { data: \"table\", field: \"category\" },\n            range: { scheme: \"threshold\" }\n          }\n        ],\n\n        encode: {\n          enter: {\n            x: { signal: \"radius\" },\n            y: { signal: \"radius\" }\n          }\n        },\n\n        marks: [\n          {\n            type: \"group\",\n            name: \"categories\",\n            zindex: 1,\n            from: {\n              facet: { data: \"table\", name: \"facet\", groupby: [\"category\"] }\n            },\n            marks: [\n              {\n                type: \"line\",\n                name: \"category-line\",\n                from: { data: \"facet\" },\n                encode: {\n                  enter: {\n                    interpolate: { value: \"linear-closed\" },\n                    x: {\n                      signal:\n                        \"scale('radial', datum.value) * cos(scale('angular', datum.key))\"\n                    },\n                    y: {\n                      signal:\n                        \"scale('radial', datum.value) * sin(scale('angular', datum.key))\"\n                    },\n                    stroke: { scale: \"color\", field: \"category\" },\n                    strokeWidth: { value: 1 },\n                    fill: { scale: \"color\", field: \"category\" },\n                    fillOpacity: { value: 0.1 }\n                  }\n                }\n              },\n              {\n                type: \"text\",\n                name: \"value-text\",\n                from: { data: \"category-line\" },\n                encode: {\n                  enter: {\n                    x: { signal: \"datum.x\" },\n                    y: { signal: \"datum.y\" },\n                    text: { signal: \"datum.datum.value\" },\n                    align: { value: \"center\" },\n                    baseline: { value: \"middle\" },\n                    fill: { value: \"#262626\" }\n                  }\n                }\n              }\n            ]\n          },\n          {\n            type: \"rule\",\n            name: \"radial-grid\",\n            from: { data: \"keys\" },\n            zindex: 0,\n            encode: {\n              enter: {\n                x: { value: 0 },\n                y: { value: 0 },\n                x2: { signal: \"radius * cos(scale('angular', datum.key))\" },\n                y2: { signal: \"radius * sin(scale('angular', datum.key))\" },\n                stroke: { value: \"lightgray\" },\n                strokeWidth: { value: 1 }\n              }\n            }\n          },\n          {\n            type: \"text\",\n            name: \"key-label\",\n            from: { data: \"keys\" },\n            zindex: 1,\n            encode: {\n              enter: {\n                x: {\n                  signal: \"(radius + 5) * cos(scale('angular', datum.key))\"\n                },\n                y: {\n                  signal: \"(radius + 5) * sin(scale('angular', datum.key))\"\n                },\n                text: { field: \"key\" },\n                align: [\n                  {\n                    test: \"abs(scale('angular', datum.key)) > PI / 2\",\n                    value: \"right\"\n                  },\n                  {\n                    value: \"left\"\n                  }\n                ],\n                baseline: [\n                  {\n                    test: \"scale('angular', datum.key) > 0\",\n                    value: \"top\"\n                  },\n                  {\n                    test: \"scale('angular', datum.key) == 0\",\n                    value: \"middle\"\n                  },\n                  {\n                    value: \"bottom\"\n                  }\n                ],\n                fill: { value: \"black\" },\n                fontWeight: { value: \"bold\" }\n              }\n            }\n          },\n          {\n            type: \"line\",\n            name: \"outer-line\",\n            from: { data: \"radial-grid\" },\n            encode: {\n              enter: {\n                interpolate: { value: \"linear-closed\" },\n                x: { field: \"x2\" },\n                y: { field: \"y2\" },\n                stroke: { value: \"lightgray\" },\n                strokeWidth: { value: 1 }\n              }\n            }\n          }\n        ]\n      } as any, {\n        actions: false\n      });\n    }\n  }, [viewData]);\n  return <div ref={container}></div>\n}\n\nexport default RadarChart;\n","import React, { useState, useEffect, useMemo } from 'react';\nimport styled from 'styled-components';\nimport intl from 'react-intl-universal'\nimport { InsightSpace, DefaultIWorker } from 'visual-insights/build/esm/insights/dev';\nimport { specification } from \"visual-insights\";\nimport { getInsightViewSpace } from '../../service';\nimport { PrimaryButton, SpinButton, Slider, ProgressIndicator } from \"office-ui-fabric-react\";\nimport PreferencePanel, {\n  PreferencePanelConfig\n} from \"../../components/preference\";\nimport BaseChart from \"../../visBuilder/vegaBase\";\nimport { Position } from \"office-ui-fabric-react/lib/utilities/positioning\";\n\nimport { useGlobalState } from \"../../state\";\nimport { useComposeState } from '../../utils';\nimport SimpleTick from '../../components/simpleTick';\nimport RadarChart from '../../components/radarChart';\n\nconst Tag = styled.div`\n  display: inline-block;\n  padding: 0.1em 0.3em;\n  margin: 0.2em;\n  border-radius: 3px;\n  color: #fff;\n  font-size: 12px;\n  background-color: ${props => props.color};\n`;\n\nconst DashBoard = styled.div`\n  display: flex;\n  div.left{\n    flex-basis: 300px;\n    flex-grow: 1;\n    border-right: 1px solid #f0f0f0;\n  }\n  div.right{\n    margin-left: 1em;\n    flex-grow: 8;\n  }\n  padding: 1em 0em;\n`\n\nconst ColorMap: {\n  [key: string]: string\n} = {\n  [DefaultIWorker.outlier]: '#cf1322',\n  [DefaultIWorker.trend]: '#7cb305',\n  'general': '#08979c',\n  [DefaultIWorker.cluster]: '#c41d7f'\n}\n\nfunction arrEqual (arr1: any[], arr2: any[]): boolean {\n  if (arr1.length !== arr2.length) {\n    return false;\n  }\n  for (let i = 0; i < arr1.length; i++) {\n    if (arr1[i] !== arr2[i]) {\n      return false;\n    }\n  }\n  return true;\n}\n\nconst DevPage: React.FC = props => {\n  const [insightViewSpace, setInsightViewSpace] = useState<InsightSpace[]>([]);\n  const [sigThreshold, setSigThreshold] = useState<number>(0.6);\n  const [loading, setLoading] = useState<boolean>(false);\n  const [visualConfig, setVisualConfig] = useState<PreferencePanelConfig>({\n    aggregator: \"sum\",\n    defaultAggregated: true,\n    defaultStack: true\n  });\n  const [pageStatus, setPageStatus] = useComposeState<{ show: { configPanel: boolean }}>({\n    show: {\n      configPanel: false\n    }\n  });\n  const [state, , dispatch, getters] = useGlobalState();\n  const [chartIndex, setChartIndex] = useState(0);\n  const {\n    cookedDataSource,\n    cookedDimensions,\n    cookedMeasures,\n    topK\n  } = state;\n  const { dimScores } = getters;\n  const viewSpaceList = useMemo(() => {\n    return insightViewSpace.filter(s => s.significance >= sigThreshold);\n  }, [insightViewSpace, sigThreshold])\n\n  const dataView = useMemo(() => {\n    if (viewSpaceList.length === 0) return null;\n    const { dimensions, measures } = viewSpaceList[chartIndex];\n    const fieldScores = dimScores.filter(field => {\n      return dimensions.includes(field[0]) || measures.includes(field[0]);\n    });\n    let { schema } = specification(\n      fieldScores,\n      cookedDataSource,\n      dimensions,\n      measures\n    );\n    return {\n      schema,\n      fieldFeatures: fieldScores.map(f => f[3]),\n      dimensions,\n      measures\n    }\n  }, [viewSpaceList, chartIndex, cookedDataSource])\n  const relatedViews = useMemo<InsightSpace[]>(() => {\n    if (dataView !== null) {\n      const { dimensions, measures } = dataView;\n      return insightViewSpace.filter(f => {\n        if (arrEqual(dimensions, f.dimensions) && arrEqual(measures, f.measures)) {\n          return true\n        }\n        return false\n      })\n    }\n    return []\n  }, [insightViewSpace, dataView])\n\n  useEffect(() => {\n    if (dataView === null) return;\n    const { schema } = dataView;\n    if (\n      schema.geomType &&\n      (schema.geomType.includes(\"point\") ||\n        schema.geomType.includes(\"density\"))\n    ) {\n      setVisualConfig(config => {\n        return {\n          ...config,\n          defaultAggregated: false\n        };\n      });\n    } else {\n      setVisualConfig(config => {\n        return {\n          ...config,\n          defaultAggregated: true\n        };\n      });\n    }\n  }, [dataView])\n  return (\n    <div className=\"content-container\">\n      <PreferencePanel\n        show={pageStatus.show.configPanel}\n        config={visualConfig}\n        onUpdateConfig={(config) => {\n          setVisualConfig(config)\n          setPageStatus((draft) => {\n            draft.show.configPanel = false\n          })\n        }}\n        onClose={() => {\n          setPageStatus((draft) => {\n            draft.show.configPanel = false\n          })\n        }}\n      />\n      {cookedDataSource.length > 0 && (\n        <div className=\"card\">\n          <PrimaryButton\n            text={intl.get('explainer.insightButton')}\n            onClick={() => {\n              setLoading(true)\n              getInsightViewSpace(\n                cookedDataSource,\n                cookedDimensions.slice(0, cookedDimensions.length * topK.dimensionSize),\n                cookedMeasures\n              ).then((res) => {\n                setInsightViewSpace(res)\n                setLoading(false)\n              })\n            }}\n          />\n          {loading && <ProgressIndicator description=\"generating dashboard\" />}\n\n          <DashBoard>\n            <div className=\"left\">\n              <SimpleTick x=\"type\" y=\"significance\" dataSource={insightViewSpace} threshold={sigThreshold} />\n              <Slider\n                label={intl.get('explainer.sigThreshold')}\n                max={100}\n                value={sigThreshold * 100}\n                valueFormat={(value: number) => `${value}%`}\n                showValue={true}\n                onChange={(value: number) => {\n                  setSigThreshold(value / 100)\n                  setChartIndex(0)\n                }}\n              />\n              <p className=\"state-description\">\n                {intl.get('explainer.desc', { num: viewSpaceList.length, threshold: (sigThreshold * 100).toFixed(2) })}\n              </p>\n            </div>\n            <div className=\"right\">\n              <div style={{ width: '280px' }}>\n                <SpinButton\n                  label={intl.get('explainer.currentIndex')}\n                  value={(chartIndex + 1).toString()}\n                  min={0}\n                  max={viewSpaceList.length}\n                  step={1}\n                  iconProps={{ iconName: 'Search' }}\n                  labelPosition={Position.start}\n                  // tslint:disable:jsx-no-lambda\n                  onValidate={(value: string) => {\n                    setChartIndex((Number(value) - 1) % viewSpaceList.length)\n                  }}\n                  onIncrement={() => {\n                    setChartIndex((chartIndex + 1) % viewSpaceList.length)\n                  }}\n                  onDecrement={() => {\n                    setChartIndex((chartIndex - 1 + viewSpaceList.length) % viewSpaceList.length)\n                  }}\n                  incrementButtonAriaLabel={'Increase value by 1'}\n                  decrementButtonAriaLabel={'Decrease value by 1'}\n                />\n              </div>\n              <div style={{ display: 'flex', padding: '1em' }}>\n                <RadarChart\n                  dataSource={relatedViews}\n                  threshold={sigThreshold}\n                  keyField=\"type\"\n                  valueField=\"significance\"\n                />\n                <div>\n                  {relatedViews.length > 0 &&\n                    relatedViews\n                      .filter((view) => view.significance >= sigThreshold)\n                      .map((view, i) => (\n                        <Tag key={i} color={ColorMap[view.type as string]}>\n                          {intl.get(`explainer.insightTypes.${view.type}`)}\n                        </Tag>\n                      ))}\n                  {viewSpaceList[chartIndex] && (\n                    <p className=\"state-description\">\n                      {intl.get('explainer.explainTemp.viewDesc', {\n                        dimensions: viewSpaceList[chartIndex].dimensions.join(', '),\n                        measures: viewSpaceList[chartIndex].measures.join(', '),\n                      })}\n                      <br />\n                      {intl.get('explainer.explainTemp.sig', {\n                        sig: (viewSpaceList[chartIndex].significance * 100).toFixed(2),\n                        itype: viewSpaceList[chartIndex].type,\n                      })}\n                    </p>\n                  )}\n                </div>\n              </div>\n\n              <div></div>\n            </div>\n          </DashBoard>\n          {viewSpaceList.length > 0 && dataView !== null && (\n            <div>\n              <BaseChart\n                aggregator={visualConfig.aggregator}\n                defaultAggregated={visualConfig.defaultAggregated}\n                defaultStack={visualConfig.defaultStack}\n                dimensions={dataView.dimensions}\n                measures={dataView.measures}\n                dataSource={cookedDataSource}\n                schema={dataView.schema}\n                fieldFeatures={dataView.fieldFeatures}\n              />\n            </div>\n          )}\n        </div>\n      )}\n      {cookedDataSource.length === 0 && (\n        <div className=\"card\">\n          <p>{intl.get('explainer.notReadyTip')}</p>\n        </div>\n      )}\n    </div>\n  )\n}\n\nexport default DevPage;\n","import React, { useEffect, useRef, useState } from \"react\";\nimport intl from 'react-intl-universal';\nimport styled from 'styled-components';\nimport {\n  Callout,\n  ActionButton,\n  Toggle,\n  DirectionalHint,\n  IDropdownOption,\n  Dropdown\n} from 'office-ui-fabric-react'\nimport { DropdownSelect } from '@tableau/tableau-ui';\nimport { useGlobalState } from \"../state\";\nimport { SUPPORT_LANG } from \"../locales\";\nimport { useLocales } from \"../utils/useLocales\";\nconst langOptions: IDropdownOption[] = SUPPORT_LANG.map(lang => ({\n  key: lang.value,\n  text: lang.name\n}))\n\nconst Container = styled.div`\n  display: flex;\n  align-items: center;\n`\nconst UserSettings: React.FC = props => {\n  const target = useRef<HTMLDivElement>(null);\n  const [show, setShow] = useState<boolean>(false);\n  const [state, updateState] = useGlobalState();\n  const loadLocales = useLocales((lang) => {\n    updateState(s => {\n      s.lang = lang;\n    })\n  });\n  useEffect(() => {\n    let currentLocale = intl.determineLocale({\n      urlLocaleKey: 'lang',\n      cookieLocaleKey: 'lang',\n    })\n    if (!SUPPORT_LANG.find(f => f.value === currentLocale)) {\n      currentLocale = langOptions[0].key as string\n    }\n    loadLocales(currentLocale)\n  }, [])\n  return (\n    <Container>\n      <DropdownSelect\n        value={state.lang}\n        onChange={(e) => {\n          loadLocales(e.target.value as string)\n        }}\n      >\n        {\n          langOptions.map(lang => <option key={lang.key} value={lang.key}>{lang.text}</option>)\n        }\n      </DropdownSelect>\n      <div ref={target}>\n        <ActionButton\n          text={intl.get('preference.title')}\n          iconProps={{ iconName: 'PlayerSettings' }}\n          onClick={() => {\n            setShow(true)\n          }}\n        ></ActionButton>\n      </div>\n\n      {show && (\n        <Callout\n          target={target.current}\n          directionalHint={DirectionalHint.bottomLeftEdge}\n          onDismiss={() => {\n            setShow(false)\n          }}\n        >\n          <div style={{ padding: '1rem' }}>\n            <Toggle\n              label=\"Be Cool\"\n              checked={state.beCool}\n              onText=\"On\"\n              offText=\"Off\"\n              onChange={(ev: React.MouseEvent<HTMLElement>, checked?: boolean) => {\n                updateState((draft) => {\n                  draft.beCool = checked || false\n                })\n              }}\n            />\n            <Toggle\n              label=\"Use Server\"\n              disabled={true}\n              checked={state.useServer}\n              onText=\"On\"\n              offText=\"Off\"\n              onChange={(ev: React.MouseEvent<HTMLElement>, checked?: boolean) => {\n                updateState((draft) => {\n                  draft.useServer = checked || false\n                })\n              }}\n            />\n          </div>\n        </Callout>\n      )}\n    </Container>\n  )\n};\n\nexport default UserSettings;\n\n","import { useCallback } from \"react\";\nimport intl from 'react-intl-universal';\nexport function useLocales (callback: (lang: string) => void) {\n    const loadLocales = useCallback((lang: string) => {\n        fetch(`locales/${lang}.json`, {\n            method: 'GET',\n            headers: {\n                'Content-Type': 'application/json'\n            }\n        })\n        .then(res => res.json())\n        .then(res => {\n            return intl.init({\n                currentLocale: lang,\n                locales: {\n                    [lang]: res\n                }\n            })\n        })\n        .then(() => {\n            callback(lang)\n        })\n    }, [callback]);\n    return loadLocales\n}","import React, { useMemo } from \"react\";\nimport intl from 'react-intl-universal';\nimport { useGlobalState, GlobalStateProvider } from \"./state\";\nimport { Pivot, PivotItem } from \"office-ui-fabric-react\";\nimport { useComposeState } from \"./utils/index\";\nimport \"./App.css\";\nimport RathLogo from './assets/kanaries-lite.png';\nimport RathCoolLogo from './assets/rath-glasses.png';\n\nimport Gallery from \"./pages/gallery/index\";\nimport NoteBook from \"./pages/notebook/index\";\nimport VisualEditor from './pages/visualEditor';\nimport DataSourceBoard from \"./pages/dataSource/index\";\nimport DashBoardPage from './pages/dashBoard/index';\nimport DevPage from './pages/dev';\nimport UserSettings from './components/userSettings';\n\nrequire('intl/locale-data/jsonp/en.js')\nrequire('intl/locale-data/jsonp/zh.js')\n\nconst getLogoSrc = (withGlasses: boolean) => {\n  return withGlasses\n    ? RathCoolLogo\n    : RathLogo;\n};\n\ninterface PageStatus {\n  show: {\n    insightBoard: boolean;\n    configPanel: boolean;\n    fieldConfig: boolean;\n    dataConfig: boolean;\n  };\n  current: {\n    pivotKey: string;\n  };\n}\n\nfunction App() {\n  const [state, ] = useGlobalState();\n  const pivotList = useMemo(() => {\n    return [\n      intl.get('menu.dataSource'),\n      intl.get('menu.noteBook'),\n      intl.get('menu.explore'),\n      intl.get('menu.dashBoard'),\n      intl.get('menu.explainer'),\n      intl.get('menu.editor')\n    ].map((page, index) => {\n      return { title: page, itemKey: 'pivot-' + (index + 1) }\n    })\n  }, [state.lang])\n  const [pageStatus, setPageStatus] = useComposeState<PageStatus>({\n    show: {\n      insightBoard: false,\n      fieldConfig: false,\n      configPanel: false,\n      dataConfig: false,\n    },\n    current: {\n      pivotKey: pivotList[0].itemKey,\n    },\n  })\n  return (\n    <div>\n      <div className=\"header-bar\">\n        <div className=\"ms-Grid-row\" dir=\"ltr\">\n          <div className=\"ms-Grid-col ms-sm6 ms-md4 ms-lg1\">\n            <a\n              // onClick={() => { window.location.reload(false); }}\n              href=\"https://github.com/ObservedObserver/visual-insights\"\n              className=\"logo\"\n            >\n              <img\n                style={!state.beCool ? { width: '48px', marginTop: '4px' } : undefined}\n                src={getLogoSrc(state.beCool)}\n                alt=\"rath\"\n              />\n            </a>\n          </div>\n          <div className=\"ms-Grid-col ms-sm6 ms-md8 ms-lg8\">\n            <Pivot\n              selectedKey={pageStatus.current.pivotKey}\n              onLinkClick={(item) => {\n                item &&\n                  item.props.itemKey &&\n                  setPageStatus((draft) => {\n                    draft.current.pivotKey = item.props.itemKey!\n                  })\n              }}\n              headersOnly={true}\n            >\n              {pivotList.map((pivot) => (\n                <PivotItem key={pivot.itemKey} headerText={pivot.title} itemKey={pivot.itemKey} />\n              ))}\n            </Pivot>\n          </div>\n          <div className=\"ms-Grid-col ms-sm6 ms-md8 ms-lg3\">\n            <div className=\"header-toolbar\">\n              <UserSettings />\n            </div>\n          </div>\n        </div>\n      </div>\n      {pageStatus.current.pivotKey === 'pivot-3' && (\n        <Gallery subspaceList={state.subspaceList} dataSource={state.cookedDataSource} summary={state.summary} />\n      )}\n      {pageStatus.current.pivotKey === 'pivot-1' && (\n        <DataSourceBoard\n          onExtractInsights={() => {\n            setPageStatus((draft) => {\n              draft.current.pivotKey = 'pivot-2'\n              draft.show.insightBoard = true\n            })\n          }}\n        />\n      )}\n      {pageStatus.current.pivotKey === 'pivot-2' && (\n        <div className=\"content-container\">\n          <div className=\"card\">\n            <NoteBook summary={state.summary} subspaceList={state.subspaceList} dataSource={state.cookedDataSource} />\n          </div>\n        </div>\n      )}\n      {pageStatus.current.pivotKey === 'pivot-4' && <DashBoardPage />}\n      {pageStatus.current.pivotKey === 'pivot-5' && <DevPage />}\n      {pageStatus.current.pivotKey === 'pivot-6' && <VisualEditor dataSource={state.cookedDataSource} dimensions={state.cookedDimensions} measures={state.cookedMeasures} />}\n    </div>\n  )\n}\n\nexport default function() {\n  return (\n    <GlobalStateProvider>\n      <App />\n    </GlobalStateProvider>\n  );\n}\n","export default \"data:image/png;base64,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\"","import { ReportHandler } from 'web-vitals';\n\nconst reportWebVitals = (onPerfEntry?: ReportHandler) => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\nimport { initializeIcons } from '@uifabric/icons'\ninitializeIcons()\n\nReactDOM.render(\n    <App />,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals(console.log);\n\ndocument.write(\n  unescape(\n    \"%3Cspan id='cnzz_stat_icon_1279593444'%3E%3C/span%3E%3Cscript src='https://s9.cnzz.com/z_stat.php%3Fid%3D1279593444%26show%3Dpic1' type='text/javascript'%3E%3C/script%3E\"\n  )\n)"],"sourceRoot":""}