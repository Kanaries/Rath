{"version":3,"sources":["../webpack/bootstrap","../../../node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator/index.js","../../../node_modules/cube-core/built/utils/aggregation.js","../../../node_modules/cube-core/built/index.js","../../../node_modules/regenerator-runtime/runtime.js","../../../node_modules/cube-core/built/core/index.js","../../../node_modules/cube-core/built/core/periodCube.js","../../../node_modules/cube-core/built/core/momentCube.js","../../../node_modules/cube-core/built/utils/transform.js","../../../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray.js","../../../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/arrayWithHoles.js","../../../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/iterableToArrayLimit.js","../../../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/nonIterableRest.js","../../../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck.js","../../../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass.js","../../../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js","../../../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/arrayWithoutHoles.js","../../../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/iterableToArray.js","../../../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/nonIterableSpread.js","../../visual-insights/build/esm/statistics/correlation.js","../../visual-insights/build/esm/statistics/utils.js","../../visual-insights/build/esm/statistics/linearRegression.js","../../visual-insights/build/esm/insights/config.js","../../visual-insights/build/esm/ml/cluster/kruskal.js","../../../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/typeof.js","../../../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js","../../../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js","../../../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js","../../../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/setPrototypeOf.js","../../../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits.js","../../visual-insights/build/esm/ml/classification/knn.js","../../visual-insights/build/esm/sampling/index.js","../../visual-insights/build/esm/ml/outlier/isolationForest.js","../../visual-insights/build/esm/ml/index.js","../../visual-insights/build/esm/constant.js","../../visual-insights/build/esm/insights/subspaces.js","../../visual-insights/build/esm/insights/intention/groups.js","../../visual-insights/build/esm/insights/dev.js","workers/timer.js","workers/dev.worker.js"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","sum_unsafe","subset","measures","sums","forEach","mea","_loop_1","len","length","sum","_loop_2","Number","count","MEASURES","cnts","mean","_loop_3","this","__assign","index_1","require","transform_1","aggregation_1","operatorMap","createCube","_a","type","_b","aggFunc","_c","factTable","_d","dimensions","_e","periodCube","momentCube","default","props","asFields","operator","dataSource","cube","table","tree2Table","row","as","__export","runtime","Op","hasOwn","$Symbol","iteratorSymbol","iterator","asyncIteratorSymbol","asyncIterator","toStringTagSymbol","wrap","innerFn","outerFn","self","tryLocsList","protoGenerator","Generator","generator","context","Context","_invoke","state","method","arg","Error","doneResult","delegate","delegateResult","maybeInvokeDelegate","ContinueSentinel","sent","_sent","dispatchException","abrupt","record","tryCatch","done","makeInvokeMethod","fn","obj","err","GeneratorFunction","GeneratorFunctionPrototype","IteratorPrototype","getProto","getPrototypeOf","NativeIteratorPrototype","values","Gp","defineIteratorMethods","AsyncIterator","previousPromise","callInvokeWithMethodAndArg","Promise","resolve","reject","invoke","result","__await","then","unwrapped","error","undefined","TypeError","info","resultName","next","nextLoc","pushTryEntry","locs","entry","tryLoc","catchLoc","finallyLoc","afterLoc","tryEntries","push","resetTryEntry","completion","reset","iterable","iteratorMethod","isNaN","constructor","displayName","isGeneratorFunction","genFun","ctor","mark","setPrototypeOf","__proto__","awrap","async","iter","toString","keys","reverse","pop","skipTempReset","prev","charAt","slice","stop","rootRecord","rval","exception","handle","loc","caught","hasCatch","hasFinally","finallyEntry","complete","finish","thrown","delegateYield","regeneratorRuntime","accidentalStrictMode","Function","periodCube_1","momentCube_1","__read","e","ar","__spread","arguments","concat","__values","Node","children","Map","_rawData","cache","params","_i","apply","aggData","_aggData","rawData","clearCache","e_1","size","children_1","children_1_1","child","data","e_1_1","return","configurable","getNode","search","node","level","e_2","entries","children_2","children_2_1","childName","e_2_1","tree","e_3","children_3","children_3_1","e_3_1","buildTree","insertNode","member","has","set","aggTree","e_4","children_4","children_4_1","e_4_1","aggNode","e_5","children_5","children_5_1","e_5_1","setData","assign","dfs","_slicedToArray","arr","Array","isArray","_arr","_n","_s","_classCallCheck","instance","Constructor","_defineProperties","target","descriptor","writable","_createClass","protoProps","staticProps","_toConsumableArray","arr2","from","crammersV","fieldX","fieldY","xSet","Set","ySet","nestTree","add","chis","rowSums","colSums","totalSum","x","y","counter","observed","expected","chiSquared","Math","sqrt","min","pearsonCC","xBar","map","yBar","pow","linearMapPositive","a","getCombination","elements","start","end","ans","combine","step","normalize","frequencyList","f","entropy","probabilityList","log2","oneDLinearRegression","X","Y","normalizedDataSource","valueSets","dim","index","normalizedRecord","normalizeRecord","meanX","meanY","beta","numerator","denominator","getRegressionEquation","alpha","SSR","SST","yHat","E","cumulativeLogisticDistribution","abs","r_squared","pValue","PearsonCorrelation","turnAdjMatrix2List","matrix","edges","j","find","parents","union","n1","n2","p1","p2","findWithEffect","sizes","unionWithEffect","size1","size2","kruskalMST","groupNumber","threshold","sort","b","edgesInMST","groups","inCutEdge","edge","cluster","groupMaxSize","limitSize","kruskalWithLimitSize","kruskal","meas","meaIndex","_typeof2","_typeof","_possibleConstructorReturn","ReferenceError","_getPrototypeOf","_setPrototypeOf","_inherits","subClass","superClass","KNN","K","targetRecord","features","weights","dimFeatures","meaFeatures","dimWeights","meaWeights","dimSets","distances","rIndex","dis","feature","targets","neighbors","tar","votes","nei","mostCount","mostFeature","vote","dimIndex","indexOf","valueParser","ranges","Infinity","max","uniformSampling","sampleIndexes","seed","v","linearCongruentialGenerator","random","floor","Outier","IsolationForest","treeNumber","Psi","ceil","sampleSize","limitHeight","iForest","normalizeDimensions","normalizedSampleData","depth","rand","randField","dimLength","meaLength","randValue","leftSubData","rightSubData","field","left","buildIsolationTree","right","log","iTree","pathLength","nodeSize","AFS","getPathLength","samples","recordScoreList","recordScore","avgPathLength","CHANNEL","getDimCorrelationMatrix","getMeaCorrelationMatrix","getDimClusterGroups","max_number_of_group","maxDimNumberInView","dimCorrelationMatrix","Cluster","round","getMeaSetsBasedOnClusterGroups","correlation_threshold","soft_max_measures_in_view","correlationMatrix","GroupIntention","sameCount","getNeighbors","percents","getTargetValuePercent","sig","per","crossGroups","dimensionGroups","measureGroups","viewSpaces","getCombinationFromClusterGroups","fieldSets","group","combineFieldSet","DefaultIWorker","getGeneralIntentionSpace","score","significance","fL","pL","impurity","order","getOutlierIntentionSpace","buildIsolationForest","scoreList","estimateOutierScore","maxIndex","des","description","getTrendIntentionSpace","orderedData","linearModel","getGroupIntentionSpace","groupIntention","getSignificance","IntentionWorkerCollection","workers","iWorker","status","iWorkerWithStatus","func","withDefaultIWorkers","colletion","register","outlier","trend","enable","getIntentionSpaces","cubePool","Collection","ansSpace","space","join","generalSpace","each","iSpace","task","addEventListener","collection","dimension_correlation_threshold","measure_correlation_threshold","max_dimension_num_in_view","max_measure_num_in_view","dimensionSets","measureSets","t0","Date","getTime","aggregate","t1","console","usedCollection","init","getVisSpaces","postMessage","success","message","startTime","cost"],"mappings":"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","file":"bc74de91d580f3ba8252.worker.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"./\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 8);\n","module.exports = require(\"regenerator-runtime\");\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.sum_unsafe = function (subset, measures) {\n    var sums = {};\n    measures.forEach(function (mea) {\n        sums[mea] = 0;\n    });\n    var _loop_1 = function (i, len) {\n        measures.forEach(function (mea) {\n            sums[mea] += subset[i][mea];\n        });\n    };\n    for (var i = 0, len = subset.length; i < len; i++) {\n        _loop_1(i, len);\n    }\n    return sums;\n};\nexports.sum = function (subset, measures) {\n    var sums = {};\n    measures.forEach(function (mea) {\n        sums[mea] = 0;\n    });\n    var _loop_2 = function (i, len) {\n        measures.forEach(function (mea) {\n            sums[mea] += Number(subset[i][mea]) || 0;\n        });\n    };\n    for (var i = 0, len = subset.length; i < len; i++) {\n        _loop_2(i, len);\n    }\n    return sums;\n};\nexports.count = function (subset, MEASURES) {\n    var cnts = {};\n    MEASURES.forEach(function (mea) {\n        cnts[mea] = 0;\n    });\n    for (var i = 0, len = subset.length; i < len; i++) {\n        MEASURES.forEach(function (mea) {\n            cnts[mea]++;\n        });\n    }\n    return cnts;\n};\nexports.mean = function (subset, measures) {\n    var sums = {};\n    measures.forEach(function (mea) {\n        sums[mea] = 0;\n    });\n    var _loop_3 = function (i, len) {\n        measures.forEach(function (mea) {\n            sums[mea] += Number(subset[i][mea]) || 0;\n        });\n    };\n    for (var i = 0, len = subset.length; i < len; i++) {\n        _loop_3(i, len);\n    }\n    measures.forEach(function (mea) {\n        sums[mea] /= subset.length;\n    });\n    return sums;\n};\n","\"use strict\";\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nfunction __export(m) {\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\n}\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar index_1 = require(\"./core/index\");\n// import { JsonRecord } from './types';\nvar transform_1 = require(\"./utils/transform\");\nvar aggregation_1 = require(\"./utils/aggregation\");\nvar operatorMap = {\n    'sum': aggregation_1.sum_unsafe,\n    'mean': aggregation_1.mean,\n    'count': aggregation_1.count,\n};\nfunction copyDataSource(data) {\n    return data.map(function (row) {\n        return __assign({}, row);\n    });\n}\nfunction aggregate(props) {\n    var dimensions = props.dimensions, measures = props.measures, asFields = props.asFields, operator = props.operator, dataSource = props.dataSource;\n    var data = [];\n    var cube = createCube({\n        type: 'moment',\n        aggFunc: operatorMap[operator] || aggregation_1.count,\n        dimensions: dimensions,\n        measures: measures,\n        factTable: dataSource\n    });\n    var table = transform_1.tree2Table({ dimensions: dimensions, measures: measures, cube: cube });\n    table.forEach(function (row) {\n        asFields.forEach(function (as, i) {\n            row[as] = row[measures[i]];\n        });\n    });\n    return table;\n}\nfunction createCube(_a) {\n    var type = _a.type, _b = _a.aggFunc, aggFunc = _b === void 0 ? aggregation_1.count : _b, _c = _a.factTable, factTable = _c === void 0 ? [] : _c, _d = _a.dimensions, dimensions = _d === void 0 ? [] : _d, _e = _a.measures, measures = _e === void 0 ? [] : _e;\n    switch (type) {\n        case \"period\":\n            return new index_1.periodCube({\n                aggFunc: aggFunc,\n                factTable: factTable,\n                dimensions: dimensions,\n                measures: measures\n            });\n        case \"moment\":\n            return new index_1.momentCube({\n                aggFunc: aggFunc,\n                factTable: factTable,\n                dimensions: dimensions,\n                measures: measures\n            });\n        default:\n            return new index_1.momentCube({\n                aggFunc: aggFunc,\n                factTable: factTable,\n                dimensions: dimensions,\n                measures: measures\n            });\n    }\n}\nexports.createCube = createCube;\nexports.default = aggregate;\n__export(require(\"./utils/aggregation\"));\n","/**\n * Copyright (c) 2014-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nvar runtime = (function (exports) {\n  \"use strict\";\n\n  var Op = Object.prototype;\n  var hasOwn = Op.hasOwnProperty;\n  var undefined; // More compressible than void 0.\n  var $Symbol = typeof Symbol === \"function\" ? Symbol : {};\n  var iteratorSymbol = $Symbol.iterator || \"@@iterator\";\n  var asyncIteratorSymbol = $Symbol.asyncIterator || \"@@asyncIterator\";\n  var toStringTagSymbol = $Symbol.toStringTag || \"@@toStringTag\";\n\n  function wrap(innerFn, outerFn, self, tryLocsList) {\n    // If outerFn provided and outerFn.prototype is a Generator, then outerFn.prototype instanceof Generator.\n    var protoGenerator = outerFn && outerFn.prototype instanceof Generator ? outerFn : Generator;\n    var generator = Object.create(protoGenerator.prototype);\n    var context = new Context(tryLocsList || []);\n\n    // The ._invoke method unifies the implementations of the .next,\n    // .throw, and .return methods.\n    generator._invoke = makeInvokeMethod(innerFn, self, context);\n\n    return generator;\n  }\n  exports.wrap = wrap;\n\n  // Try/catch helper to minimize deoptimizations. Returns a completion\n  // record like context.tryEntries[i].completion. This interface could\n  // have been (and was previously) designed to take a closure to be\n  // invoked without arguments, but in all the cases we care about we\n  // already have an existing method we want to call, so there's no need\n  // to create a new function object. We can even get away with assuming\n  // the method takes exactly one argument, since that happens to be true\n  // in every case, so we don't have to touch the arguments object. The\n  // only additional allocation required is the completion record, which\n  // has a stable shape and so hopefully should be cheap to allocate.\n  function tryCatch(fn, obj, arg) {\n    try {\n      return { type: \"normal\", arg: fn.call(obj, arg) };\n    } catch (err) {\n      return { type: \"throw\", arg: err };\n    }\n  }\n\n  var GenStateSuspendedStart = \"suspendedStart\";\n  var GenStateSuspendedYield = \"suspendedYield\";\n  var GenStateExecuting = \"executing\";\n  var GenStateCompleted = \"completed\";\n\n  // Returning this object from the innerFn has the same effect as\n  // breaking out of the dispatch switch statement.\n  var ContinueSentinel = {};\n\n  // Dummy constructor functions that we use as the .constructor and\n  // .constructor.prototype properties for functions that return Generator\n  // objects. For full spec compliance, you may wish to configure your\n  // minifier not to mangle the names of these two functions.\n  function Generator() {}\n  function GeneratorFunction() {}\n  function GeneratorFunctionPrototype() {}\n\n  // This is a polyfill for %IteratorPrototype% for environments that\n  // don't natively support it.\n  var IteratorPrototype = {};\n  IteratorPrototype[iteratorSymbol] = function () {\n    return this;\n  };\n\n  var getProto = Object.getPrototypeOf;\n  var NativeIteratorPrototype = getProto && getProto(getProto(values([])));\n  if (NativeIteratorPrototype &&\n      NativeIteratorPrototype !== Op &&\n      hasOwn.call(NativeIteratorPrototype, iteratorSymbol)) {\n    // This environment has a native %IteratorPrototype%; use it instead\n    // of the polyfill.\n    IteratorPrototype = NativeIteratorPrototype;\n  }\n\n  var Gp = GeneratorFunctionPrototype.prototype =\n    Generator.prototype = Object.create(IteratorPrototype);\n  GeneratorFunction.prototype = Gp.constructor = GeneratorFunctionPrototype;\n  GeneratorFunctionPrototype.constructor = GeneratorFunction;\n  GeneratorFunctionPrototype[toStringTagSymbol] =\n    GeneratorFunction.displayName = \"GeneratorFunction\";\n\n  // Helper for defining the .next, .throw, and .return methods of the\n  // Iterator interface in terms of a single ._invoke method.\n  function defineIteratorMethods(prototype) {\n    [\"next\", \"throw\", \"return\"].forEach(function(method) {\n      prototype[method] = function(arg) {\n        return this._invoke(method, arg);\n      };\n    });\n  }\n\n  exports.isGeneratorFunction = function(genFun) {\n    var ctor = typeof genFun === \"function\" && genFun.constructor;\n    return ctor\n      ? ctor === GeneratorFunction ||\n        // For the native GeneratorFunction constructor, the best we can\n        // do is to check its .name property.\n        (ctor.displayName || ctor.name) === \"GeneratorFunction\"\n      : false;\n  };\n\n  exports.mark = function(genFun) {\n    if (Object.setPrototypeOf) {\n      Object.setPrototypeOf(genFun, GeneratorFunctionPrototype);\n    } else {\n      genFun.__proto__ = GeneratorFunctionPrototype;\n      if (!(toStringTagSymbol in genFun)) {\n        genFun[toStringTagSymbol] = \"GeneratorFunction\";\n      }\n    }\n    genFun.prototype = Object.create(Gp);\n    return genFun;\n  };\n\n  // Within the body of any async function, `await x` is transformed to\n  // `yield regeneratorRuntime.awrap(x)`, so that the runtime can test\n  // `hasOwn.call(value, \"__await\")` to determine if the yielded value is\n  // meant to be awaited.\n  exports.awrap = function(arg) {\n    return { __await: arg };\n  };\n\n  function AsyncIterator(generator) {\n    function invoke(method, arg, resolve, reject) {\n      var record = tryCatch(generator[method], generator, arg);\n      if (record.type === \"throw\") {\n        reject(record.arg);\n      } else {\n        var result = record.arg;\n        var value = result.value;\n        if (value &&\n            typeof value === \"object\" &&\n            hasOwn.call(value, \"__await\")) {\n          return Promise.resolve(value.__await).then(function(value) {\n            invoke(\"next\", value, resolve, reject);\n          }, function(err) {\n            invoke(\"throw\", err, resolve, reject);\n          });\n        }\n\n        return Promise.resolve(value).then(function(unwrapped) {\n          // When a yielded Promise is resolved, its final value becomes\n          // the .value of the Promise<{value,done}> result for the\n          // current iteration.\n          result.value = unwrapped;\n          resolve(result);\n        }, function(error) {\n          // If a rejected Promise was yielded, throw the rejection back\n          // into the async generator function so it can be handled there.\n          return invoke(\"throw\", error, resolve, reject);\n        });\n      }\n    }\n\n    var previousPromise;\n\n    function enqueue(method, arg) {\n      function callInvokeWithMethodAndArg() {\n        return new Promise(function(resolve, reject) {\n          invoke(method, arg, resolve, reject);\n        });\n      }\n\n      return previousPromise =\n        // If enqueue has been called before, then we want to wait until\n        // all previous Promises have been resolved before calling invoke,\n        // so that results are always delivered in the correct order. If\n        // enqueue has not been called before, then it is important to\n        // call invoke immediately, without waiting on a callback to fire,\n        // so that the async generator function has the opportunity to do\n        // any necessary setup in a predictable way. This predictability\n        // is why the Promise constructor synchronously invokes its\n        // executor callback, and why async functions synchronously\n        // execute code before the first await. Since we implement simple\n        // async functions in terms of async generators, it is especially\n        // important to get this right, even though it requires care.\n        previousPromise ? previousPromise.then(\n          callInvokeWithMethodAndArg,\n          // Avoid propagating failures to Promises returned by later\n          // invocations of the iterator.\n          callInvokeWithMethodAndArg\n        ) : callInvokeWithMethodAndArg();\n    }\n\n    // Define the unified helper method that is used to implement .next,\n    // .throw, and .return (see defineIteratorMethods).\n    this._invoke = enqueue;\n  }\n\n  defineIteratorMethods(AsyncIterator.prototype);\n  AsyncIterator.prototype[asyncIteratorSymbol] = function () {\n    return this;\n  };\n  exports.AsyncIterator = AsyncIterator;\n\n  // Note that simple async functions are implemented on top of\n  // AsyncIterator objects; they just return a Promise for the value of\n  // the final result produced by the iterator.\n  exports.async = function(innerFn, outerFn, self, tryLocsList) {\n    var iter = new AsyncIterator(\n      wrap(innerFn, outerFn, self, tryLocsList)\n    );\n\n    return exports.isGeneratorFunction(outerFn)\n      ? iter // If outerFn is a generator, return the full iterator.\n      : iter.next().then(function(result) {\n          return result.done ? result.value : iter.next();\n        });\n  };\n\n  function makeInvokeMethod(innerFn, self, context) {\n    var state = GenStateSuspendedStart;\n\n    return function invoke(method, arg) {\n      if (state === GenStateExecuting) {\n        throw new Error(\"Generator is already running\");\n      }\n\n      if (state === GenStateCompleted) {\n        if (method === \"throw\") {\n          throw arg;\n        }\n\n        // Be forgiving, per 25.3.3.3.3 of the spec:\n        // https://people.mozilla.org/~jorendorff/es6-draft.html#sec-generatorresume\n        return doneResult();\n      }\n\n      context.method = method;\n      context.arg = arg;\n\n      while (true) {\n        var delegate = context.delegate;\n        if (delegate) {\n          var delegateResult = maybeInvokeDelegate(delegate, context);\n          if (delegateResult) {\n            if (delegateResult === ContinueSentinel) continue;\n            return delegateResult;\n          }\n        }\n\n        if (context.method === \"next\") {\n          // Setting context._sent for legacy support of Babel's\n          // function.sent implementation.\n          context.sent = context._sent = context.arg;\n\n        } else if (context.method === \"throw\") {\n          if (state === GenStateSuspendedStart) {\n            state = GenStateCompleted;\n            throw context.arg;\n          }\n\n          context.dispatchException(context.arg);\n\n        } else if (context.method === \"return\") {\n          context.abrupt(\"return\", context.arg);\n        }\n\n        state = GenStateExecuting;\n\n        var record = tryCatch(innerFn, self, context);\n        if (record.type === \"normal\") {\n          // If an exception is thrown from innerFn, we leave state ===\n          // GenStateExecuting and loop back for another invocation.\n          state = context.done\n            ? GenStateCompleted\n            : GenStateSuspendedYield;\n\n          if (record.arg === ContinueSentinel) {\n            continue;\n          }\n\n          return {\n            value: record.arg,\n            done: context.done\n          };\n\n        } else if (record.type === \"throw\") {\n          state = GenStateCompleted;\n          // Dispatch the exception by looping back around to the\n          // context.dispatchException(context.arg) call above.\n          context.method = \"throw\";\n          context.arg = record.arg;\n        }\n      }\n    };\n  }\n\n  // Call delegate.iterator[context.method](context.arg) and handle the\n  // result, either by returning a { value, done } result from the\n  // delegate iterator, or by modifying context.method and context.arg,\n  // setting context.delegate to null, and returning the ContinueSentinel.\n  function maybeInvokeDelegate(delegate, context) {\n    var method = delegate.iterator[context.method];\n    if (method === undefined) {\n      // A .throw or .return when the delegate iterator has no .throw\n      // method always terminates the yield* loop.\n      context.delegate = null;\n\n      if (context.method === \"throw\") {\n        // Note: [\"return\"] must be used for ES3 parsing compatibility.\n        if (delegate.iterator[\"return\"]) {\n          // If the delegate iterator has a return method, give it a\n          // chance to clean up.\n          context.method = \"return\";\n          context.arg = undefined;\n          maybeInvokeDelegate(delegate, context);\n\n          if (context.method === \"throw\") {\n            // If maybeInvokeDelegate(context) changed context.method from\n            // \"return\" to \"throw\", let that override the TypeError below.\n            return ContinueSentinel;\n          }\n        }\n\n        context.method = \"throw\";\n        context.arg = new TypeError(\n          \"The iterator does not provide a 'throw' method\");\n      }\n\n      return ContinueSentinel;\n    }\n\n    var record = tryCatch(method, delegate.iterator, context.arg);\n\n    if (record.type === \"throw\") {\n      context.method = \"throw\";\n      context.arg = record.arg;\n      context.delegate = null;\n      return ContinueSentinel;\n    }\n\n    var info = record.arg;\n\n    if (! info) {\n      context.method = \"throw\";\n      context.arg = new TypeError(\"iterator result is not an object\");\n      context.delegate = null;\n      return ContinueSentinel;\n    }\n\n    if (info.done) {\n      // Assign the result of the finished delegate to the temporary\n      // variable specified by delegate.resultName (see delegateYield).\n      context[delegate.resultName] = info.value;\n\n      // Resume execution at the desired location (see delegateYield).\n      context.next = delegate.nextLoc;\n\n      // If context.method was \"throw\" but the delegate handled the\n      // exception, let the outer generator proceed normally. If\n      // context.method was \"next\", forget context.arg since it has been\n      // \"consumed\" by the delegate iterator. If context.method was\n      // \"return\", allow the original .return call to continue in the\n      // outer generator.\n      if (context.method !== \"return\") {\n        context.method = \"next\";\n        context.arg = undefined;\n      }\n\n    } else {\n      // Re-yield the result returned by the delegate method.\n      return info;\n    }\n\n    // The delegate iterator is finished, so forget it and continue with\n    // the outer generator.\n    context.delegate = null;\n    return ContinueSentinel;\n  }\n\n  // Define Generator.prototype.{next,throw,return} in terms of the\n  // unified ._invoke helper method.\n  defineIteratorMethods(Gp);\n\n  Gp[toStringTagSymbol] = \"Generator\";\n\n  // A Generator should always return itself as the iterator object when the\n  // @@iterator function is called on it. Some browsers' implementations of the\n  // iterator prototype chain incorrectly implement this, causing the Generator\n  // object to not be returned from this call. This ensures that doesn't happen.\n  // See https://github.com/facebook/regenerator/issues/274 for more details.\n  Gp[iteratorSymbol] = function() {\n    return this;\n  };\n\n  Gp.toString = function() {\n    return \"[object Generator]\";\n  };\n\n  function pushTryEntry(locs) {\n    var entry = { tryLoc: locs[0] };\n\n    if (1 in locs) {\n      entry.catchLoc = locs[1];\n    }\n\n    if (2 in locs) {\n      entry.finallyLoc = locs[2];\n      entry.afterLoc = locs[3];\n    }\n\n    this.tryEntries.push(entry);\n  }\n\n  function resetTryEntry(entry) {\n    var record = entry.completion || {};\n    record.type = \"normal\";\n    delete record.arg;\n    entry.completion = record;\n  }\n\n  function Context(tryLocsList) {\n    // The root entry object (effectively a try statement without a catch\n    // or a finally block) gives us a place to store values thrown from\n    // locations where there is no enclosing try statement.\n    this.tryEntries = [{ tryLoc: \"root\" }];\n    tryLocsList.forEach(pushTryEntry, this);\n    this.reset(true);\n  }\n\n  exports.keys = function(object) {\n    var keys = [];\n    for (var key in object) {\n      keys.push(key);\n    }\n    keys.reverse();\n\n    // Rather than returning an object with a next method, we keep\n    // things simple and return the next function itself.\n    return function next() {\n      while (keys.length) {\n        var key = keys.pop();\n        if (key in object) {\n          next.value = key;\n          next.done = false;\n          return next;\n        }\n      }\n\n      // To avoid creating an additional object, we just hang the .value\n      // and .done properties off the next function object itself. This\n      // also ensures that the minifier will not anonymize the function.\n      next.done = true;\n      return next;\n    };\n  };\n\n  function values(iterable) {\n    if (iterable) {\n      var iteratorMethod = iterable[iteratorSymbol];\n      if (iteratorMethod) {\n        return iteratorMethod.call(iterable);\n      }\n\n      if (typeof iterable.next === \"function\") {\n        return iterable;\n      }\n\n      if (!isNaN(iterable.length)) {\n        var i = -1, next = function next() {\n          while (++i < iterable.length) {\n            if (hasOwn.call(iterable, i)) {\n              next.value = iterable[i];\n              next.done = false;\n              return next;\n            }\n          }\n\n          next.value = undefined;\n          next.done = true;\n\n          return next;\n        };\n\n        return next.next = next;\n      }\n    }\n\n    // Return an iterator with no values.\n    return { next: doneResult };\n  }\n  exports.values = values;\n\n  function doneResult() {\n    return { value: undefined, done: true };\n  }\n\n  Context.prototype = {\n    constructor: Context,\n\n    reset: function(skipTempReset) {\n      this.prev = 0;\n      this.next = 0;\n      // Resetting context._sent for legacy support of Babel's\n      // function.sent implementation.\n      this.sent = this._sent = undefined;\n      this.done = false;\n      this.delegate = null;\n\n      this.method = \"next\";\n      this.arg = undefined;\n\n      this.tryEntries.forEach(resetTryEntry);\n\n      if (!skipTempReset) {\n        for (var name in this) {\n          // Not sure about the optimal order of these conditions:\n          if (name.charAt(0) === \"t\" &&\n              hasOwn.call(this, name) &&\n              !isNaN(+name.slice(1))) {\n            this[name] = undefined;\n          }\n        }\n      }\n    },\n\n    stop: function() {\n      this.done = true;\n\n      var rootEntry = this.tryEntries[0];\n      var rootRecord = rootEntry.completion;\n      if (rootRecord.type === \"throw\") {\n        throw rootRecord.arg;\n      }\n\n      return this.rval;\n    },\n\n    dispatchException: function(exception) {\n      if (this.done) {\n        throw exception;\n      }\n\n      var context = this;\n      function handle(loc, caught) {\n        record.type = \"throw\";\n        record.arg = exception;\n        context.next = loc;\n\n        if (caught) {\n          // If the dispatched exception was caught by a catch block,\n          // then let that catch block handle the exception normally.\n          context.method = \"next\";\n          context.arg = undefined;\n        }\n\n        return !! caught;\n      }\n\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        var record = entry.completion;\n\n        if (entry.tryLoc === \"root\") {\n          // Exception thrown outside of any try block that could handle\n          // it, so set the completion value of the entire function to\n          // throw the exception.\n          return handle(\"end\");\n        }\n\n        if (entry.tryLoc <= this.prev) {\n          var hasCatch = hasOwn.call(entry, \"catchLoc\");\n          var hasFinally = hasOwn.call(entry, \"finallyLoc\");\n\n          if (hasCatch && hasFinally) {\n            if (this.prev < entry.catchLoc) {\n              return handle(entry.catchLoc, true);\n            } else if (this.prev < entry.finallyLoc) {\n              return handle(entry.finallyLoc);\n            }\n\n          } else if (hasCatch) {\n            if (this.prev < entry.catchLoc) {\n              return handle(entry.catchLoc, true);\n            }\n\n          } else if (hasFinally) {\n            if (this.prev < entry.finallyLoc) {\n              return handle(entry.finallyLoc);\n            }\n\n          } else {\n            throw new Error(\"try statement without catch or finally\");\n          }\n        }\n      }\n    },\n\n    abrupt: function(type, arg) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.tryLoc <= this.prev &&\n            hasOwn.call(entry, \"finallyLoc\") &&\n            this.prev < entry.finallyLoc) {\n          var finallyEntry = entry;\n          break;\n        }\n      }\n\n      if (finallyEntry &&\n          (type === \"break\" ||\n           type === \"continue\") &&\n          finallyEntry.tryLoc <= arg &&\n          arg <= finallyEntry.finallyLoc) {\n        // Ignore the finally entry if control is not jumping to a\n        // location outside the try/catch block.\n        finallyEntry = null;\n      }\n\n      var record = finallyEntry ? finallyEntry.completion : {};\n      record.type = type;\n      record.arg = arg;\n\n      if (finallyEntry) {\n        this.method = \"next\";\n        this.next = finallyEntry.finallyLoc;\n        return ContinueSentinel;\n      }\n\n      return this.complete(record);\n    },\n\n    complete: function(record, afterLoc) {\n      if (record.type === \"throw\") {\n        throw record.arg;\n      }\n\n      if (record.type === \"break\" ||\n          record.type === \"continue\") {\n        this.next = record.arg;\n      } else if (record.type === \"return\") {\n        this.rval = this.arg = record.arg;\n        this.method = \"return\";\n        this.next = \"end\";\n      } else if (record.type === \"normal\" && afterLoc) {\n        this.next = afterLoc;\n      }\n\n      return ContinueSentinel;\n    },\n\n    finish: function(finallyLoc) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.finallyLoc === finallyLoc) {\n          this.complete(entry.completion, entry.afterLoc);\n          resetTryEntry(entry);\n          return ContinueSentinel;\n        }\n      }\n    },\n\n    \"catch\": function(tryLoc) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.tryLoc === tryLoc) {\n          var record = entry.completion;\n          if (record.type === \"throw\") {\n            var thrown = record.arg;\n            resetTryEntry(entry);\n          }\n          return thrown;\n        }\n      }\n\n      // The context.catch method must only be called with a location\n      // argument that corresponds to a known catch block.\n      throw new Error(\"illegal catch attempt\");\n    },\n\n    delegateYield: function(iterable, resultName, nextLoc) {\n      this.delegate = {\n        iterator: values(iterable),\n        resultName: resultName,\n        nextLoc: nextLoc\n      };\n\n      if (this.method === \"next\") {\n        // Deliberately forget the last sent value so that we don't\n        // accidentally pass it on to the delegate.\n        this.arg = undefined;\n      }\n\n      return ContinueSentinel;\n    }\n  };\n\n  // Regardless of whether this script is executing as a CommonJS module\n  // or not, return the runtime object so that we can declare the variable\n  // regeneratorRuntime in the outer scope, which allows this module to be\n  // injected easily by `bin/regenerator --include-runtime script.js`.\n  return exports;\n\n}(\n  // If this script is executing as a CommonJS module, use module.exports\n  // as the regeneratorRuntime namespace. Otherwise create a new empty\n  // object. Either way, the resulting object will be used to initialize\n  // the regeneratorRuntime variable at the top of this file.\n  typeof module === \"object\" ? module.exports : {}\n));\n\ntry {\n  regeneratorRuntime = runtime;\n} catch (accidentalStrictMode) {\n  // This module should not be running in strict mode, so the above\n  // assignment should always work unless something is misconfigured. Just\n  // in case runtime.js accidentally runs in strict mode, we can escape\n  // strict mode using a global Function call. This could conceivably fail\n  // if a Content Security Policy forbids using Function, but in that case\n  // the proper solution is to fix the accidental strict mode problem. If\n  // you've misconfigured your bundler to force strict mode and applied a\n  // CSP to forbid Function, and you're not willing to fix either of those\n  // problems, please detail your unique predicament in a GitHub issue.\n  Function(\"r\", \"regeneratorRuntime = r\")(runtime);\n}\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar periodCube_1 = require(\"./periodCube\");\nexports.periodCube = periodCube_1.default;\nvar momentCube_1 = require(\"./momentCube\");\nexports.momentCube = momentCube_1.default;\n","\"use strict\";\nvar __read = (this && this.__read) || function (o, n) {\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n    if (!m) return o;\n    var i = m.call(o), r, ar = [], e;\n    try {\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n    }\n    catch (error) { e = { error: error }; }\n    finally {\n        try {\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\n        }\n        finally { if (e) throw e.error; }\n    }\n    return ar;\n};\nvar __spread = (this && this.__spread) || function () {\n    for (var ar = [], i = 0; i < arguments.length; i++) ar = ar.concat(__read(arguments[i]));\n    return ar;\n};\nvar __values = (this && this.__values) || function(o) {\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\n    if (m) return m.call(o);\n    if (o && typeof o.length === \"number\") return {\n        next: function () {\n            if (o && i >= o.length) o = void 0;\n            return { value: o && o[i++], done: !o };\n        }\n    };\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar Node = /** @class */ (function () {\n    function Node(aggFunc) {\n        this.children = new Map();\n        this._rawData = [];\n        this.aggFunc = aggFunc;\n        this.cache = false;\n    }\n    Node.prototype.push = function () {\n        var _a;\n        var params = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            params[_i] = arguments[_i];\n        }\n        (_a = this._rawData).push.apply(_a, __spread(params));\n    };\n    Node.prototype.aggData = function (measures) {\n        if (measures === void 0) { measures = []; }\n        if (!this.cache) {\n            this._aggData = this.aggFunc(this.rawData, measures);\n            this.cache = true;\n        }\n        return this._aggData;\n    };\n    Node.prototype.clearCache = function () {\n        this.cache = false;\n    };\n    Object.defineProperty(Node.prototype, \"rawData\", {\n        get: function () {\n            var e_1, _a;\n            if (!this.cache) {\n                if (this.children.size !== 0) {\n                    var children = this.children.values();\n                    var rawData = [];\n                    try {\n                        for (var children_1 = __values(children), children_1_1 = children_1.next(); !children_1_1.done; children_1_1 = children_1.next()) {\n                            var child = children_1_1.value;\n                            var i = void 0;\n                            var data = child.rawData;\n                            var len = data.length;\n                            for (i = 0; i < len; i++) {\n                                rawData.push(data[i]);\n                            }\n                        }\n                    }\n                    catch (e_1_1) { e_1 = { error: e_1_1 }; }\n                    finally {\n                        try {\n                            if (children_1_1 && !children_1_1.done && (_a = children_1.return)) _a.call(children_1);\n                        }\n                        finally { if (e_1) throw e_1.error; }\n                    }\n                    this._rawData = rawData;\n                }\n                this.cache = true;\n            }\n            return this._rawData;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Node.prototype.getNode = function (dimensions) {\n        var search = function (node, level) {\n            var e_2, _a;\n            if (level === dimensions.length) {\n                return node;\n            }\n            var children = node.children.entries();\n            try {\n                for (var children_2 = __values(children), children_2_1 = children_2.next(); !children_2_1.done; children_2_1 = children_2.next()) {\n                    var _b = __read(children_2_1.value, 2), childName = _b[0], child = _b[1];\n                    if (childName === dimensions[level]) {\n                        return search(child, level + 1);\n                    }\n                }\n            }\n            catch (e_2_1) { e_2 = { error: e_2_1 }; }\n            finally {\n                try {\n                    if (children_2_1 && !children_2_1.done && (_a = children_2.return)) _a.call(children_2);\n                }\n                finally { if (e_2) throw e_2.error; }\n            }\n            return null;\n        };\n        return search(this, 0);\n    };\n    return Node;\n}());\nvar periodCube = /** @class */ (function () {\n    function periodCube(props) {\n        this.aggFunc = props.aggFunc;\n        this.factTable = props.factTable;\n        this.dimensions = props.dimensions;\n        this.measures = props.measures;\n    }\n    periodCube.prototype.get = function (dimensions) {\n        var _a = this, tree = _a.tree, aggFunc = _a.aggFunc, measures = _a.measures;\n        var search = function (node, level) {\n            var e_3, _a;\n            if (level === dimensions.length) {\n                return node.aggData(measures);\n            }\n            var children = node.children.entries();\n            try {\n                for (var children_3 = __values(children), children_3_1 = children_3.next(); !children_3_1.done; children_3_1 = children_3.next()) {\n                    var _b = __read(children_3_1.value, 2), childName = _b[0], child = _b[1];\n                    if (childName === dimensions[level]) {\n                        return search(child, level + 1);\n                    }\n                }\n            }\n            catch (e_3_1) { e_3 = { error: e_3_1 }; }\n            finally {\n                try {\n                    if (children_3_1 && !children_3_1.done && (_a = children_3.return)) _a.call(children_3);\n                }\n                finally { if (e_3) throw e_3.error; }\n            }\n            return false;\n        };\n        return search(tree, 0);\n    };\n    periodCube.prototype.getNode = function (dimensions) {\n        var tree = this.tree;\n        return tree.getNode(dimensions);\n    };\n    periodCube.prototype.buildTree = function () {\n        var tree = new Node(this.aggFunc);\n        var len = this.factTable.length, i;\n        for (i = 0; i < len; i++) {\n            this.insertNode(this.factTable[i], tree, 0);\n        }\n        this.tree = tree;\n        return tree;\n    };\n    periodCube.prototype.insertNode = function (record, node, level) {\n        node.push(record);\n        node.cache = false;\n        if (level < this.dimensions.length) {\n            var member = record[this.dimensions[level]];\n            if (!node.children.has(member)) {\n                node.children.set(member, new Node(this.aggFunc));\n            }\n            this.insertNode(record, node.children.get(member), level + 1);\n        }\n    };\n    periodCube.prototype.aggTree = function (node) {\n        var e_4, _a;\n        if (node === void 0) { node = this.tree; }\n        var children = node.children.values();\n        try {\n            for (var children_4 = __values(children), children_4_1 = children_4.next(); !children_4_1.done; children_4_1 = children_4.next()) {\n                var child = children_4_1.value;\n                this.aggTree(child);\n            }\n        }\n        catch (e_4_1) { e_4 = { error: e_4_1 }; }\n        finally {\n            try {\n                if (children_4_1 && !children_4_1.done && (_a = children_4.return)) _a.call(children_4);\n            }\n            finally { if (e_4) throw e_4.error; }\n        }\n        node.aggData(this.measures);\n        return node;\n    };\n    periodCube.prototype.aggNode = function (node) {\n        var e_5, _a;\n        if (node === void 0) { node = this.tree; }\n        var children = node.children.values();\n        try {\n            for (var children_5 = __values(children), children_5_1 = children_5.next(); !children_5_1.done; children_5_1 = children_5.next()) {\n                var child = children_5_1.value;\n                this.aggTree(child);\n            }\n        }\n        catch (e_5_1) { e_5 = { error: e_5_1 }; }\n        finally {\n            try {\n                if (children_5_1 && !children_5_1.done && (_a = children_5.return)) _a.call(children_5);\n            }\n            finally { if (e_5) throw e_5.error; }\n        }\n        node.aggData(this.measures);\n        return node;\n    };\n    return periodCube;\n}());\nexports.default = periodCube;\n","\"use strict\";\nvar __read = (this && this.__read) || function (o, n) {\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n    if (!m) return o;\n    var i = m.call(o), r, ar = [], e;\n    try {\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n    }\n    catch (error) { e = { error: error }; }\n    finally {\n        try {\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\n        }\n        finally { if (e) throw e.error; }\n    }\n    return ar;\n};\nvar __spread = (this && this.__spread) || function () {\n    for (var ar = [], i = 0; i < arguments.length; i++) ar = ar.concat(__read(arguments[i]));\n    return ar;\n};\nvar __values = (this && this.__values) || function(o) {\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\n    if (m) return m.call(o);\n    if (o && typeof o.length === \"number\") return {\n        next: function () {\n            if (o && i >= o.length) o = void 0;\n            return { value: o && o[i++], done: !o };\n        }\n    };\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar Node = /** @class */ (function () {\n    function Node() {\n        this.children = new Map();\n        this.rawData = [];\n    }\n    Node.prototype.push = function () {\n        var _a;\n        var params = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            params[_i] = arguments[_i];\n        }\n        (_a = this.rawData).push.apply(_a, __spread(params));\n    };\n    Node.prototype.aggData = function (aggFunc, measures) {\n        if (measures === void 0) { measures = []; }\n        this._aggData = aggFunc(this.rawData, measures);\n        return this._aggData;\n    };\n    Node.prototype.getNode = function (dimensions) {\n        var search = function (node, level) {\n            var e_1, _a;\n            if (level === dimensions.length) {\n                return node;\n            }\n            var children = node.children.entries();\n            try {\n                for (var children_1 = __values(children), children_1_1 = children_1.next(); !children_1_1.done; children_1_1 = children_1.next()) {\n                    var _b = __read(children_1_1.value, 2), childName = _b[0], child = _b[1];\n                    if (childName === dimensions[level]) {\n                        return search(child, level + 1);\n                    }\n                }\n            }\n            catch (e_1_1) { e_1 = { error: e_1_1 }; }\n            finally {\n                try {\n                    if (children_1_1 && !children_1_1.done && (_a = children_1.return)) _a.call(children_1);\n                }\n                finally { if (e_1) throw e_1.error; }\n            }\n            return null;\n        };\n        return search(this, 0);\n    };\n    return Node;\n}());\nexports.Node = Node;\nvar momentCube = /** @class */ (function () {\n    function momentCube(props) {\n        this.aggFunc = props.aggFunc;\n        this.factTable = props.factTable;\n        this.dimensions = props.dimensions;\n        this.measures = props.measures;\n        this.buildTree();\n        this.aggTree();\n    }\n    momentCube.prototype.get = function (dimensions) {\n        var _a = this, tree = _a.tree, aggFunc = _a.aggFunc, measures = _a.measures;\n        var search = function (node, level) {\n            var e_2, _a;\n            if (level === dimensions.length) {\n                return node.aggData(aggFunc, measures);\n            }\n            var children = node.children.entries();\n            try {\n                for (var children_2 = __values(children), children_2_1 = children_2.next(); !children_2_1.done; children_2_1 = children_2.next()) {\n                    var _b = __read(children_2_1.value, 2), childName = _b[0], child = _b[1];\n                    if (childName === dimensions[level]) {\n                        return search(child, level + 1);\n                    }\n                }\n            }\n            catch (e_2_1) { e_2 = { error: e_2_1 }; }\n            finally {\n                try {\n                    if (children_2_1 && !children_2_1.done && (_a = children_2.return)) _a.call(children_2);\n                }\n                finally { if (e_2) throw e_2.error; }\n            }\n            return false;\n        };\n        return search(tree, 0);\n    };\n    momentCube.prototype.getNode = function (dimensions) {\n        var tree = this.tree;\n        return tree.getNode(dimensions);\n    };\n    momentCube.prototype.setData = function (props) {\n        var _a = props.aggFunc, aggFunc = _a === void 0 ? this.aggFunc : _a, _b = props.factTable, factTable = _b === void 0 ? this.factTable : _b, _c = props.dimensions, dimensions = _c === void 0 ? this.dimensions : _c, _d = props.measures, measures = _d === void 0 ? this.measures : _d;\n        if (dimensions !== this.dimensions || factTable !== this.factTable) {\n            this.dimensions = dimensions;\n            this.factTable = factTable;\n            this.measures = measures;\n            this.aggFunc = aggFunc;\n            this.buildTree();\n            this.aggTree();\n        }\n        else if (measures !== this.measures || aggFunc !== this.aggFunc) {\n            this.measures = measures;\n            this.aggFunc = aggFunc;\n            this.aggTree();\n        }\n    };\n    momentCube.prototype.buildTree = function () {\n        var tree = new Node();\n        var len = this.factTable.length, i;\n        for (i = 0; i < len; i++) {\n            this.insertNode(this.factTable[i], tree, 0);\n        }\n        this.tree = tree;\n        return tree;\n    };\n    momentCube.prototype.insertNode = function (record, node, level) {\n        if (level === this.dimensions.length) {\n            node.push(record);\n        }\n        else {\n            var member = record[this.dimensions[level]];\n            if (!node.children.has(member)) {\n                node.children.set(member, new Node());\n            }\n            this.insertNode(record, node.children.get(member), level + 1);\n        }\n    };\n    momentCube.prototype.aggTree = function (node) {\n        var e_3, _a;\n        if (node === void 0) { node = this.tree; }\n        if (node.children.size > 0) {\n            node.rawData = [];\n            var children = node.children.values();\n            try {\n                for (var children_3 = __values(children), children_3_1 = children_3.next(); !children_3_1.done; children_3_1 = children_3.next()) {\n                    var child = children_3_1.value;\n                    var i = void 0;\n                    var data = this.aggTree(child).rawData;\n                    var len = data.length;\n                    for (i = 0; i < len; i++) {\n                        node.rawData.push(data[i]);\n                    }\n                }\n            }\n            catch (e_3_1) { e_3 = { error: e_3_1 }; }\n            finally {\n                try {\n                    if (children_3_1 && !children_3_1.done && (_a = children_3.return)) _a.call(children_3);\n                }\n                finally { if (e_3) throw e_3.error; }\n            }\n        }\n        node.aggData(this.aggFunc, this.measures);\n        return node;\n    };\n    return momentCube;\n}());\nexports.default = momentCube;\n","\"use strict\";\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __values = (this && this.__values) || function(o) {\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\n    if (m) return m.call(o);\n    if (o && typeof o.length === \"number\") return {\n        next: function () {\n            if (o && i >= o.length) o = void 0;\n            return { value: o && o[i++], done: !o };\n        }\n    };\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\n};\nvar __read = (this && this.__read) || function (o, n) {\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n    if (!m) return o;\n    var i = m.call(o), r, ar = [], e;\n    try {\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n    }\n    catch (error) { e = { error: error }; }\n    finally {\n        try {\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\n        }\n        finally { if (e) throw e.error; }\n    }\n    return ar;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nfunction tree2Table(props) {\n    var dimensions = props.dimensions, measures = props.measures, cube = props.cube;\n    var aggFunc = cube.aggFunc;\n    var table = [];\n    function dfs(node, record, level) {\n        var e_1, _a, _b;\n        if (node.children.size === 0) {\n            var values = node._aggData;\n            table.push(__assign(__assign({}, record), values));\n            return;\n        }\n        try {\n            for (var _c = __values(node.children.entries()), _d = _c.next(); !_d.done; _d = _c.next()) {\n                var _e = __read(_d.value, 2), childName = _e[0], child = _e[1];\n                var r = __assign(__assign({}, record), (_b = {}, _b[dimensions[level]] = childName, _b));\n                dfs(child, r, level + 1);\n            }\n        }\n        catch (e_1_1) { e_1 = { error: e_1_1 }; }\n        finally {\n            try {\n                if (_d && !_d.done && (_a = _c.return)) _a.call(_c);\n            }\n            finally { if (e_1) throw e_1.error; }\n        }\n    }\n    dfs(cube.tree, {}, 0);\n    return table;\n}\nexports.tree2Table = tree2Table;\n","import arrayWithHoles from \"./arrayWithHoles\";\nimport iterableToArrayLimit from \"./iterableToArrayLimit\";\nimport nonIterableRest from \"./nonIterableRest\";\nexport default function _slicedToArray(arr, i) {\n  return arrayWithHoles(arr) || iterableToArrayLimit(arr, i) || nonIterableRest();\n}","export default function _arrayWithHoles(arr) {\n  if (Array.isArray(arr)) return arr;\n}","export default function _iterableToArrayLimit(arr, i) {\n  if (!(Symbol.iterator in Object(arr) || Object.prototype.toString.call(arr) === \"[object Arguments]\")) {\n    return;\n  }\n\n  var _arr = [];\n  var _n = true;\n  var _d = false;\n  var _e = undefined;\n\n  try {\n    for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) {\n      _arr.push(_s.value);\n\n      if (i && _arr.length === i) break;\n    }\n  } catch (err) {\n    _d = true;\n    _e = err;\n  } finally {\n    try {\n      if (!_n && _i[\"return\"] != null) _i[\"return\"]();\n    } finally {\n      if (_d) throw _e;\n    }\n  }\n\n  return _arr;\n}","export default function _nonIterableRest() {\n  throw new TypeError(\"Invalid attempt to destructure non-iterable instance\");\n}","export default function _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}","function _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nexport default function _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  return Constructor;\n}","import arrayWithoutHoles from \"./arrayWithoutHoles\";\nimport iterableToArray from \"./iterableToArray\";\nimport nonIterableSpread from \"./nonIterableSpread\";\nexport default function _toConsumableArray(arr) {\n  return arrayWithoutHoles(arr) || iterableToArray(arr) || nonIterableSpread();\n}","export default function _arrayWithoutHoles(arr) {\n  if (Array.isArray(arr)) {\n    for (var i = 0, arr2 = new Array(arr.length); i < arr.length; i++) {\n      arr2[i] = arr[i];\n    }\n\n    return arr2;\n  }\n}","export default function _iterableToArray(iter) {\n  if (Symbol.iterator in Object(iter) || Object.prototype.toString.call(iter) === \"[object Arguments]\") return Array.from(iter);\n}","export default function _nonIterableSpread() {\n  throw new TypeError(\"Invalid attempt to spread non-iterable instance\");\n}","export function chiSquared(nestTree, xSet, ySet) {\n    if (typeof nestTree === 'undefined' || typeof xSet === 'undefined' || typeof ySet === 'undefined') {\n        return 0;\n    }\n    let rowSums = new Map();\n    let colSums = new Map();\n    let totalSum = 0;\n    for (let x of xSet) {\n        rowSums.set(x, 0);\n    }\n    for (let y of ySet) {\n        colSums.set(y, 0);\n    }\n    for (let [x, node] of nestTree) {\n        for (let [y, counter] of node) {\n            rowSums.set(x, rowSums.get(x) + counter);\n            colSums.set(y, colSums.get(y) + counter);\n            totalSum += counter;\n        }\n    }\n    let chis = 0;\n    for (let [x, node] of nestTree) {\n        for (let [y, observed] of node) {\n            let expected = rowSums.get(x) * colSums.get(y) / totalSum;\n            chis += (observed - expected) ** 2 / expected;\n        }\n    }\n    return chis;\n}\nexport function crammersV(dataSource, fieldX, fieldY) {\n    const xSet = new Set();\n    const ySet = new Set();\n    const nestTree = new Map();\n    let len = dataSource.length;\n    for (let i = 0; i < len; i++) {\n        let record = dataSource[i];\n        xSet.add(record[fieldX]);\n        ySet.add(record[fieldY]);\n        if (!nestTree.has(record[fieldX])) {\n            nestTree.set(record[fieldX], new Map());\n        }\n        let node = nestTree.get(record[fieldX]);\n        if (!node.has(record[fieldY])) {\n            node.set(record[fieldY], 0);\n        }\n        node.set(record[fieldY], node.get(record[fieldY]) + 1);\n    }\n    const chis = chiSquared(nestTree, xSet, ySet);\n    const V = Math.sqrt(chis / (dataSource.length * Math.min(xSet.size - 1, ySet.size - 1)));\n    return V;\n}\n/**\n * Pearson correlation coefficient\n * @param dataSource\n * @param fieldX\n * @param fieldY\n */\nexport function pearsonCC(dataSource, fieldX, fieldY) {\n    let r = 0;\n    let xBar = sum(dataSource.map(r => r[fieldX])) / dataSource.length;\n    let yBar = sum(dataSource.map(r => r[fieldY])) / dataSource.length;\n    r = sum(dataSource.map(r => (r[fieldX] - xBar) * (r[fieldY] - yBar))) /\n        Math.sqrt(sum(dataSource.map(r => Math.pow(r[fieldX] - xBar, 2))) * sum(dataSource.map(r => Math.pow(r[fieldY] - yBar, 2))));\n    return r;\n}\nfunction sum(arr) {\n    let sum = 0;\n    for (let i = 0, len = arr.length; i < len; i++) {\n        // if (typeof dataSource[i][field])\n        sum += arr[i];\n    }\n    return sum;\n}\n// can be used for test\n// export function crammersV(dataSource: DataSource, fieldX: string, fieldY: string): number {\n//   const xSet = new Set(dataSource.map(d => d[fieldX]))\n//   const ySet = new Set(dataSource.map(d => d[fieldY]))\n//   const xMembers = [...xSet];\n//   const yMembers = [...ySet];\n//   let xDict = {};\n//   let yDict = {};\n//   for (let i = 0; i < xMembers.length; i++) {\n//     xDict[xMembers[i]] = i;\n//   }\n//   for (let i = 0; i < yMembers.length; i++) {\n//     yDict[yMembers[i]] = i;\n//   }\n//   // let matrix: number[][] = xMembers.map(x => yMembers.map(y => 0));\n//   let matrix: number[][] = [];\n//   for (let  i = 0; i < xMembers.length; i++) {\n//     matrix.push([]);\n//     for (let j = 0; j < yMembers.length; j++) {\n//       matrix[i].push(0);\n//     }\n//   }\n//   for (let record of dataSource) {\n//     matrix[xDict[record[fieldX]]][yDict[record[fieldY]]]++;\n//   }\n//   const chis = chiSquared(matrix);\n//   const V = Math.sqrt(chis / (dataSource.length * Math.min(xMembers.length - 1, yMembers.length - 1)))\n//   return V;\n// }\n// export function chiSquared(matrix: number[][] = [[]]): number {\n//   let rowSums = matrix.map(m => 0);\n//   let colSums = matrix[0].map(m => 0);\n//   let totalSum = 0;\n//   for (let i = 0; i < matrix.length; i++) {\n//     for (let j = 0; j < matrix[i].length; j++) {\n//       rowSums[i] += matrix[i][j];\n//       colSums[j] += matrix[i][j];\n//       totalSum += matrix[i][j];\n//     }\n//   }\n//   let chis = 0;\n//   for (let i = 0; i < matrix.length; i++) {\n//     for (let j = 0; j < matrix[i].length; j++) {\n//       let observed = matrix[i][j];\n//       let expected = rowSums[i] * colSums[j] / totalSum;\n//       chis += (observed - expected) ** 2 / expected;\n//     }\n//   }\n//   return chis;\n// }\n","export function linearMapPositive(arr) {\n    let min = Math.min(...arr);\n    return arr.map(a => a - min + 1);\n}\nexport function getCombination(elements, start = 1, end = elements.length) {\n    let ans = [];\n    const combine = (step, set, size) => {\n        if (set.length === size) {\n            ans.push([...set]);\n            return;\n        }\n        if (step >= elements.length) {\n            return;\n        }\n        combine(step + 1, [...set, elements[step]], size);\n        combine(step + 1, set, size);\n    };\n    for (let i = start; i <= end; i++) {\n        combine(0, [], i);\n    }\n    return ans;\n}\nexport function normalize(frequencyList) {\n    let sum = 0;\n    for (let f of frequencyList) {\n        sum += f;\n    }\n    return frequencyList.map(f => f / sum);\n}\nexport const entropy = (probabilityList) => {\n    let sum = 0;\n    for (let p of probabilityList) {\n        sum += p * Math.log2(p);\n    }\n    return -sum;\n};\nexport const gini = (probabilityList) => {\n    let sum = 0;\n    for (let p of probabilityList) {\n        sum += p * (1 - p);\n    }\n    return sum;\n};\n","export class oneDLinearRegression {\n    constructor(dataSource, X, Y) {\n        this.dataSource = dataSource;\n        this.X = X;\n        this.Y = Y;\n        this.normalizedDataSource = dataSource;\n    }\n    normalizeDimensions(dimensions) {\n        this.normalizedDataSource = [];\n        this.valueSets = [];\n        dimensions.forEach(() => {\n            this.valueSets.push(new Map());\n        });\n        this.dataSource.forEach(record => {\n            dimensions.forEach((dim, index) => {\n                let value = (record[dim] || 'others').toString();\n                if (!this.valueSets[index].has(value)) {\n                    this.valueSets[index].set(value, this.valueSets[index].size);\n                }\n            });\n        });\n        this.dataSource.forEach(record => {\n            let normalizedRecord = this.normalizeRecord(record, dimensions);\n            this.normalizedDataSource.push(normalizedRecord);\n        });\n        return this.normalizedDataSource;\n    }\n    normalizeRecord(record, dimensions) {\n        let normalizedRecord = {};\n        Object.keys(record).forEach(mea => {\n            normalizedRecord[mea] = record[mea];\n        });\n        dimensions.forEach((dim, index) => {\n            let value = (record[dim] || 'others').toString();\n            normalizedRecord[dim] = this.valueSets[index].get(value);\n        });\n        return normalizedRecord;\n    }\n    mean() {\n        let meanX = 0;\n        let meanY = 0;\n        if (this.normalizedDataSource.length === 0)\n            return [meanX, meanY];\n        this.normalizedDataSource.forEach((record, index) => {\n            meanX += record[this.X];\n            meanY += record[this.Y];\n        });\n        meanX /= this.normalizedDataSource.length;\n        meanY /= this.normalizedDataSource.length;\n        return [meanX, meanY];\n    }\n    getRegressionEquation() {\n        if (this.normalizedDataSource.length === 0)\n            return [0, 0];\n        const [meanX, meanY] = this.mean();\n        let beta = 0;\n        let alpha = 0;\n        let numerator = 0;\n        let denominator = 0;\n        this.normalizedDataSource.forEach(record => {\n            numerator += (record[this.X] - meanX) * (record[this.Y] - meanY);\n            denominator += (record[this.X] - meanX) ** 2;\n        });\n        beta = numerator / denominator;\n        alpha = meanY - meanX * beta;\n        return [alpha, beta];\n    }\n    r_squared() {\n        const [, meanY] = this.mean();\n        const [alpha, beta] = this.getRegressionEquation();\n        let SSR = 0;\n        let SST = 0;\n        this.normalizedDataSource.forEach(record => {\n            let x = record[this.X];\n            let y = record[this.Y];\n            let yHat = x * beta + alpha;\n            SSR += (yHat - meanY) ** 2;\n            SST += (y - meanY) ** 2;\n        });\n        return SSR / SST;\n    }\n    cumulativeLogisticDistribution(x) {\n        const lambda = 2;\n        const mu = 0.2;\n        return 1 / (1 + Math.pow(Math.E, -(x - mu) / lambda));\n    }\n    pValue() {\n        const [, beta] = this.getRegressionEquation();\n        return 2 * (1 - this.cumulativeLogisticDistribution(Math.abs(beta)));\n    }\n    significance() {\n        let r_squared = this.r_squared();\n        let p_value = this.pValue();\n        return r_squared * (1 - p_value);\n    }\n}\n","export const TopKSingleField = 6;\nexport const TopKView = 15;\nexport const Depth = 4;\nexport const VisualLimit = 8;\nexport const TopKPercentField = 0.8;\nexport const CrammersVThreshold = 0.3;\nexport const PearsonCorrelation = {\n    strong: 0.5,\n    weak: 0.3\n};\n","/**\n *\n * @param matrix adjmatrix\n */\nfunction turnAdjMatrix2List(matrix) {\n    // only for the special matrix here(corelational matrix)\n    let edges = [];\n    for (let i = 0; i < matrix.length; i++) {\n        for (let j = i + 1; j < matrix[i].length; j++) {\n            edges.push([[i, j], Math.abs(matrix[i][j])]);\n        }\n    }\n    return edges;\n}\nfunction find(parents, n) {\n    return parents[n] === n ? n : parents[n] = find(parents, parents[n]);\n}\nfunction union(parents, n1, n2) {\n    let p1 = find(parents, n1);\n    let p2 = find(parents, n2);\n    parents[p1] = p2;\n    // I'm too tired. this is just a tmp lazy solution.... will be fixed later.\n    // may check and prove whether it's necessary.\n    find(parents, n1);\n    find(parents, n2);\n}\nfunction findWithEffect(parents, sizes, n) {\n    if (parents[n] === n) {\n        return n;\n    }\n    parents[n] = findWithEffect(parents, sizes, parents[n]);\n    sizes[n] = sizes[parents[n]];\n    return parents[n];\n}\nfunction unionWithEffect(parents, sizes, n1, n2) {\n    let p1 = findWithEffect(parents, sizes, n1);\n    let p2 = findWithEffect(parents, sizes, n2);\n    let size1 = sizes[p1];\n    let size2 = sizes[p2];\n    parents[p1] = p2;\n    sizes[p1] = sizes[p2] = size1 + size2;\n    findWithEffect(parents, sizes, n1);\n    findWithEffect(parents, sizes, n2);\n}\n/**\n * maxiumn spanning tree\n * @param matrix adjmatrix\n * @param groupNumber number of group generated by clustering\n */\nfunction kruskal(matrix, groupNumber, threshold = 0) {\n    const edges = turnAdjMatrix2List(matrix);\n    edges.sort((a, b) => b[1] - a[1]);\n    const parents = matrix.map((m, i) => i);\n    for (let edge of edges) {\n        if (find(parents, edge[0][0]) !== find(parents, edge[0][1])) {\n            union(parents, edge[0][0], edge[0][1]);\n        }\n        for (let i = 0; i < parents.length; i++) {\n            parents[i] = find(parents, i);\n        }\n        let set = new Set(parents);\n        if (set.size <= groupNumber || edge[1] < threshold) {\n            break;\n        }\n    }\n    let groups = new Map();\n    for (let i = 0; i < parents.length; i++) {\n        if (!groups.has(parents[i])) {\n            groups.set(parents[i], []);\n        }\n        groups.get(parents[i]).push(i);\n    }\n    return groups;\n}\n// todo: delete kruskal with limit size, use largest size to limit it(uncontrolled group number but better), need discuss.\n/**\n *\n * @param matrix\n * @param limitSize max size of each group\n */\nfunction kruskalWithLimitSize(matrix, limitSize) {\n    const edges = turnAdjMatrix2List(matrix);\n    edges.sort((a, b) => b[1] - a[1]);\n    const parents = matrix.map((m, i) => i);\n    const sizes = matrix.map(() => 1);\n    for (let edge of edges) {\n        if (findWithEffect(parents, sizes, edge[0][0]) !== findWithEffect(parents, sizes, edge[0][1])) {\n            if (sizes[edge[0][0]] + sizes[edge[0][1]] > limitSize) {\n                continue;\n            }\n            unionWithEffect(parents, sizes, edge[0][0], edge[0][1]);\n        }\n        for (let i = 0; i < parents.length; i++) {\n            parents[i] = findWithEffect(parents, sizes, i);\n        }\n        let set = new Set(parents);\n        if (set.size === 1) {\n            break;\n        }\n    }\n    let groups = new Map();\n    for (let i = 0; i < parents.length; i++) {\n        if (!groups.has(parents[i])) {\n            groups.set(parents[i], []);\n        }\n        groups.get(parents[i]).push(i);\n    }\n    return groups;\n}\nexport function kruskalMSTWithLimitSize(matrix, limitSize = 4) {\n    const edges = turnAdjMatrix2List(matrix);\n    edges.sort((a, b) => b[1] - a[1]);\n    const edgesInMST = [];\n    const parents = matrix.map((m, i) => i);\n    const cloneParents = matrix.map((m, i) => i);\n    const sizes = matrix.map(() => 1);\n    for (let edge of edges) {\n        if (findWithEffect(parents, sizes, edge[0][0]) !== findWithEffect(parents, sizes, edge[0][1])) {\n            if (sizes[edge[0][0]] + sizes[edge[0][1]] > limitSize) {\n                if (find(cloneParents, edge[0][0]) !== find(cloneParents, edge[0][1])) {\n                    edgesInMST.push([edge[0], edge[1], true]);\n                    union(cloneParents, edge[0][0], edge[0][1]);\n                }\n                continue;\n            }\n            unionWithEffect(parents, sizes, edge[0][0], edge[0][1]);\n            // fuck typescript\n            // edgesInMST.push([...edge, inCutEdge]);\n            edgesInMST.push([edge[0], edge[1], false]);\n        }\n        for (let i = 0; i < parents.length; i++) {\n            parents[i] = findWithEffect(parents, sizes, i);\n            cloneParents[i] = find(cloneParents, i);\n        }\n        let set = new Set(parents);\n        if (set.size === 1) {\n            break;\n        }\n    }\n    return { edgesInMST, groups: parents };\n}\n/**\n *\n * @param matrix\n * @param groupNumber number of group generated by clustering\n */\nexport function kruskalMST(matrix, groupNumber = 4, threshold = 0) {\n    const edges = turnAdjMatrix2List(matrix);\n    edges.sort((a, b) => b[1] - a[1]);\n    const edgesInMST = [];\n    const parents = matrix.map((m, i) => i);\n    let groups = [...parents];\n    let inCutEdge = false;\n    for (let edge of edges) {\n        if (find(parents, edge[0][0]) !== find(parents, edge[0][1])) {\n            union(parents, edge[0][0], edge[0][1]);\n            // fuck typescript\n            // edgesInMST.push([...edge, inCutEdge]);\n            edgesInMST.push([edge[0], edge[1], inCutEdge]);\n        }\n        for (let i = 0; i < parents.length; i++) {\n            parents[i] = find(parents, i);\n        }\n        let set = new Set(parents);\n        // TODO:\n        // + use kruskalMST instead of kruskal.\n        if (set.size <= groupNumber || edge[1] < threshold) {\n            inCutEdge = true;\n        }\n        else {\n            groups = [...parents];\n        }\n        if (set.size === 1) {\n            break;\n        }\n    }\n    return { edgesInMST, groups };\n}\nfunction cluster({ matrix, measures, method = 'kruskal', groupMaxSize = 4, limitSize = false, threshold = 0 }) {\n    // const groups = kruskal({ matrix, groupMaxSize });\n    let groups;\n    if (limitSize) {\n        groups = kruskalWithLimitSize(matrix, groupMaxSize);\n    }\n    else {\n        groups = kruskal(matrix, groupMaxSize, threshold);\n    }\n    let ans = [];\n    for (let meas of groups.values()) {\n        ans.push(meas.map(meaIndex => measures[meaIndex]));\n    }\n    return ans;\n}\nexport default cluster;\n","function _typeof2(obj) { if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof2 = function _typeof2(obj) { return typeof obj; }; } else { _typeof2 = function _typeof2(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof2(obj); }\n\nexport default function _typeof(obj) {\n  if (typeof Symbol === \"function\" && _typeof2(Symbol.iterator) === \"symbol\") {\n    _typeof = function _typeof(obj) {\n      return _typeof2(obj);\n    };\n  } else {\n    _typeof = function _typeof(obj) {\n      return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : _typeof2(obj);\n    };\n  }\n\n  return _typeof(obj);\n}","import _typeof from \"../../helpers/esm/typeof\";\nimport assertThisInitialized from \"./assertThisInitialized\";\nexport default function _possibleConstructorReturn(self, call) {\n  if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) {\n    return call;\n  }\n\n  return assertThisInitialized(self);\n}","export default function _assertThisInitialized(self) {\n  if (self === void 0) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return self;\n}","export default function _getPrototypeOf(o) {\n  _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {\n    return o.__proto__ || Object.getPrototypeOf(o);\n  };\n  return _getPrototypeOf(o);\n}","export default function _setPrototypeOf(o, p) {\n  _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n\n  return _setPrototypeOf(o, p);\n}","import setPrototypeOf from \"./setPrototypeOf\";\nexport default function _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function\");\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) setPrototypeOf(subClass, superClass);\n}","class Base {\n    constructor(props) {\n        const { dataSource, dimensions, measures } = props;\n        this.dataSource = dataSource;\n        this.dimensions = dimensions;\n        this.measures = measures;\n    }\n    normalize() {\n        this.normalizedDataSource = [];\n        this.valueSets = [];\n        this.valueParser = [];\n        this.ranges = [];\n        this.dimensions.forEach(dim => {\n            this.valueSets.push(new Map());\n            this.valueParser.push([]);\n        });\n        this.measures.forEach(() => {\n            this.ranges.push([Infinity, -Infinity]);\n        });\n        this.dataSource.forEach(record => {\n            this.dimensions.forEach((dim, index) => {\n                let value = (record[dim] || 'others').toString();\n                if (!this.valueSets[index].has(value)) {\n                    this.valueSets[index].set(value, this.valueSets[index].size);\n                    this.valueParser[index].push(value);\n                }\n            });\n            this.measures.forEach((mea, index) => {\n                let value = record[mea];\n                if (typeof value === 'number') {\n                    this.ranges[index][0] = Math.min(this.ranges[index][0], value);\n                    this.ranges[index][1] = Math.max(this.ranges[index][1], value);\n                }\n            });\n        });\n        this.dataSource.forEach(record => {\n            let normalizedRecord = this.normalizeRecord(record);\n            this.normalizedDataSource.push(normalizedRecord);\n        });\n        return this.normalizedDataSource;\n    }\n    normalizeRecord(record) {\n        let normalizedRecord = {};\n        this.measures.forEach((mea, index) => {\n            normalizedRecord[mea] = (record[mea] - this.ranges[index][0]) / (this.ranges[index][1] - this.ranges[index][0]);\n        });\n        this.dimensions.forEach((dim, index) => {\n            let value = (record[dim] || 'others').toString();\n            normalizedRecord[dim] = this.valueSets[index].get(value);\n        });\n        return normalizedRecord;\n    }\n}\nexport class KNN extends Base {\n    constructor(props) {\n        super(props);\n        const { K } = props;\n        this.K = K;\n        this.normalize();\n    }\n    getNeighbors(targetRecord, features, weights = []) {\n        if (weights.length !== features.length) {\n            features.forEach(f => {\n                weights.push(1);\n            });\n        }\n        // let normalizedRecord = this.normalizeRecord(targetRecord);\n        let dimFeatures = [];\n        let meaFeatures = [];\n        let dimWeights = [];\n        let meaWeights = [];\n        let dimSets = new Set(this.dimensions);\n        for (let i = 0; i < features.length; i++) {\n            if (dimSets.has(features[i])) {\n                dimFeatures.push(features[i]);\n                dimWeights.push(weights[i]);\n            }\n            else {\n                meaFeatures.push(features[i]);\n                meaWeights.push(weights[i]);\n            }\n        }\n        // let legalFeatures = features.filter(f => this.measures.includes(f));\n        let distances = [];\n        this.normalizedDataSource.forEach((record, rIndex) => {\n            let dis = 0;\n            meaFeatures.forEach((feature, index) => {\n                dis += ((record[feature] - targetRecord[feature]) * meaWeights[index]) ** 2;\n            });\n            dimFeatures.forEach((feature, index) => {\n                if (record[feature] !== targetRecord[feature]) {\n                    dis += dimWeights[index] ** 2;\n                }\n            });\n            distances.push({\n                dis,\n                index: rIndex\n            });\n        });\n        distances.sort((a, b) => {\n            return a.dis - b.dis;\n        });\n        let ans = [];\n        let len = Math.min(this.K, distances.length);\n        for (let i = 0; i < len; i++) {\n            ans.push(this.normalizedDataSource[distances[i].index]);\n        }\n        return ans;\n    }\n    getTargetValue(targets, neighbors) {\n        let ans = [];\n        targets.forEach(tar => {\n            let votes = new Map();\n            neighbors.forEach(nei => {\n                if (!votes.has(nei[tar])) {\n                    votes.set(nei[tar], 0);\n                }\n                votes.set(nei[tar], votes.get(nei[tar]) + 1);\n            });\n            let mostCount = 0;\n            let mostFeature = 0;\n            for (let vote of votes) {\n                if (vote[1] > mostCount) {\n                    mostCount = vote[1];\n                    mostFeature = vote[0];\n                }\n            }\n            let dimIndex = this.dimensions.indexOf(tar);\n            if (dimIndex > -1) {\n                ans.push(this.valueParser[dimIndex][mostFeature]);\n            }\n            else {\n                ans.push(mostFeature);\n            }\n        });\n        return ans;\n    }\n}\n","/**\n * todo reservoir sampling is better to support stream data\n * Algorithm R:\n * Vitter, Jeffrey S. (1 March 1985). \"Random sampling with a reservoir\" (PDF). ACM Transactions on Mathematical Software. 11 (1): 3757. CiteSeerX 10.1.1.138.784. doi:10.1145/3147.3165.\n */\nexport function reservoirSampling(dataSource, size = 500) {\n    if (dataSource.length <= size)\n        return dataSource;\n    let sampleSpace = dataSource.slice(0, size);\n    let len = dataSource.length;\n    for (let i = size + 1; i < len; i++) {\n        let pos = Math.round(Math.random() * i);\n        if (pos < size) {\n            sampleSpace[pos] = dataSource[i];\n        }\n    }\n    return sampleSpace;\n}\nfunction linearCongruentialGenerator(size, seed) {\n    if (size === 0)\n        return [];\n    const m = 2147483647;\n    const a = 1103515245;\n    const c = 12345;\n    let ans = [seed];\n    for (let i = 1; i < size; i++) {\n        ans.push(((ans[i - 1] * a + c) % m));\n    }\n    return ans.map(v => v / m);\n}\nexport function uniformSampling(dataSource, size) {\n    let sampleIndexes = linearCongruentialGenerator(size, Math.random() * 2147483647);\n    let ans = [];\n    for (let i = 0; i < size; i++) {\n        let index = Math.floor(sampleIndexes[i] * size) % size;\n        ans.push(dataSource[index]);\n    }\n    return ans;\n}\n","import { uniformSampling } from \"../../sampling\";\nexport class IsolationForest {\n    constructor(dimensions, measures, dataSource, treeNumber = 100, Psi = 256) {\n        this.dimensions = dimensions;\n        this.measures = measures;\n        this.dataSource = dataSource;\n        if (dataSource.length < Psi) {\n            this.treeNumber = Math.max(1, Math.ceil(Psi / 50));\n            this.sampleSize = Math.max(2, Math.floor(dataSource.length / 2));\n        }\n        else {\n            this.treeNumber = treeNumber;\n            this.sampleSize = Psi;\n        }\n        this.limitHeight = Math.ceil(Math.log2(this.sampleSize));\n        this.iForest = [];\n        this.normalizeDimensions();\n    }\n    normalizeDimensions() {\n        this.normalizedDataSource = [];\n        this.valueSets = [];\n        this.ranges = [];\n        this.dimensions.forEach(() => {\n            this.valueSets.push(new Map());\n        });\n        this.measures.forEach(() => {\n            this.ranges.push([Infinity, -Infinity]);\n        });\n        this.dataSource.forEach(record => {\n            this.dimensions.forEach((dim, index) => {\n                let value = (record[dim] || 'others').toString();\n                if (!this.valueSets[index].has(value)) {\n                    this.valueSets[index].set(value, this.valueSets[index].size);\n                }\n            });\n            this.measures.forEach((mea, index) => {\n                let value = record[mea];\n                if (typeof value === 'number') {\n                    this.ranges[index][0] = Math.min(this.ranges[index][0], value);\n                    this.ranges[index][1] = Math.max(this.ranges[index][1], value);\n                }\n            });\n        });\n        this.dataSource.forEach(record => {\n            let normalizedRecord = this.normalizeRecord(record);\n            this.normalizedDataSource.push(normalizedRecord);\n        });\n        return this.normalizedDataSource;\n    }\n    normalizeRecord(record) {\n        let normalizedRecord = {};\n        this.measures.forEach(mea => {\n            normalizedRecord[mea] = record[mea];\n        });\n        this.dimensions.forEach((dim, index) => {\n            let value = (record[dim] || 'others').toString();\n            normalizedRecord[dim] = this.valueSets[index].get(value);\n        });\n        return normalizedRecord;\n    }\n    buildIsolationTree(normalizedSampleData, depth) {\n        if (depth >= this.limitHeight || normalizedSampleData.length <= 1) {\n            return null;\n        }\n        else {\n            let rand = Math.random();\n            let randField = this.measures[0] || this.dimensions[0];\n            let dimLength = this.dimensions.length;\n            let meaLength = this.measures.length;\n            let randValue = 0;\n            if (rand >= dimLength / (dimLength + meaLength)) {\n                let index = Math.floor(Math.random() * meaLength) % meaLength;\n                randField = this.measures[index];\n                randValue = this.ranges[index][0] + (this.ranges[index][1] - this.ranges[index][0]) * Math.random();\n            }\n            else {\n                let index = Math.floor(Math.random() * dimLength) % dimLength;\n                randField = this.dimensions[index];\n                randValue = Math.floor(this.valueSets[index].size * Math.random()) % this.valueSets[index].size;\n            }\n            // random in range not in distribution.\n            // let randValue = normalizedSampleData[Math.floor(Math.random() * normalizedSampleData.length) % normalizedSampleData.length][randField];\n            let leftSubData = [];\n            let rightSubData = [];\n            for (let record of normalizedSampleData) {\n                if (record[randField] < randValue) {\n                    leftSubData.push(record);\n                }\n                else {\n                    rightSubData.push(record);\n                }\n            }\n            let node = {\n                field: randField,\n                value: randValue,\n                size: normalizedSampleData.length\n            };\n            node.left = this.buildIsolationTree(leftSubData, depth + 1);\n            node.right = this.buildIsolationTree(rightSubData, depth + 1);\n            return node;\n        }\n    }\n    /**\n     * average unsuccessful searches in BST (Preiss, 1999)\n     * @param Psi\n     */\n    AFS(Psi) {\n        if (Psi > 2)\n            return 2 * (Math.log(Psi - 1) + Math.E) - 2 * (Psi - 1) / Psi;\n        if (Psi === 2)\n            return 1;\n        return 0;\n    }\n    getPathLength(record, iTree, pathLength, nodeSize) {\n        if (iTree === null) {\n            return pathLength + this.AFS(nodeSize);\n        }\n        let value = record[iTree.field];\n        if (value < iTree.value) {\n            return this.getPathLength(record, iTree.left, pathLength + 1, iTree.size);\n        }\n        else {\n            return this.getPathLength(record, iTree.right, pathLength + 1, iTree.size);\n        }\n    }\n    buildIsolationForest() {\n        this.iForest = [];\n        for (let i = 0; i < this.treeNumber; i++) {\n            let samples = uniformSampling(this.normalizedDataSource, this.sampleSize);\n            let iTree = this.buildIsolationTree(samples, 0);\n            this.iForest.push(iTree);\n        }\n        return this.iForest;\n    }\n    // public evaluate (record: Record): number {\n    // }\n    estimateOutierScore() {\n        this.recordScoreList = [];\n        this.normalizedDataSource.forEach(record => {\n            let recordScore = 0;\n            let avgPathLength = 0;\n            this.iForest.forEach(iTree => {\n                avgPathLength += this.getPathLength(record, iTree, 0, this.sampleSize);\n            });\n            avgPathLength /= this.iForest.length;\n            recordScore = Math.pow(2, -(avgPathLength / this.AFS(this.sampleSize)));\n            this.recordScoreList.push(recordScore);\n        });\n        return this.recordScoreList;\n    }\n}\n","import * as Cluster from './cluster/index';\nimport { KNN } from './classification/knn';\nimport { IsolationForest } from './outlier/isolationForest';\nconst Outier = {\n    IsolationForest\n};\nconst Classification = {\n    KNN\n};\nexport { Cluster, Outier, Classification };\n","export const CHANNEL = {\n    maxDimensionNumber: 8,\n    maxMeasureNumber: 6\n};\n","import { crammersV, getCombination, pearsonCC } from '../statistics/index';\nimport { CrammersVThreshold, PearsonCorrelation } from './config';\nimport { Cluster } from '../ml/index';\nimport { CHANNEL } from '../constant';\n// insights like outlier and trend both request high impurity of dimension.\nexport function getDimCorrelationMatrix(dataSource, dimensions) {\n    let matrix = dimensions.map(d => dimensions.map(d => 0));\n    for (let i = 0; i < dimensions.length; i++) {\n        matrix[i][i] = 1;\n        for (let j = i + 1; j < dimensions.length; j++) {\n            matrix[i][j] = matrix[j][i] = crammersV(dataSource, dimensions[i], dimensions[j]);\n        }\n    }\n    return matrix;\n}\nexport function getMeaCorrelationMatrix(dataSource, measures) {\n    let matrix = measures.map(i => measures.map(j => 0));\n    for (let i = 0; i < measures.length; i++) {\n        matrix[i][i] = 1;\n        for (let j = i + 1; j < measures.length; j++) {\n            let r = pearsonCC(dataSource, measures[i], measures[j]);\n            matrix[j][i] = matrix[i][j] = r;\n        }\n    }\n    return matrix;\n}\nexport function getDimClusterGroups(dataSource, dimensions, threshold = CrammersVThreshold, max_number_of_group) {\n    const maxDimNumberInView = 4;\n    let dimCorrelationMatrix = getDimCorrelationMatrix(dataSource, dimensions);\n    // groupMaxSize here means group number.\n    let groups = Cluster.kruskal({\n        matrix: dimCorrelationMatrix,\n        measures: dimensions,\n        groupMaxSize: max_number_of_group ? max_number_of_group : Math.round(dimensions.length / maxDimNumberInView),\n        threshold,\n    });\n    return groups;\n}\nexport function getDimSetsBasedOnClusterGroups(dataSource, dimensions, correlation_threshold, max_dimensions_in_space) {\n    let dimSets = [];\n    let groups = getDimClusterGroups(dataSource, dimensions, correlation_threshold);\n    for (let group of groups) {\n        let combineDimSet = getCombination(group, 1, max_dimensions_in_space ? max_dimensions_in_space : CHANNEL.maxDimensionNumber);\n        dimSets.push(...combineDimSet);\n    }\n    return dimSets;\n}\n/**\n *\n * @param dataSource\n * @param measures\n * @param correlation_threshold a threshold of correlation used to define min correlation value in a cluster of measure.\n * @param max_measure_in_view\n */\nexport function getMeaSetsBasedOnClusterGroups(dataSource, measures, correlation_threshold, max_number_of_group = 3) {\n    const soft_max_measures_in_view = 3;\n    let correlationMatrix = getMeaCorrelationMatrix(dataSource, measures);\n    let groups = Cluster.kruskal({\n        matrix: correlationMatrix,\n        measures: measures,\n        groupMaxSize: max_number_of_group ? max_number_of_group : Math.round(measures.length / soft_max_measures_in_view),\n        threshold: correlation_threshold ? correlation_threshold : PearsonCorrelation.strong\n    });\n    return groups;\n}\nexport function subspaceSearching(dataSource, dimensions, should_dimensions_correlated = true) {\n    if (should_dimensions_correlated) {\n        return getDimSetsBasedOnClusterGroups(dataSource, dimensions);\n    }\n    else {\n        return getCombination(dimensions);\n    }\n}\nexport function getRelatedVertices(adjMatrix, vertices, verticesInGraph, topK) {\n    let verStatus = vertices.map(v => verticesInGraph.includes(v));\n    let edges = [];\n    let ans = [];\n    for (let i = 0; i < adjMatrix.length; i++) {\n        // if vertex in graph, then check all the edges from this vertex\n        if (verStatus[i]) {\n            for (let j = 0; j < adjMatrix[i].length; j++) {\n                if (!verStatus[j]) {\n                    edges.push([adjMatrix[i][j], [i, j]]);\n                }\n            }\n        }\n    }\n    edges.sort((a, b) => {\n        return b[0] - a[0];\n    });\n    for (let i = 0; i < edges.length; i++) {\n        let targetVertexIndex = edges[i][1][1];\n        if (!verStatus[targetVertexIndex]) {\n            verStatus[targetVertexIndex] = true;\n            ans.push({\n                field: vertices[targetVertexIndex],\n                corValue: edges[i][0]\n            });\n        }\n    }\n    return ans.slice(0, topK ? topK : ans.length);\n}\n","import { KNN } from \"../../ml/classification/knn\";\nexport class GroupIntention extends KNN {\n    getTargetValuePercent(targets, targetRecord, neighbors) {\n        let ans = [];\n        targets.forEach((target, index) => {\n            let sameCount = 0;\n            neighbors.forEach(nei => {\n                if (nei[target] === targetRecord[target]) {\n                    sameCount++;\n                }\n            });\n            ans.push(sameCount / neighbors.length);\n        });\n        return ans;\n    }\n    getSignificance(features, targets) {\n        let ans = 0;\n        this.normalizedDataSource.forEach(record => {\n            let neighbors = this.getNeighbors(record, features);\n            let percents = this.getTargetValuePercent(targets, record, neighbors);\n            let sig = 0;\n            percents.forEach(per => {\n                sig += per;\n            });\n            sig /= percents.length;\n            ans += sig;\n        });\n        ans /= this.normalizedDataSource.length;\n        return ans;\n    }\n}\n","import { getMeaSetsBasedOnClusterGroups, getDimClusterGroups } from './subspaces';\nimport { CrammersVThreshold, PearsonCorrelation } from './config';\nimport { Outier } from '../ml/index';\nimport { getCombination, linearMapPositive } from '../statistics/index';\nimport { CHANNEL } from '../constant';\nimport { entropy, normalize } from '../statistics/index';\nimport aggregate from 'cube-core';\nimport { oneDLinearRegression } from '../statistics/index';\nimport { GroupIntention } from \"./intention/groups\";\nconst SPLITER = '=;=';\nfunction crossGroups(dimensionGroups, measureGroups) {\n    let viewSpaces = [];\n    for (let dimensions of dimensionGroups) {\n        for (let measures of measureGroups) {\n            viewSpaces.push({\n                dimensions,\n                measures\n            });\n        }\n    }\n    return viewSpaces;\n}\nfunction getDimSetsFromClusterGroups(groups) {\n    let dimSets = [];\n    for (let group of groups) {\n        let combineDimSet = getCombination(group, 1, CHANNEL.maxDimensionNumber);\n        dimSets.push(...combineDimSet);\n    }\n    return dimSets;\n}\nfunction getCombinationFromClusterGroups(groups, limitSize = CHANNEL.maxDimensionNumber) {\n    let fieldSets = [];\n    for (let group of groups) {\n        let combineFieldSet = getCombination(group, 1, limitSize);\n        fieldSets.push(...combineFieldSet);\n    }\n    return fieldSets;\n}\nexport const getGeneralIntentionSpace = async function (aggData, dimensions, measures) {\n    let score = 0;\n    let significance = 0;\n    for (let mea of measures) {\n        let fL = aggData.map(r => r[mea]);\n        let pL = normalize(linearMapPositive(fL));\n        let value = entropy(pL);\n        score += value;\n        significance += value / Math.log2(fL.length);\n    }\n    score /= measures.length;\n    significance /= measures.length;\n    significance = 1 - significance;\n    return {\n        dimensions,\n        measures,\n        type: 'default_general',\n        score,\n        impurity: score,\n        significance,\n        order: 'asc'\n    };\n};\nexport const getOutlierIntentionSpace = async function getOutlierIntentionSpace(aggData, dimensions, measures) {\n    let iForest = new Outier.IsolationForest([], measures, aggData);\n    iForest.buildIsolationForest();\n    let scoreList = iForest.estimateOutierScore();\n    let maxIndex = 0;\n    let score = 0;\n    for (let i = 0; i < scoreList.length; i++) {\n        if (scoreList[i] > score) {\n            score = scoreList[i];\n            maxIndex = i;\n        }\n    }\n    let des = {};\n    dimensions.concat(measures).forEach(mea => { des[mea] = aggData[maxIndex][mea]; });\n    return {\n        dimensions,\n        measures,\n        score,\n        significance: score,\n        order: 'desc',\n        description: des\n    };\n};\nexport const getTrendIntentionSpace = async function (aggData, dimensions, measures) {\n    if (dimensions.length !== 1)\n        return null;\n    let orderedData = [...aggData];\n    orderedData.sort((a, b) => {\n        if (a[dimensions[0]] > b[dimensions[0]])\n            return 1;\n        if (a[dimensions[0]] === b[dimensions[0]])\n            return 0;\n        if (a[dimensions[0]] < b[dimensions[0]])\n            return -1;\n    });\n    let score = 0;\n    for (let mea of measures) {\n        let linearModel = new oneDLinearRegression(orderedData, dimensions[0], mea);\n        linearModel.normalizeDimensions(dimensions);\n        score += linearModel.significance();\n    }\n    score /= measures.length;\n    return {\n        dimensions,\n        measures,\n        score,\n        significance: score,\n        order: 'desc'\n    };\n};\nexport const getGroupIntentionSpace = async function (aggData, dimensions, measures) {\n    if (dimensions.length < 2)\n        return null;\n    let score = 0;\n    let groupIntention = new GroupIntention({\n        dataSource: aggData,\n        dimensions,\n        measures,\n        K: 8\n    });\n    score = groupIntention.getSignificance(measures.concat(dimensions.slice(0, -1)), dimensions.slice(-1));\n    return {\n        dimensions,\n        measures,\n        score,\n        significance: score,\n        order: 'desc'\n    };\n};\n// export const IntentionWorkerCollection: Map<string, IntentionWorker> = new Map();\nexport var DefaultIWorker;\n(function (DefaultIWorker) {\n    DefaultIWorker[\"outlier\"] = \"default_outlier\";\n    DefaultIWorker[\"cluster\"] = \"default_group\";\n    DefaultIWorker[\"trend\"] = \"default_trend\";\n})(DefaultIWorker || (DefaultIWorker = {}));\nexport class IntentionWorkerCollection {\n    constructor() {\n        this.workers = new Map();\n    }\n    register(name, iWorker) {\n        if (this.workers.has(name)) {\n            throw new Error(`There has been a worker named: ${name} already.`);\n        }\n        else {\n            this.workers.set(name, [true, iWorker]);\n        }\n    }\n    enable(name, status) {\n        if (!this.workers.has(name)) {\n            throw new Error(`Intention Worker \"${name}\" does not exist.`);\n        }\n        else {\n            let iWorkerWithStatus = this.workers.get(name);\n            iWorkerWithStatus[0] = status;\n            this.workers.set(name, iWorkerWithStatus);\n        }\n    }\n    each(func) {\n        for (let [name, iWorker] of this.workers) {\n            if (iWorker[0]) {\n                func(iWorker[1], name);\n            }\n        }\n    }\n    static init(props = { withDefaultIWorkers: true }) {\n        const { withDefaultIWorkers = true } = props;\n        if (!IntentionWorkerCollection.colletion) {\n            IntentionWorkerCollection.colletion = new IntentionWorkerCollection();\n            if (withDefaultIWorkers) {\n                IntentionWorkerCollection.colletion.register(DefaultIWorker.outlier, getOutlierIntentionSpace);\n                IntentionWorkerCollection.colletion.register(DefaultIWorker.cluster, getGroupIntentionSpace);\n                IntentionWorkerCollection.colletion.register(DefaultIWorker.trend, getTrendIntentionSpace);\n            }\n        }\n        for (let key in DefaultIWorker) {\n            IntentionWorkerCollection.colletion.enable(DefaultIWorker[key], withDefaultIWorkers);\n        }\n        return IntentionWorkerCollection.colletion;\n    }\n}\nexport async function getIntentionSpaces(cubePool, viewSpaces, Collection) {\n    let ansSpace = [];\n    for (let space of viewSpaces) {\n        const { dimensions, measures } = space;\n        let key = dimensions.join(SPLITER);\n        if (cubePool.has(key)) {\n            let aggData = cubePool.get(key);\n            let generalSpace = await getGeneralIntentionSpace(aggData, dimensions, measures);\n            Collection.each(async (iWorker, name) => {\n                let iSpace = await iWorker(aggData, dimensions, measures);\n                if (iSpace !== null) {\n                    iSpace.type = name;\n                    iSpace.impurity = generalSpace.impurity;\n                    ansSpace.push(iSpace);\n                }\n            });\n        }\n    }\n    return ansSpace;\n}\nexport async function getVisSpaces(props) {\n    const { dataSource, dimensions, measures, collection, dimension_correlation_threshold = CrammersVThreshold, measure_correlation_threshold = PearsonCorrelation.strong, max_dimension_num_in_view = 3, max_measure_num_in_view = 3, } = props;\n    // 1. get dimension cluster groups.\n    // 2. get measure cluster groups.\n    // 3. get dimension groups * measure groups = subspaces + aggregate\n    // 4. calculate each subspace intention score (entropy, outlier, trend for temporal & oridinal field)\n    // 5. filter each intend subspaces with threadshold\n    // 6.manage those spaces / order them.\n    let visableDimensions = dimensions; //.filter(dim => !isFieldUnique(dataSource, dim));\n    let dimensionGroups = getDimClusterGroups(dataSource, visableDimensions, dimension_correlation_threshold);\n    // let dimensionSets = getDimSetsFromClusterGroups(dimensionGroups);\n    let dimensionSets = getCombinationFromClusterGroups(dimensionGroups, max_dimension_num_in_view);\n    let measureGroups = getMeaSetsBasedOnClusterGroups(dataSource, measures, measure_correlation_threshold);\n    let measureSets = getCombinationFromClusterGroups(measureGroups, max_measure_num_in_view);\n    let viewSpaces = crossGroups(dimensionSets, measureSets);\n    let cubePool = new Map();\n    // for (let group of dimensionGroups) {\n    // todo: similar cuboids computation using cube-core\n    let t0 = new Date().getTime();\n    for (let group of dimensionSets) {\n        let key = group.join(SPLITER);\n        let aggData = aggregate({\n            dataSource,\n            dimensions: group,\n            measures,\n            asFields: measures,\n            operator: 'sum'\n        });\n        cubePool.set(key, aggData);\n    }\n    let t1 = new Date().getTime();\n    console.log('cube cost', t1 - t0);\n    cubePool.set('*', dataSource);\n    const usedCollection = collection || IntentionWorkerCollection.init();\n    ;\n    // usedCollection.enable(DefaultIWorker.cluster, false);\n    let ansSpace = await getIntentionSpaces(cubePool, viewSpaces, usedCollection);\n    return ansSpace;\n}\n","/**\n * \n * @param {task} task is a function \n */\nexport function timer (task) {\n  return function (e) {\n    let startTime = new Date().getTime();\n    try {\n      task(e);\n    } finally {\n      let cost = new Date().getTime() - startTime;\n      console.log(`Task [${task.name}] cost ${cost} ms.`)\n    }\n  }\n}","/* eslint no-restricted-globals: 0 */\nimport { getVisSpaces } from 'visual-insights/build/esm/insights/dev';\nimport { timer } from './timer';\n\nconst generateDashBoard = async (e) => {\n  const { dataSource, dimensions, measures } = e.data;\n  try {\n    let ansSpace = await getVisSpaces({ dataSource, dimensions, measures });\n    ansSpace.sort((a, b) => (a.impurity / a.significance) - (b.impurity / b.significance));\n    self.postMessage({\n      success: true,\n      data: ansSpace\n    })\n  } catch (error) {\n    self.postMessage({\n      success: false,\n      message: error\n    })\n  }\n}\n\nself.addEventListener('message', timer(generateDashBoard), false);"],"sourceRoot":""}